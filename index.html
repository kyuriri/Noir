<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.5);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.5);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px;
      overflow-y: auto;
      display: flex;
      /* <-- 加上这个 */
      flex-direction: column;
      /* <-- 还有这个 */
      contain: content;
      contain: content;
      /* <-- 哼，就是这句救命神药！ */
    }



    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      width: 75px;
      /* <--- 就是这里，我把它加宽了 */
      height: 90px;
      /* <--- 高度也顺便调整一下 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      padding: 5px;
      box-sizing: border-box;
      margin: 0;
    }

    .app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 2px;
      /* <-- 哼，就是这里，把5px改成2px，让图标和文字的距离拉近一点 */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      font-size: 0.75rem;
      /* 文本也相应缩小 */
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 10px;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: grid;
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      width: 160px;
      height: 160px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      /* 哼，给你加个阴影，看起来才像样 */
      transform: rotate(-0deg);
      /* 稍微歪一点，显得随意 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      /* 防止拖动时选中图片 */
      z-index: 50;
    }

    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      /* top, left, right 都被我删了，哼，现在它完全听JS的指挥 */

      /* 这行可以留着，虽然你已经不让它拖了 */
      z-index: 50;
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 85%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-end;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    .typing-indicator {
      padding: 10px 15px;
      color: var(--text-color-light);
      font-style: italic;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 让它和AI气泡一样靠左 */
      margin-left: 50px;
      /* 和AI气泡对齐 */
    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }

    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      width: 335px;
      height: 170px;
      border-radius: 18px;
      /* 这就是圆角方形的关键 */
      background-color: rgba(255, 255, 255, 0.5);
      /* 加个底色，免得图片透明时不好看 */

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      /* 朝另一个方向歪 */
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      /* 比爱心高一层 */
      overflow: hidden;
      /* 防止图片溢出圆角 */
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        /* 确保在矮屏幕上不会超出 */

        /* 这就是你想要的“边框”，哼 */
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        /* 圆角大一点才像样 */
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        /* 给你加个高级点的阴影 */

        flex-shrink: 0;
        /* 确保它在 flex 布局里不会被压扁 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      width: 340px;
      height: 120px;
      border-radius: 6px;
      /* 稍微硬朗一点的圆角 */
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      /* 一个淡淡的底色 */
      display: flex;
      /* 左右布局 */
      padding: 0;
      border: none;
      overflow: visible;
      /* 允许唱片溢出 */
      position: relative;
      /* 为了定位唱片 */
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */
    }

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 33.3333%;
      /* <-- 哼，给我站好队！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      width: 165px;
      /* 尺寸和原来保持一致 */
      height: 165px;
      border-radius: 22px;

      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* 哼，这才叫设计。*/

    /* 1. 这是头像的“容器”，负责提供一个相对定位的舞台 */
    .avatar-wrapper {
      position: relative;
      /* 关键！让里面的头像和框都能相对于它定位 */
      flex-shrink: 0;
      /* 防止在flex布局里被压扁，这是基本素养 */
      width: 40px;
      /* 默认尺寸，和你的聊天头像一样 */
      height: 40px;
      margin: 0 10px;
    }

    /* 2. 这是头像框本体，它会像个幽灵一样覆盖在头像上 */
    .avatar-frame {
      position: absolute;
      /* 哼，再给你放大一点，最后一次了！ */
      top: -6px;
      /* <-- 再往外1像素 */
      bottom: -9px;
      /* <-- 再往外1像素 */
      left: -3px;
      /* <-- 再往外1像素 */
      right: -8px;
      /* <-- 再往外1像素，保持右偏 */

      background-size: contain;
      /* 保证你的框框图片完整显示，不变形 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 让它变成透明的，不会挡住你点击头像 */
    }

    /* 3. 针对不同大小的头像，容器也要跟着变，这才叫智能 */
    .character-item .avatar-wrapper {
      width: 45px;
      height: 45px;
    }

    .user-profile-screen .avatar-wrapper,
    .character-edit-screen .avatar-wrapper {
      width: 100px;
      height: 100px;
    }

    /* 4. 头像本身现在要100%填满容器，给我听话！*/
    .avatar-wrapper .avatar,
    .avatar-wrapper .avatar-preview {
      width: 100%;
      height: 100%;
    }

    /* ▼▼▼ 把这段样式，粘贴到你 <style> 标签里的任何地方 ▼▼▼ */
    #noir-credits-banner {
      margin: 15px 20px 20px;
      padding: 15px;
      background: var(--surface-bg);
      border-radius: 16px;
      border: 1px solid var(--border-color);
      box-shadow: var(--soft-shadow);
      display: flex;
      align-items: center;
      gap: 15px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    #noir-credits-banner:active {
      transform: scale(0.98);
      box-shadow: none;
    }

    #noir-credits-banner img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: 2px solid var(--primary-color);
      flex-shrink: 0;
    }

    .credits-text {
      flex-grow: 1;
    }

    .credits-title {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 4px;
    }

    .credits-authors {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    /* ▲▲▲ 粘贴到这里结束 ▲▲▲ */
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">
      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">

            <div class="app-page" id="app-page-1">
              <div id="home-clock-container">
                <div id="home-time">11:31</div>
                <div id="home-date">8月29日 星期五</div>
                <div id="noir-author-mark"></div>
              </div>

              <div id="music-widget"
                style="  display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50;; padding: 0px;bottom: auto;">
                <div id="music-widget-card">
                  <div id="widget-cover-art"></div>

                  <div class="widget-content-overlay">
                    <div class="widget-info">
                      <div id="widget-title">暂无音乐</div>
                      <div id="widget-artist">请在动态或聊天中播放</div>
                    </div>
                    <div id="widget-controls">
                      <button id="widget-prev-btn">⏮</button>
                      <button id="widget-play-pause-btn">▶</button>
                      <button id="widget-next-btn">⏭</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>

              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
          <span class="page-dot" data-page="2"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>



      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" id="world-book-list-container">
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">
          <button id="player-prev-btn">⏮</button>
          <button id="player-play-pause-btn">▶</button>
          <button id="player-next-btn">⏭</button>
        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>

<script>
  const _0x2fd2f7 = _0x1b5f; function _0x1b5f(_0x31dc88, _0x2431c3) { const _0xa66cec = _0xa66c(); return _0x1b5f = function (_0x1b5f05, _0x207db4) { _0x1b5f05 = _0x1b5f05 - 0x10f; let _0x45311b = _0xa66cec[_0x1b5f05]; return _0x45311b; }, _0x1b5f(_0x31dc88, _0x2431c3); } (function (_0x1a3323, _0x2900c9) { const _0x19558b = _0x1b5f, _0x524346 = _0x1a3323(); while (!![]) { try { const _0x52d3ac = parseInt(_0x19558b(0x12a)) / 0x1 + parseInt(_0x19558b(0x879)) / 0x2 + -parseInt(_0x19558b(0x8ac)) / 0x3 + parseInt(_0x19558b(0x365)) / 0x4 * (-parseInt(_0x19558b(0x339)) / 0x5) + -parseInt(_0x19558b(0x9fb)) / 0x6 * (-parseInt(_0x19558b(0x269)) / 0x7) + parseInt(_0x19558b(0x85a)) / 0x8 + -parseInt(_0x19558b(0x2e1)) / 0x9 * (parseInt(_0x19558b(0x495)) / 0xa); if (_0x52d3ac === _0x2900c9) break; else _0x524346['push'](_0x524346['shift']()); } catch (_0x103a70) { _0x524346['push'](_0x524346['shift']()); } } }(_0xa66c, 0x5ae4c)); function _0x3a462a(_0x47ce33 = new Date()) { const _0x50a5cc = _0x1b5f, _0x2a65ab = _0x47ce33[_0x50a5cc(0x613)](), _0x82df73 = String(_0x47ce33[_0x50a5cc(0x5ac)]() + 0x1)[_0x50a5cc(0x16e)](0x2, '0'), _0x4fa90f = String(_0x47ce33['getDate']())['padStart'](0x2, '0'); return _0x2a65ab + '-' + _0x82df73 + '-' + _0x4fa90f; } function _0xa66c() { const _0x7d796 = ['accounting-title', 'is-today', '我错了', 'circle_', '别这样嘛我哭哭', 'KiyAd', '小组件背景已更换！', '暂无音乐', '</svg>', '\x20(ID:\x20', 'transfer-recipient-group', '保存角色失败:', 'context-lines-per-chat', 'length', 'iNMhC', '正在处理...', 'music-library-item', '创建新用户', 'themeLightness', 'eNQcg', 'lastIndexOf', '为你骄傲', 'friend-circle-edit-title', 'chat_', 'world-book-edit-name', 'clear-feed-button', 'bottom', '编辑条目', 'MFjMr', 'TjQSV', 'QVOrW', '[AI分享了音乐：', 'alignItems', 'back-to-snoop-list-from-phone', 'height', 'opacity', '成功向好友圈\x20\x22', '\x20\x20-\x20用户ID:\x20', 'entries', '\x0a-\x20当前精确时间:\x20', 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg', 'quote-preview-text', '一个人可怜吃饭', '<p\x20class=\x22music-post-thought\x22>', '{userName}', '未知搜索', 'wants', 'member-selection-item', 'nTheF', 'OYHYB', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>', 'gQIPq', '15px', 'DgIlo', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', 'emOQZ', '图标处理失败:\x20', 'accounting', 'UOgDq', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'music-widget-card', 'edit-message-modal', 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg', 'TPlTU', 'XVfqt', 'sprite-resize-handle', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'div', 'snoop-home-date', '\x0a\x0a##\x20世界书条目:\x20', '正在执行净化程序...', '71%', 'activeFriendCircleId', 'scrollTop', 'RXtvj', 'substring', '#bubble-preview-user', '加载立绘失败:', 'writeText', '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>AI返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>', 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg', 'EbPJA', 'chat', 'galgame-text', 'BLnNT', 'JxdqK', 'gBnwY', '.music-post-song-card', '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', '字体应用失败:', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', 'modal-root', 'Oivwz', 'diaryList', '净化完成！总共迁移了\x20', '检测到已保存的字体，正在应用...', 'appIconPosition_app-world-book', 'random', 'today-todo-list', 'nJyNI', 'characters', 'cardState', 'recipientId', 'event-type-todo', '正在整理…', 'likes', '”已创建！', 'dgtOT', 'save-api-settings-button', 'dock', 'textContent', 'iVKuK', '保存失败:\x20', 'anthropic', 'KQZwd', 'EEDFD', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。', 'dialogue', 'group-chat-create-screen', '对方正在输入...', 'type', '的第一次互动。\x0a', 'sender', 'klmft', 'backgroundImage', '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'VNMxh', 'message-image-content', ',\x20ID:\x20', 'get', 'ErmHk', '生成动态失败:', 'xJzis', '文件格式不正确，不是一个有效的备份文件。', 'border-bottom:\x201px\x20solid\x20var(--border-color);', '\x0a\x0a#\x20', 'LfqUy', 'jCagY', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', '713241dVOIyk', 'undefined', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', 'fWPpO', 'image_url', 'GOhaE', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22noir-credits-banner\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22https://sharkpan.xyz/f/VE3JSY/1140f8e7f18cf1dc4bc79dde4be06da6.jpg\x22\x20alt=\x22Noir\x20Icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22credits-text\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22credits-title\x22>核心代码\x20&\x20UI\x20设计</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22credits-authors\x22>Noir\x20&amp;\x20糯糯糯糯五（小红书）</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x20\x0a#\x20当前情景\x0a', 'CAzmz', 'dIliQ', 'galgame-sprite', ')，已跳过。这不应该发生，数据库可能已损坏。', '生活服务', 'activeQuote', '字体保存失败了，哼:\x20', 'app-wallpaper', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', 'newAvatar', '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', '\x0a你是一个严格的JSON生成引擎。\x0a你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。\x0a你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。\x0a严禁包含任何解释、注释、道歉、或Markdown代码块标记\x20```json。\x0a直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。\x0a', 'message', 'delete-friend-circle-button', 'url(\x27', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', '总结失败:', 'eRmtP', '昨天\x20', '15px\x2020px', '\x22\x20class=\x22post-image\x22></div>', 'removeEventListener', 'border', 'NPdqN', 'TJfoZ', '<div\x20class=\x22loader-spinner\x22></div><span>', 'AlDqQ', 'sprite-confirm-button', '净化完成！应用即将重启。', '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'diary-write-button', '哼，就按你说的办好了。', 'JzYHg', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', 'live-preview-style', '错误:\x20', 'qyKqW', '在“一起听”邀请中，净化封面失败:', 'snoopPhone', 'characterEdit', 'badge-input', 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【', '搜索失败:\x20', '#snoop-app-view-container\x20.snoop-app-content', 'friend-circle-list-container', '\x20账单', 'enEtr', '日记已删除。', 'OjMxW', '.message-container', '\x22>\x20', 'OLTRD', 'GUuqq', 'BMJZg', 'UiECE', 'widgetBgImage', 'padStart', '-\x20**状态提示**:\x20你们今天刚聊过，请自然地衔接对话。\x0a', 'PUHPj', '刷新了\x20', 'fetch-models-button', 'IlKRH', 'noir_data_migration_v1_complete', '</span><span\x20class=\x22amount\x22>总计:\x20', 'eXQxy', 'worldBooks', 'clipboard', '-\x20**状态提示**:\x20你和Ta已经好几天没联系了，应该用全新的问候开启对话。\x0a', 'uDXOz', 'QZwRR', 'groupSettings', 'plDgP', '\x0a\x20\x20\x20\x20绑定用户:\x20', 'onsuccess', 'authorId', 'group-options-modal', '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>', 'PYxEW', 'expense-item', 'parentElement', 'lviSR', 'edit-delete-char-button', 'parse', 'back-to-meeting-list', '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20', 'kWNYU', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'eCjMO', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', '小时前聊过，可以适当问候，不要直接继续之前的话题。', 'isActive', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>', 'userId', '总得说点什么吧？', 'Claude\x20API\x20错误:\x20', 'KIIQy', '选择聊天', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', '被你撩到', 'long', 'response', 'yDhng', 'YxMOE', 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg', '未知歌曲', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'Mwufv', 'narrator', 'unified-audio-player', 'api-provider', 'audio', 'https://api.vkeys.cn/v2/music/', 'fIIxq', 'WZfci', 'cluyk', 'has', 'data:', 'data:\x20', 'music-post', '已经删掉了。', 'chat-transfer-button', 'nqUQV', '\x0a\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '34%', 'active', 'originalExpenses', 'modal-cancel', '\x0a\x20\x20\x20\x20姓名:\x20', 'BdhcJ', '---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', '未分类', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', '-\x20**状态提示**:\x20你已经有\x20', 'calendarEvents', 'jHfGL', 'GJSDU', 'add-event-backdrop', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'wallpaper_main', '---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---', 'User\x20cancelled', 'save-char-button', '\x20张旧的动态图片。', 'lyrics', 'rzZgo', '暗夜紫晶', 'calendar', '图片预览失败:\x20', '名字不能为空！', 'oXoEC', 'qPIEG', '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'KfbmD', 'eIHBS', 'lioJk', '该角色', 'image/jpeg', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', 'displayedMessageCount', 'chat-sticker-panel', 'amyhM', '---\x20好友圈净化仪式完成\x20---', '</pre>', 'diary-send-button', 'home-screen', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>', 'modal-mask', 'exp_', 'bHoWS', '.snoop-chat-item', 'snoop-char-name-header', 'expense-amount', 'SDjYx', 'zIxxS', '角色“', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'kRqiy', '点击选择\x20.jpg\x20或\x20.png', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', 'CXPfF', '服务器错误:\x20', 'transaction', 'mhNsn', 'default', 'form-button\x20load-more-btn', '\x0a\x20\x20\x20\x20人设:\x20', 'padding', 'NOGQP', 'fdlUE', 'group-world-book-checkboxes', 'setMonth', 'XbSgc', '\x20记录)\x0a', 'accepted', 'findIndex', 'header-actions', 'add-friend-circle-button', 'OuVss', 'LSQXL', 'music-input-artist', 'app-meeting', 'XYSEY', 'group-avatar-input', '#\x20发生错误：\x0a', 'indexOf', '已选择\x20', 'chat-screen', '[AI向\x20', 'isFromLibrary', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', 'gnvxc', 'faxwL', 'Wtgvm', 'uzCQR', 'npuwm', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', '复制失败了，哼。', '世界书条目已保存！', 'aFiEy', 'post_user_', 'bPMht', 'wwfCy', 'tab-view-ledger', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', 'reduce', 'vrrJA', 'upload-widget-bg-button', 'import-char-input', 'diary-get-reply-button', '正在打包“', 'Unknown', '清空聊天记录失败。', 'maaZG', '视奸内容解析失败:', 'gallery', 'upload-music-button', 'JSON\x20解析失败!\x20错误原因:', '.char-info-wrapper', '保存徽章状态失败', 'api-endpoint', 'input_', 'umeEy', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'BZBrv', 'author', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>', 'umKUP', '找不到角色信息。', 'objectStore', 'pause', 'Hglnf', 'DJjop', 'rVQSk', 'open', 'date', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', '音乐数据升级完成，迁移了\x20', '\x0a\x20\x20人设:\x20', '你是一个乐于助人的助手。', 'FeTCF', '和其他人的聊天', 'novel', 'catch', 'slice', 'ZXMSU', 'filter', 'feed-loader', '壁纸已更换！', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '-\x20你在“', 'characterId', 'userProfileList', 'zdsTK', '”买过：“', '上传失败了，笨蛋！\x20', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', 'nbnuJ', 'kVqoQ', 'area', 'chat_image_', 'snoop_cache', 'POST', 'CcFzO', 'role', 'gqxFG', 'group_bg_', '”已成功导入！', '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', 'private', 'EdmrC', 'indexedDBData', '你还没保存这个角色呢，导什么导？', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'RHhvS', 'high', 'SHvFI', '7252xxtNgY', 'flex', 'scrollIntoView', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'tag', 'UmvwX', 'SpTMf', '#ffcc66', '已恢复默认。', 'ofTIy', 'ZRVWF', 'snoop_', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', 'TfFgz', '这本日记本来就是空的，你还想清空什么？', 'offline-scene-view', '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a', 'QMaIR', '歌曲ID', 'char-edit-offline-bg-preview', 'uhozT', 'qoIwP', 'medium', 'organize-bill-button', '确定要清空好友圈“', '\x20张旧的音乐封面。', '\x0a-\x20**对话状态**:\x20群里在', '/v1beta/models/', 'Failed\x20to\x20plan\x20group\x20replies:', 'sppIB', 'DusTu', 'stretch', '确定要彻底清空【', 'QvfmA', '最近没有互动记录。', '人情红包', 'iFqaY', 'quote-preview-sender', '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'save-user-profile-button', 'copy-summary-button', 'mLoiS', 'yBhgj', 'setItem', 'isAnimatingDiary', 'show-chat-view', 'CWKbd', 'Spzxj', 'YIcsE', 'IWOdW', '备忘录', 'MZTYc', '<div', 'eventDate', '.page-dot', '\x0a---\x0a##\x20最近的朋友圈动态\x0a', '净化音乐封面时出错，真是的。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'calendar-screen', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', '正在解析音乐灵魂...', '请看是我', 'createObjectStore', '检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。', 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg', 'mouseleave', 'userAvatarFrameUrl', 'song_', 'hard-reset-button', 'backgroundPosition', 'faaFR', 'editing-user-id', 'LNUbE', 'svg', 'lt-ui-lyrics-container', 'XKaxR', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', 'Noir\x27s\x20Fix:\x20已用AI返回的连续对话更新聊天记录。', 'WoEii', '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a', 'normal', '【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！', 'friendCircleEdit', 'NoirCustomFont', 'option', 'back-to-home-from-music-library', 'wSKTt', 'onloadend', 'version', 'snoop-phone-top-nav', 'chat-message-input', 'diary-write-modal', 'saWxK', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', '星期五', 'calendar-grid', 'ZNqNe', 'YJEut', 'YGMDs', 'gpzmg', 'galgame-sprite-controls', 'appIconPosition_app-settings', 'input', 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif', '未知联系人', '新建条目', 'VkAfV', ']:\x20', 'diary-page', 'cancel-music-input', 'ppLTm', '<span\x20class=\x22', '正在检查好友圈数据...', 'ZTBic', 'sticker', '</div>\x0a\x20\x20\x20\x20', '未知商品', 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg', '未知角色', '36909nlrIDU', '”的笔记，内容是：“', '”，但没找到人)', '默认米白', 'OHSaf', 'vJfTd', '（对话结束）', '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a', '\x0a\x20\x20相关记忆:\x0a', 'emotion', '星期四', 'IeNyG', 'kind', 'friend-circle-list-screen', '确定要删除这个条目吗？此操作不可撤销。', 'group-settings-screen', 'feed', 'user-post-attachment-preview', 'todo-date-title', 'moZsi', 'WlnTi', '\x20个模型。', '--widget-cover-image', 'copy', 'snoop-app-view-container', 'event_', 'oZlnw', '导入角色卡失败:', 'musicPlaylist', 'back-to-char-select-from-group-create', 'short', 'item_name', 'YfKQW', 'numeric', 'lt-ui-cover-art', 'KSfpr', 'important', '找不到要清空的聊天记录。', 'HRQtk', 'diary-modal-save', 'custom-icon-list-container', '.typing-indicator', 'sticker-item', 'WwCsP', '点击选择\x20info.txt', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22', 'flatMap', 'GboIi', 'royEo', 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg', 'wIRZw', 'appIconPosition_app-user-profiles', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', 'worldBook', '确定要清空群聊\x22', '我是垃圾', 'app-music-library', '最近没有动态记录。', '[表情]', 'eUQDo', 'getSelection', '”已存入圣殿。', 're-record-button', 'DKZIB', 'appendChild', 'AUvnK', '💜\x20', 'User', 'url(', '群聊“', 'altar-slot-lyrics', 'OzdfE', 'nNhqt', 'BQHuv', 'UzYjo', 'tzscq', '\x0a#\x20关于你\x20(', 'YqsYz', 'NWpDC', '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', 'HLzyr', 'round', 'upload-card-button', 'Ktorm', '\x20/\x20', '...', 'conversationHistory', '483520DcnpNE', 'revokeObjectURL', 'Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', 'NeGJt', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', 'delete-world-book-button', 'WmpFK', '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>', 'iGxuz', 'getHours', 'is-playing', 'is-exiting-left', 'hkYKk', 'touches', 'EmZim', '群聊「', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', 'QRLHA', 'diary-next-button', '错误：第一个好友圈\x20\x22', 'user', 'input[type=\x22checkbox\x22]:checked', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'isOffline', '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a5.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', 'lBJmB', 'pYjZA', 'oESIu', 'MMOxY', 'Noir_Backup_', '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a', 'Creating\x20object\x20store:\x20', 'daily-expenses-list', '100%', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', 'qVWsR', 'VIKFw', 'XmCat', 'paddingBottom', 'put', 'Escape', '群聊\x20(', 'var(--text-color)', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>', '28jtvTtm', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', '<img\x20id=\x22', 'then', 'JAebT', 'MzyiR', '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', 'group_avatar_', 'modal-ok', 'reset-card-button-2', 'dYbSf', '.listen-together-accept-btn', 'kkVGa', 'AMiAs', 'music', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何设定，点击右上角“+”来创建第一个吧。</p>', 'events', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'SOvxH', 'toDataURL', 'app-chat', 'back-to-chat-from-group-settings', 'galgame-speaker', '我很脆弱', 'charSelect', 'location_name', '20%', 'FzTIN', 'AI整理失败了，哼:\x20', 'userProfile', '.music-post-play-icon,\x20.music-share-play-icon', 'KoVwg', 'customStickers', 'listen-together-invite', 'TbVcT', 'TWNgI', 'upload-card-button-2', '吃你的饭', '.app-icon', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>', 'keys', 'CFsph', 'OsLgr', 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', 'reverse', 'QGkMT', '已经生成了今日账单！想看就去“看账本”标签页。', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', 'XfUmg', 'Hxnbg', '生成日记失败:\x20', 'badgeState', '处理\x20', '在准备API数据时，从IndexedDB读取图片失败:', 'feed-bg-input', '#char-edit-avatar-preview\x20+\x20.avatar-frame', 'set-active-user-button', '勉强但是好吧', 'input:checked', 'QOSJP', 'max', 'toggle', 'lt-ui-close-btn', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'Gemini\x20API\x20Error:\x20', 'review', '群聊音乐搜索失败\x20(', 'api-key', 'XJLud', 'ended', 'snoop-app-icon', '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。', '保存壁纸失败:', '甜蜜地和你聊天', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', 'cSQll', 'tencent', 'NTJkU', 'GhHqG', 'touchend', 'execCommand', 'readwrite', 'ZCYpF', 'vdAcg', '<div\x20class=\x22post-body\x22>', 'coverUrl', '\x0a\x0a#\x20用户资料库\x0a', 'spriteTransform', 'uuBTI', 'QVLib', 'top', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', 'card-image-2', '无法保存聊天记录。', '导入失败了，笨蛋:\x20', 'sqiJr', 'chat-reroll-button', 'transfer-amount-input', '\x0a##\x20世界书条目:\x20', '切换聊天时发生异步错误:', 'remark', 'LxTLO', 'save-custom-stickers-button', '错误：找不到签署契约的地方。', 'TgZDE', 'Detected\x20API\x20provider:\x20', 'backgroundColor', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'musicLibrary', 'gSnbR', 'home', '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'diqOr', 'oywVR', 'dXzBO', '[发送了表情]', '全量导出失败:', 'decode', 'XFKIK', 'back-to-char-select-from-edit', 'Creating\x20object\x20store:\x20music_library', 'map', 'YSOSU', 'rgba(255,255,255,0.2)', 'iLgVw', '的转账', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', 'dWFgT', 'music-library-container', '5px', 'world-book-edit-content', '编辑角色', 'forEach', '[AI发送了表情：', '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a', 'PgouO', 'toLocaleDateString', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', 'ibTkV', '编辑用户', '好友圈\x20', 'QtFgv', 'AI返回的原始文本:', 'Jcjca', 'lPmcT', 'summarize-backdrop', 'xmCGk', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', '导出失败了，哼:\x20', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'confirm-music-input', 'defaultPrevented', 'diaries', 'RAPeU', 'uskdG', 'listen-together-song-list', 'qohke', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', 'group-avatar-preview', 'bruRw', 'music_cover_migrated_', '</span>:\x20', ']。严禁使用列表之外的任何表情名。\x0a', 'files', 'user-profile-edit-title', 'contains', 'save-world-book-button', 'back-to-home-from-snoop-list', 'trim', '</span></div>', 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg', 'diary-list-screen', '条】全新的、高质量的社交动态。\x0a\x0a#\x20好友圈成员信息\x0a', 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', '#\x20任务:\x20生成\x20', '确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。', 'custom-stickers-input', 'currentAbortController', 'toLocaleTimeString', 'dGcaV', '未知地点', 'name', 'pointer', 'izBes', 'white', 'openai', 'FRvtI', 'expanded', 'nXyuR', 'RPqRZ', 'array', 'canplaythrough', 'create-group-chat-button', 'parts', 'is-exiting-right', 'LJCGd', '正在准备图片数据...', 'jUHwk', 'YlVjg', 'readonly', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'main', 'add-world-book-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', 'cTzYx', 'page', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', 'OpenAI\x20API\x20错误:\x20', '内容不能为空！', '无法保存状态，浏览器可能禁用了存储功能。', 'XmCzE', 'DtAmS', '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a', 'CjlsB', '35%', 'sVkym', '卡片\x202\x20已更换！', '59%', '\x22\x20data-id=\x22', 'diary-action-modal-', 'absolute', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', 'localStorageData', 'is-visible', '\x0a#\x20你的个性（节选）\x0a', 'AGobc', 'world-book-item', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'LqTQA', 'char-name-header', '最近的足迹', 'EAdnN', 'CgNrB', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'COPgX', 'dLiyy', 'ilTVr', '正在为你切换新的歌曲...', 'speaker-user', '歌曲名称', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', '.ttf', 'vpusL', '来源：', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', 'countdown-timer', '对不起', 'PCGwB', 'cancel-transfer-button', '.snoop-clear-btn', '喝多了', 'zsChv', 'play', 'hbrUL', '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。', 'CirMA', '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“', 'wallpaper-input', '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20', 'addTestPost', 'QOWsW', 'pnGia', 'json_object', '条目已删除。', 'iMUoP', 'galgame-sprite-adjust-ui', 'ogOjt', 'UPZYY', 'firstChild', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'qWLLh', 'currentDate', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', 'lastTimestamp', 'diaryPressTimer', 'emote', '卡片\x202\x20已移除。', 'chatWallpaper', '哼，不好好写清楚花在哪、花了多少，我怎么记？', '确定要恢复这个角色的默认立绘位置吗？', '交给我吧', 'user-avatar-preview', 'translate(-50%,\x20-100%)', 'NwUKb', 'EAGPC', 'LuxCw', 'getContext', 'IjWUI', 'string', 'sprite-reset-button', 'title', '同步已断开。', '好友圈数据升级完成，迁移了\x20', '29%', 'char-edit-bind-user', ')，启动兼容模式...', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', 'snoop-copy-summary-btn', 'YlKRC', '-\x20**你最后一次活动是在**:\x20', 'cancel', '--primary-hue', '浏览器历史', '1370ZhGRFt', 'zXOvs', 'TUQlc', 'diary-view-screen', 'editing-world-book-id', '\x22\x20src=\x22', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a', '.choice-modal-backdrop', 'event-content-input', 'EKHky', 'ewECs', 'NYUtq', 'quoted-content', 'snoopList', '在所有地方的最后一次互动是在**:\x20', 'goMqC', 'VeamB', 'wallpaper-screen', 'XFFaX', 'activeListenSession', '<br>', 'BwiUH', 'gBIBR', 'json', 'prev-month-btn', 'Jhyrb', 'TsKrj', 'angry', 'group', 'musicUploadAltar', 'WiNEx', 'AI未能返回有效的JSON对象。', 'toFixed', 'quotedMessage', 'info', 'accounting-content-area', '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', '\x20(当前)', '群聊名称不能为空！', 'njvxL', 'QUuGI', '切，加载播放器状态的时候出错了。', 'textShadow', 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg', 'RPLVH', 'nTVxG', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'OwoiR', 'ZvnuH', 'insertBefore', 'imageId', 'categorizedExpenses', '点击选择\x20.lrc', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', 'friend-circle-edit-bind-user', 'all', '-\x20**对话状态提示**:\x20你们已经有\x20', 'wpHIF', 'DAjll', '群聊至少需要2名成员。', 'description', 'SUbax', 'jVOUb', 'XZRTf', 'ALPDK', '你是一个乐于助人的AI助手。', '医疗健康', '用户资料已保存！', '的日记本', 'end', 'CCSyG', 'meetingList', 'hnBqF', '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'chat_image_migrated_', 'clockPosition', 'qIIvk', '大家好像不知道该怎么回复...', 'friendCircleList', 'music-share-card', 'countdown-title', 'XvRsE', 'url', '群聊设置已保存！', 'RTFdW', 'boundUserProfileId', 'char-avatar-frame-url', 'IAqEj', 'TAlUr', 'SOsWI', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a', '?id=', '错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。', 'accounting-screen', 'HRWpl', 'QpSGy', '下载并转换网络封面失败:', '正在翻阅所有档案...', 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg', '无法解析旧的视奸内容来获取时间戳。', 'last_edited', 'miqMp', '-\x20你记得曾和“', 'home-dock', '\x20\x20具体对话如下：\x0a', 'BjzIC', 'exec', 'ZAsDn', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20', 'snoop-temp-style', 'widget-next-btn', '字体已应用！(Font\x20Applied!)', 'jXNsu', 'alt', 'songName', 'bRudN', 'user_', '(想转账给“', 'filled', 'toDateString', 'dgkyi', 'candidates', 'left', 'contact_name', '购物消费', 'eXiwI', 'UHQLw', 'image/', 'PHgZH', 'BeRat', '净化失败了，哼:\x20', 'activeDiaryCharacterId', 'altar-slot-audio', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'DYogk', 'GDaff', '确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。', 'translateX(-50%)', 'preview-item', 'delete', 'chat-view-pane', 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg', 'accountingData', 'value', '来源：[最活跃]', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'badge-image', 'ujRrZ', 'widget_card_2', 'linkedWorldBookIds', '/v1/chat/completions', 'snoop-summary-textarea', 'rPizx', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'gBMUl', 'msGMd', 'FIFZz', ':</span>\x20', 'cover_placeholder_', 'group-bg-preview', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg', 'diwwW', '&quot;', 'OEdHP', 'QHoJi', 'group-chat-member-list', '\x20(分享了歌曲:\x20', 'ErMDV', '歌名和歌手都不能为空！', 'gfXSe', 'character-item', 'egvmK', 'char-edit-offline-bg-input', 'music-input-backdrop', 'refresh-feed-button', '\x20条动态...', 'charAt', 'JSON解析失败\x20(', 'ofPMw', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'PYsOP', 'chat-get-reply-button', 'persona', 'UyERz', 'back-to-home-from-diary-list', 'qWoVg', '薄荷水色', 'chat-messages', 'NxoXc', 'exSmm', '执行音乐封面数据净化...', 'object', 'SeFPg', '[用户发送了表情：', 'timestamp', 'message-action-modal', 'preferences', 'yBdpT', 'diary-prev-button', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'no-action-modal', 'https://sharkpan.xyz/f/Ganul/78iwli.jpg', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>', 'todo-list', '委屈那我歇了', 'qjgiw', '绝对不想', 'XwBDM', 'axzoj', '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', 'bYRnc', 'app-settings', 'add-expense-button', '[DONE]', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>', '批量生成动态失败:\x20', 'activeUserProfileId', 'activeChatId', 'RBJwh', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'EAYoE', 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg', 'pendingPostAttachments', '#f2b7c6', 'msg_', 'avatarFrameUrl', '”...', 'p[data-history-index]', 'songId', 'appIconPosition_app-music-library', '\x0a-\x20人设:\x20', 'ofSuc', 'HGVXj', 'NIWTF', '被萌到', 'snoop-app-refresh-btn', '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1', 'back-to-library-from-altar', '逗你开心', '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'BMGGv', 'KUUHT', 'generativelace.googleapis.com', 'BKMyf', 'back-to-home-from-meeting-list', '#settings-screen\x20.header', 'isFinite', '\x20时出错:', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', 'apply', ']\x20[sticker:', '记一笔', 'export-char-button', 'char-edit-avatar-input', 'vkAcO', 'akbxM', 'XstHi', '好友圈已删除。', 'endsWith', 'fiTcT', 'IGoRN', 'jaUml', 'QPiWH', 'altar-slot-info', 'images', 'calendar-day', 'MddcR', 'cursor', '表情包已保存！正在刷新应用...', 'kYfPN', 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg', 'HaHQX', '还没有我的回复可以重新生成哦。', '加载\x20', 'accountingLedger', 'getMonth', 'gemini', 'jJCWT', 'RBTlR', 'sprite-slider-x', '”，在那里“', 'innerHTML', '\x0a\x0a#\x20用户的动态\x0a', 'EIDKJ', '说了要\x20.ttf\x20文件，你是听不懂吗？', '错误：找不到此好友圈绑定的用户！', 'nyRYs', '加载已保存字体失败:', 'FpsKM', '[用户分享了音乐：', 'card-input', '卡片已移除。', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', 'log', 'QgsJP', '&apos;', '生成失败:\x20', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', 'sShBQ', 'upload-wallpaper-button', 'Failed\x20to\x20read\x20state\x20from\x20localStorage:', 'vjosr', 'ZPkyj', '转给\x20', 'ceil', 'nYhTh', '请先输入\x20API\x20接口地址和密钥。', 'CzOki', '档案已复制到剪贴板！', 'match', '\x22\x20class=\x22music-share-cover\x22>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'wallpaper', '\x0a\x20\x20\x20\x20-\x20世界书[', 'galgame-time', 'back-to-home-from-circle-list', '[用户向\x20', 'SFNUx', '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>', '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22', '28%', 'PazqM', 'AbortError', 'zuaku', 'NGkWc', '兼容模式成功，已将\x20', 'body', 'app-diary', 'music-upload-altar-screen', 'PTXbx', 'nminj', '.listen-together-song', 'diaryView', '正在生成中，请稍候...', 'emoji', 'JSVqk', 'dMBjf', '.remove-attachment-btn', 'NORjs', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '星期日', 'hNgvT', 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg', 'zaXey', 'YPdLZ', 'CAdgB', 'toast', '-\x20[', '#diary-action-reroll', 'back-to-home-from-world-book', 'createElementNS', 'abs', 'zhFYA', 'DCALb', '加载卡片图片失败', 'widget_card', '.bubble-', '刚刚发布了一条动态，内容是：“', 'eventType', 'mWTpx', '啥意思捏', 'diary-entries-container', 'info-file-input', 'getAll', 'summary', '<div\x20class=\x22post-image-container\x22><img\x20id=\x22', 'world-book-editor-title', 'isGenerating', 'objectStoreNames', '星期一', '\x20条新动态。', '.json', 'activeMeetingScriptQueue', 'todo-item-small', 'getDay', 'meetingViewMode', 'sZTSh', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'getFullYear', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'jQUKa', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', '桌面已重置，即将刷新...', '徽章已移除。', 'lvKLb', 'worldBookEditor', 'dFYOr', '\x20\x20\x20\x20-\x20', '创建新角色', 'charId', 'music_cover_', '正在翻阅全部历史记录...', 'userProfiles', 'eJcPY', 'customWallpaper', 'cRrIA', 'appIconPosition_app-wallpaper', '编辑好友圈', '用户操作中断了\x20AI\x20响应。', 'preventDefault', 'JyXkt', '确定要恢复默认字体吗？', 'backgroundSize', 'lazy', 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>', 'add-event-modal-title', 'wtDZQ', 'HkiUe', 'transfer-backdrop', 'fNAJv', 'number', '\x20添加了新的纪念日：', '刷我的卡', 'ogklr', 'lIMlj', 'expense-description', 'system', 'VyRXF', '群名称已更改为\x22', 'appIconPosition_app-accounting', 'readAsDataURL', '位置已重置，正在刷新...', 'RfhYx', 'char-edit-wallpaper-input', '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x20行格式不对，被我无视了。', 'replaceAll', '.no-action-modal', '成功净化并迁移了\x20', '确定要清空\x22', 'NoirCharacterCard', 'HhxKd', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', 'isArray', 'cancel-listen-together', 'uxLMo', 'FMQjQ', 'galgame-date', 'music-player-bar', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', 'back-to-circle-list-from-edit', '新用户\x20', '\x0a#\x20你的日程与纪念日\x20(由\x20', 'REOrU', 'day-dot', 'split', '\x0a\x20\x20近期记忆:\x0a', 'pop', '樱花薄粉', 'is-selected', '\x20到\x20', 'shiftKey', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', 'addEventListener', 'senderId', 'save-group-settings-button', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', 'miFer', 'Assistant', 'AfXOV', '\x0a##\x20', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', '[用户发起了听歌邀请:\x20', '新建好友圈', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'input[name=\x22event-type\x22]:checked', 'SpWWp', 'QfNBu', '保存播放器状态失败，真是没用。', 'tEdLu', '外卖订单', 'pRwGF', '分钟前', 'avatar-frame', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', 'xUReM', 'app-user-profiles', 'CKbMa', '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', '错误：找不到这首作为“信物”的歌。', 'eSmEd', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'background', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', 'GFFGG', 'back-to-home-from-accounting', '（正在构思中...）', 'onupgradeneeded', 'localeCompare', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', 'eQGwq', '<span>--</span><span\x20class=\x22unit\x22>天</span>', 'home-date', 'XGUiH', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', 'OJFct', 'char-edit-wallpaper-preview', '#bubble-preview-ai', 'uPTvG', 'LacRb', 'transfer', 'coverId', 'anthropic.com', 'stopPropagation', 'XXkeU', '好友圈名称不能为空！', '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', 'FgSGY', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'AZdRC', '确定要删除这笔记录吗？', 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg', 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg', 'YLDFC', 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg', 'GRXDn', '\x22\x20已删除。', 'ipBvx', 'uXHCv', 'yxeWQ', 'line', 'char_sprite_', 'character', 'lyric-line-', 'http://www.w3.org/2000/svg', 'abyss', '\x20转账\x20', 'VtOcg', 'chats', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', 'RLwJC', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'Failed\x20to\x20read\x20history\x20for\x20chat\x20', 'chatHistory_', '.widget-info\x20>\x20div', 'char-edit-persona', 'displayUrl', 'meeting-message-input', 'Enter', '确定要删除群聊\x22', 'IvAzU', 'KnLjk', 'target', '无标题笔记', 'qFzLZ', '好友圈已保存！', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'toString', '好委屈但是不能哭', '---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---', '”的补充信息\x0a', 'xDACI', 'https://sharkpan.xyz/f/djyi8/1en214.jpg', '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'user-post-image-button', '当前聊天', '#FFFFFF', 'SqsvK', 'back-to-circle-list-from-feed', 'sSUjw', 'KIBnX', 'tEfmZ', '你的任务是【首次生成】这个应用的内容。', '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“', '群聊\x22', '正在解析备份文件...', '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“', 'choice-import-character', 'OJTyo', 'RbfKv', '一拳打爆', '\x20.app-icon-img,\x20#app-dock-top-right\x20#', 'AnPKi', '\x20添加...', 'vyGXq', 'snoop-character-list-container', '这不是一张有效的Noir角色卡。', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20', 'block', '加载视奸记忆失败\x20(', 'friendCircles', 'endpoint', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>', '加载聊天失败:\x20', 'XstkY', 'char_avatar_', 'input[type=\x22checkbox\x22]', 'jyXwa', 'phApT', '缓存命中:\x20', 'Gqwcw', 'JSvtp', 'avatar-wrapper\x20', 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg', '\x20的私聊', ']\x0a\x0a#\x20角色资料库\x0a', 'BUtPR', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif', '_NoirCard.json', 'Nsoor', '没有找到相关结果。', 'IOMbe', '2023-06-01', '小时前），可以简单问候一下对方现在的状态。\x0a', '0\x201px\x203px\x20rgba(0,0,0,0.6)', 'group-settings-name', 'reset-widget-bg-button', '动态页背景已移除。', '谁啊我吗', 'app-accounting', 'ukaNH', 'keydown', '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', '导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a', 'currentlyPlayingIndex', 'is-entering-from-right', 'XYcXR', 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg', 'post_', 'rAjFk', '”，里面有\x20', '事情好多', '群聊已解散。', 'diary-entry\x20', 'clear', 'AXJfO', 'pUpAY', 'edit-current-circle-button', '吃薯条', '》吗？', 'message-anchor', 'FtGdw', 'borderRadius', 'back-to-home-from-user-list', '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，不许动它！)\x0a```\x0a', '等你消息', '.screen.active', '解析存档失败，正在重置:', 'UHboU', 'veocs', 'save-event-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'canvas', 'char-edit-avatar-preview', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', 'user-post-avatar', 'content', 'CJzkJ', 'getElementById', 'status', '-\x20**当前精确时间**:\x20', 'assistant', 'yANnC', '\x20说：“', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', 'speaker', 'app-music', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>', 'Kdydt', 'paused', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', 'eVjuY', '生成动态时发生错误:\x20', 'IJWhZ', 'data', ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'galgame', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg', '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a', '包含所有图片和音乐的全量数据已成功导出！', 'TSTpM', '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>', 'SiPBy', '”聊过天，关于：“', 'EEdgK', 'YAML翻译机也无法理解这段梦话。', '-\x20你曾经搜索过：“', 'char_', '未知艺术家', 'musicPlayerState', 'music-screen', 'is-entering-from-left', 'QKDiA', 'removeProperty', 'PqtoB', 'right', 'calendar-header-title', 'character-edit-title', 'img', ']\x20[', 'bELgw', '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a', '\x0a\x0a#\x20今日消费流水\x0a', 'mousedown', 'floor', 'add-user-profile-button', '在你那乱七八糟的文本里没找到“歌名”！', '\x22\x20的聊天记录吗？此操作不可撤销。', '<p>格式错误</p>', 'Noir\x27s\x20Temporal\x20Patch:\x20Ledger\x20re-synchronized.', '动态中的音乐搜索失败:', 'timeupdate', 'cos', 'xHPYN', '编辑群成员功能正在开发中...', ',\x20resetting.', 'ahWoN', 'transfer-modal', 'JNHJR', 'cover', 'delete-expense-btn', '最后一次确认，真的要清空所有数据吗？', 'back-to-chat-list', 'application/json', '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'tab-record-expense', '休闲娱乐', 'edit-clear-history-button', 'audio-file-input', 'fragments', 'AI\x20试图创建事件，但找不到有效的用户ID。', 'marginBottom', 'dVBkP', 'VItoa', 'touchcancel', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', 'pKtnP', 'removeItem', 'sEHdY', 'IndexedDB\x20failed\x20to\x20open', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20', 'NHkJb', 'appState', '&alt=sse', 'fqXux', 'user-avatar-frame-url-in-chat', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'T00:00:00', 'home-time', 'scrollHeight', 'gap', '成功获取\x20', 'uSBgT', '-\x20**状态提示**:\x20你和Ta上次聊天是在昨天，注意你发言的时间感。\x0a', '执行好友圈数据净化...', 'Noir_FileSystem', 'srtwB', 'lIGSN', '未命名角色', '请在动态或聊天中播放', '#\x20固定分类列表\x0a[', ']\x20[image]', '确定要永久清空【', 'ThMFl', '\x22\x20的聊天记录已清空。', 'Noir\x27s\x20Fix:\x20已成功追加新旧数据\x20(A+B)。', '（开始一段新的对话...）', '.slot-filename', 'NAhwQ', 'UerXR', '.snoop-main-grid', 'group-clear-history', '加载徽章图片失败', '\x20的《', 'xecEd', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'KOMjW', 'cancel-quote-button', '#meeting-view-screen\x20.chat-input-area', 'createElement', 'yVZpI', '哼，正在净化你那些超重的音乐分享记录...', 'audio-player', 'XzsVq', 'DaSPZ', 'llliZ', 'OGOYk', '\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20', 'hHRAr', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', '图片处理失败:\x20', 'center', 'checked', 'fontStyle', 'netease', 'world-book-checkboxes-container', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>', 'activeMeetingCharId', 'warn', '点击选择\x20.mp3\x20或\x20.flac', 'card-widget', 'classList', 'noir_migration_music_v1_complete', 'KvkXJ', 'width', 'eeSya', '-\x20**你们最后一次互动是在**:\x20', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg', 'noir_migration_fc_v1_complete', '这个也是摆设，别点了。', '获取AI响应失败:', 'AVikb', 'XVBaO', 'OXnEQ', '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'choice-create-character', 'QSEzh', '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>', '\x20内容失败:', 'add-event-modal', 'diary-page-', 'total_cost', 'documentElement', 'Fztps', '\x20张旧封面。应用即将刷新。', 'JHNXv', '\x22\x20中发现一张需要净化的图片...', 'gpWxj', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', 'cMnOa', 'close-summary-button', 'theme-lightness-slider', 'YANmv', '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20', 'disabled', 'gsKso', 'join', 'editing-friend-circle-id', 'friend-circle-edit-screen', 'tjNpc', 'back-to-world-book-list', 'visible', '---\x20音乐净化仪式完成\x20---', 'BPnch', 'insertAdjacentHTML', '#snoop-app-view-container\x20.snoop-app-header', 'RfSUg', 'last_message_preview', 'whispers', 'yQkOl', '星期二', 'remove', 'restaurant_name', 'jPlvC', 'user-profile-list-screen', 'user-profile-list-container', '.todo-item,\x20.important-day-item', 'chat-listen-together-button', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'pRsMT', 'image', 'diary-modal-textarea', 'GFpbr', 'KrClT', 'snoop-app-back-btn', '<div\x20class=\x22post-comments-container\x22>', 'JNCie', 'toBlob', '正在准备音乐数据...', '<div\x20class=\x22snoop-avatar\x22>', '错误：找不到角色', 'BTvAa', 'HxZSg', 'JhoIm', 'tONmD', 'AGCra', 'UWkgY', 'aBdde', 'jrrnn', 'NyGHU', '条目名称和内容都不能为空！', '50%', 'post_image_', '聊天档案柜是空的，无需净化。', 'http', 'GyWxu', '\x20[并附上了一张图片]', 'hxFLp', 'image/png', 'error', 'XjDMQ', 'global-player-play-pause-btn', '\x22\x20id=\x22', 'OPfWD', 'from', 'values', '--custom-font-family', 'sad', 'splice', 'user-profile-screen', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', 'sprite-slider-y', 'galgame-view-container', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>', 'sOZaX', '确定要从圣殿中永久删除《', '300%', 'data:image', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'jTVTU', 'Gemini\x20stream\x20reading\x20aborted.', 'themeHue', '-\x20你点过一份外卖：“', 'path', '动态已清空。', 'world-book-editor-screen', 'Bearer\x20', 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg', 'touchmove', 'bfSpV', 'widget-play-pause-btn', 'pizrm', 'AI返回的不是一个数组。', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', '请输入群聊名称。', 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg', '\x0a-\x20**日记本的上一笔记录是在**:\x20', 'app-snoop', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', '正在清空旧数据...', 'aborted', 'snoop-home-clock', '正在搜索音乐...', 'model-dropdown', 'BPzVE', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', 'sPffN', 'https://sharkpan.xyz/f/z1xc5/iore2n.gif', '浏览器', 'dmJob', 'RrMYe', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', '已设为当前用户！', 'xFxfu', '#member-select-', 'IWTfi', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', '\x0a\x0a#\x20关于读者“', 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg', 'amount', '正在升级聊天数据结构...', 'iyaaf', 'meetingView', 'blob', 'jMFlt', 'todo', '5462208ETdEeZ', 'music_library', '确定要删除群聊“', 'LUXvA', 'jqpKQ', 'dsEKo', '解析音乐文件失败:', 'Mnozx', 'diary-modal-cancel', 'AMwzD', '\x0a```', '至少要保留一个用户。', '.message.user', '\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', '.snoop-app-content', 'touchstart', 'horizontal', 'characterName', 'quoted-message-in-bubble', 'playableUrl', 'change', 'VnzHL', 'UnYtp', 'home-clock-container', 'XunEi', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22>', 'viewBox', 'flexDirection', 'PCcai', 'oVsLP', '\x20[并分享了歌曲:\x20', '134442zaygSU', '.load-more-btn', 'back-to-home-from-wallpaper', '[图片]', 'listen-together-ui', 'xMBqc', '-\x20[动态]\x20', 'char-edit-remark', 'group-delete-button', '原始文本:', 'src', 'snoop-dock', 'pending-post-image-preview', 'appIconPosition_', 'MQOpj', 'ZyZFQ', 'character-list', 'italic', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'onclick', 'RyVUc', 'select', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!', '<div\x20class=\x22post-likes\x22>', 'comments', 'post_image_migrated_', 'ItyCc', '我正在说话呢，别打岔！', '今天一笔账都没有，我整理什么？', 'char_wallpaper_', 'KrNlD', 'some', 'FDgMN', 'group-edit-name', 'group-clear-history-button', 'snoop-list-screen', 'eYahJ', 'save-friend-circle-button', 'AeaLr', 'char_offline_bg_', 'apiSettings', 'custom_font_ttf', 'ofqkt', 'loading', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', 'utterance', 'yZVEE', 'TLCfd', 'CahhW', 'vVefR', '1694823bctdHA', '已自动断开与其他人的听歌同步。', 'YWszy', 'eYAsU', '\x22\x20吗？所有聊天记录将被永久删除。', '请根据以上所有信息，开始分析并返回JSON。', '<input\x20type=\x22checkbox\x22\x20value=\x22', '已删除。', 'listen-together-modal', 'rPQDf', '近期没有特别安排', '乐于助人的助手', '回复\x20', '[发送了图片]', '】的手机已被重置。', 'span', '用户分享音乐失败:', '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', 'jqmTO', '#group-world-book-checkboxes\x20input:checked', 'LymDN', '》。\x0a这是当前的歌词，请注意带\x20\x27>>\x27\x20标记的正是正在播放的句子。\x0a\x0a[歌词开始]\x0a', 'edit-message-textarea', '纪念日', '星期三', 'clock-color-toggle', 'onerror', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'delete-message-button', '</span>', 'createObjectURL', 'head', '\x22\x20class=\x22char-name\x22>', '我不想工作', 'href', 'rawResponse', '-preview', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', '你还没有写日记。', 'yGwNA', 'YwtIV', 'HPNSk', 'isPlaying', 'Fjuuz', 'snoop-phone-screen', 'qLFyV', 'removeChild', 'fFApH', 'jAaPP', 'RlavY', 'sccYF', 'setDate', 'CtdWb', 'key', 'children', 'sender_id', 'WyQpC', 'music-widget', '\x0a##\x20条目:\x20', 'rPyKj', '8px', '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', '0\x200\x20', '<img\x20src=\x22', '好像有动态了...', 'next-month-btn', 'getItem', '星期六', 'reset-feed-bg-button', 'className', 'getDate', '在准备群聊API数据时，读取图片失败:', 'zh-CN', 'VBCPA', 'transform', 'friend-circle-edit-name', 'display', 'readAsText', 'choice-cancel', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>', ';\x22>', 'VpZcs', 'vCZuu', 'history', 'selectedDate', '60%', 'eventContent', 'eXqHp', 'button', 'widget-title', 'concat', 'confirm-altar-upload-button', '\x20-\x20', '</span><div><div\x20class=\x22description\x22>', 'characterLastScripts', 'GRhnr', 'reset-widgets-position-button', 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg', 'category', 'QBdrl', '图片加载失败', '[sticker:', 'clientY', 'aCLoz', 'HmYWq', '加载第二个卡片图片失败', '在好友圈\x20\x22', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'SPXJM', 'sFLEk', 'post-img-', 'YvFpr', 'FKPzB', 'style-', 'shy', '未命名群聊', 'widget-prev-btn', 'bFAyv', '2-digit', 'chat-music-button', 'chat-image-button', 'rgba(0,\x200,\x200,\x200.4)', 'sHoZp', 'JtMjZ', '\x0a\x0a#\x20当前任务指令\x0a', 'push', 'vWsep', 'meeting-list-container', '加载壁纸失败:', 'damsi', 'cover-file-input', 'ovyAt', '\x20的旧格式数据翻译。', '\x20天没活动了。你生成的内容必须是全新的事件。\x0a', '已送达', '设置已保存！', '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。', 'cPViA', 'group-bg-input', 'cNbrY', 'New\x20request\x20started', 'group-settings-bind-user', 'world-book-list-container', 'happy', 'hxNMi', 'TcyhT', 'signal', 'none', 'beforeend', 'diaryCurrentPage', '已恢复默认字体。', 'nBIpf', '未知表情', 'nBYlk', 'reset-desktop-button', 'EtJuN', '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>', 'cEyUp', 'test', '的个人专属世界观设定\x0a', '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20', 'ejLvZ', 'wb_', '”吗？此操作不可撤销。', 'chat_group_', 'dcbMl', 'toggle-meeting-view-button', 'includes', 'QYAfm', 'transparent', '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。', 'reply', 'find', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', 'choice-create-group', 'bites', 'EaicJ', 'event_ai_', '新角色\x20', 'full', 'qFphL', '你好，世界\x20(Hello,\x20World)', 'SvxJd', 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg', '#a7c7e7', '书记官正在奋笔疾书...', 'VfIiq', 'widget_badge', 'today-btn', 'tTpOn', 'setHours', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x20.app-icon-img', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'mouseup', 'AI返回了无法识别的数据格式。', 'result', 'bubbleCss', '请输入新的群名称：', 'ujCXm', 'app-pages-slider', '对方正在行动中...', '10px\x20auto', 'forceWhiteClock', '错误：你还没有创建任何好友圈。请先在App内创建一个。', '已复制到剪贴板！', 'meeting-scene-view', 'import-data-input', '保存壁纸失败:\x20', 'card-input-2', 'indexedDBMusicData', 'MxoIq', 'back-to-home-from-chat', 'cSwvv', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', 'reload', 'XAALm', '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a', 'assign', 'app-pages-container', 'CDupW', 'quoted-sender', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'column', 'srdGr', 'user-send-post-button', 'categorized-expenses-list', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', 'vJmwT', 'AOPfZ', '.custom-multiselect', 'MxdeF', 'MpddJ', '\x20//\x20<--\x20哼，加在这里\x0a', 'QfNwT', 'NenfX', 'add', '\x20时出错，跳过。', 'querySelector', 'galgame-textbox-container', 'mCant', 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg', 'PWMeG', 'gVbfm', '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>', '确定要删除这个好友圈吗？此操作不可撤销。', 'musicId', 'CZAEz', 'BFRyT', 'Upgrading\x20database\x20to\x20version\x20', '0\x202px\x208px\x20rgba(0,0,0,0.4)', 'artist', 'world-book-screen', 'ONjaB', '请输入有效的转账金额！', 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg', 'posts', '\x0a\x20\x20\x20\x20<div\x20id=\x22', 'grOUs', '说了是摆设啦，笨蛋。', 'music-feed-container', '快点哄我', '哼，正在净化你那些被污染的好友圈动态...', 'voRSx', 'customIcon_', 'Gotuj', '音乐搜索失败:\x20', 'chat-image-input', 'translateX(-', 'footprints', '获取模型失败:\x20', 'uMCoQ', 'create_event', '[AI返回了无法解析的剧本:\x20', 'preview_', 'BuvTk', 'WunQe', 'hwpMD', '净化好友圈时出错，真是的。', '{charName}', 'click', 'PxbnJ', 'items', '</div>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥', 'wQawL', 'snoop-phone-header', 'VSJvd', '测试动态已添加！', '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[', 'Aqmqo', 'OGALl', 'focus', 'dPVcx', 'YEjTd', 'widget-artist', 'char-edit-sprite-', '\x20的图片失败:', 'meeting-view-screen', 'eiDuk', 'Axsjy', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', 'XNCxq', 'remove-font-button', 'setProperty', '2px\x20dashed\x20var(--border-color)', 'activity_description', 'mqspF', 'VXmec', 'CPplp', 'yzyIl', 'Kvzhv', '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27', 'setAttribute', 'zbtvj', '】的日记本已被清空。', 'provider', 'MyKBK', '\x22>一起听</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>', '-\x20你拍过一张照片，内容是：“', '用户已删除。', 'delete-user-profile-button', '欢迎！请先创建一个角色开始聊天。', 'mFtmu', 'meeting-main-content', 'vdXYC', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '<div\x20class=\x22snoop-main-grid\x22></div>', 'cardState2', '大家正在赶来回复...', 'XFkFM', '\x20之间的私密内容)\x0a', '4128KxqLnS', 'KPkzb', 'oncomplete', 'char-edit-css', '#app-dock-bottom-left\x20#', '好友圈档案柜是空的，无需净化。', 'MYccl', 'show', '导出角色卡失败:', 'SvZcj', 'margin', 'MWwwE', 'afterend', 'szybs', 'vertical', '还没有我的回应可以重新生成哦。', 'yiSNP', 'nAmFp', 'smooth', '\x20\x20-\x20角色ID:\x20', 'perChatContextLines', 'true', 'onload', 'FtcWv', 'dataset', 'borderBottom', 'text', 'listenTogetherSession', 'lt-ui-song-artist', 'position', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', 'querySelectorAll', 'PIiLr', 'stringify', 'participantIds', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'character-edit-screen', 'uQNHS', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', 'IphTq', '”。\x0a', '10px\x200', '正在处理图片...', '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a', 'back-to-settings-from-user-profile', 'yIkhT', 'FAbbi', 'shift', 'postContent', 'getMinutes', '收到的原始、有问题的文本:', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', 'iTGZf', '我是女仆', '</p>', 'color', 'xzgAL', '#world-book-checkboxes-container\x20input:checked', 'model', 'closest', 'IhPND', '.lt-end-session-btn', '哼，这不是图片，你想让我压缩什么？', 'XKbvX', 'inline-block', '#99ff99', 'lyrics-file-input', '#diary-action-delete', 'Error\x20fetching\x20from\x20', 'choices', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', '交通出行', 'avatar', 'kOnSm', '##\x20', 'settings-screen', 'nukzq', 'LpJgr', 'cardWidgetState', '#\x20总结失败了，可能是记录太长或太复杂。', 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg', '请先在\x22设置\x22中配置你的\x20API\x20信息。', 'time', 'pWjbb', 'historyIndex', 'startsWith', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>', 'settings', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>', '动态页背景已更换！', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', 'groupChatCreate', 'sticker-content', 'now', 'KlEUW', '\x22>&times;</button></div>', 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg', 'iLUiJ', 'back-to-user-list-from-edit', 'toLocaleString', 'app-world-book', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', 'OnarS', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', 'sprites', '未知用户', 'bzmwt', 'musicWidgetPosition', '真是的，必需的祭品都还没准备好！', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_', '确定要删除这个安排吗？此操作不可撤销。', 'ctgbr', '好了，请基于以上所有信息，开始写今天的日记吧。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>', 'user-name', 'VeWdz', 'screenX', 'sqpCr', '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书', 'thought', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'meeting-send-button', '在准备动态回复时，读取图片失败:', 'sivJo', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>', ':\x22\x20或\x22[', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'query', 'card-image', 'clientX', 'snoop-home-time', 'abort', 'user-post-textarea', 'blzJc', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'oNeeh', 'user-post-image-input', 'OMewi', 'replace', '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', 'add-choice-modal', 'user-persona', '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[', 'style', '#\x20记录是空的，没什么好总结的。', 'NeHXg', 'card-widget-2', 'memberCharacterIds', '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a', '1em', 'tXbuj', 'PAUxU', '.diary-entry', 'EplxT', '\x0a#\x20任务:\x20续写或生成聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**首要任务**:\x20检查【已有内容】。如果里面已经有对话，你的任务是挑选1-2个对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20-\x20**次要任务**:\x20如果你想不出怎么续写，或者觉得有必要，可以再额外创造\x201\x20个全新的虚拟联系人（NPC）和对话。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成联系人的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', 'group-edit-members', '哼，你这字体文件有问题，用不了。', 'auto', 'toLowerCase', 'kJslo', 'modal-text', 'voFYy', 'BEbvw', '.message.ai', '-\x20姓名:\x20', '<span\x20class=\x22description\x22>', 'dwuZL', '字体更换成功！', '\x20张旧图片。应用即将刷新。', 'TWmij', 'EUyHz', 'sprite-cancel-button', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', 'meeting-char-name-header', 'zBhqR', '正在搬运旧卡片...', '确定要删除这篇日记吗？此操作不可撤销。', 'sort', 'jYlzs', 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg', 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg', 'galgame-sprite-container', 'lzTHe', 'sprite-slider-scale', 'upload-feed-bg-button', 'reset-card-button', 'changedTouches', 'decorative-badge', 'UkAno', 'edit-message-backdrop', 'rlcKZ', 'qfLHT', 'scale', '委屈哭', 'mWWUx', 'add-chat-button', 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg']; _0xa66c = function () { return _0x7d796; }; return _0xa66c(); } const _0x8b4e5f = _0x2fd2f7(0x78a), _0x100aee = _0x2fd2f7(0x5a1), _0x4115d0 = _0x2fd2f7(0x258), _0xd2e833 = document[_0x2fd2f7(0x7a2)](_0x2fd2f7(0xa8f)); _0xd2e833['id'] = 'noir-custom-font-style', document['head'][_0x2fd2f7(0x322)](_0xd2e833); var _0x185973, _0x2f108d = null; let _0x1f134c = [], _0x334243 = ![], _0x4e763e = { 'x': 0x0, 'y': 0x0 }; function _0x496463(_0x25b6ca) { const _0x3577ee = _0x2fd2f7; return (_0x185973?.[_0x3577ee(0xb29)] || [])[_0x3577ee(0x95a)](_0x1048a9 => _0x1048a9['id'] === _0x25b6ca); } const _0x211af9 = _0x2fd2f7(0x413), _0x5b8a69 = _0x2fd2f7(0x1c3), _0xcd0fda = _0x2fd2f7(0xa6a), _0x58e6ca = [{ 'name': _0x2fd2f7(0xac1), 'url': 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg' }, { 'name': '崩溃', 'url': _0x2fd2f7(0x15d) }, { 'name': '生病', 'url': _0x2fd2f7(0x523) }, { 'name': '工作', 'url': _0x2fd2f7(0x69c) }, { 'name': _0x2fd2f7(0x37c), 'url': _0x2fd2f7(0x5a7) }, { 'name': '弱小委屈但凶恶', 'url': _0x2fd2f7(0x217) }, { 'name': _0x2fd2f7(0x712), 'url': _0x2fd2f7(0xb1f) }, { 'name': '期待', 'url': 'https://sharkpan.xyz/f/35lse/xmsue5.jpg' }, { 'name': '喜欢', 'url': _0x2fd2f7(0x390) }, { 'name': _0x2fd2f7(0x583), 'url': _0x2fd2f7(0xab3) }, { 'name': '有点生气', 'url': _0x2fd2f7(0x6be) }, { 'name': '委屈', 'url': _0x2fd2f7(0x6f3) }, { 'name': '加油', 'url': 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg' }, { 'name': '对的', 'url': _0x2fd2f7(0xb03) }, { 'name': '不满', 'url': 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg' }, { 'name': '很期待', 'url': 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg' }, { 'name': '猫猫撒娇', 'url': _0x2fd2f7(0x2d1) }, { 'name': '委屈', 'url': 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg' }, { 'name': '平静', 'url': _0x2fd2f7(0xa22) }, { 'name': '咬你', 'url': _0x2fd2f7(0xb15) }, { 'name': '咱俩天下第一好', 'url': 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg' }, { 'name': '好困', 'url': _0x2fd2f7(0x9a0) }, { 'name': '摸鱼', 'url': _0x2fd2f7(0x1a0) }, { 'name': _0x2fd2f7(0x565), 'url': _0x2fd2f7(0x9ae) }, { 'name': '超激动我来了', 'url': _0x2fd2f7(0x4f8) }, { 'name': _0x2fd2f7(0x19b), 'url': 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg' }, { 'name': '一起听歌', 'url': _0x2fd2f7(0xac4) }, { 'name': _0x2fd2f7(0x636), 'url': _0x2fd2f7(0xa5c) }, { 'name': _0x2fd2f7(0x601), 'url': _0x2fd2f7(0xa4c) }, { 'name': _0x2fd2f7(0x6c1), 'url': _0x2fd2f7(0x6c5) }, { 'name': _0x2fd2f7(0x70b), 'url': _0x2fd2f7(0x966) }, { 'name': _0x2fd2f7(0x319), 'url': _0x2fd2f7(0x95c) }, { 'name': _0x2fd2f7(0x39f), 'url': _0x2fd2f7(0x90f) }, { 'name': _0x2fd2f7(0x587), 'url': _0x2fd2f7(0x62d) }, { 'name': '买新衣服', 'url': _0x2fd2f7(0x7c2) }, { 'name': '干劲满满', 'url': _0x2fd2f7(0x832) }, { 'name': _0x2fd2f7(0x45c), 'url': _0x2fd2f7(0x83a) }, { 'name': _0x2fd2f7(0x47e), 'url': _0x2fd2f7(0xab4) }, { 'name': '无语但是随便吧', 'url': _0x2fd2f7(0x410) }, { 'name': '有点破防', 'url': _0x2fd2f7(0x707) }, { 'name': _0x2fd2f7(0x9b4), 'url': _0x2fd2f7(0x5ef) }, { 'name': '有点无语', 'url': _0x2fd2f7(0xa2f) }, { 'name': _0x2fd2f7(0x6d7), 'url': _0x2fd2f7(0x852) }, { 'name': _0x2fd2f7(0x567), 'url': 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg' }, { 'name': _0x2fd2f7(0x6fe), 'url': _0x2fd2f7(0x2df) }, { 'name': '很好哦', 'url': _0x2fd2f7(0x8a6) }, { 'name': _0x2fd2f7(0x3af), 'url': _0x2fd2f7(0x313) }, { 'name': '不高兴撒娇', 'url': 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg' }, { 'name': '我是小丑呜呜', 'url': 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg' }, { 'name': _0x2fd2f7(0x8cd), 'url': _0x2fd2f7(0x2aa) }, { 'name': _0x2fd2f7(0x38a), 'url': _0x2fd2f7(0x3ef) }, { 'name': '我来搞定', 'url': _0x2fd2f7(0xaed) }, { 'name': _0x2fd2f7(0xa31), 'url': _0x2fd2f7(0x6ee) }, { 'name': '等你', 'url': _0x2fd2f7(0x90d) }, { 'name': _0x2fd2f7(0xaef), 'url': _0x2fd2f7(0x537) }, { 'name': _0x2fd2f7(0x719), 'url': _0x2fd2f7(0x576) }, { 'name': '喝酒', 'url': _0x2fd2f7(0x69b) }, { 'name': _0x2fd2f7(0x460), 'url': _0x2fd2f7(0x561) }, { 'name': '呜呜', 'url': _0x2fd2f7(0x847) }, { 'name': _0x2fd2f7(0xada), 'url': _0x2fd2f7(0x73c) }, { 'name': _0x2fd2f7(0xac7), 'url': 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg' }, { 'name': '出去玩', 'url': _0x2fd2f7(0x69e) }, { 'name': _0x2fd2f7(0x2a7), 'url': _0x2fd2f7(0x4c0) }, { 'name': _0x2fd2f7(0xac9), 'url': 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif' }], _0x41d36e = { 'beige': { 'name': _0x2fd2f7(0x2e4), 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': _0x2fd2f7(0x552), 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x2fd2f7(0x65a), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': _0x2fd2f7(0x1cd), 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0x2fd2f7(0x65f)]('DOMContentLoaded', () => { const _0x59a4d7 = _0x2fd2f7, _0x45c320 = document[_0x59a4d7(0x727)](_0x59a4d7(0x677)), _0x59ee03 = document[_0x59a4d7(0x727)](_0x59a4d7(0x1b1)), _0x5ea123 = document['getElementById'](_0x59a4d7(0x764)), _0x253444 = document[_0x59a4d7(0x727)](_0x59a4d7(0x632)), _0x53911d = document[_0x59a4d7(0x727)]('confirm-transfer-button'), _0x50eca3 = document[_0x59a4d7(0x727)](_0x59a4d7(0x45e)), _0x1cba2d = document[_0x59a4d7(0x727)](_0x59a4d7(0xacf)), _0x5a7d01 = document[_0x59a4d7(0x727)]('transfer-recipient-select'), _0xbf5bff = document[_0x59a4d7(0x727)](_0x59a4d7(0x3c7)), _0x2b2afe = document['getElementById'](_0x59a4d7(0x3c6)), _0x40b0fc = document[_0x59a4d7(0x727)]('chat-summarize-button'), _0x53fdc4 = document[_0x59a4d7(0x727)]('summarize-modal'), _0x2f648f = document[_0x59a4d7(0x727)](_0x59a4d7(0x3f7)), _0xeb9c5a = document[_0x59a4d7(0x727)]('summary-textarea'), _0x32d746 = document['getElementById'](_0x59a4d7(0x292)), _0x174ecb = document['getElementById'](_0x59a4d7(0x7da)), _0x5f355d = document[_0x59a4d7(0x727)](_0x59a4d7(0x68c)), _0x4c2815 = document[_0x59a4d7(0x727)](_0x59a4d7(0x641)), _0x15ee57 = document['getElementById'](_0x59a4d7(0x27d)), _0x16c51b = document[_0x59a4d7(0x727)](_0x59a4d7(0x543)), _0x9c901c = document['getElementById'](_0x59a4d7(0x6d4)), _0x2d81be = document[_0x59a4d7(0x727)](_0x59a4d7(0x223)), _0x12331f = document[_0x59a4d7(0x727)](_0x59a4d7(0x595)), _0xf57854 = document[_0x59a4d7(0x727)]('upload-font-button'), _0x1b1b74 = document[_0x59a4d7(0x727)](_0x59a4d7(0x9de)), _0x269986 = document[_0x59a4d7(0x727)]('font-input'), _0x540aa6 = document[_0x59a4d7(0x727)]('font-preview-text'); async function _0x5da1b3(_0x47c57e) { const _0x43f780 = _0x59a4d7; if (_0x43f780(0xa49) === _0x43f780(0xa49)) try { if (_0x43f780(0xa30) === _0x43f780(0xa30)) { const _0x3b24aa = URL[_0x43f780(0x8ca)](_0x47c57e), _0x4103a8 = 'NoirCustomFont', _0x4f5209 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27' + _0x4103a8 + _0x43f780(0x7b5) + _0x3b24aa + _0x43f780(0x473); _0xd2e833[_0x43f780(0x5b2)] = _0x4f5209, document[_0x43f780(0x7d1)][_0x43f780(0xa8f)]['setProperty'](_0x43f780(0x81c), '\x27' + _0x4103a8 + '\x27'), _0x540aa6[_0x43f780(0xb33)] = _0x43f780(0x505); } else { const _0xa6319f = _0x1ec3bd(_0x494c64['authorId']) || { 'name': '未知' }; let _0x4a69b4 = _0x43f780(0x87f) + _0xa6319f[_0x43f780(0x41b)] + _0x43f780(0x72c) + (_0xf44570[_0x43f780(0xa75)] || _0x246c38['content']) + '”'; return _0x56bfd3[_0x43f780(0x117)] === _0x43f780(0x373) && (_0x4a69b4 += '\x20(分享了歌曲:\x20' + _0x15f7f1[_0x43f780(0x508)] + '\x20-\x20' + _0x4702a8[_0x43f780(0x9aa)] + ')'), _0x4a69b4; } } catch (_0x1dbee3) { console[_0x43f780(0x815)](_0x43f780(0xb1e), _0x1dbee3), _0x1de23f(_0x43f780(0xa9c)); } else _0x2b7e71[_0x43f780(0x5be)]('好友圈净化完成，正在重新存档...'), _0x1a4153['setItem']('appState', _0x8c792e['stringify'](_0x1afbcd)); } async function _0x4ef784() { const _0x173a4f = _0x59a4d7; try { const _0x32664f = await _0x27b140('custom_font_ttf'); if (_0x32664f) { if ('yzBKv' !== _0x173a4f(0x870)) console[_0x173a4f(0x5be)](_0x173a4f(0xb24)), await _0x5da1b3(_0x32664f); else { _0x385d40[_0x173a4f(0x815)](_0x173a4f(0x890)); return; } } } catch (_0x57fa54) { console['error'](_0x173a4f(0x5b8), _0x57fa54); } } async function _0x253a65(_0x5f4bb2) { const _0x5c9528 = _0x59a4d7, _0x286140 = _0x5f4bb2['target'][_0x5c9528(0x409)][0x0]; if (!_0x286140 || !_0x286140[_0x5c9528(0x41b)][_0x5c9528(0xa9e)]()['endsWith'](_0x5c9528(0x457))) { if ('pUpAY' === _0x5c9528(0x710)) { _0x1de23f(_0x5c9528(0x5b5)); return; } else { const _0xd0b8d1 = _0x398423[_0x5c9528(0x1f2)](_0x37dfa8, _0x5c9528(0x3b7)), _0xea134d = _0xd0b8d1[_0x5c9528(0x238)](_0x1bc6b2), _0x5ed6a5 = _0xea134d[_0x5c9528(0x521)](_0x1b5106); _0x5ed6a5[_0x5c9528(0x17f)] = () => _0x4bbfb0(), _0x5ed6a5['onerror'] = () => _0x18496a(_0x5ed6a5[_0x5c9528(0x815)]); } } _0x55dd5e(!![], '正在铭刻字体...'); try { await _0x5bc724(_0x5c9528(0x8a3), _0x286140), await _0x5da1b3(_0x286140), _0x1de23f(_0x5c9528(0xaa7)); } catch (_0x7afc21) { _0x5c9528(0x726) !== _0x5c9528(0x726) ? _0x33319e += '-\x20你最近去过：“' + _0x2f6dc9[_0x5c9528(0x37e)] + '”，在那里“' + _0x29e8f2[_0x5c9528(0x9e1)] + '”。\x0a' : _0x1de23f(_0x5c9528(0x13a) + _0x7afc21[_0x5c9528(0x140)]); } finally { _0x5c9528(0x743) === _0x5c9528(0x743) ? (_0x55dd5e(![]), _0x269986[_0x5c9528(0x525)] = '') : _0x157291(_0x5c9528(0x218)); } } async function _0x29e8b3() { const _0x36fa5f = _0x59a4d7, _0x4f11bf = await _0xf1c3f7(_0x36fa5f(0x62a)); if (_0x4f11bf) try { _0x36fa5f(0x619) !== _0x36fa5f(0x531) ? (await _0x255048(_0x36fa5f(0x8a3)), _0xd2e833['innerHTML'] = '', document[_0x36fa5f(0x7d1)]['style'][_0x36fa5f(0x74c)](_0x36fa5f(0x81c)), _0x540aa6[_0x36fa5f(0xb33)] = _0x36fa5f(0x964), _0x1de23f(_0x36fa5f(0x944))) : (_0x4f581c[_0x36fa5f(0x608)] = ![], _0x23def9(![])); } catch (_0x18a957) { _0x1de23f('恢复失败了:\x20' + _0x18a957[_0x36fa5f(0x140)]); } } function _0x10014d() { const _0xbb43d1 = _0x59a4d7; if ('SPXJM' !== _0xbb43d1(0x91a)) _0x1d2c19[_0xbb43d1(0x5be)](_0xbb43d1(0x358) + _0x11801a), _0x3d11b5['createObjectStore'](_0x3c1ffb, { 'keyPath': 'id' }); else { const _0x522665 = document['getElementById']('theme-hue-slider'); if (!_0x522665) return; const _0x4ade34 = localStorage['getItem'](_0xbb43d1(0x82c)) || '35'; document['documentElement'][_0xbb43d1(0xa8f)][_0xbb43d1(0x9df)]('--primary-hue', _0x4ade34), _0x522665[_0xbb43d1(0x525)] = _0x4ade34, _0x522665[_0xbb43d1(0x65f)]('input', () => { const _0x55b0d0 = _0xbb43d1; if (_0x55b0d0(0x184) === 'PYxEW') { const _0x2c2df0 = _0x522665[_0x55b0d0(0x525)]; document['documentElement'][_0x55b0d0(0xa8f)][_0x55b0d0(0x9df)](_0x55b0d0(0x493), _0x2c2df0), localStorage[_0x55b0d0(0x295)]('themeHue', _0x2c2df0), _0x110c12(); } else _0x21cbd5(_0x137022[_0x55b0d0(0x4c8)])['then'](_0x3e4ae6 => { const _0x4ad4a5 = _0x55b0d0; if (_0x3e4ae6) { const _0x27a8bf = _0x3e84b5[_0x4ad4a5(0x8ca)](_0x3e4ae6); _0x437f42[_0x4ad4a5(0x883)] = _0x27a8bf, _0x554d86[_0x4ad4a5(0xa11)] = () => _0x3e15a7[_0x4ad4a5(0x33a)](_0x27a8bf); } }); }); } } function _0x30e7b2() { const _0x15d5bd = _0x59a4d7; if (_0x15d5bd(0x6e8) !== _0x15d5bd(0xb16)) { const _0x5715b9 = document['getElementById'](_0x15d5bd(0x7db)); if (!_0x5715b9) return; const _0x1dc36c = localStorage['getItem']('themeLightness') || '80'; document[_0x15d5bd(0x7d1)][_0x15d5bd(0xa8f)][_0x15d5bd(0x9df)]('--primary-lightness', _0x1dc36c + '%'), _0x5715b9[_0x15d5bd(0x525)] = _0x1dc36c, _0x5715b9[_0x15d5bd(0x65f)](_0x15d5bd(0x2d0), () => { const _0x2307c6 = _0x15d5bd, _0x2adabc = _0x5715b9[_0x2307c6(0x525)]; document[_0x2307c6(0x7d1)][_0x2307c6(0xa8f)]['setProperty']('--primary-lightness', _0x2adabc + '%'), localStorage[_0x2307c6(0x295)](_0x2307c6(0xad7), _0x2adabc), _0x110c12(); }); } else _0x2ec0b6[_0x15d5bd(0x693)](), _0x1c57fb[_0x15d5bd(0x7bb)][_0x15d5bd(0x3a3)](_0x15d5bd(0x7e5)), _0x182470['classList'][_0x15d5bd(0x3a3)]('expanded'); } function _0x110c12() { const _0x14d409 = _0x59a4d7; if ('OGALl' !== _0x14d409(0x9d2)) _0x520e17 = _0x33d4e8['id']; else { const _0x22b6d6 = document['getElementById'](_0x14d409(0x871)); if (!_0x22b6d6) return; if (_0x185973['preferences'][_0x14d409(0x97a)]) _0x22b6d6[_0x14d409(0xa8f)][_0x14d409(0xa33)] = _0x14d409(0x6c9), _0x22b6d6[_0x14d409(0xa8f)][_0x14d409(0x4bf)] = _0x14d409(0x9a9); else { if (_0x14d409(0x277) !== 'TfFgz') { const _0x35e63f = { 'id': _0x40383e['id'], 'url': _0x14a6a7['playableUrl'] }; _0x5d63f4(this, _0x35e63f); } else _0x22b6d6[_0x14d409(0xa8f)][_0x14d409(0xa33)] = _0x14d409(0x363), _0x22b6d6[_0x14d409(0xa8f)][_0x14d409(0x4bf)] = _0x14d409(0x941); } } } function _0x44777a() { const _0x5c41e1 = _0x59a4d7; if ('bosGr' !== _0x5c41e1(0x228)) { const _0x570e14 = document[_0x5c41e1(0x727)](_0x5c41e1(0x8c5)); if (!_0x570e14) return; _0x570e14[_0x5c41e1(0x7b1)] = _0x185973[_0x5c41e1(0x55c)][_0x5c41e1(0x97a)] || ![], _0x570e14['addEventListener']('change', () => { const _0x281f6c = _0x5c41e1; _0x185973[_0x281f6c(0x55c)][_0x281f6c(0x97a)] = _0x570e14[_0x281f6c(0x7b1)], _0x35c1de(), _0x110c12(); }); } else { const _0x5b3434 = _0x5142df['createElement'](_0x5c41e1(0xb08)); _0x5b3434[_0x5c41e1(0x8f1)] = _0x5c41e1(0x656), _0x4136ea['appendChild'](_0x5b3434); } } _0x12331f[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0xd732e9), _0x9c901c[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x12df96 = _0x59a4d7; if (_0x12df96(0x419) === _0x12df96(0x419)) _0x1a0259(), _0x2d81be[_0x12df96(0x9c7)](); else { _0x68e77b = _0x15a7b4[_0x12df96(0x6ac)][_0x12df96(0x95a)](_0x39f8b9 => _0x39f8b9[_0x12df96(0x117)] === _0x12df96(0x261) && _0x39f8b9[_0x12df96(0xa1e)][_0x12df96(0x955)](_0x2a70ca)); const _0x787481 = _0x14138f(_0x41e6c6); _0x4f10ad = _0x787481 ? _0x787481['name'] : '该角色'; } }), _0x2d81be[_0x59a4d7(0x65f)](_0x59a4d7(0x86e), _0x468005); const _0x1bf96a = { 'home': document[_0x59a4d7(0x727)](_0x59a4d7(0x1e0)), 'chat': document[_0x59a4d7(0x727)](_0x59a4d7(0x20b)), 'settings': document[_0x59a4d7(0x727)](_0x59a4d7(0xa47)), 'userProfile': document[_0x59a4d7(0x727)](_0x59a4d7(0x81f)), 'characterEdit': document[_0x59a4d7(0x727)](_0x59a4d7(0xa20)), 'groupChatCreate': document['getElementById'](_0x59a4d7(0x115)), 'wallpaper': document[_0x59a4d7(0x727)](_0x59a4d7(0x4a6)), 'worldBook': document[_0x59a4d7(0x727)](_0x59a4d7(0x9ab)), 'worldBookEditor': document[_0x59a4d7(0x727)](_0x59a4d7(0x830)), 'groupSettings': document['getElementById'](_0x59a4d7(0x2f0)), 'music': document['getElementById'](_0x59a4d7(0x749)), 'friendCircleList': document[_0x59a4d7(0x727)](_0x59a4d7(0x2ee)), 'friendCircleEdit': document[_0x59a4d7(0x727)](_0x59a4d7(0x7e2)), 'meetingList': document[_0x59a4d7(0x727)]('meeting-list-screen'), 'meetingView': document['getElementById'](_0x59a4d7(0x9d9)), 'userProfileList': document[_0x59a4d7(0x727)](_0x59a4d7(0x7f2)), 'diaryList': document[_0x59a4d7(0x727)](_0x59a4d7(0x411)), 'diaryView': document['getElementById'](_0x59a4d7(0x498)), 'musicLibrary': document[_0x59a4d7(0x727)]('music-library-screen'), 'musicUploadAltar': document[_0x59a4d7(0x727)](_0x59a4d7(0x5e1)), 'accounting': document['getElementById'](_0x59a4d7(0x4f3)), 'snoopList': document[_0x59a4d7(0x727)](_0x59a4d7(0x89d)), 'snoopPhone': document[_0x59a4d7(0x727)](_0x59a4d7(0x8d8)), 'calendar': document['getElementById'](_0x59a4d7(0x2a4)) }, _0x5e0fb0 = document[_0x59a4d7(0x727)](_0x59a4d7(0xab8)), _0x2aa08a = document['getElementById'](_0x59a4d7(0x39c)), _0x308295 = document[_0x59a4d7(0x727)](_0x59a4d7(0x8f0)), _0x2f849e = document[_0x59a4d7(0x727)](_0x59a4d7(0x13b)), _0x3e9f5e = document[_0x59a4d7(0x727)](_0x59a4d7(0xa60)), _0x209e04 = document['getElementById'](_0x59a4d7(0x87b)), _0x63e308 = document[_0x59a4d7(0x727)](_0x59a4d7(0x467)), _0x393662 = document[_0x59a4d7(0x727)](_0x59a4d7(0x5c4)); document[_0x59a4d7(0x727)](_0x59a4d7(0x948))[_0x59a4d7(0x65f)]('click', async () => { const _0x2faf6e = _0x59a4d7; if (_0x2faf6e(0x212) !== _0x2faf6e(0x212)) _0x43599a = _0xab5ee1[_0x2faf6e(0x621)][0x0]; else { const _0x57541d = await _0xf1c3f7('确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。'); if (_0x57541d) { localStorage[_0x2faf6e(0x778)](_0x2faf6e(0x399)), localStorage[_0x2faf6e(0x778)](_0x2faf6e(0xb2a)), localStorage[_0x2faf6e(0x778)]('clockPosition'), localStorage[_0x2faf6e(0x778)](_0x2faf6e(0xa67)); const _0x1209c9 = []; for (let _0xe8bd4d = 0x0; _0xe8bd4d < localStorage[_0x2faf6e(0xad2)]; _0xe8bd4d++) { const _0x8e2286 = localStorage['key'](_0xe8bd4d); _0x8e2286 && _0x8e2286[_0x2faf6e(0xa51)](_0x2faf6e(0x886)) && (_0x2faf6e(0x9d5) !== _0x2faf6e(0x9d5) ? _0xe8d36a('错误:\x20' + _0x440b92[_0x2faf6e(0x140)]) : _0x1209c9[_0x2faf6e(0x92b)](_0x8e2286)); } _0x1209c9[_0x2faf6e(0x3ea)](_0x138126 => localStorage[_0x2faf6e(0x778)](_0x138126)), await _0x5bc724('wallpaper_main', await _0x3a1fc9(_0x2faf6e(0x443))), _0x1de23f(_0x2faf6e(0x617)), setTimeout(() => location[_0x2faf6e(0x986)](), 0x5dc); } } }); const _0x4a9d49 = document[_0x59a4d7(0x727)](_0x59a4d7(0xa8c)), _0x3a24c7 = document[_0x59a4d7(0x727)]('add-choice-backdrop'), _0x1e9f07 = document[_0x59a4d7(0x727)](_0x59a4d7(0x7ca)), _0x511e02 = document[_0x59a4d7(0x727)](_0x59a4d7(0x95d)), _0x5de494 = document['getElementById'](_0x59a4d7(0x8fa)), _0x7149f8 = document['getElementById'](_0x59a4d7(0x2fe)), _0x310bd4 = document['getElementById'](_0x59a4d7(0x426)), _0x2985b2 = document[_0x59a4d7(0x727)]('group-chat-name'), _0x409d2f = document['getElementById'](_0x59a4d7(0x53c)), _0x1b9992 = document['getElementById'](_0x59a4d7(0x379)), _0x3ec34c = document[_0x59a4d7(0x727)](_0x59a4d7(0x56c)), _0x42feb7 = document[_0x59a4d7(0x727)]('back-to-home-from-settings'), _0x31d928 = document['getElementById'](_0x59a4d7(0x983)), _0x3ef061 = document['getElementById'](_0x59a4d7(0x769)), _0x29a861 = document['getElementById'](_0x59a4d7(0xa28)), _0xde1f14 = document[_0x59a4d7(0x727)](_0x59a4d7(0x3dd)), _0x5e4fd1 = document[_0x59a4d7(0x727)](_0x59a4d7(0x889)), _0x27a6ab = document[_0x59a4d7(0x727)](_0x59a4d7(0xac3)), _0x4a8a7d = document[_0x59a4d7(0x727)]('chat-screen'), _0x34f0f4 = document['getElementById'](_0x59a4d7(0x553)), _0x3a0975 = document['getElementById'](_0x59a4d7(0x2c4)), _0x4c530d = document['getElementById']('chat-send-button'), _0x3c1553 = document['getElementById'](_0x59a4d7(0x54d)), _0x15d69f = document[_0x59a4d7(0x727)]('quote-preview-area'), _0x6b1326 = document[_0x59a4d7(0x727)](_0x59a4d7(0x28f)), _0x1164df = document['getElementById'](_0x59a4d7(0xaee)), _0x4eec86 = document['getElementById'](_0x59a4d7(0x7a0)), _0x2f3af5 = document[_0x59a4d7(0x727)](_0x59a4d7(0x44b)), _0xaf0daa = document['getElementById']('chat-sticker-button'), _0x1340fc = document[_0x59a4d7(0x727)](_0x59a4d7(0x1db)), _0x5d3185 = document[_0x59a4d7(0x727)](_0x59a4d7(0x926)), _0x416d53 = document[_0x59a4d7(0x727)](_0x59a4d7(0x9ba)), _0x15ed93 = document['getElementById']('character-settings-button'), _0x1b6df7 = document[_0x59a4d7(0x727)](_0x59a4d7(0x279)), _0x3dcc2e = document[_0x59a4d7(0x727)](_0x59a4d7(0x22f)), _0x201f4e = document[_0x59a4d7(0x727)](_0x59a4d7(0x3a9)), _0x55471f = document[_0x59a4d7(0x727)]('api-model'), _0xebd911 = document[_0x59a4d7(0x727)](_0x59a4d7(0xb31)), _0x4afbfe = document['getElementById'](_0x59a4d7(0x172)), _0x3cc8a5 = document[_0x59a4d7(0x727)](_0x59a4d7(0x842)), _0x5861ea = document[_0x59a4d7(0x727)](_0x59a4d7(0xad1)), _0x4f48de = document[_0x59a4d7(0x727)](_0x59a4d7(0xa70)), _0x26d005 = document['getElementById'](_0x59a4d7(0x47f)), _0x4b4d09 = document['getElementById']('user-avatar-input'), _0x229151 = document[_0x59a4d7(0x727)](_0x59a4d7(0xa8d)), _0xaa03a5 = document[_0x59a4d7(0x727)]('save-user-profile-button'), _0x18f698 = document[_0x59a4d7(0x727)]('editing-char-id'), _0x1569b3 = document[_0x59a4d7(0x727)](_0x59a4d7(0x750)), _0x562290 = document[_0x59a4d7(0x727)]('char-edit-name'), _0x3363c1 = document['getElementById'](_0x59a4d7(0x880)), _0x3269a3 = document[_0x59a4d7(0x727)](_0x59a4d7(0x722)), _0x326602 = document[_0x59a4d7(0x727)](_0x59a4d7(0x596)), _0x549d18 = document[_0x59a4d7(0x727)](_0x59a4d7(0x6b3)), _0x46860 = document['getElementById'](_0x59a4d7(0x1c9)), _0x4e1322 = document[_0x59a4d7(0x727)](_0x59a4d7(0x76e)), _0x5462dc = document[_0x59a4d7(0x727)](_0x59a4d7(0x188)); let _0x5cc51a = null; const _0x5eedac = _0x59a4d7(0x351), _0x52cd01 = _0x59a4d7(0x25f); _0x185973 = { 'characters': [], 'worldBooks': [], 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': _0x59a4d7(0x245), 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x35c1de() { const _0x4cdf5e = _0x59a4d7; try { const _0x5912bb = { 'version': 0x1, 'characters': _0x185973['characters'], 'worldBooks': _0x185973[_0x4cdf5e(0x177)], 'chats': _0x185973[_0x4cdf5e(0x6ac)], 'apiSettings': _0x185973['apiSettings'], 'preferences': _0x185973[_0x4cdf5e(0x55c)], 'activeChatId': _0x185973[_0x4cdf5e(0x572)], 'diaries': _0x185973['diaries'], 'friendCircles': _0x185973[_0x4cdf5e(0x6e1)], 'activeFriendCircleId': _0x185973[_0x4cdf5e(0xb0d)], 'userProfiles': _0x185973['userProfiles'], 'activeUserProfileId': _0x185973[_0x4cdf5e(0x571)], 'accountingData': _0x185973[_0x4cdf5e(0x524)], 'accountingLedger': _0x185973[_0x4cdf5e(0x5ab)], 'calendarEvents': _0x185973[_0x4cdf5e(0x1bf)] }; localStorage[_0x4cdf5e(0x295)](_0x4cdf5e(0x77d), JSON[_0x4cdf5e(0xa1d)](_0x5912bb)); } catch (_0x8282db) { console[_0x4cdf5e(0x815)](_0x4cdf5e(0x5bd), _0x8282db), _0x1de23f(_0x4cdf5e(0x437)); } } function _0x5d36da() { const _0x2a7fb9 = _0x59a4d7; let _0x35935d = null; try { _0x35935d = localStorage[_0x2a7fb9(0x8ee)]('appState'); } catch (_0x5be34c) { console[_0x2a7fb9(0x815)]('Failed\x20to\x20read\x20state\x20from\x20localStorage:', _0x5be34c); } if (_0x35935d) try { const _0x394b61 = JSON[_0x2a7fb9(0x189)](_0x35935d), _0x19d463 = { ..._0x185973 }, _0x4c930f = { ..._0x19d463, ..._0x394b61 }; _0x4c930f[_0x2a7fb9(0x55c)] = { ..._0x19d463['preferences'], ..._0x394b61[_0x2a7fb9(0x55c)] || {} }, _0x4c930f[_0x2a7fb9(0x8a2)] = { ..._0x19d463[_0x2a7fb9(0x8a2)], ..._0x394b61[_0x2a7fb9(0x8a2)] || {} }, Object[_0x2a7fb9(0x989)](_0x185973, _0x4c930f); } catch (_0x4ae58a) { if (_0x2a7fb9(0x1f0) !== _0x2a7fb9(0x67f)) console[_0x2a7fb9(0x815)](_0x2a7fb9(0x71b), _0x4ae58a), localStorage['removeItem']('appState'); else { _0xa388e('已经生成了今日账单！想看就去“看账本”标签页。'); return; } } const _0x22f87f = _0x185973['characters'][_0x2a7fb9(0xad2)] === 0x0; if (!_0x185973[_0x2a7fb9(0x6ac)][_0x2a7fb9(0x95a)](_0xbcbb1 => _0xbcbb1['id'] === _0x185973[_0x2a7fb9(0x572)])) { if (_0x2a7fb9(0xa45) !== _0x2a7fb9(0xa45)) return _0x2a7fb9(0x366); else _0x185973['activeChatId'] = _0x185973['chats'][0x0]?.['id'] || null; } return _0x35935d && _0x35c1de(), _0x22f87f; } function _0x2a4d47() { const _0x1c1dbb = _0x59a4d7; if (!_0x185973[_0x1c1dbb(0x572)]) return; try { localStorage['setItem'](_0x1c1dbb(0x6b1) + _0x185973[_0x1c1dbb(0x572)], JSON[_0x1c1dbb(0xa1d)](_0x185973['conversationHistory'])); } catch (_0x4cd30d) { console[_0x1c1dbb(0x815)](_0x1c1dbb(0xa1a), _0x4cd30d), _0x1de23f('无法保存聊天记录。'); } } function _0xc4fdb5() { const _0x4cccf2 = _0x59a4d7; if (!_0x185973[_0x4cccf2(0x572)]) { _0x185973[_0x4cccf2(0x338)] = [], _0xd16a30(); return; } let _0x578902 = null; try { _0x578902 = localStorage[_0x4cccf2(0x8ee)](_0x4cccf2(0x6b1) + _0x185973[_0x4cccf2(0x572)]); } catch (_0x3958b8) { console[_0x4cccf2(0x815)](_0x4cccf2(0x6b0) + _0x185973[_0x4cccf2(0x572)], _0x3958b8); } let _0x3ddcbc = []; if (_0x578902) { if (_0x4cccf2(0x640) !== _0x4cccf2(0x8aa)) try { const _0x1dafd8 = JSON[_0x4cccf2(0x189)](_0x578902); Array[_0x4cccf2(0x64b)](_0x1dafd8) && (_0x3ddcbc = _0x1dafd8[_0x4cccf2(0x249)](_0x56fcb7 => _0x56fcb7 && typeof _0x56fcb7 === 'object' && typeof _0x56fcb7[_0x4cccf2(0x25b)] === _0x4cccf2(0x486) && typeof _0x56fcb7[_0x4cccf2(0x725)] !== 'undefined')); } catch (_0x1d67bc) { console['error'](_0x4cccf2(0x276) + _0x185973[_0x4cccf2(0x572)] + _0x4cccf2(0x762), _0x1d67bc); try { 'NxoXc' !== _0x4cccf2(0x554) ? (_0x53a446[_0x4cccf2(0x7f8)] = _0x3d5917, _0xa9e481 = !![]) : localStorage['removeItem']('chatHistory_' + _0x185973[_0x4cccf2(0x572)]); } catch (_0x4bfe8f) { _0x4cccf2(0x17a) === 'lPCcn' ? (_0x26df91[_0x4cccf2(0x7bb)][_0x4cccf2(0x99b)](_0x4cccf2(0x705)), _0x5e8108['classList'][_0x4cccf2(0x99b)](_0x4cccf2(0x344)), _0x480a87[_0x4cccf2(0x7bb)]['add']('is-visible'), _0x3872ca(() => { const _0x10a7e3 = _0x4cccf2; _0x45ddff[_0x10a7e3(0x7bb)][_0x10a7e3(0x7ef)]('is-visible', _0x10a7e3(0x344)), _0x563fe9[_0x10a7e3(0x7bb)][_0x10a7e3(0x7ef)](_0x10a7e3(0x705)), _0x532aaa[_0x10a7e3(0x943)] = _0x4343fb, _0x55b205(), _0x4f02cd['isAnimatingDiary'] = ![]; }, 0x2bc)) : console[_0x4cccf2(0x815)](_0x4cccf2(0x33b), _0x4bfe8f); } } else { _0x35a349(); return; } } _0x185973[_0x4cccf2(0x338)] = _0x3ddcbc, _0x34f0f4['innerHTML'] = ''; if (_0x185973['conversationHistory']) { if (_0x4cccf2(0x4ed) === 'PsUdK') { const _0x1910c3 = _0x45250e(_0x38de51[_0x4cccf2(0x660)]); return _0x1910c3?.[_0x4cccf2(0x41b)] || _0x4cccf2(0x226); } else _0x185973[_0x4cccf2(0x338)][_0x4cccf2(0x3ea)]((_0x5973a2, _0x10c016) => _0x2d578d(_0x5973a2, _0x10c016)); } setTimeout(() => { const _0x552188 = _0x4cccf2; _0x34f0f4[_0x552188(0xb0e)] = _0x34f0f4[_0x552188(0x784)]; }, 0x0); } async function _0x23c1c2() { const _0x3e26d6 = _0x59a4d7, _0x1be2e0 = document[_0x3e26d6(0x727)]('home-screen'); if (!_0x1be2e0) { console['error'](_0x3e26d6(0x890)); return; } try { let _0x4dc73e = await _0x27b140(_0x3e26d6(0x1c6)); if (!_0x4dc73e) { if ('AnPKi' !== _0x3e26d6(0x6d9)) { const _0x3810eb = _0x400ef4[_0x3e26d6(0x189)](_0x2d1ee7), _0x32732c = { ..._0x84820e }, _0x392590 = { ..._0x32732c, ..._0x3810eb }; _0x392590[_0x3e26d6(0x55c)] = { ..._0x32732c[_0x3e26d6(0x55c)], ..._0x3810eb[_0x3e26d6(0x55c)] || {} }, _0x392590[_0x3e26d6(0x8a2)] = { ..._0x32732c[_0x3e26d6(0x8a2)], ..._0x3810eb[_0x3e26d6(0x8a2)] || {} }, _0x5bcfbe['assign'](_0x42cb86, _0x392590); } else { const _0xb37f34 = localStorage[_0x3e26d6(0x8ee)](_0x3e26d6(0x623)); if (_0xb37f34) { if ('XmCat' === _0x3e26d6(0x35e)) console['log']('正在为你搬运旧壁纸到新仓库...'), _0x4dc73e = await _0x3a1fc9(_0xb37f34), await _0x5bc724(_0x3e26d6(0x1c6), _0x4dc73e), localStorage[_0x3e26d6(0x778)](_0x3e26d6(0x623)); else { _0xf18012(_0x3e26d6(0x61a), 'worldBook'); if (_0x4c5488) { const _0x546c52 = _0xa7e1b0[_0x3e26d6(0x177)][_0x3e26d6(0x95a)](_0x1d8e1d => _0x1d8e1d['id'] === _0xfebd55); if (!_0x546c52) return; _0x1a1214[_0x3e26d6(0x727)](_0x3e26d6(0x499))['value'] = _0x546c52['id'], _0x397fca[_0x3e26d6(0x727)](_0x3e26d6(0x607))[_0x3e26d6(0xb33)] = _0x3e26d6(0xae0), _0xbfa4fd['getElementById']('world-book-edit-name')['value'] = _0x546c52['name'], _0x2cec8c['getElementById'](_0x3e26d6(0x3e8))[_0x3e26d6(0x525)] = _0x546c52[_0x3e26d6(0x725)]; } else _0x223504[_0x3e26d6(0x727)](_0x3e26d6(0x499))['value'] = '', _0x1d8399[_0x3e26d6(0x727)](_0x3e26d6(0x607))[_0x3e26d6(0xb33)] = _0x3e26d6(0x2d3), _0x4cf06b[_0x3e26d6(0x727)]('world-book-edit-name')[_0x3e26d6(0x525)] = '', _0x9ded9d[_0x3e26d6(0x727)](_0x3e26d6(0x3e8))[_0x3e26d6(0x525)] = ''; } } } } _0x4dc73e ? (_0x1be2e0[_0x3e26d6(0xa8f)][_0x3e26d6(0x11b)] = 'url(' + URL[_0x3e26d6(0x8ca)](_0x4dc73e) + ')', _0x1be2e0['style'][_0x3e26d6(0x62b)] = 'cover', _0x1be2e0['style'][_0x3e26d6(0x2af)] = _0x3e26d6(0x7b0)) : _0x1be2e0[_0x3e26d6(0xa8f)][_0x3e26d6(0x11b)] = ''; } catch (_0x51b119) { console[_0x3e26d6(0x815)](_0x3e26d6(0x92e), _0x51b119); if (_0x1be2e0) { if (_0x3e26d6(0x5e3) === _0x3e26d6(0x5e8)) { _0x562263(_0x3e26d6(0x9ad)); return; } else _0x1be2e0[_0x3e26d6(0xa8f)]['backgroundImage'] = ''; } } } function _0x42cb30() { const _0x34c69f = _0x59a4d7; if (_0x34c69f(0x1a9) !== _0x34c69f(0x1a9)) { const _0x2aa881 = { 'id': _0x34c69f(0x950) + _0x38bbe8['now']() + '_' + _0x1a4d4a[_0x34c69f(0xb26)](), 'name': _0x47cb56['name'], 'content': _0x5f20b1['content'] }; _0x3c456d[_0x34c69f(0x177)][_0x34c69f(0x92b)](_0x2aa881), _0x593325['push'](_0x2aa881['id']); } else { const _0x4397f2 = localStorage['getItem']('customFeedWallpaper'); _0x4397f2 ? document[_0x34c69f(0x727)]('music-screen')['style'][_0x34c69f(0x9df)]('--feed-bg-image', 'url(' + _0x4397f2 + ')') : document[_0x34c69f(0x727)](_0x34c69f(0x749))[_0x34c69f(0xa8f)][_0x34c69f(0x9df)]('--feed-bg-image', _0x34c69f(0x941)); } } async function _0x1d6a37(_0x5e4861) { const _0x2bc80b = _0x59a4d7; if (_0x2bc80b(0x14b) !== _0x2bc80b(0x14b)) { const _0x27a6e8 = _0x209c13[_0x2bc80b(0xa1d)](_0x2dd065[_0x2bc80b(0x5be)] || [])[_0x2bc80b(0xa89)](/'/g, '&apos;')[_0x2bc80b(0xa89)](/"/g, '&quot;'), _0x232852 = _0x1e2902[_0x2bc80b(0x511)] || _0x2bc80b(0x2d2); return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0x1f5786 < _0x4196bb[_0x2bc80b(0xad2)] - 0x1 ? _0x2bc80b(0x125) : '') + '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27' + _0x27a6e8 + _0x2bc80b(0x9e7) + _0x232852 + _0x2bc80b(0x191) + _0x2e4771 + _0x2bc80b(0x316) + _0x232852['charAt'](0x0) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x232852 + _0x2bc80b(0x6ad) + (_0xfdf82c[_0x2bc80b(0x7eb)] || '') + _0x2bc80b(0x1c5); } else try { await _0x5bc724(_0x2bc80b(0x1c6), _0x5e4861), await _0x23c1c2(), _0x1de23f(_0x2bc80b(0x24b)); } catch (_0x47ffea) { 'PcHza' !== 'iNAmx' ? (console[_0x2bc80b(0x815)](_0x2bc80b(0x3ae), _0x47ffea), _0x1de23f(_0x2bc80b(0x97f) + _0x47ffea[_0x2bc80b(0x140)])) : (_0x14e189[_0x2bc80b(0x610)] = _0x43d681[_0x2bc80b(0x610)] === _0x2bc80b(0x245) ? 'galgame' : _0x2bc80b(0x245), _0xa21df4()); } } function _0x1e574b(_0x1683c9) { const _0x2d37f7 = _0x59a4d7; if (_0x2d37f7(0x9f9) === 'HNqmp') _0x16dbc2 += _0x2d37f7(0x745) + _0x8dea86[_0x2d37f7(0xa7e)] + '”。\x0a'; else { const _0xfe1ced = { 'quotedMessage': null, 'content': _0x1683c9 }, _0x577e0d = _0x1683c9[_0x2d37f7(0x5ce)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x577e0d && (_0xfe1ced[_0x2d37f7(0x4b6)] = { 'sender': _0x577e0d[0x1][_0x2d37f7(0x40e)](), 'content': _0x577e0d[0x2]['trim']() }, _0xfe1ced[_0x2d37f7(0x725)] = _0x1683c9['substring'](_0x577e0d[0x0][_0x2d37f7(0xad2)])[_0x2d37f7(0x40e)]()), _0xfe1ced; } } const _0x423f94 = document[_0x59a4d7(0x727)](_0x59a4d7(0x55b)), _0x1696c7 = document[_0x59a4d7(0x727)]('message-action-backdrop'), _0x543dd3 = document[_0x59a4d7(0x727)]('edit-message-button'), _0x481be3 = document[_0x59a4d7(0x727)](_0x59a4d7(0x8c8)), _0x424507 = document[_0x59a4d7(0x727)]('cancel-action-button'), _0x370b8b = document[_0x59a4d7(0x727)]('quote-message-button'), _0x141f05 = document[_0x59a4d7(0x727)](_0x59a4d7(0xb02)), _0x389573 = document[_0x59a4d7(0x727)](_0x59a4d7(0xabd)), _0x14a88c = document[_0x59a4d7(0x727)](_0x59a4d7(0x8c2)), _0x23d938 = document[_0x59a4d7(0x727)]('save-edit-button'), _0x77783b = document[_0x59a4d7(0x727)]('cancel-edit-button'); let _0x710d9f = null; function _0x3d6e63(_0x3baf0e) { const _0x198047 = _0x59a4d7; _0x198047(0x611) === _0x198047(0x611) ? (_0x710d9f = _0x3baf0e, _0x423f94['classList']['add'](_0x198047(0xa02))) : _0x3a81f8['error'](_0x198047(0x159), _0x5e7716); } function _0x493dcc() { const _0x5cf0dc = _0x59a4d7; if (_0x5cf0dc(0x996) !== _0x5cf0dc(0x450)) _0x423f94[_0x5cf0dc(0x7bb)][_0x5cf0dc(0x7ef)]('show'); else { const _0x32d3db = _0xc5a9fb[_0x5cf0dc(0x7a2)]('option'); _0x32d3db[_0x5cf0dc(0x525)] = _0x26bdb5['id'], _0x32d3db[_0x5cf0dc(0xb33)] = _0x49834f[_0x5cf0dc(0x41b)], _0x2b9e71[_0x5cf0dc(0x322)](_0x32d3db); } } function _0x286df0() { const _0x3cfa58 = _0x59a4d7; _0x3cfa58(0x173) !== _0x3cfa58(0x6ab) ? (_0x493dcc(), _0x710d9f = null) : _0xbb738c(_0x5883a[_0x3cfa58(0xa1e)][0x0]); } function _0x3551d5() { const _0x4d3520 = _0x59a4d7; if (_0x710d9f === null) return; _0x185973[_0x4d3520(0x338)][_0x4d3520(0x81e)](_0x710d9f, 0x1), _0x2a4d47(), _0x2207b1(), _0x286df0(); } function _0x1062ab() { const _0x52cd86 = _0x59a4d7; if (_0x52cd86(0x332) !== _0x52cd86(0x84d)) { if (_0x710d9f === null) return; const _0x4e1742 = _0x185973['conversationHistory'][_0x710d9f]; if (!_0x4e1742) return; _0x14a88c[_0x52cd86(0x525)] = _0x4e1742['content'], _0x493dcc(), _0x141f05[_0x52cd86(0x7bb)][_0x52cd86(0x99b)]('show'), _0x14a88c[_0x52cd86(0x9d3)](); } else _0x5899a3[_0x52cd86(0x5b2)] = _0x52cd86(0x7ae) + _0x160f80[_0x52cd86(0x418)](_0x52cd86(0x8f4), { 'hour': '2-digit', 'minute': '2-digit', 'hour12': ![] }) + _0x52cd86(0x829); } function _0x1cd46d() { const _0x433d20 = _0x59a4d7; if ('UyERz' === _0x433d20(0x54f)) { if (_0x710d9f === null) return; const _0x3aefeb = _0x14a88c['value'][_0x433d20(0x40e)](); if (_0x3aefeb === '') { _0x8e3da(); return; } const _0xa61c0 = _0x185973[_0x433d20(0x338)][_0x710d9f]; _0xa61c0 && (_0xa61c0['content'] = _0x3aefeb, _0x2a4d47(), _0x2207b1()), _0x141f05[_0x433d20(0x7bb)][_0x433d20(0x7ef)](_0x433d20(0xa02)), _0x710d9f = null; } else _0x13fba3[_0x433d20(0x92b)]('[' + _0x50315c(_0x349dc3) + ']\x20' + _0x3b073e['content']); } function _0x8e3da() { const _0x5178f8 = _0x59a4d7; _0x141f05[_0x5178f8(0x7bb)]['remove'](_0x5178f8(0xa02)), _0x710d9f = null; } _0x1696c7[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x286df0), _0x424507['addEventListener'](_0x59a4d7(0x9c7), _0x286df0), _0x481be3[_0x59a4d7(0x65f)]('click', _0x3551d5), _0x543dd3[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x1062ab), _0x370b8b[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0xe15dce), _0x4eec86['addEventListener'](_0x59a4d7(0x9c7), _0x21e81a), _0x23d938[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x1cd46d), _0x77783b[_0x59a4d7(0x65f)]('click', _0x8e3da), _0x389573[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x8e3da); function _0xe15dce() { const _0x4c1736 = _0x59a4d7; if (_0x710d9f === null) return; const _0x4ec1db = _0x185973[_0x4c1736(0x338)][_0x710d9f]; if (!_0x4ec1db) return; const _0x26320e = _0x3b6e44(); let _0x455999 = '未知'; if (_0x4ec1db[_0x4c1736(0x25b)] === _0x4c1736(0x34d)) _0x455999 = _0x185973['userProfile'][_0x4c1736(0x41b)] || '我'; else { if ('GZCFJ' !== _0x4c1736(0x1ed)) { const _0x27a371 = _0x4ec1db['senderId'] || _0x26320e?.[_0x4c1736(0xa1e)][0x0], _0x1200ee = _0xec7e1c(_0x27a371); _0x455999 = _0x1200ee ? _0x1200ee[_0x4c1736(0x41b)] : '角色'; } else for (const _0x48c6a4 in _0x3b8975) { _0x944bac['style'][_0x48c6a4] = _0xb14ff7[_0x48c6a4]; } } let _0x4ef4d6 = _0x4ec1db['content'] || ''; if (_0x4ec1db['displayUrl']) _0x4ef4d6 = _0x4c1736(0x31c); if (_0x4ec1db['image']) _0x4ef4d6 = _0x4c1736(0x87c); if (_0x4ef4d6['length'] > 0x32) _0x4ef4d6 = _0x4ef4d6['substring'](0x0, 0x32) + _0x4c1736(0x337); _0x185973[_0x4c1736(0x139)] = { 'sender': _0x455999, 'content': _0x4ef4d6 }, _0x203270(), _0x286df0(), _0x3a0975[_0x4c1736(0x9d3)](); } function _0x203270() { const _0x212026 = _0x59a4d7; if (!_0x185973[_0x212026(0x139)]) return; _0x6b1326[_0x212026(0xb33)] = _0x212026(0x8b8) + _0x185973['activeQuote'][_0x212026(0x119)], _0x1164df[_0x212026(0xb33)] = _0x185973[_0x212026(0x139)][_0x212026(0x725)], _0x15d69f['style']['display'] = 'block'; } function _0x21e81a() { const _0x1d1276 = _0x59a4d7; 'UjeOa' !== _0x1d1276(0xab6) ? (_0x185973[_0x1d1276(0x139)] = null, _0x15d69f[_0x1d1276(0xa8f)]['display'] = _0x1d1276(0x941)) : (_0x1e3a14[_0x1d1276(0x727)](_0x1d1276(0x499))[_0x1d1276(0x525)] = '', _0x5dc8a3[_0x1d1276(0x727)](_0x1d1276(0x607))['textContent'] = _0x1d1276(0x2d3), _0x4d1121[_0x1d1276(0x727)](_0x1d1276(0xadd))[_0x1d1276(0x525)] = '', _0x1c232e['getElementById'](_0x1d1276(0x3e8))[_0x1d1276(0x525)] = ''); } function _0x8cf86(_0x3b6fd5, _0x9e898) { const _0x18fac9 = _0x59a4d7, _0x39f15e = document[_0x18fac9(0x727)](_0x18fac9(0x8e5)); _0x39f15e && (_0x3b6fd5 === _0x18fac9(0x3d4) ? _0x39f15e[_0x18fac9(0xa8f)][_0x18fac9(0x8f8)] = _0x18fac9(0xa3c) : _0x39f15e['style'][_0x18fac9(0x8f8)] = 'none'), _0x5cc51a = _0x9e898 || null, Object[_0x18fac9(0x81b)](_0x1bf96a)[_0x18fac9(0x3ea)](_0x4e382d => _0x4e382d[_0x18fac9(0x7bb)][_0x18fac9(0x7ef)](_0x18fac9(0x1b5))), _0x1bf96a[_0x3b6fd5] && _0x1bf96a[_0x3b6fd5][_0x18fac9(0x7bb)]['add'](_0x18fac9(0x1b5)), _0x3b6fd5 !== 'chat' && _0x4a8a7d[_0x18fac9(0x7bb)][_0x18fac9(0x7ef)](_0x18fac9(0x297)); } function _0x4f33cb(_0x193d74) { const _0x269b9e = _0x59a4d7; _0x193d74 ? _0x4a8a7d[_0x269b9e(0x7bb)]['add'](_0x269b9e(0x297)) : _0x269b9e(0x4de) !== _0x269b9e(0x27b) ? _0x4a8a7d[_0x269b9e(0x7bb)]['remove'](_0x269b9e(0x297)) : _0x43d556(_0x4a95e7[_0x269b9e(0x378)](_0x43d9a5, _0x4a4abb)); } async function _0x1f52e3() { const _0x11180a = _0x59a4d7; _0x5e4fd1['innerHTML'] = ''; for (const _0x2db2ea of _0x185973[_0x11180a(0x6ac)]) { const _0x4042da = document[_0x11180a(0x7a2)]('li'); _0x4042da['className'] = _0x11180a(0x541), _0x4042da[_0x11180a(0xa13)]['id'] = _0x2db2ea['id']; let _0x449466 = _0xcd0fda, _0x4a0885 = '群聊', _0x56a1ad = ''; if (_0x2db2ea['type'] === _0x11180a(0x261)) { const _0x5d985a = _0xec7e1c(_0x2db2ea['participantIds'][0x0]); if (_0x5d985a) { const _0x4bf0ab = await _0x27b140(_0x11180a(0x6e6) + _0x5d985a['id']); _0x4bf0ab ? _0x449466 = URL['createObjectURL'](_0x4bf0ab) : 'QUuGI' !== _0x11180a(0x4bd) ? _0x36f5b9 = _0x4abb90[_0x11180a(0x189)](_0x4cd3f1) : _0x449466 = _0x5d985a[_0x11180a(0xa44)] || _0xcd0fda, _0x4a0885 = _0x5d985a[_0x11180a(0x41b)] || _0x11180a(0x78d), _0x56a1ad = _0x5d985a['remark'] || '私聊'; } else 'LAIzu' !== 'LAIzu' ? (_0x49e56a['textContent'] = _0x11180a(0x66a), _0x1b0bcc[_0x11180a(0x525)] = '', _0x3209b2[_0x11180a(0x525)] = _0x11180a(0x3f2) + (_0x27635c[_0x11180a(0x6e1)]['length'] + 0x1), _0x2858a0[_0x11180a(0x525)] = _0xdf812['activeUserProfileId'], _0x5f3ad8[_0x11180a(0xa8f)][_0x11180a(0x8f8)] = 'none') : (_0x4a0885 = _0x11180a(0x2e0), _0x56a1ad = _0x11180a(0x802)); } else { _0x4a0885 = _0x2db2ea[_0x11180a(0x41b)] || _0x11180a(0x921), _0x56a1ad = _0x2db2ea[_0x11180a(0xa1e)]['length'] + '\x20个成员'; const _0x514ea6 = await _0x27b140('group_avatar_' + _0x2db2ea['id']); if (_0x514ea6) _0x449466 = URL[_0x11180a(0x8ca)](_0x514ea6); } _0x4042da[_0x11180a(0x5b2)] = _0x11180a(0x1b3) + _0x449466 + _0x11180a(0x667) + _0x4a0885 + _0x11180a(0x431) + _0x56a1ad + _0x11180a(0x49b), _0x4042da[_0x11180a(0x99d)](_0x11180a(0x22d))['addEventListener'](_0x11180a(0x9c7), () => { _0xdcd83e(_0x2db2ea['id']), _0x4f33cb(!![]); }), _0x5e4fd1[_0x11180a(0x322)](_0x4042da); } } async function _0x5ecce5() { const _0x575b1b = _0x59a4d7, _0x5914d1 = document[_0x575b1b(0x727)](_0x575b1b(0x92d)); _0x5914d1[_0x575b1b(0x5b2)] = ''; const _0x335778 = _0x185973['characters'][_0x575b1b(0x249)](_0x27b4c4 => _0x185973[_0x575b1b(0x6ac)]['some'](_0x5af3dd => _0x5af3dd[_0x575b1b(0x117)] === _0x575b1b(0x261) && _0x5af3dd[_0x575b1b(0xa1e)][_0x575b1b(0x955)](_0x27b4c4['id']))); if (_0x335778[_0x575b1b(0xad2)] === 0x0) { if (_0x575b1b(0x6a3) !== _0x575b1b(0x9c4)) { _0x5914d1['innerHTML'] = _0x575b1b(0x216); return; } else _0x4427dc['type'] === 'group' && (_0x3c04da[_0x575b1b(0xa1e)] = _0x4ad60c['participantIds']['filter'](_0x1fc778 => _0x1fc778 !== _0x4f8154)); } for (const _0x5387ef of _0x335778) { const _0x549b6e = document[_0x575b1b(0x7a2)]('li'); _0x549b6e[_0x575b1b(0x8f1)] = 'character-item', _0x549b6e[_0x575b1b(0xa13)][_0x575b1b(0x61e)] = _0x5387ef['id']; const _0x63ca06 = await _0x27b140(_0x575b1b(0x6e6) + _0x5387ef['id']), _0x181b96 = _0x63ca06 ? URL[_0x575b1b(0x8ca)](_0x63ca06) : _0x5387ef['avatar'] || _0xcd0fda; _0x549b6e['innerHTML'] = _0x575b1b(0x12c) + _0x181b96 + _0x575b1b(0xa7d) + _0x5387ef[_0x575b1b(0x41b)] + _0x575b1b(0x3d1) + (_0x5387ef[_0x575b1b(0x3ca)] || '私聊') + _0x575b1b(0x376), _0x549b6e[_0x575b1b(0x65f)]('click', () => { const _0x2909ab = _0x575b1b; _0x2909ab(0x7c6) !== _0x2909ab(0x7c6) ? (_0x20fced[_0x2909ab(0x338)][_0x4261d7][_0x2909ab(0x1fe)] = !![], _0x1b3fd2()) : _0xf8ed35(_0x5387ef['id']); }), _0x5914d1[_0x575b1b(0x322)](_0x549b6e); } } async function _0xf8ed35(_0x3fe754) { const _0x326fb5 = _0x59a4d7; if (_0x326fb5(0x700) !== _0x326fb5(0x700)) { _0x307e82('名字不能为空！'); return; } else { const _0x1d4e48 = _0xec7e1c(_0x3fe754); if (!_0x1d4e48) return; document[_0x326fb5(0x727)](_0x326fb5(0x136))['src'] = '', _0x185973[_0x326fb5(0x7b7)] = _0x3fe754; const _0x2e98ef = _0x185973[_0x326fb5(0x6ac)][_0x326fb5(0x95a)](_0x589509 => _0x589509[_0x326fb5(0x117)] === _0x326fb5(0x261) && _0x589509[_0x326fb5(0xa1e)]['includes'](_0x3fe754)); _0x2e98ef ? _0x326fb5(0x59c) !== _0x326fb5(0x59c) ? (_0x534372(), _0x4dd52a(_0x326fb5(0x4b2), _0x326fb5(0x3d2))) : (_0x185973[_0x326fb5(0x572)] = _0x2e98ef['id'], _0x35c1de(), _0xc4fdb5(), _0x1331e1(_0x3fe754)) : _0x185973[_0x326fb5(0x338)] = []; document[_0x326fb5(0x727)](_0x326fb5(0xaad))[_0x326fb5(0xb33)] = _0x1d4e48[_0x326fb5(0x41b)]; const _0x138f1c = document[_0x326fb5(0x727)](_0x326fb5(0x9f3)); try { if (_0x326fb5(0x538) === _0x326fb5(0x538)) { const _0xdd0595 = await _0x27b140(_0x326fb5(0x8a1) + _0x3fe754); if (_0xdd0595) { if (_0x326fb5(0x377) !== _0x326fb5(0x23c)) _0x138f1c[_0x326fb5(0xa8f)][_0x326fb5(0x11b)] = _0x326fb5(0x142) + URL[_0x326fb5(0x8ca)](_0xdd0595) + '\x27)', _0x138f1c[_0x326fb5(0xa8f)][_0x326fb5(0x62b)] = _0x326fb5(0x766), _0x138f1c[_0x326fb5(0xa8f)][_0x326fb5(0x2af)] = _0x326fb5(0x7b0); else { if (_0xbb7586 === null) return; _0x24676f['conversationHistory'][_0x326fb5(0x81e)](_0x3fe6d7, 0x1), _0x443098(), _0x4ed80f(), _0x42a11a(); } } else _0x138f1c['style'][_0x326fb5(0x11b)] = 'none'; } else _0x26d348(_0x501e98, _0x4c2991[_0x326fb5(0x6ba)][_0x326fb5(0x409)][0x0]); } catch (_0x3cd49b) { console['error']('加载见面背景失败\x20for\x20' + _0x3fe754 + ':', _0x3cd49b), _0x138f1c[_0x326fb5(0xa8f)][_0x326fb5(0x11b)] = _0x326fb5(0x941); } _0x42a3c9(), _0x394803(); if (_0x18ed5e) clearInterval(_0x18ed5e); _0x5e984a(), _0x18ed5e = setInterval(_0x5e984a, 0x2710), document[_0x326fb5(0x727)](_0x326fb5(0x46f))[_0x326fb5(0xa8f)][_0x326fb5(0x8f8)] = 'block', _0x8cf86(_0x326fb5(0x856), _0x326fb5(0x4dd)); } } function _0x394803() { const _0x55ddd5 = _0x59a4d7, _0x3a872b = document[_0x55ddd5(0x727)](_0x55ddd5(0x97d)); _0x3a872b[_0x55ddd5(0x5b2)] = ''; const _0x4a8b69 = _0x3a872b[_0x55ddd5(0x99d)]('#message-anchor'); if (_0x4a8b69) _0x4a8b69[_0x55ddd5(0x7ef)](); _0x185973[_0x55ddd5(0x338)] && (_0x55ddd5(0x6ae) !== _0x55ddd5(0x5da) ? _0x185973[_0x55ddd5(0x338)]['forEach']((_0x322a73, _0x30d4cd) => { const _0x190b82 = _0x55ddd5; if (_0x190b82(0x1d4) === _0x190b82(0x1d4)) { if (!_0x322a73['isOffline'] || _0x322a73[_0x190b82(0x25b)] === _0x190b82(0x63a)) return; const _0x4529eb = document[_0x190b82(0x7a2)]('p'); _0x4529eb['dataset'][_0x190b82(0xa50)] = _0x30d4cd; const _0x925d7f = _0x322a73[_0x190b82(0x725)]['replace'](/\n/g, _0x190b82(0x4a9)); let _0x195b99 = '', _0x5a7f1f = ''; const _0x28f9fa = _0x16366b(_0x185973[_0x190b82(0x572)]); if (_0x322a73[_0x190b82(0x25b)] === _0x190b82(0x34d)) _0x195b99 = _0x28f9fa[_0x190b82(0x41b)] || '我', _0x5a7f1f = _0x190b82(0x454); else { if (_0x322a73['role'] === _0x190b82(0x72a)) { if (_0x190b82(0x7ed) !== 'yQkOl') _0x739165(_0x190b82(0x73b)); else { const _0x2ec428 = _0xec7e1c(_0x322a73[_0x190b82(0x660)] || _0x185973['activeMeetingCharId']); _0x195b99 = _0x2ec428?.[_0x190b82(0x41b)] || '角色', _0x5a7f1f = 'speaker-ai'; } } } _0x4529eb[_0x190b82(0xa8f)]['backgroundColor'] = _0x190b82(0x927), _0x4529eb[_0x190b82(0xa8f)]['padding'] = '15px\x2020px', _0x4529eb[_0x190b82(0xa8f)]['borderRadius'] = _0x190b82(0x8e8), _0x4529eb['style'][_0x190b82(0x772)] = _0x190b82(0xa95), _0x195b99 ? _0x190b82(0x88d) !== _0x190b82(0x598) ? _0x4529eb[_0x190b82(0x5b2)] = '<span\x20class=\x22' + _0x5a7f1f + _0x190b82(0x33d) + (_0x5a7f1f === _0x190b82(0x454) ? _0x190b82(0x967) : _0x190b82(0x578)) + _0x190b82(0x8fc) + _0x195b99 + _0x190b82(0x533) + _0x925d7f : _0x3bbc6f[_0x190b82(0x815)]('Failed\x20to\x20read\x20history\x20for\x20chat\x20' + _0x1d0d39[_0x190b82(0x572)], _0x38624b) : (_0x4529eb[_0x190b82(0x8f1)] = _0x190b82(0x1a4), _0x4529eb['style'][_0x190b82(0x7b2)] = _0x190b82(0x88a), _0x4529eb['style'][_0x190b82(0xa33)] = '#d1d5db', _0x4529eb[_0x190b82(0x5b2)] = _0x925d7f), _0x3a872b['appendChild'](_0x4529eb); } else _0x57895c[_0x190b82(0x9c7)](); }) : _0x2c4dc5(_0x2e86a2)); if (_0x185973[_0x55ddd5(0x608)]) { let _0x2d5773 = _0x3a872b[_0x55ddd5(0x99d)](_0x55ddd5(0x30a)); !_0x2d5773 && ('SwsGM' !== 'SwsGM' ? (_0x153e24(_0x55ddd5(0xb17), _0x55ddd5(0x3d4)), _0x29653d(() => _0x4dc19b(), 0x64)) : (_0x2d5773 = document[_0x55ddd5(0x7a2)]('div'), _0x2d5773[_0x55ddd5(0x8f1)] = 'typing-indicator', _0x2d5773[_0x55ddd5(0xb33)] = _0x55ddd5(0x978), _0x2d5773[_0x55ddd5(0xa8f)][_0x55ddd5(0x3d0)] = _0x55ddd5(0x927), _0x2d5773['style'][_0x55ddd5(0x1f7)] = _0x55ddd5(0x147), _0x2d5773[_0x55ddd5(0xa8f)][_0x55ddd5(0x716)] = _0x55ddd5(0x8e8), _0x3a872b[_0x55ddd5(0x322)](_0x2d5773))); } const _0x5e2600 = document[_0x55ddd5(0x7a2)](_0x55ddd5(0xb08)); _0x5e2600['id'] = _0x55ddd5(0x714), _0x3a872b[_0x55ddd5(0x322)](_0x5e2600), setTimeout(() => { const _0x32908e = _0x55ddd5; _0x5e2600[_0x32908e(0x26b)]({ 'behavior': 'auto', 'block': _0x32908e(0x4db) }); }, 0x32); } function _0x2207b1() { const _0x337d13 = _0x59a4d7, _0x957518 = document[_0x337d13(0x99d)](_0x337d13(0x71a)); if (!_0x957518) return; _0x957518['id'] === _0x337d13(0x9d9) ? _0x394803() : _0x337d13(0x314) === _0x337d13(0x314) ? _0xd16a30() : _0x337d13(0x2e8); } function _0xd16a30() { const _0x1edf7f = _0x59a4d7, _0x4557f9 = _0x185973[_0x1edf7f(0x338)][_0x1edf7f(0x249)](_0x26327f => !_0x26327f[_0x1edf7f(0x350)] && _0x26327f[_0x1edf7f(0x25b)] !== _0x1edf7f(0x63a)); if (_0x4557f9[_0x1edf7f(0xad2)] > _0x185973[_0x1edf7f(0x1da)]) { if (_0x1edf7f(0x5fa) === 'DCALb') { let _0x363d83 = _0x34f0f4[_0x1edf7f(0x99d)](_0x1edf7f(0x87a)); if (!_0x363d83) { if (_0x1edf7f(0x855) !== 'azJCq') _0x363d83 = document[_0x1edf7f(0x7a2)](_0x1edf7f(0x904)), _0x363d83[_0x1edf7f(0xb33)] = '加载更多聊天记录', _0x363d83['className'] = _0x1edf7f(0x1f5), _0x363d83['style']['width'] = _0x1edf7f(0xa9d), _0x363d83['style'][_0x1edf7f(0xa05)] = _0x1edf7f(0x979), _0x363d83['style'][_0x1edf7f(0x1f7)] = '8px\x2016px', _0x363d83[_0x1edf7f(0x88c)] = () => { const _0x4ccc33 = _0x1edf7f; if ('SFNUx' === _0x4ccc33(0x5d6)) { const _0x2c3d05 = _0x34f0f4, _0x5e330d = _0x2c3d05[_0x4ccc33(0x784)], _0x1c83e5 = _0x2c3d05[_0x4ccc33(0xb0e)]; _0x185973[_0x4ccc33(0x1da)] += 0x64, _0xd16a30(), requestAnimationFrame(() => { const _0x1d7c83 = _0x4ccc33; if (_0x1d7c83(0x939) !== _0x1d7c83(0x939)) _0x28e33a = _0xa4d769['at'](-0x1); else { const _0xc3e22d = _0x2c3d05[_0x1d7c83(0x784)]; _0x2c3d05['scrollTop'] = _0x1c83e5 + (_0xc3e22d - _0x5e330d); } }); } else _0x57ef47[_0x4ccc33(0x322)](_0x1078ee), _0x4d410a[_0x4ccc33(0x322)](_0x269a24); }, _0x34f0f4[_0x1edf7f(0x472)] ? _0x1edf7f(0x2e5) !== _0x1edf7f(0x2e5) ? _0x5a0f01(_0xe6053b) : _0x34f0f4[_0x1edf7f(0x4c7)](_0x363d83, _0x34f0f4[_0x1edf7f(0x472)]) : _0x34f0f4[_0x1edf7f(0x322)](_0x363d83); else try { const _0x526a53 = _0x41b942[_0x1edf7f(0x189)](_0x241c34[_0x1edf7f(0x8ee)](_0x1edf7f(0x399)) || '{}'), _0x5ddf2e = { ..._0x526a53, ..._0x4b5daa }; _0x5894a3[_0x1edf7f(0x295)]('badgeState', _0x335ae1[_0x1edf7f(0xa1d)](_0x5ddf2e)); } catch (_0x4f6a63) { _0x3969a6[_0x1edf7f(0x815)](_0x1edf7f(0x22e), _0x4f6a63); } } } else _0x5b22c5['push'](_0x13451e); } else { const _0x3a5598 = _0x34f0f4['querySelector'](_0x1edf7f(0x87a)); if (_0x3a5598) _0x3a5598['remove'](); } Array[_0x1edf7f(0x81a)](_0x34f0f4[_0x1edf7f(0x8e2)])['forEach'](_0x1a7d4f => { const _0x8361e = _0x1edf7f; !_0x1a7d4f[_0x8361e(0x7bb)]['contains']('load-more-btn') && _0x1a7d4f[_0x8361e(0x7ef)](); }); const _0x25774b = _0x4557f9[_0x1edf7f(0x247)](-_0x185973[_0x1edf7f(0x1da)]); _0x25774b[_0x1edf7f(0x3ea)](_0x273748 => { const _0x5af697 = _0x1edf7f, _0x2cb972 = _0x185973[_0x5af697(0x338)][_0x5af697(0x209)](_0x273748); _0x2cb972 > -0x1 && _0x2d578d(_0x273748, _0x2cb972); }); if (_0x185973[_0x1edf7f(0x608)]) { let _0xff4143 = _0x34f0f4[_0x1edf7f(0x99d)](_0x1edf7f(0x30a)); !_0xff4143 && (_0xff4143 = document['createElement'](_0x1edf7f(0xb08)), _0xff4143[_0x1edf7f(0x8f1)] = 'typing-indicator', _0xff4143['textContent'] = _0x1edf7f(0x116), _0x34f0f4[_0x1edf7f(0x322)](_0xff4143)); } _0x25774b[_0x1edf7f(0xad2)] <= _0x185973[_0x1edf7f(0x1da)] && setTimeout(() => { const _0x3ab383 = _0x1edf7f; _0x34f0f4[_0x3ab383(0xb0e)] = _0x34f0f4[_0x3ab383(0x784)]; }, 0x0); } async function _0x2d578d(_0x8313d2, _0x5cf73c) { const _0x59a6e2 = _0x59a4d7, { role: _0x4c39b4, content: _0x487695, displayUrl: _0x34091f, image: _0xd20750, senderId: _0x537031 } = _0x8313d2, _0x954039 = _0x4c39b4 === _0x59a6e2(0x72a) ? 'ai' : _0x4c39b4, _0x4fd03f = _0x3b6e44(), _0x3386c3 = document[_0x59a6e2(0x7a2)](_0x59a6e2(0xb08)); _0x3386c3[_0x59a6e2(0x7bb)]['add']('message-container', _0x954039), _0x3386c3[_0x59a6e2(0xa13)][_0x59a6e2(0xa50)] = _0x5cf73c; const _0xdd863f = document['createElement'](_0x59a6e2(0xb08)); _0xdd863f['className'] = 'message-bubble-row'; let _0x29011e = '', _0xd5a2ed = ''; if (_0x4c39b4 === 'user') { if (_0x59a6e2(0x649) === _0x59a6e2(0x649)) { const _0x3e443e = _0x16366b(_0x185973['activeChatId']); _0x29011e = _0x3e443e[_0x59a6e2(0xa44)] || _0x5b8a69; const _0x37a610 = _0xec7e1c(_0x4fd03f?.[_0x59a6e2(0xa1e)][0x0]); _0x37a610 && (_0xd5a2ed = _0x37a610[_0x59a6e2(0x2ac)] || ''); } else _0x4f8cf8[_0x59a6e2(0xa8f)][_0x59a6e2(0x8f8)] = 'flex', _0x51ea77(() => _0x244004[_0x59a6e2(0x7bb)]['add'](_0x59a6e2(0xa02)), 0xa); } else { let _0x141b92 = null; if (_0x4fd03f?.[_0x59a6e2(0x117)] === 'private') _0x59a6e2(0x301) !== 'YfKQW' ? _0x4dde79 && _0x35a358(_0x39b344) : _0x141b92 = _0xec7e1c(_0x4fd03f['participantIds'][0x0]); else _0x4fd03f?.[_0x59a6e2(0x117)] === 'group' && _0x537031 && (_0x141b92 = _0xec7e1c(_0x537031)); if (_0x141b92) { const _0x220c85 = await _0x27b140('char_avatar_' + _0x141b92['id']); _0x220c85 ? _0x29011e = URL[_0x59a6e2(0x8ca)](_0x220c85) : _0x29011e = _0x141b92['avatar'] || _0xcd0fda, _0xd5a2ed = _0x141b92[_0x59a6e2(0x57a)] || ''; } else _0x29011e = _0xcd0fda; } const _0x2b26c3 = _0x33f769(_0x29011e, _0xd5a2ed), _0x45823b = _0x487695 && _0x487695[_0x59a6e2(0x40e)]()[_0x59a6e2(0xa51)](_0x59a6e2(0x29e)) && _0x487695[_0x59a6e2(0x40e)]()[_0x59a6e2(0x59b)]('</div>'); if (_0x45823b) { if ('cmeSh' === _0x59a6e2(0x1d2)) { const _0x2a576a = _0x183789['createObjectURL'](_0x255ebf); _0x2eee09['src'] = _0x2a576a, _0x17b682[_0x59a6e2(0xa11)] = () => { const _0x382d56 = _0x59a6e2; _0x1cad1b[_0x382d56(0x33a)](_0x2a576a); }; } else { const _0x92227d = document[_0x59a6e2(0x7a2)](_0x59a6e2(0xb08)); _0x92227d[_0x59a6e2(0x8f1)] = 'html-module-container', _0x92227d[_0x59a6e2(0x5b2)] = _0x487695; if (_0x954039 === _0x59a6e2(0x34d)) _0xdd863f[_0x59a6e2(0x322)](_0x92227d), _0xdd863f[_0x59a6e2(0x322)](_0x2b26c3); else { if (_0x59a6e2(0x94b) !== _0x59a6e2(0x94b)) { const _0x1695c3 = _0x59a6e2(0x441) + _0x1c4172; let _0x2f0162 = _0x12b2a9['getElementById'](_0x1695c3); if (_0x2f0162) return; const _0x41f184 = '\x0a\x20\x20\x20\x20<div\x20id=\x22' + _0x1695c3 + _0x59a6e2(0x720) + (_0x420059 === 'ai' ? _0x59a6e2(0x5c2) : '') + _0x59a6e2(0x54a); _0xfeb9dd['body'][_0x59a6e2(0x7e8)]('beforeend', _0x41f184); const _0x35f333 = _0x243de9[_0x59a6e2(0x727)](_0x1695c3), _0x3a514e = () => _0x35f333['remove'](); _0x35f333[_0x59a6e2(0x99d)](_0x59a6e2(0x49c))[_0x59a6e2(0x88c)] = _0x3a514e, _0x35f333[_0x59a6e2(0x99d)]('#diary-action-cancel')['onclick'] = _0x3a514e, _0x35f333[_0x59a6e2(0x99d)](_0x59a6e2(0xa3f))[_0x59a6e2(0x88c)] = () => { _0x3c0c20(_0x12d232), _0x3a514e(); }, _0x2c94fd === 'ai' && (_0x35f333[_0x59a6e2(0x99d)](_0x59a6e2(0x5f5))['onclick'] = () => { _0x1dccb2(_0x92a547), _0x3a514e(); }); } else _0xdd863f[_0x59a6e2(0x322)](_0x2b26c3), _0xdd863f[_0x59a6e2(0x322)](_0x92227d); } } } else { const _0x1a7a19 = document[_0x59a6e2(0x7a2)](_0x59a6e2(0xb08)); _0x1a7a19[_0x59a6e2(0x7bb)]['add'](_0x59a6e2(0x140), _0x954039); if (_0x4fd03f?.['type'] === _0x59a6e2(0x261)) { const _0x11e915 = _0x4fd03f['participantIds'][0x0]; _0x1a7a19['classList']['add']('bubble-' + _0x11e915); } if (_0x8313d2[_0x59a6e2(0x4b6)]) { const _0x29cb7c = document['createElement']('div'); _0x29cb7c[_0x59a6e2(0x8f1)] = _0x59a6e2(0x86c); const _0x1916f2 = document[_0x59a6e2(0x7a2)](_0x59a6e2(0xb08)); _0x1916f2[_0x59a6e2(0x8f1)] = _0x59a6e2(0x98c), _0x1916f2[_0x59a6e2(0xb33)] = _0x8313d2[_0x59a6e2(0x4b6)][_0x59a6e2(0x119)]; const _0x155dad = document['createElement'](_0x59a6e2(0xb08)); _0x155dad[_0x59a6e2(0x8f1)] = _0x59a6e2(0x4a1), _0x155dad[_0x59a6e2(0xb33)] = _0x8313d2[_0x59a6e2(0x4b6)]['content'], _0x29cb7c[_0x59a6e2(0x322)](_0x1916f2), _0x29cb7c[_0x59a6e2(0x322)](_0x155dad), _0x1a7a19[_0x59a6e2(0x322)](_0x29cb7c); } if (_0x34091f) { _0x1a7a19[_0x59a6e2(0x7bb)][_0x59a6e2(0x99b)](_0x59a6e2(0x2dc)); const _0x2c07b9 = document[_0x59a6e2(0x7a2)]('img'); _0x2c07b9['src'] = _0x34091f, _0x2c07b9[_0x59a6e2(0x7bb)][_0x59a6e2(0x99b)](_0x59a6e2(0xa58)), _0x1a7a19[_0x59a6e2(0x322)](_0x2c07b9); } else { if (_0x8313d2[_0x59a6e2(0x7f8)] || _0x8313d2[_0x59a6e2(0x4c8)]) { if (_0x59a6e2(0x937) !== _0x59a6e2(0x877)) { _0x1a7a19[_0x59a6e2(0x7bb)][_0x59a6e2(0x99b)](_0x59a6e2(0x7f8)); const _0xbde522 = document['createElement'](_0x59a6e2(0x751)); _0xbde522['classList'][_0x59a6e2(0x99b)](_0x59a6e2(0x11e)), _0x1a7a19['appendChild'](_0xbde522); if (_0x8313d2[_0x59a6e2(0x7f8)]) { if ('EAGPC' === _0x59a6e2(0x482)) _0xbde522[_0x59a6e2(0x883)] = _0x8313d2[_0x59a6e2(0x7f8)]; else { _0x2162e1[_0x59a6e2(0x7b8)](_0x59a6e2(0x3b0)); const _0x2b3f3d = _0x42b44b[_0x59a6e2(0xa1e)][_0x59a6e2(0x3df)](_0x12295d)[_0x59a6e2(0x249)](_0x4d7467); if (!_0x2b3f3d['length']) return; let _0x169452 = 0x0; for (const _0x51101c of _0x2b3f3d) { _0x581441(_0x51101c, { 'force': !![], 'delayMs': _0x169452 }), _0x169452 += 0x1f4; } } } else _0xbde522[_0x59a6e2(0x883)] = _0x59a6e2(0x850), _0x27b140(_0x8313d2[_0x59a6e2(0x4c8)])['then'](_0x219adc => { const _0x3423b2 = _0x59a6e2; if (_0x3423b2(0x397) !== _0x3423b2(0x8be)) { if (_0x219adc) { const _0x27faac = URL[_0x3423b2(0x8ca)](_0x219adc); _0xbde522[_0x3423b2(0x883)] = _0x27faac, _0xbde522[_0x3423b2(0xa11)] = () => { const _0x2ccd00 = _0x3423b2; _0x2ccd00(0x43d) !== 'sVkym' ? _0x1f4049(_0x5c2ab2['id']) : URL['revokeObjectURL'](_0x27faac); }; } else _0x3423b2(0x323) !== _0x3423b2(0x323) ? _0x23f201[_0x3423b2(0x8e1)] === _0x3423b2(0x6b6) && !_0x1b59be[_0x3423b2(0x65d)] && (_0x20f9bc[_0x3423b2(0x628)](), _0x289da4()) : _0xbde522['alt'] = _0x3423b2(0x912); } else _0x2cd942[_0x3423b2(0x462)](); })['catch'](_0x506132 => { const _0x4e9bcc = _0x59a6e2; console[_0x4e9bcc(0x815)]('无法从\x20IndexedDB\x20加载聊天图片:', _0x506132), _0xbde522[_0x4e9bcc(0x507)] = _0x4e9bcc(0x912); }); if (_0x487695) { const _0x2186b9 = document[_0x59a6e2(0x7a2)]('p'); _0x2186b9[_0x59a6e2(0xa8f)]['marginTop'] = _0x59a6e2(0x3e7), _0x2186b9[_0x59a6e2(0xb33)] = _0x487695, _0x1a7a19[_0x59a6e2(0x322)](_0x2186b9); } } else { if (!_0x1447d4[_0x59a6e2(0x64b)](_0x358978) || _0x2269ad[_0x59a6e2(0xad2)] === 0x0) return _0x59a6e2(0x4c3); return _0x59a6e2(0xaac) + _0x4d942c[_0x59a6e2(0x3df)]((_0x54a490, _0x37086c) => { const _0xacdb4 = _0x59a6e2, _0xe147c2 = _0x37a8e0[_0xacdb4(0xa1d)](_0x54a490[_0xacdb4(0x5be)] || [])[_0xacdb4(0xa89)](/'/g, _0xacdb4(0x5c0))[_0xacdb4(0xa89)](/"/g, '&quot;'), _0xafb0e2 = _0x54a490['contact_name'] || _0xacdb4(0x2d2); return _0xacdb4(0xa56) + (_0x37086c < _0x168036[_0xacdb4(0xad2)] - 0x1 ? _0xacdb4(0x125) : '') + '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27' + _0xe147c2 + '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27' + _0xafb0e2 + '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27' + _0x244c0a + _0xacdb4(0x316) + _0xafb0e2[_0xacdb4(0x547)](0x0) + _0xacdb4(0x34f) + _0xafb0e2 + _0xacdb4(0x6ad) + (_0x54a490[_0xacdb4(0x7eb)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; })['join']('') + '</div>'; } } else { if (_0x8313d2[_0x59a6e2(0x117)] === 'transfer') { _0x1a7a19[_0x59a6e2(0x7bb)][_0x59a6e2(0x99b)](_0x59a6e2(0x690)); const _0x1dbb12 = _0x8313d2['role'] === _0x59a6e2(0x34d) ? _0x16366b(_0x185973[_0x59a6e2(0x572)]) : _0xec7e1c(_0x8313d2[_0x59a6e2(0x660)]), _0x116194 = _0x8313d2[_0x59a6e2(0xb2b)] === _0x16366b(_0x185973[_0x59a6e2(0x572)])['id'] ? _0x16366b(_0x185973[_0x59a6e2(0x572)]) : _0xec7e1c(_0x8313d2[_0x59a6e2(0xb2b)]), _0x124ed3 = _0x1dbb12?.[_0x59a6e2(0x41b)] ? _0x1dbb12[_0x59a6e2(0x41b)] + _0x59a6e2(0x3e3) : '转账', _0x3433e0 = _0x116194?.[_0x59a6e2(0x41b)] ? _0x59a6e2(0x5c8) + _0x116194[_0x59a6e2(0x41b)] : '转账', _0x32fb14 = _0x59a6e2(0x502) + _0x124ed3 + _0x59a6e2(0x9cb) + _0x8313d2[_0x59a6e2(0x853)][_0x59a6e2(0x4b5)](0x2) + _0x59a6e2(0x823) + _0x3433e0 + _0x59a6e2(0x820); _0x1a7a19[_0x59a6e2(0x5b2)] = _0x32fb14; } else { if (_0x8313d2[_0x59a6e2(0x117)] === 'listen-together-invite') { if (_0x59a6e2(0x4c5) === _0x59a6e2(0x715)) _0xc80000 ? _0x506415(_0x39155f) : _0x32793d(new _0x3dab78(_0x59a6e2(0x55f))); else { _0x1a7a19[_0x59a6e2(0x7bb)][_0x59a6e2(0x99b)](_0x59a6e2(0x373)); const _0x43a582 = document['createElement'](_0x59a6e2(0xb08)); _0x43a582[_0x59a6e2(0x8f1)] = 'listen-together-card', _0x43a582[_0x59a6e2(0x7bb)]['add'](_0x59a6e2(0x560)); const _0x136d00 = _0x8313d2['role'] === 'user' ? _0x16366b(_0x185973[_0x59a6e2(0x572)])[_0x59a6e2(0x41b)] || '你' : _0xec7e1c(_0x8313d2[_0x59a6e2(0x660)])?.[_0x59a6e2(0x41b)] || 'TA', _0x17ea36 = _0x59a6e2(0x534) + _0x8313d2[_0x59a6e2(0x55a)], _0x12d9df = _0x59a6e2(0x367) + _0x17ea36 + _0x59a6e2(0x49a) + _0xcd0fda + '\x22>'; _0x8313d2[_0x59a6e2(0x691)] && (_0x59a6e2(0x9e3) === 'GjTKh' ? _0x4731ab('核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a') : _0x27b140(_0x8313d2[_0x59a6e2(0x691)])['then'](_0x2e2d99 => { const _0x490353 = _0x59a6e2, _0x478805 = document[_0x490353(0x727)](_0x17ea36); if (_0x478805 && _0x2e2d99) _0x478805[_0x490353(0x883)] = URL['createObjectURL'](_0x2e2d99); })), _0x8313d2['accepted'] ? _0x43a582[_0x59a6e2(0x5b2)] = _0x59a6e2(0xa85) + _0x12d9df + _0x59a6e2(0x2a3) + _0x8313d2['songName'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x8313d2[_0x59a6e2(0x9aa)] + _0x59a6e2(0x6af) : _0x43a582[_0x59a6e2(0x5b2)] = _0x59a6e2(0x873) + _0x136d00 + _0x59a6e2(0x151) + _0x12d9df + _0x59a6e2(0x2a3) + _0x8313d2['songName'] + _0x59a6e2(0x112) + _0x8313d2[_0x59a6e2(0x9aa)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22' + _0x8313d2[_0x59a6e2(0x57d)] + _0x59a6e2(0x9ed), _0x1a7a19['appendChild'](_0x43a582); } } else { if (_0x8313d2[_0x59a6e2(0x117)] === _0x59a6e2(0x373) && _0x8313d2[_0x59a6e2(0x508)]) { if (_0x59a6e2(0x46a) !== _0x59a6e2(0x84f)) { _0x1a7a19[_0x59a6e2(0x7bb)][_0x59a6e2(0x99b)]('music'); const _0x342668 = document[_0x59a6e2(0x7a2)](_0x59a6e2(0xb08)); _0x342668[_0x59a6e2(0x8f1)] = _0x59a6e2(0x4e5), _0x342668[_0x59a6e2(0xa13)][_0x59a6e2(0x9a5)] = _0x59a6e2(0x579) + _0x8313d2[_0x59a6e2(0x55a)]; const _0x5a60cc = _0x59a6e2(0x534) + _0x8313d2[_0x59a6e2(0x55a)], _0x418eda = _0x59a6e2(0x8eb) + _0xcd0fda + _0x59a6e2(0x818) + _0x5a60cc + _0x59a6e2(0x5cf); if (_0x8313d2[_0x59a6e2(0x691)]) _0x27b140(_0x8313d2['coverId'])[_0x59a6e2(0x368)](_0x3b207d => { const _0x1c6d98 = _0x59a6e2; if ('yKJgi' === 'iMGgA') { const _0x1cfdff = _0x1cfec1[_0x1c6d98(0x1f2)](_0x366df5, _0x1c6d98(0x42d)), _0x4dc6bf = _0x1cfdff[_0x1c6d98(0x238)](_0x166dca), _0x305e1b = _0x4dc6bf['get'](_0x56e50a); _0x305e1b[_0x1c6d98(0x17f)] = () => _0x2043ae(_0x305e1b[_0x1c6d98(0x973)] ? _0x305e1b[_0x1c6d98(0x973)][_0x1c6d98(0x737)] : null), _0x305e1b[_0x1c6d98(0x8c6)] = () => _0x81ddfd(_0x305e1b[_0x1c6d98(0x815)]); } else { const _0x81bec = document[_0x1c6d98(0x727)](_0x5a60cc); if (_0x81bec && _0x3b207d) _0x81bec[_0x1c6d98(0x883)] = URL[_0x1c6d98(0x8ca)](_0x3b207d); } }); else _0x8313d2[_0x59a6e2(0x3bb)] && setTimeout(() => { const _0x3bf3b0 = _0x59a6e2; if ('dfexR' === 'dfexR') { const _0x536fd6 = document[_0x3bf3b0(0x727)](_0x5a60cc); if (_0x536fd6) _0x536fd6['src'] = _0x8313d2[_0x3bf3b0(0x3bb)]; } else _0x2aab90(_0x3bf3b0(0xb17), _0x3bf3b0(0xa57)), _0x648abd(![]); }, 0x0); _0x342668['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x418eda + _0x59a6e2(0x6bf) + _0x8313d2['songName'] + _0x59a6e2(0x232) + _0x8313d2[_0x59a6e2(0x9aa)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>' + (_0x8313d2['playableUrl'] ? '▶' : '⚠') + '</div>', _0x8313d2[_0x59a6e2(0x86d)] && _0x342668[_0x59a6e2(0x65f)](_0x59a6e2(0x9c7), function () { const _0xce7f32 = _0x59a6e2, _0x1a6497 = { 'id': _0xce7f32(0x579) + _0x8313d2['timestamp'], 'url': _0x8313d2['playableUrl'] }; _0xd798d9(this, _0x1a6497); }), _0x1a7a19[_0x59a6e2(0x322)](_0x342668); } else _0x55c8dc[_0x59a6e2(0x815)](_0x59a6e2(0x79b), _0x3081fc); } else { if (_0x59a6e2(0x8d5) === 'HPNSk') { if (_0x487695) { const _0x15c980 = document[_0x59a6e2(0x7a2)]('p'); _0x15c980[_0x59a6e2(0x5b2)] = _0x487695, _0x15c980[_0x59a6e2(0xa8f)]['margin'] = '0', _0x1a7a19[_0x59a6e2(0x322)](_0x15c980); } } else { const _0x32b7fa = _0x31cbc3[_0x59a6e2(0x7a2)](_0x59a6e2(0x751)); _0x32b7fa[_0x59a6e2(0x883)] = _0x6d3493['url'], _0x32b7fa[_0x59a6e2(0x8a5)] = _0x59a6e2(0x62c), _0x32b7fa[_0x59a6e2(0x488)] = _0xdaa903[_0x59a6e2(0x41b)], _0x32b7fa[_0x59a6e2(0x7bb)][_0x59a6e2(0x99b)](_0x59a6e2(0x30b)), _0x32b7fa[_0x59a6e2(0x65f)](_0x59a6e2(0x9c7), () => _0x1ae3be(_0x137ccf)), _0x52c6c9['appendChild'](_0x32b7fa); } } } } } } if (_0x954039 === _0x59a6e2(0x34d)) { if ('EMjLe' === _0x59a6e2(0x18e)) { const _0x41bab7 = _0x147a67[_0x59a6e2(0x3a2)](0x1, _0x50f9a3(_0x704775[_0x59a6e2(0x55c)]?.['perChatContextLines'] ?? 0x64)), _0x55cb03 = _0x4e3a46[_0x59a6e2(0x6ac)][_0x59a6e2(0x249)](_0x3acf3f => _0x3acf3f[_0x59a6e2(0xa1e)][_0x59a6e2(0x955)](_0x1541be)), _0xed78ed = _0x55cb03[_0x59a6e2(0x3df)](_0x591cdd => { const _0x50ea5d = _0x59a6e2, _0x156f58 = _0x5248f2(_0x591cdd['id']), _0x4a63f9 = _0x156f58[_0x50ea5d(0xad2)] > 0x0 ? _0x156f58[_0x156f58['length'] - 0x1] : null; return { 'chat': _0x591cdd, 'history': _0x156f58, 'lastTimestamp': _0x4a63f9 ? _0x4a63f9[_0x50ea5d(0x55a)] : 0x0 }; })[_0x59a6e2(0x249)](_0x3a04b1 => _0x3a04b1[_0x59a6e2(0x8ff)][_0x59a6e2(0xad2)] > 0x0); _0xed78ed['sort']((_0xe7af6b, _0x46ee40) => _0x46ee40[_0x59a6e2(0x477)] - _0xe7af6b['lastTimestamp']); const _0x545019 = [], _0x4202b2 = {}; return _0xed78ed[_0x59a6e2(0x3ea)]((_0x12c747, _0x4570e7) => { const _0x4c0ceb = _0x59a6e2, _0x1a6345 = _0x5ed635(_0x12c747[_0x4c0ceb(0xb17)], _0x12c747[_0x4c0ceb(0x8ff)], _0x41bab7); if (_0x1a6345['length'] === 0x0) return; const _0xda2e88 = _0x4570e7 === 0x0 ? '来源：[最活跃]' : _0x4c0ceb(0x459); _0x545019[_0x4c0ceb(0x92b)](_0x4c0ceb(0xa46) + _0xda2e88 + _0x159b58(_0x12c747[_0x4c0ceb(0xb17)]) + '\x0a' + _0x1a6345[_0x4c0ceb(0x7e0)]('\x0a')), _0x4202b2[_0x12c747[_0x4c0ceb(0xb17)]['id']] = _0x1a6345[_0x4c0ceb(0xad2)]; }), { 'omniText': _0x545019[_0x59a6e2(0x7e0)]('\x0a\x0a'), 'usedCounts': _0x4202b2 }; } else _0xdd863f[_0x59a6e2(0x322)](_0x1a7a19), _0xdd863f[_0x59a6e2(0x322)](_0x2b26c3); } else { if (_0x59a6e2(0x158) !== _0x59a6e2(0x71d)) _0xdd863f['appendChild'](_0x2b26c3), _0xdd863f[_0x59a6e2(0x322)](_0x1a7a19); else { const _0x58caa4 = _0x2baa71[_0x59a6e2(0x727)](_0x59a6e2(0x2b1))[_0x59a6e2(0x525)]; _0x58caa4 && (_0x580f77[_0x59a6e2(0x571)] = _0x58caa4, _0x28c979(), _0x437275(_0x59a6e2(0x84c)), _0x4aa679(), _0x18cec2[_0x59a6e2(0x727)]('set-active-user-button')['style'][_0x59a6e2(0x8f8)] = _0x59a6e2(0x941)); } } } _0x3386c3[_0x59a6e2(0x322)](_0xdd863f); const _0xf8638c = document[_0x59a6e2(0x7a2)](_0x59a6e2(0xb08)); return _0xf8638c['className'] = _0x59a6e2(0x55a), _0xf8638c[_0x59a6e2(0xb33)] = _0x349ee4(_0x8313d2['timestamp']), _0x3386c3[_0x59a6e2(0x322)](_0xf8638c), _0x34f0f4[_0x59a6e2(0x322)](_0x3386c3), _0x3386c3; } document[_0x59a4d7(0x727)]('chat-messages')[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x174d8e); let _0xa6e98f = null, _0x18ed5e = null; function _0x174d8e(_0x2d9515) { const _0x1109f4 = _0x59a4d7; if (_0x1109f4(0x369) === 'JAebT') { if (window[_0x1109f4(0x31e)]()[_0x1109f4(0x6c0)]()) return; const _0x2263a2 = _0x2d9515[_0x1109f4(0x6ba)][_0x1109f4(0xa37)](_0x1109f4(0x167)), _0x2ee53f = _0x2d9515['target'][_0x1109f4(0xa37)](_0x1109f4(0x645)); if (!_0x2263a2 || _0x2ee53f) return; const _0xe5513d = parseInt(_0x2263a2[_0x1109f4(0xa13)][_0x1109f4(0xa50)], 0xa); if (isNaN(_0xe5513d)) return; _0x3d6e63(_0xe5513d); } else { _0x1edfe1(_0x1109f4(0x896)); return; } } function _0x226af3() { const _0x3be111 = _0x59a4d7, _0x418cf5 = _0x3b6e44(); if (!_0x418cf5) { _0x2f3af5[_0x3be111(0xb33)] = _0x3be111(0x199); return; } if (_0x418cf5[_0x3be111(0x117)] === 'private') { const _0x36cb1d = _0xec7e1c(_0x418cf5[_0x3be111(0xa1e)][0x0]); _0x2f3af5[_0x3be111(0xb33)] = _0x36cb1d ? _0x36cb1d[_0x3be111(0x41b)] : _0x3be111(0x2e0); } else _0x3be111(0xb28) === _0x3be111(0xa04) ? _0x3cba8f += _0x3be111(0x53d) + _0x3a4bc6['songName'] + _0x3be111(0x908) + _0x43bcb1[_0x3be111(0x9aa)] + ')' : _0x2f3af5[_0x3be111(0xb33)] = _0x418cf5[_0x3be111(0x41b)] || _0x3be111(0x362) + _0x418cf5[_0x3be111(0xa1e)][_0x3be111(0xad2)] + ')'; } function _0xd8f0c1(_0x991820) { const _0x36103b = _0x59a4d7; if ('QwxTK' !== 'QwxTK') { const _0x4bc7dd = _0x375cc9[_0x36103b(0x6e1)][_0x36103b(0x95a)](_0x3729b1 => _0x3729b1['id'] === _0x28e9ba); _0x4bc7dd && (_0x4bc7dd['name'] = _0x4f78f6, _0x4bc7dd[_0x36103b(0x4eb)] = _0x5551c2, _0x4bc7dd[_0x36103b(0xa93)] = _0x9009d8); } else { const _0x193e09 = document[_0x36103b(0x99d)](_0x36103b(0x71a)); if (_0x193e09 && (_0x193e09['id'] === _0x36103b(0x9d9) || _0x193e09['id'] === _0x36103b(0x20b))) _0x2207b1(); else { const _0x41d6c8 = document[_0x36103b(0xa1b)](_0x36103b(0x30a)); _0x41d6c8[_0x36103b(0x3ea)](_0x427431 => _0x427431[_0x36103b(0x7ef)]()); } } } function _0x4a03ff() { const _0x15c00b = _0x59a4d7; if (_0x15c00b(0x4d6) !== _0x15c00b(0x4d6)) { const _0x19a2bf = _0x2c2d05(_0x253e48['id']), _0x80bca7 = _0x19a2bf['length'] > 0x0 ? _0x19a2bf[_0x19a2bf[_0x15c00b(0xad2)] - 0x1] : null; return { 'chat': _0x3c7688, 'history': _0x19a2bf, 'lastTimestamp': _0x80bca7 ? _0x80bca7[_0x15c00b(0x55a)] : 0x0 }; } else { if (_0x185973['isGenerating'] && _0x185973['currentAbortController']) { if ('faxwL' === _0x15c00b(0x210)) console[_0x15c00b(0x5be)](_0x15c00b(0x627)), _0x185973[_0x15c00b(0x417)][_0x15c00b(0xa82)](_0x15c00b(0x1c8)), _0x185973[_0x15c00b(0x417)] = null; else { const _0x1f34f7 = _0x4441f8['getElementById']('snoop-app-container'), _0x8d899b = _0x3b7bcb[_0x15c00b(0x727)](_0x15c00b(0x884)); _0x1f34f7[_0x15c00b(0x5b2)] = _0x15c00b(0x9f6), _0x8d899b[_0x15c00b(0x5b2)] = ''; const _0x50902d = _0x1f34f7[_0x15c00b(0x99d)](_0x15c00b(0x799)), _0x5e4d09 = [{ 'id': _0x15c00b(0x7ec), 'name': '聊天', 'svg': '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'area': 'dock' }, { 'id': _0x15c00b(0x6a9), 'name': '浏览器', 'svg': _0x15c00b(0x66b), 'area': 'dock' }, { 'id': _0x15c00b(0x22a), 'name': '相册', 'svg': _0x15c00b(0x76b), 'area': _0x15c00b(0xb32) }, { 'id': _0x15c00b(0x605), 'name': '总结', 'svg': _0x15c00b(0x702), 'area': _0x15c00b(0xb32) }, { 'id': _0x15c00b(0x770), 'name': _0x15c00b(0x29c), 'svg': _0x15c00b(0x15e), 'area': _0x15c00b(0x42f) }, { 'id': _0x15c00b(0x95e), 'name': '外卖', 'svg': _0x15c00b(0x4cb), 'area': 'main' }, { 'id': _0x15c00b(0xaf3), 'name': '购物', 'svg': _0x15c00b(0x253), 'area': _0x15c00b(0x42f) }, { 'id': _0x15c00b(0x9bc), 'name': '足迹', 'svg': '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'area': 'main' }]; _0x5e4d09[_0x15c00b(0x3ea)](_0x27d1e4 => { const _0xe69323 = _0x15c00b, _0x5844ad = _0x563058[_0xe69323(0x7a2)](_0xe69323(0xb08)); _0x5844ad[_0xe69323(0x8f1)] = _0xe69323(0x3ac), _0x5844ad['innerHTML'] = _0xe69323(0xa69) + _0x27d1e4[_0xe69323(0x2b3)] + _0xe69323(0x1d3) + _0x27d1e4['name'] + _0xe69323(0x67c), _0x5844ad[_0xe69323(0x65f)](_0xe69323(0x9c7), () => _0x455e5b(_0x27d1e4['id'], _0x27d1e4[_0xe69323(0x41b)])), _0x27d1e4['area'] === _0xe69323(0xb32) ? _0x8d899b[_0xe69323(0x322)](_0x5844ad) : _0x50902d[_0xe69323(0x322)](_0x5844ad); }); } } _0x185973[_0x15c00b(0x608)] = ![], _0xd8f0c1(![]); } } function _0x3b6e44() { const _0x5475a7 = _0x59a4d7; if ('NGkWc' === _0x5475a7(0x5dd)) return _0x185973['chats']['find'](_0x1a72b4 => _0x1a72b4['id'] === _0x185973[_0x5475a7(0x572)]); else _0x1897aa(new _0x28edcb('Canvas\x20to\x20Blob\x20conversion\x20failed.')); } function _0xec7e1c(_0x17f833) { const _0x1c26c3 = _0x59a4d7; return _0x185973[_0x1c26c3(0xb29)][_0x1c26c3(0x95a)](_0x5c53ca => _0x5c53ca['id'] === _0x17f833); } function _0x446972(_0x11da3a) { const _0x2c790c = _0x59a4d7; if (_0x2c790c(0x53e) !== _0x2c790c(0x9b1)) { _0x185973['characters'] = _0x185973[_0x2c790c(0xb29)][_0x2c790c(0x249)](_0x39fb2c => _0x39fb2c['id'] !== _0x11da3a), _0x185973[_0x2c790c(0x6ac)][_0x2c790c(0x3ea)](_0x585d9b => { const _0x57f437 = _0x2c790c; _0x585d9b[_0x57f437(0x117)] === 'group' && (_0x585d9b['participantIds'] = _0x585d9b['participantIds']['filter'](_0x44f91a => _0x44f91a !== _0x11da3a)); }); const _0x22d75e = _0x185973[_0x2c790c(0x6ac)][_0x2c790c(0x95a)](_0x381b65 => _0x381b65['type'] === _0x2c790c(0x261) && _0x381b65[_0x2c790c(0xa1e)][_0x2c790c(0x955)](_0x11da3a)); _0x22d75e && _0x2329e4(_0x22d75e['id']), _0x185973['chats'] = _0x185973[_0x2c790c(0x6ac)]['filter'](_0x1c0898 => _0x1c0898[_0x2c790c(0x117)] !== _0x2c790c(0x4b1) || _0x1c0898[_0x2c790c(0xa1e)]['length'] > 0x1), _0x35c1de(), _0x1f52e3(); } else _0x33ae42[_0x2c790c(0x92b)](_0x9e0cd8); } function _0x2329e4(_0x38be1a) { const _0x4b6145 = _0x59a4d7; if (_0x4b6145(0x8fe) === _0x4b6145(0x3bf)) _0x34fa15('有\x20' + _0x27304e + _0x4b6145(0x643)); else { _0x185973[_0x4b6145(0x6ac)] = _0x185973['chats'][_0x4b6145(0x249)](_0x357f93 => _0x357f93['id'] !== _0x38be1a); try { localStorage[_0x4b6145(0x778)](_0x4b6145(0x6b1) + _0x38be1a); } catch (_0x5999a5) { if (_0x4b6145(0x27e) !== 'hKDkq') console[_0x4b6145(0x815)](_0x4b6145(0x349) + _0x38be1a, _0x5999a5); else { _0x48a4f2[_0x4b6145(0x5b2)] = _0x4b6145(0x35b); return; } } _0x185973[_0x4b6145(0x572)] === _0x38be1a && (_0x185973[_0x4b6145(0x572)] = _0x185973['chats'][0x0]?.['id'] || null, _0xdcd83e(_0x185973['activeChatId'])), _0x35c1de(), _0x1f52e3(); } } async function _0xdcd83e(_0x16ec04) { const _0x499dff = _0x59a4d7; if (_0x499dff(0x31d) !== _0x499dff(0x31d)) { const _0x20508d = _0xe0caeb[_0x499dff(0x1f2)](_0x1bdf5f, 'readwrite'), _0x4aa419 = _0x20508d['objectStore'](_0xd47b40), _0x26e293 = _0x4aa419[_0x499dff(0x360)]({ 'id': _0xa3eab4, 'blob': _0x2f5f7e }); _0x26e293[_0x499dff(0x17f)] = () => _0x495304(_0x26e293[_0x499dff(0x973)]), _0x26e293[_0x499dff(0x8c6)] = () => _0x7df0f1(_0x26e293[_0x499dff(0x815)]); } else { _0x185973[_0x499dff(0x572)] !== _0x16ec04 && (_0x4a03ff(), _0x185973[_0x499dff(0x1da)] = 0x64); if (!_0x16ec04) { _0x185973['activeChatId'] = null, _0x35c1de(), _0x4f33cb(![]), document['getElementById'](_0x499dff(0x522))['style'][_0x499dff(0x11b)] = ''; return; } _0x185973[_0x499dff(0x572)] = _0x16ec04, _0x35c1de(), _0x226af3(), _0x34f0f4[_0x499dff(0x5b2)] = '', _0x55dd5e(!![], _0x499dff(0xa74)), setTimeout(async () => { const _0x48cd91 = _0x499dff; if (_0x48cd91(0x5eb) !== 'llEtc') try { if (_0x48cd91(0x4dc) === _0x48cd91(0x4d0)) _0x495c2c('获取模型失败:\x20' + _0x22662b[_0x48cd91(0x140)] + '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1'); else { _0xc4fdb5(); const _0x3e11a2 = _0x3b6e44(), _0x25fb43 = document[_0x48cd91(0x727)]('chat-view-pane'); let _0x49351c = null; if (_0x3e11a2) { if (_0x48cd91(0x127) === _0x48cd91(0x127)) { if (_0x3e11a2['type'] === 'private') { if (_0x48cd91(0x206) === 'XqERl') _0x32f523[_0x48cd91(0x815)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0x15f4ef, _0x50d6f4); else { const _0x5b4b8a = _0x3e11a2[_0x48cd91(0xa1e)][0x0]; _0x38fd87(_0x5b4b8a), _0x49351c = await _0x27b140(_0x48cd91(0x897) + _0x5b4b8a); } } else _0x49351c = await _0x27b140(_0x48cd91(0x25d) + _0x3e11a2['id']); if (_0x49351c) _0x25fb43['style'][_0x48cd91(0x11b)] = _0x48cd91(0x142) + URL[_0x48cd91(0x8ca)](_0x49351c) + '\x27)', _0x25fb43[_0x48cd91(0xa8f)][_0x48cd91(0x62b)] = _0x48cd91(0x766), _0x25fb43[_0x48cd91(0xa8f)]['backgroundPosition'] = _0x48cd91(0x7b0); else { if (_0x48cd91(0x4b3) !== _0x48cd91(0x28e)) _0x25fb43[_0x48cd91(0xa8f)][_0x48cd91(0x11b)] = ''; else try { _0x43e682[_0x248d93] = _0x58e65f[_0x48cd91(0x189)](_0x3626af); } catch (_0x38e398) { } } } else _0x42c87d[_0x48cd91(0x815)](_0x48cd91(0x3c9), _0x25fbef), _0x5194b0(_0x48cd91(0x6e4) + _0x580385[_0x48cd91(0x140)]); } _0xd16a30(); } } catch (_0x418502) { console[_0x48cd91(0x815)](_0x48cd91(0x3c9), _0x418502), _0x1de23f(_0x48cd91(0x6e4) + _0x418502[_0x48cd91(0x140)]); } finally { _0x55dd5e(![]); } else _0x102933[_0x48cd91(0x322)](_0x4226ee); }, 0x32); } } async function _0x1703b6() { const _0x3bc5e4 = _0x59a4d7; if (_0x3bc5e4(0x4ef) === _0x3bc5e4(0x59e)) _0x5911d5[_0x3bc5e4(0x815)](_0x3bc5e4(0x22c), _0xccba75), _0x47e648['error'](_0x3bc5e4(0xa2e), _0x1954bb); else { if (_0x185973[_0x3bc5e4(0x608)]) { _0x1de23f('正在构思中，请稍候...'); return; } const _0x32423a = _0x185973[_0x3bc5e4(0x338)]; if (_0x32423a['length'] === 0x0) return; let _0x4f8c52 = -0x1; for (let _0x2c19a5 = _0x32423a[_0x3bc5e4(0xad2)] - 0x1; _0x2c19a5 >= 0x0; _0x2c19a5--) { if (_0x3bc5e4(0xb0f) !== _0x3bc5e4(0xb0f)) _0x36862c[_0x3bc5e4(0x572)] = _0x48a77f['chats'][0x0]?.['id'] || null; else { if (_0x32423a[_0x2c19a5][_0x3bc5e4(0x25b)] === _0x3bc5e4(0x34d)) { if ('imxVk' !== 'imxVk') _0x224d94 = new _0x293b4b(_0x285064[_0x3bc5e4(0x3a2)][_0x3bc5e4(0x592)](null, _0x5985ea)), _0x44cb12 = _0x3b278a[_0x3bc5e4(0xa5f)](_0x3bc5e4(0x8f4), { 'dateStyle': _0x3bc5e4(0x280), 'timeStyle': _0x3bc5e4(0x2ff) }); else { _0x4f8c52 = _0x2c19a5; break; } } } } if (_0x4f8c52 === -0x1 || _0x4f8c52 === _0x32423a[_0x3bc5e4(0xad2)] - 0x1) { _0x1de23f(_0x3bc5e4(0xa0a)); return; } _0x32423a[_0x3bc5e4(0x81e)](_0x4f8c52 + 0x1), _0x185973[_0x3bc5e4(0x60d)] = [], _0x2a4d47(), _0x394803(), _0x1331e1(_0x185973['activeMeetingCharId']), setTimeout(() => { _0x590cd1(); }, 0x64); } } async function _0x23f3a6() { const _0x156aeb = _0x59a4d7; if (_0x156aeb(0x68f) !== _0x156aeb(0x68f)) _0xf3e8e9[_0x156aeb(0x5b2)] = _0x25abd6; else { if (_0x185973['isGenerating']) { if (_0x156aeb(0x5e2) === _0x156aeb(0x347)) { if (!_0x59bb0e || typeof _0x3ba1a3 !== 'string') return null; const _0x193e92 = _0x47b0a1[_0x156aeb(0x209)]('['), _0x4ba1e1 = _0x2ac109[_0x156aeb(0xad9)](']'); if (_0x193e92 > -0x1 && _0x4ba1e1 > _0x193e92) return _0x5e4f87[_0x156aeb(0xb10)](_0x193e92, _0x4ba1e1 + 0x1); return null; } else { _0x1de23f(_0x156aeb(0x5e6)); return; } } const _0x54d178 = _0x185973[_0x156aeb(0x338)]; if (_0x54d178['length'] === 0x0) return; let _0x5250da = -0x1; for (let _0x9ab658 = _0x54d178[_0x156aeb(0xad2)] - 0x1; _0x9ab658 >= 0x0; _0x9ab658--) { if ('pRsMT' === _0x156aeb(0x7f7)) { if (_0x54d178[_0x9ab658][_0x156aeb(0x25b)] === _0x156aeb(0x34d)) { _0x5250da = _0x9ab658; break; } } else _0x1fc845[_0x156aeb(0x7b8)]('无法解析旧的视奸内容来获取时间戳。', _0x4de2bc); } if (_0x5250da === -0x1 || _0x5250da === _0x54d178[_0x156aeb(0xad2)] - 0x1) { _0x1de23f(_0x156aeb(0x5a9)); return; } _0x54d178[_0x156aeb(0x81e)](_0x5250da + 0x1), _0x2a4d47(), _0x2207b1(), setTimeout(() => { const _0x135f3e = _0x156aeb; if (_0x135f3e(0x254) !== 'nbnuJ') { const _0x47dcd3 = _0x422b13[_0x135f3e(0x727)](_0x135f3e(0x359)), _0x197181 = _0x239e31['getElementById']('organize-button-container'), _0x1a5ed1 = new _0x19b6c1(), _0x2082a7 = _0x415e8a[_0x135f3e(0x524)]['filter'](_0x332377 => new _0x2f745b(_0x332377[_0x135f3e(0x55a)])[_0x135f3e(0x50d)]() === _0x1a5ed1[_0x135f3e(0x50d)]()); if (_0x2082a7[_0x135f3e(0xad2)] === 0x0) { _0x47dcd3[_0x135f3e(0x5b2)] = _0x135f3e(0x3f9), _0x197181[_0x135f3e(0x5b2)] = ''; return; } _0x47dcd3[_0x135f3e(0x5b2)] = '', _0x2082a7['sort']((_0x575404, _0x447529) => _0x447529[_0x135f3e(0x55a)] - _0x575404[_0x135f3e(0x55a)])[_0x135f3e(0x3ea)](_0x1909e4 => { const _0x3a9338 = _0x135f3e, _0x46aa7e = _0x4575f0[_0x3a9338(0x7a2)](_0x3a9338(0xb08)); _0x46aa7e[_0x3a9338(0x8f1)] = _0x3a9338(0x185), _0x46aa7e['innerHTML'] = _0x3a9338(0xaa5) + _0x1909e4['description'] + '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20' + _0x1909e4[_0x3a9338(0x853)][_0x3a9338(0x4b5)](0x2) + _0x3a9338(0x3e4) + _0x1909e4['id'] + _0x3a9338(0xa5b), _0x47dcd3[_0x3a9338(0x322)](_0x46aa7e); }), _0x197181 && (_0x197181[_0x135f3e(0x5b2)] = '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', _0x38dd76[_0x135f3e(0x727)]('organize-bill-button')['addEventListener'](_0x135f3e(0x9c7), _0x7ec51a)); } else _0x590cd1(); }, 0x64); } } function _0x5e8376(_0x1c73ed = null) { const _0x245486 = _0x59a4d7; if (_0x245486(0x1cc) === _0x245486(0x1cc)) { const _0x495128 = _0x1c73ed ?? _0x3a0975[_0x245486(0x525)][_0x245486(0x40e)](); if (_0x495128 === '' || !_0x185973['activeChatId']) return; const _0x1c4783 = document[_0x245486(0x99d)](_0x245486(0x71a)), _0x4e7524 = _0x1c4783['id'] === _0x245486(0x9d9), _0x1fb2c9 = { 'role': 'user', 'content': _0x495128, 'timestamp': Date[_0x245486(0xa59)](), 'isOffline': _0x4e7524 }; _0x185973[_0x245486(0x139)] && (_0x1fb2c9[_0x245486(0x4b6)] = { ..._0x185973[_0x245486(0x139)] }), _0x185973[_0x245486(0x338)][_0x245486(0x92b)](_0x1fb2c9), _0x2a4d47(), _0x2207b1(), !_0x1c73ed && (_0x3a0975['value'] = ''), _0x21e81a(); } else { const _0x42628f = _0x21c456[_0x245486(0x525)]; _0x5875a8['documentElement'][_0x245486(0xa8f)][_0x245486(0x9df)]('--primary-hue', _0x42628f), _0xaac361[_0x245486(0x295)](_0x245486(0x82c), _0x42628f), _0x11a69a(); } } function _0x2f757d(_0x2063ab) { const _0x5003cf = _0x59a4d7; if ('yDhng' !== _0x5003cf(0x19e)) { const _0x11fe74 = _0x4ab7b5[_0x5003cf(0x333)]((_0x5723af - _0x5b454e) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x438097 += _0x5003cf(0x1be) + _0x11fe74 + _0x5003cf(0x933); } else { if (!_0x2063ab || !_0x185973['activeChatId']) return; const _0x2033f7 = { 'role': 'user', 'content': _0x5003cf(0x559) + _0x2063ab[_0x5003cf(0x41b)] + ']', 'displayUrl': _0x2063ab[_0x5003cf(0x4e8)], 'timestamp': Date[_0x5003cf(0xa59)]() }; _0x185973[_0x5003cf(0x338)]['push'](_0x2033f7), _0x2d578d(_0x2033f7, _0x185973[_0x5003cf(0x338)][_0x5003cf(0xad2)] - 0x1), _0x2a4d47(), _0x1340fc[_0x5003cf(0x7bb)][_0x5003cf(0x7ef)](_0x5003cf(0xa02)); } } async function _0x52f752(_0x335fa6) { const _0x548e74 = _0x59a4d7; if (_0x548e74(0x46b) === _0x548e74(0x46b)) { const _0x495e8b = _0x335fa6['target']['files'][0x0]; if (!_0x495e8b || !_0x185973[_0x548e74(0x572)]) return; _0x55dd5e(!![], _0x548e74(0xa26)); try { const _0x3aaffc = await _0x3daecd(_0x495e8b, 0x320, 0.8, !![]), _0x5c1447 = _0x548e74(0x257) + Date[_0x548e74(0xa59)](); await _0x5bc724(_0x5c1447, _0x3aaffc); const _0x7d05a4 = _0x3a0975[_0x548e74(0x525)][_0x548e74(0x40e)](); _0x3a0975[_0x548e74(0x525)] = ''; const _0x12b0fc = { 'role': _0x548e74(0x34d), 'content': _0x7d05a4, 'imageId': _0x5c1447, 'timestamp': Date[_0x548e74(0xa59)]() }; _0x185973[_0x548e74(0x338)][_0x548e74(0x92b)](_0x12b0fc), _0x2d578d(_0x12b0fc, _0x185973[_0x548e74(0x338)][_0x548e74(0xad2)] - 0x1), _0x2a4d47(); } catch (_0x26ead7) { if ('bgVNP' === 'bgVNP') _0x1de23f(_0x548e74(0x7af) + _0x26ead7[_0x548e74(0x140)]); else { const _0x1b6dcb = _0x4eb3a3['createElement']('label'); _0x1b6dcb['innerHTML'] = '<input\x20type=\x22checkbox\x22\x20value=\x22' + _0x189778['id'] + '\x22>\x20' + _0x224a76['name'], _0x3edff4[_0x548e74(0x322)](_0x1b6dcb); } } finally { _0x548e74(0x558) === _0x548e74(0x558) ? (_0x55dd5e(![]), _0x335fa6['target'][_0x548e74(0x525)] = '') : (_0x54c51e = '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', _0x3bcd05 = _0x548e74(0x718) + _0x3fc128 + _0x548e74(0x864)); } } else { const _0x592db5 = _0x4e963a(_0x587af1[_0x548e74(0x725)] ?? _0x277a06[_0x548e74(0xa15)] ?? '')['trim']() || _0x548e74(0x913) + (_0xf72640 || '未知表情') + ']'; if (_0x592db5) _0x56895d[_0x548e74(0x375)]['push']({ 'senderId': _0x390faa['id'], 'kind': 'text', 'content': _0x592db5 }); } } async function _0x5b0ede() { const _0x2682c2 = _0x59a4d7; if (!_0x185973['activeChatId']) return; const _0x51e008 = await _0x10b4cf(); if (!_0x51e008) return; _0x1de23f(_0x2682c2(0x841)); try { if (_0x2682c2(0x422) !== _0x2682c2(0x422)) _0x55cc54['toBlob'](_0xe52d8c => { const _0x53800a = _0x2682c2; _0xe52d8c ? _0x1155c3(_0xe52d8c) : _0x27d9c3(new _0x21abc3(_0x53800a(0x55f))); }, _0x456adc, _0x1bb0e1); else { const _0x3b1b87 = await _0x5c775b(_0x51e008[_0x2682c2(0x508)], _0x51e008[_0x2682c2(0x9aa)]); let _0x5b30c4 = _0x3b1b87['cover']; if (_0x3b1b87[_0x2682c2(0x766)] && _0x3b1b87[_0x2682c2(0x766)][_0x2682c2(0xa51)]('http')) { if ('rVaYU' !== 'JhYvG') try { if ('YANmv' === _0x2682c2(0x7dc)) { const _0x5a41c0 = await fetch(_0x3b1b87[_0x2682c2(0x766)]), _0x321fda = await _0x5a41c0['blob'](); _0x5b30c4 = await _0x4ddc71(_0x321fda); } else _0x422b59[_0x2682c2(0x815)](_0x2682c2(0x5bd), _0x10f266), _0x965ab0('无法保存状态，浏览器可能禁用了存储功能。'); } catch (_0x193a3f) { console['error'](_0x2682c2(0x4f6), _0x193a3f), _0x5b30c4 = _0xcd0fda; } else { const _0x45d9b3 = _0x29d8ed[_0x2682c2(0x1f2)](_0xc88957, _0x2682c2(0x42d)), _0x407b58 = _0x45d9b3['objectStore'](_0x2a8fb1), _0x55b303 = _0x407b58[_0x2682c2(0x604)](); _0x55b303['onsuccess'] = () => _0x5750ba(_0x55b303[_0x2682c2(0x973)]), _0x55b303[_0x2682c2(0x8c6)] = () => _0x310eca(_0x55b303[_0x2682c2(0x815)]); } } const _0x2c17ae = { 'role': 'user', 'type': _0x2682c2(0x373), 'content': _0x2682c2(0x5ba) + _0x51e008[_0x2682c2(0x508)] + '\x20-\x20' + _0x51e008[_0x2682c2(0x9aa)] + ']', 'songName': _0x51e008[_0x2682c2(0x508)], 'artist': _0x51e008[_0x2682c2(0x9aa)], 'coverUrl': _0x5b30c4, 'playableUrl': _0x3b1b87[_0x2682c2(0x4e8)], 'timestamp': Date['now']() }; _0x185973[_0x2682c2(0x338)][_0x2682c2(0x92b)](_0x2c17ae), _0x2d578d(_0x2c17ae, _0x185973[_0x2682c2(0x338)][_0x2682c2(0xad2)] - 0x1), _0x2a4d47(); } } catch (_0x3d8252) { console[_0x2682c2(0x815)](_0x2682c2(0x8bc), _0x3d8252), _0x1de23f(_0x2682c2(0x160) + _0x3d8252['message']); } } function _0x188ed1(_0x4698f7, _0x512274 = 0x78) { const _0x319767 = _0x59a4d7; if (_0x319767(0x787) !== _0x319767(0x787)) _0x551743[_0x319767(0xa8f)]['display'] = 'none'; else { const _0xc63dce = _0x5885ec => { const _0xf35dff = _0x319767; if (_0xf35dff(0x753) === _0xf35dff(0x25c)) _0x20dd87 += '-\x20' + _0x662a09['stringify'](_0x8ad844) + '\x0a'; else { if (_0x5885ec['role'] === _0xf35dff(0x34d)) return _0x185973[_0xf35dff(0x382)]?.[_0xf35dff(0x41b)] || _0xf35dff(0x325); if (_0x5885ec[_0xf35dff(0x660)]) { const _0x51c1cb = _0xec7e1c(_0x5885ec[_0xf35dff(0x660)]); return _0x51c1cb?.['name'] || _0xf35dff(0x226); } if (_0x4698f7?.['type'] === _0xf35dff(0x261)) { const _0x113e29 = _0xec7e1c(_0x4698f7['participantIds'][0x0]); return _0x113e29?.[_0xf35dff(0x41b)] || 'AI'; } return 'Assistant'; } }, _0x5a38e9 = _0x185973[_0x319767(0x338)][_0x319767(0x247)](-_0x512274), _0x15df4c = []; for (const _0x542715 of _0x5a38e9) { if (_0x542715['displayUrl']) _0x15df4c[_0x319767(0x92b)]('[' + _0xc63dce(_0x542715) + ']\x20[sticker:' + (_0x542715[_0x319767(0x725)]?.[_0x319767(0x5ce)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x542715[_0x319767(0x7f8)]) { const _0xf13d6a = _0x542715[_0x319767(0x725)] ? '\x20' + _0x542715[_0x319767(0x725)] : ''; _0x15df4c[_0x319767(0x92b)]('[' + _0xc63dce(_0x542715) + ']\x20[image]' + _0xf13d6a); } else _0x542715['content'] && ('ujRrZ' === _0x319767(0x529) ? _0x15df4c[_0x319767(0x92b)]('[' + _0xc63dce(_0x542715) + ']\x20' + _0x542715[_0x319767(0x725)]) : _0x565dd3[_0x319767(0x5b2)] = _0x319767(0x873) + _0x1585d7 + '\x20邀请你一起听歌</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22listen-together-song\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x4a05be + _0x319767(0x2a3) + _0x507858[_0x319767(0x508)] + _0x319767(0x112) + _0x4ae86e[_0x319767(0x9aa)] + _0x319767(0x30f) + _0xb51e78[_0x319767(0x57d)] + _0x319767(0x9ed)); } } return _0x15df4c[_0x319767(0x7e0)]('\x0a'); } } function _0x79ca82(_0x33a5a2, _0x4e6a5a) { const _0x5422fa = _0x59a4d7; if (_0x5422fa(0x402) !== _0x5422fa(0x763)) { if (!_0x33a5a2 || !_0x4e6a5a) return null; const _0x30810e = _0x4e6a5a['match'](/@([^\s:：,，。!?]+)/); if (!_0x30810e) return null; const _0x19f101 = _0x30810e[0x1]['toLowerCase'](); for (const _0x489f6e of _0x33a5a2[_0x5422fa(0xa1e)]) { const _0x2fd74c = _0xec7e1c(_0x489f6e); if (!_0x2fd74c?.['name']) continue; if (_0x2fd74c[_0x5422fa(0x41b)][_0x5422fa(0xa9e)]() === _0x19f101) return _0x2fd74c; if (_0x2fd74c[_0x5422fa(0x41b)][_0x5422fa(0xa9e)]()[_0x5422fa(0xa51)](_0x19f101)) return _0x2fd74c; } return null; } else _0x2142ac[_0x5422fa(0x7bb)][_0x5422fa(0x99b)]('active'), _0x1ff78d[_0x5422fa(0x26b)]({ 'behavior': _0x5422fa(0xa0d), 'block': _0x5422fa(0x7b0) }); } function _0x47a396(_0x29ccf6) { const _0x242ce5 = _0x59a4d7, _0x125243 = _0x29ccf6['indexOf']('{'), _0x8d8f57 = _0x29ccf6[_0x242ce5(0xad9)]('}'); if (_0x125243 >= 0x0 && _0x8d8f57 > _0x125243) return _0x29ccf6['slice'](_0x125243, _0x8d8f57 + 0x1); return _0x29ccf6; } function _0x56d592(_0x528328, _0x3b3afd, _0xcd215d) { const _0x1a8b3f = _0x59a4d7; if (_0x1a8b3f(0x42c) === 'KBSFO') { const _0x4ecf3f = _0x393ca7, _0x402bfb = _0x4ecf3f[_0x1a8b3f(0x784)], _0x4dfbbe = _0x4ecf3f[_0x1a8b3f(0xb0e)]; _0x1a0ee1[_0x1a8b3f(0x1da)] += 0x64, _0x230861(), _0x1f80e8(() => { const _0x7b6679 = _0x1a8b3f, _0x4f49f1 = _0x4ecf3f[_0x7b6679(0x784)]; _0x4ecf3f['scrollTop'] = _0x4dfbbe + (_0x4f49f1 - _0x402bfb); }); } else { const _0x350f09 = new Map(_0x3b3afd[_0x1a8b3f(0x3df)](_0x5bf9d6 => [String(_0x5bf9d6['id']), _0x5bf9d6])), _0x356eea = _0x1e30f9 => String(_0x1e30f9 || '')[_0x1a8b3f(0xa9e)]()[_0x1a8b3f(0xa89)](/\s+/g, ''), _0xf806b4 = new Map(_0x3b3afd[_0x1a8b3f(0x3df)](_0x11b201 => [_0x356eea(_0x11b201['name']), _0x11b201])), _0x27721c = new Set(_0xcd215d), _0x5aa99b = { 'events': [] }; for (const _0x3cac9a of _0x528328?.['events'] || []) { const _0x1b8735 = _0x3cac9a[_0x1a8b3f(0x660)] ?? _0x3cac9a[_0x1a8b3f(0x119)] ?? _0x3cac9a[_0x1a8b3f(0x8e3)] ?? _0x3cac9a[_0x1a8b3f(0x72e)] ?? _0x3cac9a[_0x1a8b3f(0x25b)] ?? _0x3cac9a[_0x1a8b3f(0x41b)]; if (!_0x1b8735) continue; let _0xe405f0 = _0x350f09[_0x1a8b3f(0x120)](String(_0x1b8735)) || _0xf806b4[_0x1a8b3f(0x120)](_0x356eea(_0x1b8735)); if (!_0xe405f0) continue; const _0x15d2dc = (_0x3cac9a[_0x1a8b3f(0x2ed)] || _0x3cac9a[_0x1a8b3f(0x117)] || 'text')[_0x1a8b3f(0xa9e)](); if (_0x15d2dc === _0x1a8b3f(0x2dc)) { if (_0x1a8b3f(0x8a8) === _0x1a8b3f(0x9e9)) { const _0x9a7528 = _0x470144[_0x1a8b3f(0x727)](_0x1a8b3f(0x885)); _0x9a7528 && _0x2410b3 && (_0x9a7528['src'] = _0x2820c2[_0x1a8b3f(0x8ca)](_0x3f5ba4)); } else { const _0x495aef = (_0x3cac9a[_0x1a8b3f(0x2dc)] ?? _0x3cac9a['emoji'] ?? _0x3cac9a[_0x1a8b3f(0x479)] ?? _0x3cac9a[_0x1a8b3f(0x26e)])?.['trim'](); if (_0x495aef && _0x27721c[_0x1a8b3f(0x1ac)](_0x495aef)) _0x1a8b3f(0x4f5) !== _0x1a8b3f(0x4f5) ? (_0x411181(_0xe9ea57[_0x1a8b3f(0x525)]), _0x1d801d()) : _0x5aa99b[_0x1a8b3f(0x375)]['push']({ 'senderId': _0xe405f0['id'], 'kind': _0x1a8b3f(0x2dc), 'sticker': _0x495aef }); else { if ('FnqfX' !== 'ANdyu') { const _0x3f4098 = String(_0x3cac9a[_0x1a8b3f(0x725)] ?? _0x3cac9a[_0x1a8b3f(0xa15)] ?? '')[_0x1a8b3f(0x40e)]() || _0x1a8b3f(0x913) + (_0x495aef || _0x1a8b3f(0x946)) + ']'; if (_0x3f4098) _0x5aa99b['events'][_0x1a8b3f(0x92b)]({ 'senderId': _0xe405f0['id'], 'kind': 'text', 'content': _0x3f4098 }); } else { const _0x43b819 = _0x255a00['characters'][_0x1a8b3f(0x95a)](_0x4c6dfc => _0x4c6dfc['id'] === _0x2dd920); _0x40586c[_0x1a8b3f(0x525)] = _0x43b819[_0x1a8b3f(0x57a)] || '', _0x322a80[_0x1a8b3f(0x525)] = _0x43b819[_0x1a8b3f(0x2ac)] || ''; if (_0x1f6213) _0x5e3640[_0x1a8b3f(0xa8f)][_0x1a8b3f(0x11b)] = _0x43b819['avatarFrameUrl'] ? _0x1a8b3f(0x142) + _0x43b819[_0x1a8b3f(0x57a)] + '\x27)' : ''; } } } } else { if ('GCmVf' === 'GCmVf') { const _0x28a9d0 = String(_0x3cac9a['content'] ?? _0x3cac9a[_0x1a8b3f(0xa15)] ?? _0x3cac9a[_0x1a8b3f(0x140)] ?? '')['trim'](); if (_0x28a9d0) _0x5aa99b['events']['push']({ 'senderId': _0xe405f0['id'], 'kind': _0x1a8b3f(0xa15), 'content': _0x28a9d0 }); } else _0x4bee29[_0x1a8b3f(0x7bb)][_0x1a8b3f(0x99b)](_0x1a8b3f(0xa02)); } } return _0x5aa99b; } } async function _0x57ca29(_0x363caf) { const _0x2034b8 = _0x59a4d7; if ('csIsC' !== _0x2034b8(0x236)) { if (!_0x363caf || !Array[_0x2034b8(0x64b)](_0x363caf[_0x2034b8(0x375)]) || _0x363caf[_0x2034b8(0x375)]['length'] === 0x0) return; const _0x2bc030 = _0x476ae7 => _0x476ae7 + Math[_0x2034b8(0x757)](Math[_0x2034b8(0xb26)]() * 0x190); let _0x371146 = 0x1f4; for (const _0x291031 of _0x363caf[_0x2034b8(0x375)]) { await new Promise(_0x3d1fa => setTimeout(_0x3d1fa, _0x2bc030(_0x371146))), _0x371146 += 0x2bc; const _0x3daf07 = _0x185973[_0x2034b8(0x338)]['at'](-0x1)?.[_0x2034b8(0x350)] ?? ![]; if (_0x291031[_0x2034b8(0x2ed)] === _0x2034b8(0x2dc)) { const _0x215a04 = _0x1f134c[_0x2034b8(0x95a)](_0x262e6f => _0x262e6f['name'] === _0x291031[_0x2034b8(0x2dc)]); if (_0x215a04) { if (_0x2034b8(0x29d) !== _0x2034b8(0x29d)) return; else { const _0x4d6a69 = { 'role': _0x2034b8(0x72a), 'content': _0x2034b8(0x3eb) + _0x215a04[_0x2034b8(0x41b)] + ']', 'displayUrl': _0x215a04[_0x2034b8(0x4e8)], 'senderId': _0x291031[_0x2034b8(0x660)], 'timestamp': Date[_0x2034b8(0xa59)](), 'isOffline': _0x3daf07 }; _0x185973[_0x2034b8(0x338)][_0x2034b8(0x92b)](_0x4d6a69); } } } else { if (_0x291031[_0x2034b8(0x2ed)] === _0x2034b8(0x373) && _0x291031[_0x2034b8(0x508)] && _0x291031['artist']) { const { songName: _0x11f54d, artist: _0x26b8a2 } = _0x291031, _0x55a7b5 = { 'role': _0x2034b8(0x72a), 'type': _0x2034b8(0x373), 'content': '[AI分享了音乐：' + _0x11f54d + _0x2034b8(0x908) + _0x26b8a2 + ']', 'songName': _0x11f54d, 'artist': _0x26b8a2, 'senderId': _0x291031[_0x2034b8(0x660)], 'timestamp': Date[_0x2034b8(0xa59)](), 'isOffline': _0x3daf07 }; try { const _0x235044 = await _0x5c775b(_0x11f54d, _0x26b8a2); _0x55a7b5['coverUrl'] = _0x235044[_0x2034b8(0x766)], _0x55a7b5[_0x2034b8(0x86d)] = _0x235044[_0x2034b8(0x4e8)]; } catch (_0x2716b) { console[_0x2034b8(0x815)](_0x2034b8(0x3a8) + _0x11f54d + _0x2034b8(0x908) + _0x26b8a2 + '):', _0x2716b), _0x55a7b5[_0x2034b8(0x3bb)] = null, _0x55a7b5['playableUrl'] = null; } _0x185973[_0x2034b8(0x338)]['push'](_0x55a7b5); } else { if (_0x291031[_0x2034b8(0x2ed)] === _0x2034b8(0xa15)) { const _0x4c965d = _0x3638c7(_0x291031[_0x2034b8(0x725)])[_0x2034b8(0x247)](0x0, 0x3); for (let _0x23ec00 = 0x0; _0x23ec00 < _0x4c965d[_0x2034b8(0xad2)]; _0x23ec00++) { if (_0x23ec00 > 0x0) await new Promise(_0x455ee0 => setTimeout(_0x455ee0, _0x2bc030(0x190))); const _0x5bcb5b = { 'role': _0x2034b8(0x72a), 'content': _0x4c965d[_0x23ec00], 'senderId': _0x291031[_0x2034b8(0x660)], 'timestamp': Date[_0x2034b8(0xa59)](), 'isOffline': _0x3daf07 }; _0x185973[_0x2034b8(0x338)]['push'](_0x5bcb5b); } } } } } _0x2a4d47(), _0x2207b1(); } else _0x50064b['scrollTop'] = _0x518b82[_0x2034b8(0x784)]; } async function _0x5d0cc0(_0x8331e, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x34e1ad = _0x59a4d7; if ('TGRgx' !== 'TGRgx') _0x375c90(), _0x26efae = null; else { await new Promise(_0x7dd2c0 => setTimeout(_0x7dd2c0, 0xa)); if (!_0x185973[_0x34e1ad(0x8a2)][_0x34e1ad(0x6e2)] || !_0x185973[_0x34e1ad(0x8a2)]['key'] || !_0x185973[_0x34e1ad(0x8a2)][_0x34e1ad(0xa36)]) return _0x1de23f(_0x34e1ad(0xa4d)), ![]; const _0x1c165b = _0x3b6e44(); if (!_0x1c165b || !_0x8331e) return ![]; const _0x1405e5 = _0x16366b(_0x1c165b['id']), _0x726221 = _0x185973[_0x34e1ad(0x338)]['at'](-0x1)?.[_0x34e1ad(0x25b)] === 'user'; if (!force && !_0x726221) return ![]; const _0x1ae477 = _0x185973['conversationHistory']['at'](-0x1)?.[_0x34e1ad(0x350)] ?? ![]; if (delayMs) await new Promise(_0x48bcbd => setTimeout(_0x48bcbd, delayMs)); if (_0x1ae477) _0x34e1ad(0x969) !== 'abZII' ? document[_0x34e1ad(0x727)]('galgame-text')['textContent'] = '（正在构思中...）' : _0x27b964 = _0xc0c275[_0x34e1ad(0x7f8)]; else { if (_0x34e1ad(0x624) === _0x34e1ad(0x624)) _0xd8f0c1(!![]); else { const _0x2287cd = _0x10ffcb ?? _0x48ec54[_0x34e1ad(0x525)]['trim'](); if (_0x2287cd === '' || !_0xfa0d21[_0x34e1ad(0x572)]) return; const _0x517cc0 = _0x543cb2[_0x34e1ad(0x99d)](_0x34e1ad(0x71a)), _0x1d8729 = _0x517cc0['id'] === _0x34e1ad(0x9d9), _0x3e5abe = { 'role': _0x34e1ad(0x34d), 'content': _0x2287cd, 'timestamp': _0x425343[_0x34e1ad(0xa59)](), 'isOffline': _0x1d8729 }; _0x8a2800[_0x34e1ad(0x139)] && (_0x3e5abe[_0x34e1ad(0x4b6)] = { ..._0xd55c79[_0x34e1ad(0x139)] }), _0x260f20['conversationHistory']['push'](_0x3e5abe), _0x6db2f6(), _0x7f99e7(), !_0x1603b2 && (_0x265b6d[_0x34e1ad(0x525)] = ''), _0x3e34ba(); } } let _0x476b04 = ''; const _0xc377ce = _0x3b6e44(); if (_0xc377ce?.[_0x34e1ad(0x4a8)]?.[_0x34e1ad(0x193)]) { if ('PGbSi' === 'mUgUa') { const _0x2c401f = _0x2f7b0a[_0x34e1ad(0x6e1)]['find'](_0x534c34 => _0x534c34['id'] === _0x4590ad[_0x34e1ad(0xb0d)]), _0x368e74 = _0x2c401f?.[_0x34e1ad(0x4eb)]; let _0x204dbe = _0x45f9c0[_0x34e1ad(0x621)][_0x34e1ad(0x95a)](_0x5329fa => _0x5329fa['id'] === _0x368e74); !_0x204dbe && (_0x204dbe = _0x526c43[_0x34e1ad(0x621)][_0x34e1ad(0x95a)](_0x8f4dfd => _0x8f4dfd['id'] === _0x4f4499[_0x34e1ad(0x571)])), !_0x204dbe && (_0x204dbe = _0x454c23[_0x34e1ad(0x621)][0x0]), _0x204dbe && (_0x34fbde['getElementById']('user-post-avatar')['src'] = _0x204dbe['avatar'] || _0x415f4b); } else { const _0x282851 = _0xc377ce['activeListenSession'], _0x20ecab = await _0x4d050d(_0x282851[_0x34e1ad(0x57d)]); if (_0x20ecab && _0x20ecab[_0x34e1ad(0x1cb)]) { const _0x2003ae = _0x14f4d1(_0x20ecab[_0x34e1ad(0x1cb)]); if (_0x2003ae[_0x34e1ad(0xad2)] > 0x0) { const _0x2ed199 = _0x5dac37['currentTime']; let _0x379b55 = -0x1; for (let _0x33630d = 0x0; _0x33630d < _0x2003ae[_0x34e1ad(0xad2)]; _0x33630d++) { if (_0x2ed199 >= _0x2003ae[_0x33630d][_0x34e1ad(0xa4e)]) _0x379b55 = _0x33630d; else break; } const _0x525695 = _0x2003ae[_0x34e1ad(0x3df)]((_0x132cc9, _0x569fff) => { const _0x50ed7b = _0x34e1ad; if ('EmNkV' === _0x50ed7b(0x17d)) _0x532726[_0x1fbb0c]['classList'][_0x50ed7b(0x7ef)](_0x50ed7b(0x50c)), _0x5dc26f[_0x188336][_0x50ed7b(0x525)] = ''; else { const _0x5dfa03 = _0x569fff === _0x379b55 ? '>>\x20' : ''; return '' + _0x5dfa03 + _0x132cc9['text']; } })[_0x34e1ad(0x7e0)]('\x0a'); _0x476b04 = (_0x34e1ad(0x7aa) + _0x282851[_0x34e1ad(0x9aa)] + _0x34e1ad(0x79c) + _0x282851['songName'] + _0x34e1ad(0x8c1) + _0x525695 + '\x0a[歌词结束]\x0a\x0a请根据当前播放的歌词和对话氛围，自然地作出回应。\x0a\x20\x20\x20')['trim'](); } } } } let _0x30ffca = '', _0x24ebac = ''; const _0x5d0494 = _0x185973[_0x34e1ad(0x338)]['length']; if (_0x5d0494 > 0x1) { if (_0x34e1ad(0xa97) !== _0x34e1ad(0xa97)) { const _0x2a647e = _0x548e2a[_0x34e1ad(0x99d)](_0x34e1ad(0xb1c)); _0x2a647e && _0x2a647e[_0x34e1ad(0x65f)]('click', function () { const _0x3fd181 = { 'id': _0x3f3bd3['id'], 'url': _0x2d9a34['playableUrl'] }; _0x328ff5(this, _0x3fd181); }); } else { const _0x1a702d = _0x185973[_0x34e1ad(0x338)][_0x5d0494 - 0x2], _0xfcf511 = _0x185973[_0x34e1ad(0x338)][_0x5d0494 - 0x1]; if (_0x1a702d[_0x34e1ad(0x350)] === ![] && _0xfcf511[_0x34e1ad(0x350)] === !![]) _0x34e1ad(0x6ca) !== _0x34e1ad(0x6ca) ? _0x4d8ca5[_0x34e1ad(0x883)] && _0x17a292['style']['opacity'] !== '0' ? (_0x179893[_0x34e1ad(0xa8f)][_0x34e1ad(0xae8)] = 0x0, _0x587fee(() => { const _0x523205 = _0x34e1ad; _0x1a71cb[_0x523205(0x883)] = _0x38b9f8[_0x523205(0x8ca)](_0x4c42dd), _0x4c4c10[_0x523205(0xa8f)]['opacity'] = 0x1; }, 0x96)) : (_0x3ef7bb['src'] = _0x11022e[_0x34e1ad(0x8ca)](_0x3a7e25), _0x3b6acb[_0x34e1ad(0xa8f)][_0x34e1ad(0xae8)] = 0x1) : _0x24ebac = '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“' + _0x1405e5[_0x34e1ad(0x41b)] + '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。'; else _0x1a702d[_0x34e1ad(0x350)] === !![] && _0xfcf511[_0x34e1ad(0x350)] === ![] && (_0x24ebac = _0x34e1ad(0x6d0) + _0x1405e5[_0x34e1ad(0x41b)] + _0x34e1ad(0x64a)); } } if (_0x1ae477) { if (_0x34e1ad(0x8d9) !== _0x34e1ad(0x16b)) { const _0x2dddcf = 'normal,\x20happy,\x20angry,\x20sad,\x20shy'; _0x30ffca = '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“' + _0x1405e5[_0x34e1ad(0x41b)] + _0x34e1ad(0xa8e) + _0x2dddcf + ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“' + _0x8331e['name'] + _0x34e1ad(0x9d0) + _0x2dddcf + _0x34e1ad(0x1bb) + _0x2dddcf + ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20'; } else _0xec626f['error'](_0x34e1ad(0x6e0) + _0x536cef['id'] + _0x34e1ad(0x137), _0x3a27a); } else _0x34e1ad(0x2e8); const { omniText: _0x54f522 } = _0x341641(_0x8331e['id'], _0x1c165b['id']), _0x32b4e9 = _0x374fbc(), _0x7c9e6e = _0x32c8a5(_0x8331e['id']), _0x543de7 = _0x2f626d(_0x8331e['id']), _0x1914e9 = await _0x15c26d(_0x8331e['id']), _0x139eb7 = typeof _0x5eedac === 'string' ? _0x5eedac[_0x34e1ad(0x644)](_0x34e1ad(0x9c6), _0x8331e[_0x34e1ad(0x41b)])['replaceAll'](_0x34e1ad(0xaf1), _0x1405e5[_0x34e1ad(0x41b)] || '用户') : '', _0x4bac74 = _0x1f134c['map'](_0x429d73 => _0x429d73['name'])['join'](',\x20'); let _0x2552c5 = ''; if (_0x8331e[_0x34e1ad(0x52b)] && _0x8331e['linkedWorldBookIds'][_0x34e1ad(0xad2)] > 0x0) { const _0x47a32c = _0x8331e['linkedWorldBookIds']['map'](_0x2e8ac2 => _0x185973[_0x34e1ad(0x177)][_0x34e1ad(0x95a)](_0x26fffb => _0x26fffb['id'] === _0x2e8ac2))[_0x34e1ad(0x249)](Boolean)[_0x34e1ad(0x3df)](_0x5cf6ec => _0x34e1ad(0xb0a) + _0x5cf6ec[_0x34e1ad(0x41b)] + '\x0a' + _0x5cf6ec[_0x34e1ad(0x725)])[_0x34e1ad(0x7e0)](''); if (_0x47a32c) _0x2552c5 = _0x34e1ad(0x391) + _0x47a32c; } const _0x20dcb1 = _0x1405e5[_0x34e1ad(0x54e)] ? '\x0a\x0a#\x20关于对话者“' + _0x1405e5['name'] + _0x34e1ad(0x6c3) + _0x1405e5['persona'] : ''; let _0x382bc5 = ''; const _0x5d2dfd = new Date(), _0x166a02 = _0x1db616(_0x8331e['id']); _0x382bc5 = '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', _0x382bc5 += _0x34e1ad(0x729) + _0x5d2dfd[_0x34e1ad(0xa5f)]('zh-CN', { 'dateStyle': 'full', 'timeStyle': _0x34e1ad(0x2ff) }) + '\x0a'; if (_0x166a02) { const _0x728834 = new Date(_0x166a02['timestamp']), _0x1c18e8 = _0xa926c9(_0x728834); _0x382bc5 += _0x34e1ad(0x7c0) + _0x1c18e8 + '\x0a'; const _0x2e36f8 = _0x5d2dfd[_0x34e1ad(0x50d)](), _0x4ccff8 = _0x728834[_0x34e1ad(0x50d)](), _0x19c01b = new Date(); _0x19c01b[_0x34e1ad(0x8df)](_0x5d2dfd[_0x34e1ad(0x8f2)]() - 0x1); const _0x29f61e = _0x19c01b[_0x34e1ad(0x50d)](); if (_0x2e36f8 === _0x4ccff8) { const _0x261fcd = (_0x5d2dfd - _0x728834) / (0x3e8 * 0x3c); _0x261fcd < 0x3c ? _0x382bc5 += _0x34e1ad(0x3c1) : _0x34e1ad(0x80b) === _0x34e1ad(0x80b) ? _0x382bc5 += _0x34e1ad(0x395) + Math[_0x34e1ad(0x333)](_0x261fcd / 0x3c) + _0x34e1ad(0x6f9) : (_0x205530 = _0x4143da, _0x16f5e1[_0x34e1ad(0x7bb)][_0x34e1ad(0x99b)](_0x34e1ad(0xa02))); } else { if (_0x29f61e === _0x4ccff8) _0x382bc5 += _0x34e1ad(0xa94); else { if (_0x34e1ad(0xa0b) !== 'yiSNP') _0x32f543[_0x34e1ad(0x296)] = ![]; else { const _0x5f32d9 = Math[_0x34e1ad(0x333)]((_0x5d2dfd - _0x728834) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x382bc5 += _0x34e1ad(0x4ce) + _0x5f32d9 + _0x34e1ad(0x95b); } } } } else _0x382bc5 += '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a'; const _0x75fcc0 = ('\x0a' + _0x30ffca + '\x0a你只扮演【' + _0x8331e[_0x34e1ad(0x41b)] + _0x34e1ad(0x5d8) + _0x8331e[_0x34e1ad(0x41b)] + _0x34e1ad(0xa7b) + _0x8331e[_0x34e1ad(0x41b)] + _0x34e1ad(0x738) + _0x4bac74 + _0x34e1ad(0x408) + _0x139eb7 + '\x0a')[_0x34e1ad(0x40e)](), _0x15a834 = [{ 'role': _0x34e1ad(0x63a), 'content': _0x75fcc0 }], _0x390ba6 = (_0x34e1ad(0x446) + (_0x8331e[_0x34e1ad(0x54e)] || _0x34e1ad(0x242)) + '\x0a' + _0x20dcb1 + '\x20\x0a' + _0x54f522 + '\x0a' + _0x32b4e9 + '\x0a' + _0x7c9e6e + '\x0a' + _0x543de7 + _0x34e1ad(0x998) + _0x1914e9 + _0x34e1ad(0x133) + _0x476b04 + '\x0a' + _0x382bc5 + '\x0a' + _0x2552c5 + '\x0a')[_0x34e1ad(0x40e)](); if (_0x390ba6['replace'](/#.*|\s/g, '')) { if (_0x34e1ad(0x3b4) !== _0x34e1ad(0x3b4)) { if (_0x3fd025) _0x2f67d3[_0x34e1ad(0x9c7)](); } else _0x15a834[_0x34e1ad(0x92b)]({ 'role': _0x34e1ad(0x34d), 'content': _0x390ba6 }), _0x15a834['push']({ 'role': 'assistant', 'content': '好的，我记住了这些人设和历史。现在我们开始对话。' }); } const _0x4ada87 = _0x185973[_0x34e1ad(0x55c)]?.[_0x34e1ad(0xa0f)] ?? 0x64, _0x48fd1a = _0x185973[_0x34e1ad(0x338)][_0x34e1ad(0x247)](-_0x4ada87); for (const _0x11b483 of _0x48fd1a) { const _0x5287d0 = _0x11b483[_0x34e1ad(0x25b)] === 'ai' || _0x11b483['role'] === _0x34e1ad(0x72a) ? _0x34e1ad(0x72a) : _0x34e1ad(0x34d); let _0x17fe89 = { 'role': _0x5287d0, 'content': _0x11b483[_0x34e1ad(0x725)] }, _0x541c22 = !!_0x11b483['content']; if (_0x11b483[_0x34e1ad(0x6b4)] && _0x11b483['content'][_0x34e1ad(0x955)]('表情')) { const _0x258eb2 = _0x11b483[_0x34e1ad(0x725)][_0x34e1ad(0x5ce)](/：(.*?)]$/); _0x17fe89[_0x34e1ad(0x725)] = _0x34e1ad(0x913) + (_0x258eb2 ? _0x258eb2[0x1] : _0x34e1ad(0x946)) + ']', _0x15a834[_0x34e1ad(0x92b)](_0x17fe89); } else { let _0x31c1c5 = null; if (_0x11b483['image']) { if (_0x34e1ad(0x1e4) !== _0x34e1ad(0x5f9)) _0x31c1c5 = _0x11b483[_0x34e1ad(0x7f8)]; else { if (_0x48a7b9) _0x3cfd44[_0x34e1ad(0xa8f)][_0x34e1ad(0x11b)] = _0x34e1ad(0x142) + _0x3c01a8['createObjectURL'](_0x16b92d) + '\x27)'; } } else { if (_0x11b483[_0x34e1ad(0x4c8)]) try { const _0x8497df = await _0x27b140(_0x11b483[_0x34e1ad(0x4c8)]); _0x8497df && (_0x34e1ad(0x321) === _0x34e1ad(0x321) ? _0x31c1c5 = await _0x4ddc71(_0x8497df) : _0x569d6e()); } catch (_0x12e47a) { console['error'](_0x34e1ad(0x39b), _0x12e47a); } } if (_0x31c1c5) { if (_0x34e1ad(0x198) === _0x34e1ad(0x542)) { const _0x5bd16e = _0x50b19d(_0x1bb6c6[0x1], 0xa), _0x1e35c9 = _0x474a7d(_0x24c82f[0x2], 0xa), _0xd14093 = _0x4b5549(_0x2574ad[0x3], 0xa) * (_0x59ba61[0x3][_0x34e1ad(0xad2)] === 0x2 ? 0xa : 0x1), _0x4b4b6f = _0x5bd16e * 0x3c + _0x1e35c9 + _0xd14093 / 0x3e8, _0x5bca17 = _0x238001[_0x34e1ad(0xa89)](_0x4b499b, '')[_0x34e1ad(0x40e)](); _0x5bca17 && _0x448f31[_0x34e1ad(0x92b)]({ 'time': _0x4b4b6f, 'text': _0x5bca17 }); } else _0x17fe89[_0x34e1ad(0x7f8)] = _0x31c1c5, _0x541c22 = !![]; } _0x541c22 && _0x15a834[_0x34e1ad(0x92b)](_0x17fe89); } } try { if (_0x34e1ad(0x3f0) === _0x34e1ad(0x3f0)) { const _0x112636 = await _0x9e4405(_0x15a834); if (!_0x112636) return ![]; if (_0x1ae477) try { let _0x4d15eb = _0x112636[_0x34e1ad(0x40e)](); const _0x238c9b = _0x4d15eb[_0x34e1ad(0x5ce)](/(\[[\s\S]*\])/); _0x238c9b && (_0x34e1ad(0x6cd) !== _0x34e1ad(0x6cd) ? _0x12e443 = _0x2a1bb9['userProfiles'][_0x34e1ad(0x95a)](_0x4d6efb => _0x4d6efb['id'] === _0x3092c5['activeUserProfileId']) || _0x1baf57[_0x34e1ad(0x621)][0x0] : _0x4d15eb = _0x238c9b[0x1]); const _0x4fb9f6 = JSON[_0x34e1ad(0x189)](_0x4d15eb); if (Array[_0x34e1ad(0x64b)](_0x4fb9f6)) { _0x185973[_0x34e1ad(0x60d)] = [..._0x4fb9f6], _0x185973[_0x34e1ad(0x90a)][_0x8331e['id']] = [..._0x4fb9f6], _0x4318d4(); const _0x13c279 = _0x4fb9f6[_0x34e1ad(0x3df)](_0x34e7cd => _0x34e7cd[_0x34e1ad(0x72e)] === 'narrator' ? _0x34e7cd['line'] : _0x34e7cd[_0x34e1ad(0x72e)] + ':\x20' + _0x34e7cd['line'])[_0x34e1ad(0x7e0)]('\x0a\x0a'); _0x185973[_0x34e1ad(0x338)][_0x34e1ad(0x92b)]({ 'role': _0x34e1ad(0x72a), 'senderId': _0x8331e['id'], 'timestamp': Date[_0x34e1ad(0xa59)](), 'isOffline': !![], 'content': _0x13c279 }); } } catch (_0x28f30b) { console[_0x34e1ad(0x815)]('解析AI剧本JSON失败:', _0x28f30b, _0x34e1ad(0x882), _0x112636), _0x185973['conversationHistory']['push']({ 'role': 'assistant', 'senderId': _0x8331e['id'], 'timestamp': Date[_0x34e1ad(0xa59)](), 'isOffline': !![], 'content': _0x34e1ad(0x9c0) + _0x112636 + ']' }); } else { if (_0x34e1ad(0x388) !== 'TWNgI') _0x225c0f(![]), _0x29b289[_0x34e1ad(0x608)] = ![]; else { const _0x4be3a0 = _0x559993(_0x112636), _0x1f07d5 = _0x4be3a0[_0x34e1ad(0x3df)](_0x4527c3 => { const _0x4cb44c = _0x34e1ad; if ('ywIwg' !== _0x4cb44c(0x5b9)) { const _0x11d5fb = _0x4527c3[_0x4cb44c(0x40e)](), _0x14f3ee = _0x11d5fb[_0x4cb44c(0x5ce)](/^\[sticker:(.*?)\]$/), _0x15980d = _0x11d5fb[_0x4cb44c(0x5ce)](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x3af358 = _0x11d5fb['match'](/^\[music:(.*?)\|(.*?)\]$/), _0x40cadc = _0x11d5fb['match'](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/); if (_0x3af358) return { 'type': _0x4cb44c(0x373), 'songName': _0x3af358[0x1][_0x4cb44c(0x40e)](), 'artist': _0x3af358[0x2][_0x4cb44c(0x40e)]() }; else { if (_0x14f3ee) return { 'type': 'sticker', 'name': _0x14f3ee[0x1][_0x4cb44c(0x40e)]() }; else { if (_0x40cadc) { if ('VpZcs' === _0x4cb44c(0x8fd)) return { 'type': _0x4cb44c(0x9bf), 'eventType': _0x40cadc[0x1][_0x4cb44c(0x40e)](), 'eventDate': _0x40cadc[0x2][_0x4cb44c(0x40e)](), 'eventContent': _0x40cadc[0x3]['trim']() }; else _0x3e6e30(_0x5342c7); } else { if (_0x15980d) { if (_0x4cb44c(0x213) !== _0x4cb44c(0x6f5)) { const _0x2667c4 = parseFloat(_0x15980d[0x1]), _0x425453 = _0x15980d[0x2][_0x4cb44c(0x40e)](), _0x4b3a5f = _0x16366b(_0x185973['activeChatId']); let _0x4d6d47 = null; if (_0x425453 === _0x4b3a5f[_0x4cb44c(0x41b)]) _0x4d6d47 = _0x4b3a5f['id']; else { if (_0x4cb44c(0x7e3) === 'tjNpc') { const _0x2d29f2 = _0x3b6e44(); if (_0x2d29f2[_0x4cb44c(0x117)] === _0x4cb44c(0x4b1)) { const _0x253955 = _0x185973[_0x4cb44c(0xb29)][_0x4cb44c(0x95a)](_0x185325 => _0x2d29f2[_0x4cb44c(0xa1e)][_0x4cb44c(0x955)](_0x185325['id']) && _0x185325['name'] === _0x425453); if (_0x253955) _0x4d6d47 = _0x253955['id']; } } else _0x4d97c5[_0x4cb44c(0x92b)](_0x54cedf); } if (_0x4d6d47) return { 'type': _0x4cb44c(0x690), 'amount': _0x2667c4, 'recipientId': _0x4d6d47, 'senderId': _0x8331e['id'] }; else return { 'type': _0x4cb44c(0xa15), 'content': _0x4cb44c(0x50b) + _0x425453 + _0x4cb44c(0x2e3) }; } else { _0x2420ba = ![], _0x1c2124[_0x4cb44c(0xa8f)][_0x4cb44c(0x8f8)] = _0x4cb44c(0x941), _0x442779[_0x4cb44c(0x727)]('galgame-textbox-container')['style'][_0x4cb44c(0x8f8)] = _0x4cb44c(0x6df), _0x951bcd[_0x4cb44c(0x727)](_0x4cb44c(0x46f))[_0x4cb44c(0xa8f)][_0x4cb44c(0x8f8)] = _0x4cb44c(0x6df); if (!_0x4a27ba) { const _0x56baa3 = _0x8261ca(_0x1e776a['activeMeetingCharId']); _0x56baa3 && (_0x56baa3[_0x4cb44c(0x3bd)] = _0x112876, _0x1679f6(_0x1458b4['activeMeetingCharId'], 'normal')); } } } else { if (_0x11d5fb) { if (_0x4cb44c(0x3e2) !== _0x4cb44c(0x3e2)) _0x2ed68f[_0x4cb44c(0x815)](_0x4cb44c(0x9c5), _0x438d86); else return { 'type': _0x4cb44c(0xa15), 'content': _0x11d5fb }; } } } } } return null; } else { const _0x50987e = _0x2c6357['split']('--'); _0x50987e[_0x4cb44c(0xad2)] === 0x2 && _0x50987e[0x0][_0x4cb44c(0x40e)]() && _0x50987e[0x1][_0x4cb44c(0x40e)]()[_0x4cb44c(0xa51)]('http') ? _0x46138b[_0x4cb44c(0x92b)]({ 'name': _0x50987e[0x0]['trim'](), 'url': _0x50987e[0x1][_0x4cb44c(0x40e)]() }) : _0x48634f++; } })[_0x34e1ad(0x249)](Boolean), _0x1c876a = async _0x3aecd9 => { const _0x3b20c5 = _0x34e1ad, _0x174648 = { 'role': _0x3b20c5(0x72a), 'senderId': _0x8331e['id'], 'timestamp': Date[_0x3b20c5(0xa59)](), 'isOffline': _0x1ae477 }; if (_0x3aecd9[_0x3b20c5(0x117)] === 'music') { if ('KTGXO' === _0x3b20c5(0xaf8)) { const _0x19d8b4 = _0x4e9c8e['conversationHistory'][_0x3b20c5(0x249)](_0x51f208 => _0x51f208[_0x3b20c5(0x117)] === 'music' && _0x51f208['playableUrl'])[_0x3b20c5(0x3df)](_0x4ad057 => ({ ..._0x4ad057, 'source': 'chat' })); _0x11f443[_0x3b20c5(0x92b)](..._0x19d8b4); } else { const { songName: _0x52615e, artist: _0x535816 } = _0x3aecd9; _0x174648[_0x3b20c5(0x117)] = 'music', _0x174648[_0x3b20c5(0x725)] = _0x3b20c5(0xae4) + _0x52615e + _0x3b20c5(0x908) + _0x535816 + ']'; try { if (_0x3b20c5(0x777) !== 'OmTag') { const _0x52694b = await _0x5c775b(_0x52615e, _0x535816); let _0x235cfc = null; if (_0x52694b[_0x3b20c5(0x766)]) { const _0x1b47dd = await _0x3a1fc9(_0x52694b['cover']); _0x235cfc = 'music_cover_' + Date[_0x3b20c5(0xa59)]() + '_' + Math['random'](), await _0x5bc724(_0x235cfc, _0x1b47dd); } Object['assign'](_0x174648, { 'songName': _0x52615e, 'artist': _0x535816, 'coverId': _0x235cfc, 'playableUrl': _0x52694b['url'] }); } else _0x3c2f29(![]); } catch (_0x57395e) { Object[_0x3b20c5(0x989)](_0x174648, { 'songName': _0x52615e, 'artist': _0x535816, 'coverId': null, 'playableUrl': null }); } } } else { if (_0x3aecd9[_0x3b20c5(0x117)] === _0x3b20c5(0x2dc)) { const _0x26da6e = _0x1f134c[_0x3b20c5(0x95a)](_0x19d25d => _0x19d25d[_0x3b20c5(0x41b)] === _0x3aecd9[_0x3b20c5(0x41b)]); if (_0x26da6e) Object[_0x3b20c5(0x989)](_0x174648, { 'content': _0x3b20c5(0x3eb) + _0x26da6e[_0x3b20c5(0x41b)] + ']', 'displayUrl': _0x26da6e[_0x3b20c5(0x4e8)] }); else _0x174648[_0x3b20c5(0x725)] = _0x3b20c5(0x913) + _0x3aecd9['name'] + ']'; } else { if (_0x3aecd9['type'] === _0x3b20c5(0x690)) { const _0x50de29 = _0x3aecd9[_0x3b20c5(0xb2b)] === _0x16366b(_0x185973[_0x3b20c5(0x572)])['id'] ? _0x16366b(_0x185973[_0x3b20c5(0x572)]) : _0xec7e1c(_0x3aecd9[_0x3b20c5(0xb2b)]); Object[_0x3b20c5(0x989)](_0x174648, { 'type': _0x3b20c5(0x690), 'amount': _0x3aecd9[_0x3b20c5(0x853)], 'recipientId': _0x3aecd9[_0x3b20c5(0xb2b)], 'content': _0x3b20c5(0x20c) + (_0x50de29?.[_0x3b20c5(0x41b)] || '未知') + '\x20转账\x20' + _0x3aecd9['amount'] + ']' }); } else { if (_0x3aecd9[_0x3b20c5(0x117)] === 'create_event') { const _0x14d7ff = _0x16366b(_0x1c165b['id']); if (!_0x14d7ff || !_0x14d7ff['id']) { if (_0x3b20c5(0x64d) !== _0x3b20c5(0x64d)) _0x188da3['classList'][_0x3b20c5(0x7ef)](_0x3b20c5(0x7e5)), _0xfe292b[_0x3b20c5(0x7bb)]['remove'](_0x3b20c5(0x421)); else return console['error'](_0x3b20c5(0x771)), null; } _0x185973[_0x3b20c5(0x1bf)][_0x3b20c5(0x92b)]({ 'id': _0x3b20c5(0x960) + Date[_0x3b20c5(0xa59)](), 'date': _0x3aecd9[_0x3b20c5(0x29f)], 'type': _0x3aecd9[_0x3b20c5(0x5ff)], 'content': _0x3aecd9['eventContent'], 'userId': _0x14d7ff['id'], 'createdBy': 'ai' }), _0x35c1de(), _0x3202da(), _0x4b7ffa(); const _0x3b7c3a = _0xec7e1c(_0x8331e['id']); _0x3b7c3a && _0x3aecd9[_0x3b20c5(0x5ff)] === _0x3b20c5(0x305) && _0x1de23f(_0x3b20c5(0x324) + _0x3b7c3a['name'] + _0x3b20c5(0x635) + _0x3aecd9[_0x3b20c5(0x902)]); return { 'role': 'assistant', 'senderId': _0x8331e['id'], 'timestamp': Date[_0x3b20c5(0xa59)](), 'isOffline': _0x1ae477, 'content': null }; return { 'role': _0x3b20c5(0x72a), 'senderId': _0x8331e['id'], 'timestamp': Date[_0x3b20c5(0xa59)](), 'isOffline': _0x1ae477, 'content': null }; } else { const _0x5c66c5 = _0x1e574b(_0x3aecd9[_0x3b20c5(0x725)]); Object[_0x3b20c5(0x989)](_0x174648, { 'content': _0x5c66c5[_0x3b20c5(0x725)], 'quotedMessage': _0x5c66c5[_0x3b20c5(0x4b6)] }); } } } } return _0x174648; }, _0x1a1d51 = await Promise[_0x34e1ad(0x4cd)](_0x1f07d5['map'](_0x1c876a)); for (const _0x2a09d0 of _0x1a1d51) { _0x34e1ad(0x231) !== _0x34e1ad(0x231) ? _0x2d12c2 += '-\x20**状态提示**:\x20你和Ta已经好几天没联系了，应该用全新的问候开启对话。\x0a' : (_0x2a09d0[_0x34e1ad(0x725)] || _0x2a09d0['displayUrl'] || _0x2a09d0[_0x34e1ad(0x117)] === _0x34e1ad(0x373)) && ('COnPK' !== _0x34e1ad(0x863) ? (await new Promise(_0x11cc83 => setTimeout(_0x11cc83, 0x12c + Math[_0x34e1ad(0xb26)]() * 0x190)), _0x185973[_0x34e1ad(0x338)][_0x34e1ad(0x92b)](_0x2a09d0), _0x2207b1()) : _0x520358(_0x34e1ad(0x7af) + _0x376ba3[_0x34e1ad(0x140)])); } } } return _0x2a4d47(), _0x2207b1(), !![]; } else return (_0x190a55?.[_0x34e1ad(0xb29)] || [])['find'](_0x5b76ec => _0x5b76ec['id'] === _0x1e3e5f); } catch (_0x1fcd0e) { if (_0x1fcd0e[_0x34e1ad(0x41b)] !== 'AbortError') { if ('nNhqt' !== _0x34e1ad(0x32a)) _0x28aab8[_0x34e1ad(0x7ef)](); else { console['error'](_0x34e1ad(0x5c1), _0x1fcd0e); const _0x4749b4 = { 'role': 'assistant', 'content': _0x34e1ad(0x157) + _0x1fcd0e[_0x34e1ad(0x140)], 'senderId': _0x8331e['id'], 'isOffline': _0x1ae477 }; _0x185973[_0x34e1ad(0x338)][_0x34e1ad(0x92b)](_0x4749b4), _0x2207b1(); } } return ![]; } finally { _0xd8f0c1(![]); } } } async function _0x33c8d0() { const _0x352101 = _0x59a4d7; if ('sCKIP' !== 'sCKIP') _0x485760[_0x352101(0xb33)] = '旁白', _0x458b3b[_0x352101(0xb33)] = _0x352101(0x2e7); else { const _0xa26f53 = _0x3b6e44(); if (!_0xa26f53 || _0xa26f53['type'] !== _0x352101(0x261)) { if (_0x352101(0x3f6) === _0x352101(0x3f6)) { _0x1de23f(_0x352101(0xa8b)); return; } else _0xb65b4b[_0x352101(0x4b6)] = { ..._0x34c543['activeQuote'] }; } if (_0x185973[_0x352101(0x608)]) { if (_0x352101(0x85d) === _0x352101(0x5c6)) _0x40aa2c[_0x352101(0x727)]('galgame-text')[_0x352101(0xb33)] = _0x352101(0x681); else { _0x1de23f(_0x352101(0x895)); return; } } const _0x39af0a = await _0xf1c3f7(_0x352101(0x415)); if (!_0x39af0a) return; _0x55dd5e(!![], _0x352101(0x620)), _0xeb9c5a['value'] = '', _0x53fdc4[_0x352101(0x7bb)][_0x352101(0x99b)](_0x352101(0xa02)), _0x185973['isGenerating'] = !![]; try { const _0x731e4e = _0xec7e1c(_0xa26f53[_0x352101(0xa1e)][0x0]), _0x4661aa = _0x16366b(_0xa26f53['id']), _0xc2b82 = _0x2000c1(_0xa26f53['id']); if (_0xc2b82['length'] === 0x0) { _0xeb9c5a[_0x352101(0x525)] = _0x352101(0xa90); return; } const _0x3fafd2 = _0xc2b82[_0x352101(0x3df)](_0x3e136b => { const _0x4a89ac = _0x352101; if (_0x4a89ac(0x4aa) !== _0x4a89ac(0x30c)) { const _0x3b13e7 = new Date(_0x3e136b[_0x4a89ac(0x55a)]), _0x4985a8 = _0x3b13e7[_0x4a89ac(0x613)]() + '-' + String(_0x3b13e7[_0x4a89ac(0x5ac)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x3b13e7['getDate']())['padStart'](0x2, '0'), _0x52f597 = String(_0x3b13e7[_0x4a89ac(0x342)]())['padStart'](0x2, '0') + ':' + String(_0x3b13e7[_0x4a89ac(0xa2d)]())[_0x4a89ac(0x16e)](0x2, '0'); let _0x43f2e1 = '未知'; if (_0x3e136b['role'] === _0x4a89ac(0x34d)) _0x4a89ac(0xa79) !== _0x4a89ac(0x496) ? _0x43f2e1 = _0x4661aa[_0x4a89ac(0x41b)] : _0x179e18 = 'horizontal'; else { if (_0x4a89ac(0x233) !== 'OfWmH') _0x43f2e1 = _0x731e4e['name']; else { const _0x23e583 = _0x2da363[_0x4a89ac(0x177)][_0x4a89ac(0x95a)](_0x405810 => _0x405810['id'] === _0x528ea6); if (!_0x23e583) return; _0x17c863['getElementById'](_0x4a89ac(0x499))[_0x4a89ac(0x525)] = _0x23e583['id'], _0x14671b[_0x4a89ac(0x727)](_0x4a89ac(0x607))[_0x4a89ac(0xb33)] = _0x4a89ac(0xae0), _0x35c865['getElementById'](_0x4a89ac(0xadd))['value'] = _0x23e583[_0x4a89ac(0x41b)], _0x3a24fa['getElementById']('world-book-edit-content')['value'] = _0x23e583[_0x4a89ac(0x725)]; } } let _0xa6ec97 = _0x3e136b[_0x4a89ac(0x725)]; if (_0x3e136b[_0x4a89ac(0x6b4)]) _0xa6ec97 = _0x4a89ac(0x3d9); if (_0x3e136b[_0x4a89ac(0x4c8)]) _0xa6ec97 = '[发送了图片]'; return '[' + _0x4985a8 + '\x20' + _0x52f597 + _0x4a89ac(0x752) + _0x43f2e1 + ']:\x20' + _0xa6ec97; } else return _0x3fbf8b[_0x4a89ac(0xb29)][_0x4a89ac(0x95a)](_0x556514 => _0x556514['id'] === _0x363cb4); })['join']('\x0a'), _0x1f6858 = _0x52cd01[_0x352101(0xa89)](/{charName}/g, _0x731e4e['name'])[_0x352101(0xa89)](/{userName}/g, _0x4661aa[_0x352101(0x41b)]), _0x120ee9 = [{ 'role': _0x352101(0x63a), 'content': _0x1f6858 }, { 'role': _0x352101(0x34d), 'content': _0x3fafd2 }], _0x5e7f0f = await _0x9e4405(_0x120ee9); _0xeb9c5a[_0x352101(0x525)] = _0x5e7f0f || _0x352101(0xa4b), _0xeb9c5a[_0x352101(0xb0e)] = 0x0; } catch (_0x5d3328) { console[_0x352101(0x815)](_0x352101(0x144), _0x5d3328), _0xeb9c5a['value'] = _0x352101(0x208) + _0x5d3328['message']; } finally { if (_0x352101(0x709) !== _0x352101(0x872)) _0x55dd5e(![]), _0x185973['isGenerating'] = ![]; else { _0x2010f9[_0x352101(0x338)] = [], _0xbf4ebd(); return; } } } } async function _0x590cd1() { const _0x33138e = _0x59a4d7; console[_0x33138e(0x5be)]('---\x20开始AI回复流程\x20---'); if (!_0x185973[_0x33138e(0x8a2)][_0x33138e(0x6e2)] || !_0x185973['apiSettings']['key'] || !_0x185973['apiSettings']['model']) { _0x1de23f(_0x33138e(0xa4d)); return; } const _0x5be599 = _0x185973[_0x33138e(0x338)]['at'](-0x1)?.[_0x33138e(0x25b)] === _0x33138e(0x34d); if (!_0x5be599 || _0x185973[_0x33138e(0x608)]) return; const _0x13f674 = _0x3b6e44(); if (!_0x13f674) return; _0x185973[_0x33138e(0x608)] = !![], _0xd8f0c1(!![]); try { if (_0x33138e(0xab2) === _0x33138e(0x298)) return ''; else { if (_0x13f674[_0x33138e(0x117)] === _0x33138e(0x261)) { if (_0x33138e(0xa5d) === _0x33138e(0x32b)) { _0x1bdadc('至少要保留一个用户。'); return; } else { const _0x1b346e = _0xec7e1c(_0x13f674[_0x33138e(0xa1e)][0x0]); console[_0x33138e(0x5be)]('准备调用\x20generateAs...'); if (_0x1b346e) await _0x5d0cc0(_0x1b346e, { 'force': !![] }); } } else { const _0x33af54 = await _0x1b4e0c(); if (_0x33af54 && _0x33af54['events']?.['length']) await _0x57ca29(_0x33af54); else { if ('EQNVo' !== _0x33138e(0xa5a)) { console[_0x33138e(0x7b8)](_0x33138e(0x3b0)); const _0x20d147 = _0x13f674[_0x33138e(0xa1e)]['map'](_0xec7e1c)[_0x33138e(0x249)](Boolean); if (!_0x20d147['length']) return; let _0x3171aa = 0x0; for (const _0x5f2d11 of _0x20d147) { _0x5d0cc0(_0x5f2d11, { 'force': !![], 'delayMs': _0x3171aa }), _0x3171aa += 0x1f4; } } else { const _0x165125 = _0x43d011[_0x33138e(0x6ac)][_0x33138e(0x95a)](_0x15bea6 => _0x15bea6[_0x33138e(0xa1e)]['includes'](_0x2f0820)); if (!_0x165125) return ''; const _0x5cb21e = _0x19f019(_0x165125['id']), _0x58b2f6 = _0x2ddc73['calendarEvents']['filter'](_0x5117c5 => _0x5117c5['userId'] === _0x5cb21e['id'] || !_0x5117c5['userId']); if (_0x58b2f6[_0x33138e(0xad2)] === 0x0) return ''; const _0x4c74e0 = _0x58b2f6[_0x33138e(0x3df)](_0x82c00c => { const _0x3cff96 = _0x33138e, _0x40a837 = _0x82c00c[_0x3cff96(0x117)] === _0x3cff96(0x305) ? _0x3cff96(0x8c3) : '待办'; return _0x3cff96(0x5f4) + _0x40a837 + ']\x20' + _0x82c00c[_0x3cff96(0x23e)] + ':\x20' + _0x82c00c['content']; })[_0x33138e(0x7e0)]('\x0a'); return '\x0a#\x20你的日程与纪念日\x20(由\x20' + _0x5cb21e[_0x33138e(0x41b)] + '\x20记录)\x0a' + _0x4c74e0; } } } } } catch (_0x1f6fe0) { _0x1f6fe0[_0x33138e(0x41b)] !== 'AbortError' && (console[_0x33138e(0x815)](_0x33138e(0x7c5), _0x1f6fe0), _0x2d578d({ 'role': _0x33138e(0x72a), 'content': _0x33138e(0x157) + _0x1f6fe0[_0x33138e(0x140)] }, _0x185973[_0x33138e(0x338)][_0x33138e(0xad2)] - 0x1)); } finally { _0x33138e(0x5ca) === _0x33138e(0x5ca) ? (_0x185973[_0x33138e(0x608)] = ![], _0xd8f0c1(![])) : (_0x1a2132[_0x33138e(0x778)](_0x33138e(0x6b1) + _0x5a507c['id']), _0x5a5d69(_0x33138e(0x6d1) + _0x11308d['name'] + _0x33138e(0x793))); } } function _0x7be6d2(_0x4dc25a, _0x40ae1f) { const _0x46e5fe = _0x59a4d7; if (_0x46e5fe(0x956) !== 'EtYbT') { const _0x163459 = _0x40ae1f[_0x46e5fe(0xa9e)](), _0x580549 = _0x4dc25a[_0x46e5fe(0xa9e)](); if (_0x163459['startsWith']('claude')) return _0x46e5fe(0x10f); if (_0x580549['includes'](_0x46e5fe(0x692))) return _0x46e5fe(0x10f); if (_0x580549[_0x46e5fe(0x955)]('googleapis.com')) return _0x46e5fe(0x5ad); if (_0x163459['startsWith']('gemini')) return _0x46e5fe(0x5ad); return _0x46e5fe(0x41f); } else _0x22c8f4[_0x46e5fe(0x4a8)] = null, _0xd79386(), _0x3d5bd9('同步已断开。'), _0x1fcff7(), _0x280737[_0x46e5fe(0x7bb)]['remove'](_0x46e5fe(0xa02)), _0x10228c(() => _0x3886e4[_0x46e5fe(0xa8f)]['display'] = _0x46e5fe(0x941), 0x12c); } async function _0x9e4405(_0x3f69ae, _0x5b47cd = {}) { const _0xc68f78 = _0x59a4d7; if ('qICFP' === _0xc68f78(0x56b)) _0x3c0371 = _0x5808dd[_0xc68f78(0x189)](_0x3ca123); else { _0x185973[_0xc68f78(0x417)] && _0x185973[_0xc68f78(0x417)][_0xc68f78(0xa82)](_0xc68f78(0x93a)); _0x185973['currentAbortController'] = new AbortController(); const _0x1a36ba = _0x185973[_0xc68f78(0x417)]['signal'], { endpoint: _0x40b613, key: _0x57629d, model: _0x1b9e2f } = _0x185973[_0xc68f78(0x8a2)], _0x19b260 = !!_0x5b47cd['json'], _0x2d5d73 = _0x7be6d2(_0x40b613, _0x1b9e2f); console[_0xc68f78(0x5be)](_0xc68f78(0x3cf) + _0x2d5d73); let _0x4d8903 = ''; try { if ('bbCPx' === 'OyERv') { const _0x331353 = _0x3f403b[_0xc68f78(0x660)] ? _0x450833(_0x364b6a[_0xc68f78(0x660)]) : null; return _0x331353?.[_0xc68f78(0x41b)] || _0xc68f78(0x226); } else { switch (_0x2d5d73) { case _0xc68f78(0x10f): { const _0x5a40f6 = _0x3add1b(_0x57629d), _0x4701ce = _0x3f69ae[_0xc68f78(0x95a)](_0x42bec5 => _0x42bec5[_0xc68f78(0x25b)] === _0xc68f78(0x63a))?.['content'] || '', _0x5d471b = _0x3f69ae[_0xc68f78(0x249)](_0xfb16a4 => _0xfb16a4[_0xc68f78(0x25b)] !== _0xc68f78(0x63a)), _0x3febd6 = { 'model': _0x1b9e2f, 'system': _0x4701ce, 'messages': _0x5d471b[_0xc68f78(0x3df)](_0x19b731 => ({ 'role': _0x19b731[_0xc68f78(0x25b)], 'content': [{ 'type': 'text', 'text': _0x19b731['content'] }] })), 'max_tokens': 0x1000 }, _0x3ebd28 = await fetch(_0x40b613, { 'method': _0xc68f78(0x259), 'headers': { 'Content-Type': _0xc68f78(0x76a), 'x-api-key': _0x5a40f6, 'anthropic-version': _0xc68f78(0x6f8) }, 'body': JSON[_0xc68f78(0xa1d)](_0x3febd6), 'signal': _0x1a36ba }); if (!_0x3ebd28['ok']) { const _0xa90011 = await _0x3ebd28[_0xc68f78(0x4ac)]()[_0xc68f78(0x246)](() => ({})); throw new Error(_0xc68f78(0x197) + _0x3ebd28[_0xc68f78(0x728)] + _0xc68f78(0x908) + (_0xa90011[_0xc68f78(0x815)]?.[_0xc68f78(0x140)] || _0x3ebd28['statusText'])); } const _0x48080b = await _0x3ebd28[_0xc68f78(0x4ac)](); _0x4d8903 = _0x48080b[_0xc68f78(0x725)]?.[0x0]?.[_0xc68f78(0xa15)] || ''; break; } case _0xc68f78(0x5ad): { const _0xdd8cee = _0x3add1b(_0x57629d), _0x16282f = _0x40b613['includes'](_0xc68f78(0x58b)), _0x1a3837 = _0x4039e0 => { const _0x39eae4 = _0xc68f78; if (_0x39eae4(0x773) !== _0x39eae4(0x773)) return; else { const _0x15aec8 = []; if (_0x4039e0['content']) _0x15aec8[_0x39eae4(0x92b)]({ 'text': _0x4039e0[_0x39eae4(0x725)] }); if (_0x4039e0[_0x39eae4(0x7f8)]) { if (_0x39eae4(0x202) === _0x39eae4(0x6bc)) { _0x297e40[_0x39eae4(0x5b2)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>'; return; } else { const _0xb73b5 = _0x4039e0['image'][_0x39eae4(0x657)](',')[0x1], _0xd317be = _0x4039e0[_0x39eae4(0x7f8)]['substring'](_0x4039e0['image']['indexOf'](':') + 0x1, _0x4039e0['image'][_0x39eae4(0x209)](';')) || _0x39eae4(0x1d8); _0x15aec8['push']({ 'inline_data': { 'mime_type': _0xd317be, 'data': _0xb73b5 } }); } } return _0x15aec8; } }, _0x38186f = _0x3f69ae[_0xc68f78(0x3df)](_0x1fe935 => ({ 'role': _0x1fe935[_0xc68f78(0x25b)] === 'assistant' ? _0xc68f78(0xa36) : _0x1fe935[_0xc68f78(0x25b)] === 'system' ? _0xc68f78(0x34d) : _0x1fe935[_0xc68f78(0x25b)], 'parts': _0x1a3837(_0x1fe935) }))[_0xc68f78(0x249)](_0x169175 => _0x169175['parts']['length'] > 0x0), _0x275e44 = { 'contents': _0x38186f }; _0x19b260 && _0x16282f && (_0x275e44['generationConfig'] = { 'response_mime_type': _0xc68f78(0x76a) }); const _0x1df042 = _0x40b613 + _0xc68f78(0x285) + _0x1b9e2f + ':streamGenerateContent?key=' + _0xdd8cee + _0xc68f78(0x77e), _0x5da0bb = await fetch(_0x1df042, { 'method': _0xc68f78(0x259), 'headers': { 'Content-Type': 'application/json' }, 'body': JSON[_0xc68f78(0xa1d)](_0x275e44), 'signal': _0x1a36ba }); if (!_0x5da0bb['ok']) throw new Error(_0xc68f78(0x3a6) + _0x5da0bb[_0xc68f78(0x728)]); const _0x12cc15 = _0x5da0bb[_0xc68f78(0x5df)]['getReader'](), _0x4ff2f0 = new TextDecoder(); let _0x881cbf = ''; while (!![]) { if (_0x1a36ba[_0xc68f78(0x83f)]) { console['log'](_0xc68f78(0x82b)), _0x12cc15[_0xc68f78(0x492)](); break; } const { done: _0x5f3633, value: _0xfab5cc } = await _0x12cc15['read'](); if (_0x5f3633) break; const _0x3cd081 = _0x4ff2f0[_0xc68f78(0x3db)](_0xfab5cc, { 'stream': !![] }), _0x501b59 = _0x3cd081[_0xc68f78(0x657)]('\x0a')['filter'](_0x2e5bd8 => _0x2e5bd8['trim']()[_0xc68f78(0xa51)](_0xc68f78(0x1ad))); for (const _0x70936 of _0x501b59) { if ('Hglnf' !== _0xc68f78(0x23a)) _0x49b3f6['getElementById'](_0xc68f78(0x724))[_0xc68f78(0x883)] = _0x5b4b4a[_0xc68f78(0xa44)] || _0x2067ab; else { const _0x5dc9ee = _0x70936[_0xc68f78(0xa89)](_0xc68f78(0x1ae), ''); if (_0x5dc9ee === _0xc68f78(0x56e)) break; try { if (_0xc68f78(0x4ab) === 'UISZC') { _0x5f5d51('真是的，必需的祭品都还没准备好！'); return; } else _0x881cbf += JSON['parse'](_0x5dc9ee)[_0xc68f78(0x50f)][0x0][_0xc68f78(0x725)][_0xc68f78(0x427)][0x0]['text']; } catch { } } } } _0x4d8903 = _0x881cbf; break; } case 'openai': default: { if (_0xc68f78(0x19f) !== 'NwBvm') { const _0x1e09fd = _0x3add1b(_0x57629d), _0x3f2cc4 = _0x40b613[_0xc68f78(0xa89)](/\/+$/, '') + _0xc68f78(0x52c), _0x3571f4 = _0x3f69ae[_0xc68f78(0x3df)](_0x5b2cd5 => { const _0x19c822 = _0xc68f78; if (_0x5b2cd5[_0x19c822(0x25b)] === _0x19c822(0x34d) && _0x5b2cd5[_0x19c822(0x7f8)]) { if ('tzscq' !== _0x19c822(0x32d)) _0x11adce[_0x19c822(0xa8f)][_0x19c822(0x8f8)] = _0x19c822(0x941); else return { 'role': _0x19c822(0x34d), 'content': [{ 'type': _0x19c822(0xa15), 'text': _0x5b2cd5['content'] || '\x20' }, { 'type': _0x19c822(0x130), 'image_url': { 'url': _0x5b2cd5['image'], 'detail': _0x19c822(0x267) } }] }; } return { 'role': _0x5b2cd5[_0x19c822(0x25b)], 'content': _0x5b2cd5[_0x19c822(0x725)] }; })[_0xc68f78(0x249)](_0x19884a => _0x19884a[_0xc68f78(0x725)]), _0x2320e1 = { 'model': _0x1b9e2f, 'messages': _0x3571f4, 'max_tokens': 0x1000, ..._0x19b260 ? { 'response_format': { 'type': _0xc68f78(0x46c) } } : {} }, _0x17d826 = await fetch(_0x3f2cc4, { 'method': 'POST', 'headers': { 'Content-Type': _0xc68f78(0x76a), 'Authorization': 'Bearer\x20' + _0x1e09fd }, 'body': JSON[_0xc68f78(0xa1d)](_0x2320e1), 'signal': _0x1a36ba }); if (!_0x17d826['ok']) { const _0x9ab8c0 = await _0x17d826[_0xc68f78(0x4ac)]()[_0xc68f78(0x246)](() => ({})); throw new Error(_0xc68f78(0x435) + _0x17d826[_0xc68f78(0x728)] + _0xc68f78(0x908) + (_0x9ab8c0[_0xc68f78(0x815)]?.[_0xc68f78(0x140)] || _0x17d826['statusText'])); } const _0x42dcc9 = await _0x17d826['json'](); _0x4d8903 = _0x42dcc9[_0xc68f78(0xa41)]?.[0x0]?.[_0xc68f78(0x140)]?.[_0xc68f78(0x725)] || ''; break; } else { const _0x5d7708 = (_0x318b45 - _0x535d2c) / (0x3e8 * 0x3c); _0x5d7708 < 0x3c ? _0x572cfc += _0xc68f78(0x3c1) : _0x41dc63 += '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概' + _0x19014d[_0xc68f78(0x333)](_0x5d7708 / 0x3c) + _0xc68f78(0x6f9); } } }return _0x4d8903; } } catch (_0x31d500) { if (_0xc68f78(0x34a) === _0xc68f78(0x34a)) { if (_0x31d500['name'] === _0xc68f78(0x5db)) return console['log']('Fetch\x20request\x20was\x20aborted.'), ''; throw _0x31d500; } else { const _0x589430 = _0x924421(_0x231621['activeMeetingCharId']); _0x589430 && (delete _0x589430[_0xc68f78(0x3bd)], _0x9a8099(), _0x520917(_0x589430['id'], _0xc68f78(0x2ba)), _0x7e94e6(_0xc68f78(0x272)), _0x200add(!![])); } } finally { _0x185973['currentAbortController'] && _0x185973['currentAbortController'][_0xc68f78(0x940)] === _0x1a36ba && (_0xc68f78(0x85f) === 'HXqoT' ? _0x2f453a['click']() : _0x185973[_0xc68f78(0x417)] = null); } } } async function _0x4ef4fa() { const _0xe8aaa2 = _0x59a4d7, _0x278dc2 = _0x1bf96a[_0xe8aaa2(0x15b)][_0xe8aaa2(0x7bb)][_0xe8aaa2(0x40b)](_0xe8aaa2(0x1b5)), _0x144992 = _0x278dc2 ? _0x18f698['value'] : null; let _0x5a6a18 = null, _0x35029f = ''; if (_0x278dc2 && _0x144992) { _0x5a6a18 = _0x185973['chats'][_0xe8aaa2(0x95a)](_0x4dac27 => _0x4dac27[_0xe8aaa2(0x117)] === _0xe8aaa2(0x261) && _0x4dac27['participantIds']['includes'](_0x144992)); const _0x7ffd6f = _0xec7e1c(_0x144992); _0x35029f = _0x7ffd6f ? _0x7ffd6f[_0xe8aaa2(0x41b)] : _0xe8aaa2(0x1d7); } else { if (_0x185973[_0xe8aaa2(0x572)]) { _0x5a6a18 = _0x3b6e44(); const _0xf2a63b = document['getElementById'](_0xe8aaa2(0x44b))[_0xe8aaa2(0xb33)]; _0x35029f = _0xf2a63b || _0xe8aaa2(0x6c8); } } if (!_0x5a6a18) { if ('dcbMl' === _0xe8aaa2(0x953)) { _0x1de23f(_0xe8aaa2(0x306)); return; } else _0x127db2 = '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“' + _0xf69c73[_0xe8aaa2(0x41b)] + _0xe8aaa2(0x18f); } const _0x56f9a5 = await _0xf1c3f7(_0xe8aaa2(0x647) + _0x35029f + _0xe8aaa2(0x75a)); if (!_0x56f9a5) return; _0x5a6a18['id'] === _0x185973[_0xe8aaa2(0x572)] && (_0xe8aaa2(0x5a6) !== _0xe8aaa2(0x92c) ? (_0x4a03ff(), _0x185973[_0xe8aaa2(0x338)] = [], _0xd16a30()) : _0x508f32()); try { _0xe8aaa2(0x293) !== _0xe8aaa2(0x293) ? (_0x18bc71(_0x22ed58), _0x563c4a(_0xe8aaa2(0x1ea) + _0x5e7287[_0xe8aaa2(0x41b)] + '”已删除。'), _0x225628(_0xe8aaa2(0xb17), _0xe8aaa2(0x15b)), _0x79c66a(![])) : localStorage[_0xe8aaa2(0x778)](_0xe8aaa2(0x6b1) + _0x5a6a18['id']); } catch (_0x305228) { if ('eSmEd' !== _0xe8aaa2(0x67b)) { const _0x5f0783 = { 'id': 'wb_' + _0x12833d[_0xe8aaa2(0xa59)](), 'name': _0x38eea7, 'content': _0x1a6b92 }; _0x32b5a6['worldBooks'][_0xe8aaa2(0x92b)](_0x5f0783); } else console[_0xe8aaa2(0x815)](_0xe8aaa2(0x349) + _0x5a6a18['id'], _0x305228); } _0x1de23f('\x22' + _0x35029f + _0xe8aaa2(0x793)); } const _0x23b1dd = document[_0x59a4d7(0x727)]('export-all-data-button'), _0x5184f4 = document[_0x59a4d7(0x727)]('import-all-data-button'), _0x205b3f = document[_0x59a4d7(0x727)](_0x59a4d7(0x97e)); _0x23b1dd[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), async () => { const _0x5a8221 = _0x59a4d7; _0x55dd5e(!![], '正在打包数据，请稍候...'); const _0x4e5dac = []; try { const _0xd74ea4 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [] }; for (let _0x1668bd = 0x0; _0x1668bd < localStorage[_0x5a8221(0xad2)]; _0x1668bd++) { const _0x2a9ade = localStorage[_0x5a8221(0x8e1)](_0x1668bd); if (_0x2a9ade) _0xd74ea4['localStorageData'][_0x2a9ade] = localStorage[_0x5a8221(0x8ee)](_0x2a9ade); } const _0x4e2de8 = await _0x2e65e1, _0x728809 = _0x4e2de8[_0x5a8221(0x1f2)](_0x100aee, 'readonly'), _0x5e9170 = _0x728809[_0x5a8221(0x238)](_0x100aee), _0x2135e7 = await new Promise((_0x4cace9, _0x542f28) => { const _0x4dd70d = _0x5a8221, _0x1e4b00 = _0x5e9170[_0x4dd70d(0x604)](); _0x1e4b00[_0x4dd70d(0x17f)] = () => _0x4cace9(_0x1e4b00[_0x4dd70d(0x973)]), _0x1e4b00[_0x4dd70d(0x8c6)] = () => _0x542f28(_0x1e4b00['error']); }); for (const _0x29a6d7 of _0x2135e7) { if (_0x29a6d7[_0x5a8221(0x857)] instanceof Blob) try { if (_0x5a8221(0x41d) !== 'izBes') { if (_0x529642[_0x5a8221(0x6ba)][_0x5a8221(0xa37)](_0x5a8221(0x904))) return; const _0x2dd0fd = _0x235159[_0x5a8221(0x727)](_0x5a8221(0x835)); _0x2dd0fd && _0x2dd0fd[_0x5a8221(0x9c7)](); } else _0xd74ea4[_0x5a8221(0x263)][_0x29a6d7['id']] = await _0x4ddc71(_0x29a6d7[_0x5a8221(0x857)]); } catch (_0x411288) { _0x4e5dac[_0x5a8221(0x92b)](_0x29a6d7['id']); } } const _0xe914c2 = _0x4e2de8[_0x5a8221(0x1f2)](_0x229bd9, _0x5a8221(0x42d)), _0x49620b = _0xe914c2[_0x5a8221(0x238)](_0x229bd9), _0x1b3b2f = await new Promise((_0x2a77c8, _0x1b680d) => { const _0x13a404 = _0x5a8221; if (_0x13a404(0x792) !== _0x13a404(0xa3b)) { const _0x337f74 = _0x49620b[_0x13a404(0x604)](); _0x337f74[_0x13a404(0x17f)] = () => _0x2a77c8(_0x337f74[_0x13a404(0x973)]), _0x337f74['onerror'] = () => _0x1b680d(_0x337f74[_0x13a404(0x815)]); } else { const _0x338676 = _0x13a404(0xadc) + _0x63ad0d; _0x5d0b4f(_0x338676), _0x4f49fd(!![]); } }); for (const _0x4df17f of _0x1b3b2f) { const _0xb63c71 = { ..._0x4df17f }; _0x4df17f['audio'] instanceof Blob && (_0x5a8221(0x58c) !== _0x5a8221(0x5e9) ? _0xb63c71[_0x5a8221(0x1a7)] = await _0x4ddc71(_0x4df17f[_0x5a8221(0x1a7)]) : _0x4b6426 = _0x5a8221(0x84b) + _0x1865ab + _0x5a8221(0x88b)); if (_0x4df17f[_0x5a8221(0x766)] instanceof Blob) { if (_0x5a8221(0x458) === 'vpusL') _0xb63c71[_0x5a8221(0x766)] = await _0x4ddc71(_0x4df17f[_0x5a8221(0x766)]); else { const _0x1ae14c = _0x4b168a['parse'](_0x50c104['getItem'](_0x5a8221(0x399)) || '{}'), _0x190ad6 = { ..._0x1ae14c, ..._0x50bc59 }; _0x1d30c[_0x5a8221(0x295)]('badgeState', _0x5c227a['stringify'](_0x190ad6)); } } _0xd74ea4[_0x5a8221(0x981)][_0x5a8221(0x92b)](_0xb63c71); } const _0x4821e1 = new Blob([JSON[_0x5a8221(0xa1d)](_0xd74ea4, null, 0x2)], { 'type': _0x5a8221(0x76a) }), _0x67b8b1 = URL[_0x5a8221(0x8ca)](_0x4821e1), _0x2cf006 = document['createElement']('a'), _0x4f27b1 = new Date(), _0x46083f = _0x4f27b1[_0x5a8221(0x613)]() + '-' + String(_0x4f27b1[_0x5a8221(0x5ac)]() + 0x1)[_0x5a8221(0x16e)](0x2, '0') + '-' + String(_0x4f27b1[_0x5a8221(0x8f2)]())[_0x5a8221(0x16e)](0x2, '0'); _0x2cf006['href'] = _0x67b8b1, _0x2cf006['download'] = _0x5a8221(0x356) + _0x46083f + _0x5a8221(0x60c), document[_0x5a8221(0x5df)][_0x5a8221(0x322)](_0x2cf006), _0x2cf006[_0x5a8221(0x9c7)](), document['body'][_0x5a8221(0x8da)](_0x2cf006), URL[_0x5a8221(0x33a)](_0x67b8b1), _0x55dd5e(![]), _0x4e5dac[_0x5a8221(0xad2)] > 0x0 ? _0x1de23f(_0x5a8221(0x703) + _0x4e5dac[_0x5a8221(0x7e0)]('\x0a')) : _0x1de23f(_0x5a8221(0x73e)); } catch (_0x179284) { if (_0x5a8221(0x288) === _0x5a8221(0x6c4)) { const _0x4da3ba = _0x204565[_0x5a8221(0x475)][_0x5a8221(0x613)](), _0x4105b2 = _0x1ef723['currentDate'][_0x5a8221(0x5ac)](); _0x215a29[_0x5a8221(0x727)](_0x5a8221(0x74f))['textContent'] = _0x4da3ba + '年\x20' + (_0x4105b2 + 0x1) + '月', _0x4e1132(_0x4da3ba, _0x4105b2), _0x3aaf4a(_0x4b786b[_0x5a8221(0x900)]); } else _0x55dd5e(![]), console[_0x5a8221(0x815)](_0x5a8221(0x3da), _0x179284), _0x1de23f('导出过程中发生严重错误:\x20' + _0x179284['message']); } }), _0x5184f4[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x481176 = _0x59a4d7; if (_0x481176(0x29a) !== _0x481176(0x84a)) _0x205b3f['click'](); else { const _0x3361c9 = _0x25ced8['createElement'](_0x481176(0xb08)); _0x3361c9[_0x481176(0x8f1)] = _0x481176(0xad5); const _0x1e1dbb = _0x32ac49['cover'] ? _0x3ebb9d['createObjectURL'](_0x83ccf1[_0x481176(0x766)]) : _0x147198; _0x3361c9[_0x481176(0x5b2)] = _0x481176(0x1eb) + _0x1e1dbb + '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>' + (_0x2db98a['info'][_0x481176(0x455)] || _0x481176(0x1a1)) + _0x481176(0x7d8) + (_0x71b07a[_0x481176(0x4b7)]['歌手'] || _0x481176(0x747)) + _0x481176(0xa1f), _0x3361c9[_0x481176(0x65f)](_0x481176(0x9c7), () => { _0xbc34f0(_0x417940); }), _0x145748['appendChild'](_0x3361c9); } }), _0x2b2afe[_0x59a4d7(0x65f)]('click', _0x23f3a6), _0x205b3f['addEventListener'](_0x59a4d7(0x86e), _0x8801e9 => { const _0x1c6e4a = _0x59a4d7, _0x1ff2e0 = _0x8801e9[_0x1c6e4a(0x6ba)][_0x1c6e4a(0x409)][0x0]; if (!_0x1ff2e0) return; _0xf1c3f7(_0x1c6e4a(0x985))[_0x1c6e4a(0x368)](_0x15b8fb => { const _0x29f5da = _0x1c6e4a; if (!_0x15b8fb) { if (_0x29f5da(0x7bd) === _0x29f5da(0xa4f)) { _0x40b2f3[_0x29f5da(0x5b2)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>'; return; } else { _0x205b3f[_0x29f5da(0x525)] = ''; return; } } _0x55dd5e(!![], _0x29f5da(0x6d2)); const _0x4bcda2 = new FileReader(); _0x4bcda2[_0x29f5da(0xa11)] = async _0x5a87b7 => { const _0x341a23 = _0x29f5da; if (_0x341a23(0x984) !== _0x341a23(0x984)) _0x1bb768['getElementById']('editing-user-id')[_0x341a23(0x525)] = '', _0x5e177f[_0x341a23(0x727)](_0x341a23(0x40a))['textContent'] = _0x341a23(0xad6), _0x2aefa8[_0x341a23(0x727)](_0x341a23(0xa70))[_0x341a23(0x525)] = _0x341a23(0x653) + (_0x484515[_0x341a23(0x621)][_0x341a23(0xad2)] + 0x1), _0x2ac83d[_0x341a23(0xa8f)]['backgroundImage'] = _0x341a23(0x142) + _0xb18d1 + '\x27)', _0x356230[_0x341a23(0x727)](_0x341a23(0xa8d))[_0x341a23(0x525)] = '', _0xc122a9[_0x341a23(0xa8f)][_0x341a23(0x8f8)] = _0x341a23(0x941), _0x4b3aa3['getElementById'](_0x341a23(0x9f0))[_0x341a23(0xa8f)][_0x341a23(0x8f8)] = _0x341a23(0x941); else try { const _0x41283e = JSON[_0x341a23(0x189)](_0x5a87b7[_0x341a23(0x6ba)][_0x341a23(0x973)]); if (!_0x41283e['localStorageData'] || !_0x41283e[_0x341a23(0x263)]) throw new Error('文件格式不正确，不是一个有效的备份文件。'); _0x55dd5e(!![], _0x341a23(0x42a)); const _0x447151 = await Promise['all'](Object['keys'](_0x41283e[_0x341a23(0x263)])[_0x341a23(0x3df)](async _0x4a8f7a => { const _0x18e187 = _0x341a23, _0x3d15ea = _0x41283e[_0x18e187(0x263)][_0x4a8f7a]; if (typeof _0x3d15ea === _0x18e187(0x486) && _0x3d15ea['startsWith'](_0x18e187(0x1ad))) { const _0x12f3c7 = await _0x3a1fc9(_0x3d15ea); return { 'id': _0x4a8f7a, 'blob': _0x12f3c7 }; } return null; }))[_0x341a23(0x368)](_0x265360 => _0x265360[_0x341a23(0x249)](Boolean)), _0x1cc3ac = []; if (_0x41283e[_0x341a23(0x981)]) { if (_0x341a23(0x135) !== _0x341a23(0x929)) { _0x55dd5e(!![], _0x341a23(0x800)); const _0x2c1d53 = _0x41283e[_0x341a23(0x981)]['map'](async _0x29c359 => { const _0x5ab204 = _0x341a23, _0x1f1f2f = { ..._0x29c359 }; if (_0x29c359[_0x5ab204(0x1a7)]) _0x1f1f2f[_0x5ab204(0x1a7)] = await _0x3a1fc9(_0x29c359[_0x5ab204(0x1a7)]); if (_0x29c359[_0x5ab204(0x766)]) _0x1f1f2f['cover'] = await _0x3a1fc9(_0x29c359['cover']); return _0x1f1f2f; }); _0x1cc3ac[_0x341a23(0x92b)](...await Promise['all'](_0x2c1d53)); } else try { _0x3a77a2[_0x341a23(0x295)]('musicPlayerState', _0x1901ea['stringify']({ 'playlist': _0x4d5cfd[_0x341a23(0x2fd)], 'currentIndex': _0x106b02['currentlyPlayingIndex'] })); } catch (_0x40c784) { _0x2c160e[_0x341a23(0x815)]('保存播放器状态失败，真是没用。', _0x40c784); } } _0x55dd5e(!![], _0x341a23(0x83e)), localStorage[_0x341a23(0x70e)](); for (const _0x13aadd in _0x41283e[_0x341a23(0x444)]) { localStorage['setItem'](_0x13aadd, _0x41283e[_0x341a23(0x444)][_0x13aadd]); } _0x55dd5e(!![], '正在写入新数据...'); const _0x4bf0a3 = await _0x2e65e1, _0xe2a300 = _0x4bf0a3['transaction']([_0x100aee, _0x229bd9, _0x4115d0], 'readwrite'), _0x5a431c = _0xe2a300[_0x341a23(0x238)](_0x100aee), _0x1e734a = _0xe2a300[_0x341a23(0x238)](_0x229bd9), _0x2cf7ff = _0xe2a300['objectStore'](_0x4115d0); _0x5a431c[_0x341a23(0x70e)](), _0x1e734a[_0x341a23(0x70e)](), _0x2cf7ff[_0x341a23(0x70e)](), _0x447151['forEach'](_0x9f4bb => _0x5a431c['put'](_0x9f4bb)), _0x1cc3ac[_0x341a23(0x3ea)](_0x9b0470 => _0x1e734a[_0x341a23(0x360)](_0x9b0470)), await new Promise((_0x1f1358, _0x5e1779) => { const _0x3d29b9 = _0x341a23; _0xe2a300['oncomplete'] = _0x1f1358, _0xe2a300[_0x3d29b9(0x8c6)] = _0x5b38c4 => _0x5e1779(_0x5b38c4[_0x3d29b9(0x6ba)][_0x3d29b9(0x815)]); }), _0x55dd5e(![]), _0x1de23f('数据导入成功！应用即将刷新...'), setTimeout(() => location[_0x341a23(0x986)](), 0x640); } catch (_0x222c5e) { _0x55dd5e(![]), console[_0x341a23(0x815)]('全量导入失败:', _0x222c5e), _0x1de23f('导入失败:\x20' + _0x222c5e[_0x341a23(0x140)]); } finally { _0x341a23(0x947) === _0x341a23(0x3f3) ? (_0x124f71[_0x341a23(0x2fd)] = _0x1f9699, _0x230777['currentlyPlayingIndex'] = _0x4dadb8, _0x1cdcf2[_0x341a23(0x8d6)] = ![], _0xfe3753()) : _0x205b3f['value'] = ''; } }, _0x4bcda2[_0x29f5da(0x8f9)](_0x1ff2e0); }); }); function _0xf44c20() { const _0xc83886 = _0x59a4d7; _0x3dcc2e[_0xc83886(0x525)] = _0x185973['apiSettings'][_0xc83886(0x6e2)] || '', _0x201f4e[_0xc83886(0x525)] = _0x185973[_0xc83886(0x8a2)][_0xc83886(0x8e1)] || '', _0x55471f['value'] = _0x185973[_0xc83886(0x8a2)][_0xc83886(0xa36)] || '', _0x5861ea[_0xc83886(0x525)] = String(_0x185973['preferences']?.[_0xc83886(0xa0f)] ?? 0x64), document[_0xc83886(0x727)](_0xc83886(0x1a6))['value'] = _0x185973[_0xc83886(0x8a2)][_0xc83886(0x9eb)] || _0xc83886(0x41f); } function _0x145106() { const _0x4d0dbc = _0x59a4d7; if (_0x4d0dbc(0x5f2) === _0x4d0dbc(0x3ff)) _0x2ba3bc[_0x4d0dbc(0xa16)] && _0x107188[_0x4d0dbc(0xa16)][_0x4d0dbc(0x193)] && (_0x569e2f['style'][_0x4d0dbc(0x8f8)] = _0x4d0dbc(0x26a), _0x136fa5(() => _0x3c9276[_0x4d0dbc(0x7bb)]['add'](_0x4d0dbc(0xa02)), 0xa)); else { _0x185973['apiSettings'][_0x4d0dbc(0x6e2)] = _0x3dcc2e[_0x4d0dbc(0x525)][_0x4d0dbc(0x40e)](), _0x185973[_0x4d0dbc(0x8a2)][_0x4d0dbc(0x8e1)] = _0x201f4e[_0x4d0dbc(0x525)][_0x4d0dbc(0x40e)](), _0x185973[_0x4d0dbc(0x8a2)]['model'] = _0x55471f['value'][_0x4d0dbc(0x40e)](), _0x185973['apiSettings'][_0x4d0dbc(0x9eb)] = document[_0x4d0dbc(0x727)](_0x4d0dbc(0x1a6))[_0x4d0dbc(0x525)]; const _0x9f93fb = parseInt(_0x5861ea['value'], 0xa); _0x185973[_0x4d0dbc(0x55c)][_0x4d0dbc(0xa0f)] = Number[_0x4d0dbc(0x58f)](_0x9f93fb) && _0x9f93fb > 0x0 ? _0x9f93fb : 0x64, _0x35c1de(), _0x1de23f(_0x4d0dbc(0x935)); } } function _0x2a4443() { const _0x1ba0a0 = _0x59a4d7; if (_0x1ba0a0(0xb19) === _0x1ba0a0(0xb19)) _0x4f48de[_0x1ba0a0(0x525)] = _0x185973['userProfile'][_0x1ba0a0(0x41b)] || '', _0x26d005[_0x1ba0a0(0x883)] = _0x185973['userProfile'][_0x1ba0a0(0xa44)] || _0x5b8a69, _0x229151[_0x1ba0a0(0x525)] = _0x185973[_0x1ba0a0(0x382)][_0x1ba0a0(0x54e)] || ''; else { const _0x275ff2 = _0x5bc5c1[_0x1ba0a0(0x7a2)](_0x1ba0a0(0xb08)); _0x275ff2[_0x1ba0a0(0x8f1)] = _0x1ba0a0(0x448), _0x275ff2[_0x1ba0a0(0xa13)]['id'] = _0x5abdf5['id']; const _0x112fb0 = _0x2b5e45['id'] === _0x24cc90['activeUserProfileId'] ? _0x1ba0a0(0x4ba) : ''; _0x275ff2[_0x1ba0a0(0x5b2)] = _0x1ba0a0(0x4c4) + (_0x227597[_0x1ba0a0(0xa44)] || _0x5a9536) + _0x1ba0a0(0x6f2) + _0xa5fe70[_0x1ba0a0(0x41b)] + _0x112fb0 + _0x1ba0a0(0x30e) + _0x531d27[_0x1ba0a0(0x54e)][_0x1ba0a0(0xb10)](0x0, 0x64) + _0x1ba0a0(0x5ec), _0x275ff2[_0x1ba0a0(0x65f)]('click', () => _0x4f4189(_0x1e4f04['id'])), _0x2ba666[_0x1ba0a0(0x322)](_0x275ff2); } } async function _0x2d15ff(_0x94612c = null) { const _0x19ec78 = _0x59a4d7; if (_0x19ec78(0x911) !== _0x19ec78(0x911)) _0x490894[_0x19ec78(0x815)](_0x19ec78(0x8f3), _0x21b3b1); else { _0x8cf86(_0x19ec78(0x15b), _0x5cc51a); const _0x4580d7 = document[_0x19ec78(0x727)](_0x19ec78(0x4ec)), _0x58ada3 = document['getElementById'](_0x19ec78(0x780)), _0x1092b7 = document[_0x19ec78(0x99d)](_0x19ec78(0x39d)); if (_0x94612c) { const _0x30242d = _0x185973[_0x19ec78(0xb29)][_0x19ec78(0x95a)](_0x396045 => _0x396045['id'] === _0x94612c); _0x4580d7[_0x19ec78(0x525)] = _0x30242d['avatarFrameUrl'] || '', _0x58ada3['value'] = _0x30242d[_0x19ec78(0x2ac)] || ''; if (_0x1092b7) _0x1092b7['style'][_0x19ec78(0x11b)] = _0x30242d[_0x19ec78(0x57a)] ? 'url(\x27' + _0x30242d['avatarFrameUrl'] + '\x27)' : ''; } else { if (_0x19ec78(0x123) !== _0x19ec78(0x123)) { if (_0x22565e === null) return; const _0x446b5e = _0x4ef23d[_0x19ec78(0x338)][_0x132ec4]; if (!_0x446b5e) return; _0x40a161[_0x19ec78(0x525)] = _0x446b5e[_0x19ec78(0x725)], _0x4fd0c0(), _0x20e18b[_0x19ec78(0x7bb)][_0x19ec78(0x99b)]('show'), _0x1ba864[_0x19ec78(0x9d3)](); } else { _0x4580d7[_0x19ec78(0x525)] = '', _0x58ada3[_0x19ec78(0x525)] = ''; if (_0x1092b7) _0x1092b7[_0x19ec78(0xa8f)][_0x19ec78(0x11b)] = ''; } } _0x4580d7[_0x19ec78(0x65f)](_0x19ec78(0x2d0), () => { const _0x3fcc56 = _0x19ec78; if (_0x1092b7) _0x1092b7['style'][_0x3fcc56(0x11b)] = _0x4580d7['value'] ? _0x3fcc56(0x142) + _0x4580d7[_0x3fcc56(0x525)] + '\x27)' : ''; }); const _0x2b0fda = document[_0x19ec78(0x727)](_0x19ec78(0x7b4)); _0x2b0fda[_0x19ec78(0x5b2)] = '', _0x185973[_0x19ec78(0x177)][_0x19ec78(0x3ea)](_0x45c270 => { const _0x57047d = _0x19ec78, _0x279358 = document[_0x57047d(0x7a2)]('label'); _0x279358['innerHTML'] = _0x57047d(0x8b2) + _0x45c270['id'] + _0x57047d(0x168) + _0x45c270['name'], _0x2b0fda[_0x57047d(0x322)](_0x279358); }), _0x40e732(_0x19ec78(0x48c)), _0x3269a3[_0x19ec78(0x883)] = _0xcd0fda, _0x326602[_0x19ec78(0x525)] = '', _0x5f355d[_0x19ec78(0xa8f)][_0x19ec78(0x11b)] = '', _0x4c2815['value'] = '', _0x15ee57[_0x19ec78(0xa8f)][_0x19ec78(0x11b)] = '', _0x16c51b[_0x19ec78(0x525)] = ''; const _0x76a1a = [_0x19ec78(0x2ba), 'happy', _0x19ec78(0x4b0), 'sad', 'shy']; _0x76a1a['forEach'](_0x343821 => { const _0x28c7a6 = _0x19ec78; if ('cluyk' === _0x28c7a6(0x1ab)) document['getElementById'](_0x28c7a6(0x9d7) + _0x343821 + _0x28c7a6(0x8d0))[_0x28c7a6(0xa8f)][_0x28c7a6(0x11b)] = '', document[_0x28c7a6(0x727)](_0x28c7a6(0x9d7) + _0x343821 + '-input')[_0x28c7a6(0x525)] = ''; else return '刚才'; }); if (_0x94612c) { const _0x3581f5 = _0x185973[_0x19ec78(0xb29)][_0x19ec78(0x95a)](_0x2dc7f1 => _0x2dc7f1['id'] === _0x94612c); if (!_0x3581f5) return; _0x18f698[_0x19ec78(0x525)] = _0x3581f5['id'], _0x1569b3[_0x19ec78(0xb33)] = _0x19ec78(0x3e9), _0x562290[_0x19ec78(0x525)] = _0x3581f5[_0x19ec78(0x41b)], _0x3363c1[_0x19ec78(0x525)] = _0x3581f5[_0x19ec78(0x3ca)], _0x549d18['value'] = _0x3581f5[_0x19ec78(0x54e)], document['getElementById'](_0x19ec78(0x9fe))[_0x19ec78(0x525)] = _0x3581f5[_0x19ec78(0x974)] || ''; const _0x312893 = _0x185973[_0x19ec78(0x6ac)]['find'](_0x1fc61a => _0x1fc61a[_0x19ec78(0x117)] === _0x19ec78(0x261) && _0x1fc61a[_0x19ec78(0xa1e)][_0x19ec78(0x955)](_0x94612c)); document['getElementById'](_0x19ec78(0x48c))['value'] = _0x312893?.[_0x19ec78(0x4eb)] || _0x185973[_0x19ec78(0x571)]; try { if (_0x19ec78(0x8d4) !== _0x19ec78(0x8d4)) _0x4bf674[_0x19ec78(0xb33)] = _0x5db578[_0x19ec78(0x81a)](_0x50494b)[_0x19ec78(0x3df)](_0x2fd28f => _0x2fd28f[_0x19ec78(0x186)][_0x19ec78(0xb33)][_0x19ec78(0x40e)]())[_0x19ec78(0x7e0)]('、'); else { const _0xc2e3c = await _0x27b140(_0x19ec78(0x6e6) + _0x3581f5['id']), _0x32cbff = await _0x27b140(_0x19ec78(0x897) + _0x3581f5['id']), _0x1eba25 = await _0x27b140('char_offline_bg_' + _0x3581f5['id']); _0x3269a3[_0x19ec78(0x883)] = _0xc2e3c ? URL[_0x19ec78(0x8ca)](_0xc2e3c) : _0x3581f5[_0x19ec78(0xa44)] || _0xcd0fda; if (_0x32cbff) _0x5f355d[_0x19ec78(0xa8f)][_0x19ec78(0x11b)] = _0x19ec78(0x142) + URL[_0x19ec78(0x8ca)](_0x32cbff) + '\x27)'; if (_0x1eba25) _0x15ee57[_0x19ec78(0xa8f)][_0x19ec78(0x11b)] = _0x19ec78(0x142) + URL['createObjectURL'](_0x1eba25) + '\x27)'; for (const _0x363714 of _0x76a1a) { if (_0x19ec78(0x51c) === 'jgnLA') { const _0x5c787d = _0x26dd62[_0x19ec78(0x525)][_0x19ec78(0x40e)](); if (!_0x5c787d) { _0x461919(_0x19ec78(0x839)); return; } const _0x95ad61 = _0x3827ce[_0x19ec78(0x81a)](_0x1b7d1d[_0x19ec78(0xa1b)](_0x19ec78(0x34e)))[_0x19ec78(0x3df)](_0x3bbe73 => _0x3bbe73['dataset']['id']); if (_0x95ad61[_0x19ec78(0xad2)] < 0x2) { _0x71a41('群聊至少需要2名成员。'); return; } const _0x587931 = { 'id': _0x19ec78(0x952) + _0x1214e4[_0x19ec78(0xa59)](), 'type': _0x19ec78(0x4b1), 'name': _0x5c787d, 'participantIds': _0x95ad61 }; _0x3677e6[_0x19ec78(0x6ac)]['push'](_0x587931), _0x21dca3[_0x19ec78(0x572)] = _0x587931['id'], _0x505b24(), _0xb896d3(), _0x30d34f(), _0x3d0bb8(), _0x5d2e8f(_0x19ec78(0x327) + _0x5c787d + _0x19ec78(0xb2f)), _0x1cf90a(_0x19ec78(0xb17), _0x19ec78(0xa57)); } else { const _0x99b83 = await _0x27b140(_0x19ec78(0x6a5) + _0x363714 + '_' + _0x3581f5['id']); _0x99b83 && (document[_0x19ec78(0x727)](_0x19ec78(0x9d7) + _0x363714 + '-preview')[_0x19ec78(0xa8f)][_0x19ec78(0x11b)] = _0x19ec78(0x142) + URL['createObjectURL'](_0x99b83) + '\x27)'); } } } } catch (_0x25180e) { if (_0x19ec78(0x734) === _0x19ec78(0x741)) { const _0x2ea8f1 = { 'id': _0x19ec78(0xac8) + _0x4b1a27[_0x19ec78(0xa59)](), 'name': _0x14bbd1, 'boundUserProfileId': _0x19bdd0, 'memberCharacterIds': _0x4a6e1d, 'posts': [] }; _0xffbf9e[_0x19ec78(0x6e1)]['push'](_0x2ea8f1); } else console[_0x19ec78(0x815)]('加载角色\x20' + _0x3581f5['id'] + _0x19ec78(0x9d8), _0x25180e), _0x3269a3[_0x19ec78(0x883)] = _0x3581f5[_0x19ec78(0xa44)] || _0xcd0fda; } _0x3581f5[_0x19ec78(0x52b)] && _0x2b0fda['querySelectorAll'](_0x19ec78(0x6e7))['forEach'](_0x3a60b3 => { const _0x46cab2 = _0x19ec78; if (_0x3581f5[_0x46cab2(0x52b)][_0x46cab2(0x955)](_0x3a60b3[_0x46cab2(0x525)])) _0x3a60b3['checked'] = !![]; }), _0x3a6bb0(); } else _0x18f698['value'] = '', _0x1569b3[_0x19ec78(0xb33)] = _0x19ec78(0x61d), _0x562290[_0x19ec78(0x525)] = _0x19ec78(0x961) + (_0x185973[_0x19ec78(0xb29)][_0x19ec78(0xad2)] + 0x1), _0x3363c1[_0x19ec78(0x525)] = '', _0x549d18[_0x19ec78(0x525)] = _0x19ec78(0x4d7), document[_0x19ec78(0x727)]('char-edit-css')['value'] = '', _0x3a6bb0(); const _0x491909 = document[_0x19ec78(0x727)](_0x19ec78(0x9fe)); let _0x587365 = document[_0x19ec78(0x727)](_0x19ec78(0x156)); !_0x587365 && (_0x587365 = document[_0x19ec78(0x7a2)](_0x19ec78(0xa8f)), _0x587365['id'] = _0x19ec78(0x156), document['head'][_0x19ec78(0x322)](_0x587365)); const _0x40c3c9 = () => { const _0xd4bd19 = _0x19ec78; if (_0xd4bd19(0x760) === _0xd4bd19(0x760)) { const _0x400dc7 = _0x491909['value']; let _0x22bfa7 = _0x400dc7[_0xd4bd19(0xa89)](/\.bubble\.sent/g, _0xd4bd19(0xb11))[_0xd4bd19(0xa89)](/\.bubble\.received/g, _0xd4bd19(0x68d)); _0x587365[_0xd4bd19(0x5b2)] = _0x22bfa7; } else _0x3f2c3c(![]), _0x1bf904['error']('全量导入失败:', _0xd47b57), _0x43b50f('导入失败:\x20' + _0x30e4eb[_0xd4bd19(0x140)]); }; _0x491909[_0x19ec78(0x149)](_0x19ec78(0x2d0), _0x40c3c9), _0x491909[_0x19ec78(0x65f)](_0x19ec78(0x2d0), _0x40c3c9), _0x40c3c9(); } } async function _0xd732e9() { const _0xee018b = _0x59a4d7, _0x73554d = _0x18f698[_0xee018b(0x525)]; if (!_0x73554d) { _0x1de23f(_0xee018b(0x264)); return; } const _0x111172 = _0xec7e1c(_0x73554d); if (!_0x111172) return; _0x55dd5e(!![], _0xee018b(0x225) + _0x111172['name'] + _0xee018b(0x57b)); try { const _0x5bb6ff = { 'type': _0xee018b(0x648), 'version': 0x1, 'name': _0x111172[_0xee018b(0x41b)], 'remark': _0x111172[_0xee018b(0x3ca)], 'persona': _0x111172[_0xee018b(0x54e)], 'bubbleCss': _0x111172[_0xee018b(0x974)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x4f8b3d = await _0x27b140(_0xee018b(0x6e6) + _0x111172['id']); if (_0x4f8b3d) _0x5bb6ff[_0xee018b(0xa44)] = await _0x4ddc71(_0x4f8b3d); const _0x307d73 = [_0xee018b(0x2ba), _0xee018b(0x93d), _0xee018b(0x4b0), _0xee018b(0x81d), _0xee018b(0x920)]; for (const _0x30407b of _0x307d73) { const _0x1ddd55 = await _0x27b140('char_sprite_' + _0x30407b + '_' + _0x111172['id']); _0x1ddd55 && ('uXHCv' === _0xee018b(0x6a2) ? _0x5bb6ff[_0xee018b(0xa64)][_0x30407b] = await _0x4ddc71(_0x1ddd55) : _0x42f1d7(_0xee018b(0x453))); } _0x111172[_0xee018b(0x52b)] && _0x111172[_0xee018b(0x52b)][_0xee018b(0xad2)] > 0x0 && (_0xee018b(0x7d6) !== _0xee018b(0x497) ? _0x5bb6ff[_0xee018b(0x177)] = _0x111172[_0xee018b(0x52b)][_0xee018b(0x3df)](_0x23b666 => _0x185973[_0xee018b(0x177)][_0xee018b(0x95a)](_0x4e4b64 => _0x4e4b64['id'] === _0x23b666))['filter'](Boolean)[_0xee018b(0x3df)](_0x380cd3 => ({ 'name': _0x380cd3[_0xee018b(0x41b)], 'content': _0x380cd3[_0xee018b(0x725)] })) : _0x3b8ce5[_0xee018b(0x815)](_0xee018b(0x286), _0x54017d)); const _0x1f2709 = new Blob([JSON['stringify'](_0x5bb6ff, null, 0x2)], { 'type': _0xee018b(0x76a) }), _0x7191c6 = URL[_0xee018b(0x8ca)](_0x1f2709), _0x3ef3df = document[_0xee018b(0x7a2)]('a'); _0x3ef3df[_0xee018b(0x8ce)] = _0x7191c6, _0x3ef3df['download'] = _0x111172['name'] + _0xee018b(0x6f4), document[_0xee018b(0x5df)]['appendChild'](_0x3ef3df), _0x3ef3df[_0xee018b(0x9c7)](), document['body']['removeChild'](_0x3ef3df), URL[_0xee018b(0x33a)](_0x7191c6); } catch (_0x3cd539) { console[_0xee018b(0x815)](_0xee018b(0xa03), _0x3cd539), _0x1de23f(_0xee018b(0x3fa) + _0x3cd539[_0xee018b(0x140)]); } finally { _0x55dd5e(![]); } } async function _0x468005(_0x3b69eb) { const _0x13b64b = _0x59a4d7; if ('RcQnv' === 'dvFyE') _0x387cb8[_0x13b64b(0x571)] = _0x3af9b2, _0x270bd7(), _0x30a513(_0x13b64b(0x84c)), _0x1a16a2(), _0xac19bd[_0x13b64b(0x727)]('set-active-user-button')[_0x13b64b(0xa8f)][_0x13b64b(0x8f8)] = _0x13b64b(0x941); else { const _0x1abcc3 = _0x3b69eb[_0x13b64b(0x6ba)][_0x13b64b(0x409)][0x0]; if (!_0x1abcc3) return; _0x55dd5e(!![], '正在解析角色卡...'); const _0x55d093 = new FileReader(); _0x55d093[_0x13b64b(0xa11)] = async _0x51fe87 => { const _0xe31e03 = _0x13b64b; try { const _0x3297a6 = JSON[_0xe31e03(0x189)](_0x51fe87[_0xe31e03(0x6ba)][_0xe31e03(0x973)]); if (_0x3297a6[_0xe31e03(0x117)] !== _0xe31e03(0x648)) { if ('YYxgr' === _0xe31e03(0x2b0)) throw new _0x57cc9e(_0xe31e03(0x6dd)); else throw new Error(_0xe31e03(0x6dd)); } const _0x2fd9f4 = []; if (_0x3297a6['worldBooks'] && _0x3297a6[_0xe31e03(0x177)][_0xe31e03(0xad2)] > 0x0) { if (_0xe31e03(0xaca) !== _0xe31e03(0xaca)) _0x4e932d[_0xe31e03(0x322)](_0x3498eb['createElement'](_0xe31e03(0xb08))); else for (const _0x333fb0 of _0x3297a6[_0xe31e03(0x177)]) { if (_0xe31e03(0x485) !== _0xe31e03(0x93f)) { let _0x586ccc = _0x185973[_0xe31e03(0x177)][_0xe31e03(0x95a)](_0x3d3e75 => _0x3d3e75[_0xe31e03(0x41b)] === _0x333fb0[_0xe31e03(0x41b)]); if (_0x586ccc) _0x2fd9f4[_0xe31e03(0x92b)](_0x586ccc['id']); else { const _0x5a275f = { 'id': _0xe31e03(0x950) + Date['now']() + '_' + Math[_0xe31e03(0xb26)](), 'name': _0x333fb0[_0xe31e03(0x41b)], 'content': _0x333fb0[_0xe31e03(0x725)] }; _0x185973['worldBooks']['push'](_0x5a275f), _0x2fd9f4[_0xe31e03(0x92b)](_0x5a275f['id']); } } else _0x24e211 = _0x511912[_0xe31e03(0x52b)][_0xe31e03(0x3df)](_0x35a1e6 => _0x173610['worldBooks'][_0xe31e03(0x95a)](_0x34cdea => _0x34cdea['id'] === _0x35a1e6))[_0xe31e03(0x249)](_0x42af65)[_0xe31e03(0x3df)](_0x27d433 => _0xe31e03(0x5d2) + _0x27d433['name'] + _0xe31e03(0x2d5) + _0x27d433['content'])[_0xe31e03(0x7e0)](''); } } const _0x2a89a1 = _0xe31e03(0x746) + Date['now'](); if (_0x3297a6[_0xe31e03(0xa44)]) { const _0x372924 = await _0x3a1fc9(_0x3297a6[_0xe31e03(0xa44)]); await _0x5bc724(_0xe31e03(0x6e6) + _0x2a89a1, _0x372924); } if (_0x3297a6['sprites']) for (const _0x2219b4 in _0x3297a6[_0xe31e03(0xa64)]) { const _0x524a1c = _0x3297a6[_0xe31e03(0xa64)][_0x2219b4]; if (_0x524a1c) { const _0x46b81d = await _0x3a1fc9(_0x524a1c); await _0x5bc724('char_sprite_' + _0x2219b4 + '_' + _0x2a89a1, _0x46b81d); } } const _0x59fffb = { 'id': _0x2a89a1, 'name': _0x3297a6['name'], 'remark': _0x3297a6['remark'] || '', 'persona': _0x3297a6[_0xe31e03(0x54e)], 'avatar': _0xcd0fda, 'linkedWorldBookIds': _0x2fd9f4, 'bubbleCss': _0x3297a6[_0xe31e03(0x974)] || '', 'avatarFrameUrl': _0x3297a6[_0xe31e03(0x57a)] || '', 'userAvatarFrameUrl': _0x3297a6['userAvatarFrameUrl'] || '' }; _0x185973[_0xe31e03(0xb29)][_0xe31e03(0x92b)](_0x59fffb); const _0x172e62 = { 'id': _0xe31e03(0xadc) + _0x2a89a1, 'type': _0xe31e03(0x261), 'participantIds': [_0x2a89a1], 'boundUserProfileId': _0x185973[_0xe31e03(0x571)] }; _0x185973[_0xe31e03(0x6ac)]['push'](_0x172e62), _0x35c1de(), await _0x1f52e3(), _0x1de23f('“' + _0x59fffb[_0xe31e03(0x41b)] + _0xe31e03(0x25e)); } catch (_0x5af8d7) { console[_0xe31e03(0x815)](_0xe31e03(0x2fc), _0x5af8d7), _0x1de23f(_0xe31e03(0x3c4) + _0x5af8d7['message']); } finally { _0x55dd5e(![]), _0x3b69eb['target'][_0xe31e03(0x525)] = ''; } }, _0x55d093[_0x13b64b(0x8f9)](_0x1abcc3); } } async function _0xfa97de() { const _0x2ed4ad = _0x59a4d7; if (_0x2ed4ad(0x44a) === _0x2ed4ad(0x98f)) { if (_0x466b6e[_0x2ed4ad(0xad2)] === 0x0) return; _0x375930 = (_0x8538e5 + 0x1) % _0x3cde12[_0x2ed4ad(0xad2)], _0x2d0018(_0x5d57d7[_0xbbcfe3], _0x2d277a); } else { const _0x55dcab = _0x18f698[_0x2ed4ad(0x525)], _0x2d3d51 = document[_0x2ed4ad(0x727)](_0x2ed4ad(0x48c))['value'], _0x18c8c5 = _0x326602[_0x2ed4ad(0x409)][0x0], _0x74ffc0 = _0x4c2815[_0x2ed4ad(0x409)][0x0], _0x6975ad = _0x16c51b[_0x2ed4ad(0x409)][0x0], _0x1ff34d = document['querySelectorAll'](_0x2ed4ad(0xa35)), _0x57feef = Array['from'](_0x1ff34d)[_0x2ed4ad(0x3df)](_0x912948 => _0x912948[_0x2ed4ad(0x525)]), _0x5e9766 = { 'name': _0x562290['value']['trim'](), 'remark': _0x3363c1[_0x2ed4ad(0x525)][_0x2ed4ad(0x40e)](), 'persona': _0x549d18['value'][_0x2ed4ad(0x40e)](), 'linkedWorldBookIds': _0x57feef, 'bubbleCss': document[_0x2ed4ad(0x727)](_0x2ed4ad(0x9fe))[_0x2ed4ad(0x525)][_0x2ed4ad(0x40e)](), 'avatarFrameUrl': document[_0x2ed4ad(0x727)]('char-avatar-frame-url')[_0x2ed4ad(0x525)]['trim'](), 'userAvatarFrameUrl': document[_0x2ed4ad(0x727)](_0x2ed4ad(0x780))[_0x2ed4ad(0x525)][_0x2ed4ad(0x40e)]() }; if (!_0x5e9766[_0x2ed4ad(0x41b)]) { _0x1de23f(_0x2ed4ad(0x1d0)); return; } try { const _0x4c7f82 = [_0x2ed4ad(0x2ba), _0x2ed4ad(0x93d), _0x2ed4ad(0x4b0), _0x2ed4ad(0x81d), _0x2ed4ad(0x920)]; let _0x105a20 = _0x55dcab; if (_0x55dcab) { if (_0x2ed4ad(0x66d) === _0x2ed4ad(0x66d)) { const _0x39744b = _0x185973[_0x2ed4ad(0xb29)]['find'](_0x4b3c4d => _0x4b3c4d['id'] === _0x55dcab); _0x39744b && Object['assign'](_0x39744b, _0x5e9766); } else _0x71bff6['push'](_0x22a5ac); } else { const _0x4ce534 = _0x2ed4ad(0x746) + Date[_0x2ed4ad(0xa59)](); _0x105a20 = _0x4ce534; const _0x10049a = { 'id': _0x4ce534, ..._0x5e9766 }; _0x10049a[_0x2ed4ad(0xa44)] = _0x18c8c5 ? await _0x5c64ec(_0x18c8c5) : _0xcd0fda, _0x185973[_0x2ed4ad(0xb29)]['push'](_0x10049a); const _0x410f8d = { 'id': _0x2ed4ad(0xadc) + _0x4ce534, 'type': _0x2ed4ad(0x261), 'participantIds': [_0x4ce534], 'listenTogetherSession': null }; _0x185973[_0x2ed4ad(0x6ac)][_0x2ed4ad(0x92b)](_0x410f8d); } const _0x15e1ee = _0x185973[_0x2ed4ad(0x6ac)]['find'](_0x58cc55 => _0x58cc55[_0x2ed4ad(0x117)] === _0x2ed4ad(0x261) && _0x58cc55[_0x2ed4ad(0xa1e)]['includes'](_0x105a20)); _0x15e1ee && (_0x15e1ee[_0x2ed4ad(0x4eb)] = _0x2d3d51); if (_0x18c8c5) await _0x5bc724('char_avatar_' + _0x105a20, _0x18c8c5); if (_0x74ffc0) await _0x5bc724(_0x2ed4ad(0x897) + _0x105a20, _0x74ffc0); if (_0x6975ad) await _0x5bc724('char_offline_bg_' + _0x105a20, _0x6975ad); for (const _0x35ef21 of _0x4c7f82) { if ('hXJmC' !== _0x2ed4ad(0x4fb)) { const _0x4f2c29 = document[_0x2ed4ad(0x727)](_0x2ed4ad(0x9d7) + _0x35ef21 + '-input')[_0x2ed4ad(0x409)][0x0]; if (_0x4f2c29) await _0x5bc724(_0x2ed4ad(0x6a5) + _0x35ef21 + '_' + _0x105a20, _0x4f2c29); } else _0x3eb645 = _0x4da702[_0x2ed4ad(0x7a2)](_0x2ed4ad(0xa8f)), _0x2e81bf['id'] = _0x2ed4ad(0x156), _0x58137a[_0x2ed4ad(0x8cb)]['appendChild'](_0x1123a5); } _0x35c1de(), _0x1f52e3(), _0x1de23f('角色已保存！'), _0x8cf86(_0x2ed4ad(0xb17), _0x2ed4ad(0x15b)); if (!_0x55dcab) { const _0x2ae77c = _0x2ed4ad(0xadc) + _0x105a20; _0xdcd83e(_0x2ae77c), _0x4f33cb(!![]); } } catch (_0x2a9c90) { console[_0x2ed4ad(0x815)]('保存角色失败:', _0x2a9c90), _0x1de23f(_0x2ed4ad(0xb35) + _0x2a9c90[_0x2ed4ad(0x140)]); } } } function _0x7ce067() { const _0x1451e6 = _0x59a4d7; _0x2985b2[_0x1451e6(0x525)] = '', _0x409d2f[_0x1451e6(0x5b2)] = ''; if (_0x185973[_0x1451e6(0xb29)][_0x1451e6(0xad2)] < 0x2) { _0x1de23f('需要至少2个角色才能创建群聊。'); return; } _0x185973[_0x1451e6(0xb29)][_0x1451e6(0x3ea)](_0x3e031f => { const _0xe93f67 = _0x1451e6; if (_0xe93f67(0x8d7) === _0xe93f67(0x8e0)) { const _0x138f5a = _0x1c2d09['getElementById'](_0xe93f67(0xb27)); if (!_0x138f5a) return; const _0x26dacd = _0x2d4b25(), _0x1e87e2 = _0x32f933[_0xe93f67(0x1bf)]['filter'](_0x46bf73 => _0x46bf73[_0xe93f67(0x23e)] === _0x26dacd && _0x46bf73[_0xe93f67(0x117)] === _0xe93f67(0x859)); _0x138f5a[_0xe93f67(0x5b2)] = '', _0x1e87e2[_0xe93f67(0xad2)] > 0x0 ? _0x1e87e2['forEach'](_0x85a0b0 => { const _0x4760f2 = _0xe93f67, _0x1a2c1b = _0xdbe28d[_0x4760f2(0x7a2)](_0x4760f2(0xb08)); _0x1a2c1b[_0x4760f2(0x8f1)] = _0x4760f2(0x60e), _0x1a2c1b[_0x4760f2(0xb33)] = _0x85a0b0[_0x4760f2(0x725)], _0x138f5a[_0x4760f2(0x322)](_0x1a2c1b); }) : _0x138f5a[_0xe93f67(0x5b2)] = _0xe93f67(0x9dc); } else { const _0x439998 = document['createElement']('li'); _0x439998['className'] = 'member-selection-item', _0x439998[_0xe93f67(0x5b2)] = _0xe93f67(0x1bd) + _0x3e031f['id'] + _0xe93f67(0x440) + _0x3e031f['id'] + _0xe93f67(0x9f5) + (_0x3e031f['avatar'] || _0xcd0fda) + _0xe93f67(0xa61) + _0x3e031f['id'] + '\x22\x20class=\x22char-name\x22>' + _0x3e031f[_0xe93f67(0x41b)] + '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x409d2f[_0xe93f67(0x322)](_0x439998); } }), _0x8cf86(_0x1451e6(0xa57), _0x1451e6(0x37d)); } function _0xe09c2c() { const _0x460b99 = _0x59a4d7, _0x1ca966 = _0x2985b2[_0x460b99(0x525)][_0x460b99(0x40e)](); if (!_0x1ca966) { _0x1de23f('请输入群聊名称。'); return; } const _0x19ed68 = Array[_0x460b99(0x81a)](_0x409d2f[_0x460b99(0xa1b)](_0x460b99(0x34e)))[_0x460b99(0x3df)](_0x24e416 => _0x24e416[_0x460b99(0xa13)]['id']); if (_0x19ed68[_0x460b99(0xad2)] < 0x2) { _0x1de23f(_0x460b99(0x4d1)); return; } const _0x16d4d5 = { 'id': _0x460b99(0x952) + Date[_0x460b99(0xa59)](), 'type': 'group', 'name': _0x1ca966, 'participantIds': _0x19ed68 }; _0x185973[_0x460b99(0x6ac)][_0x460b99(0x92b)](_0x16d4d5), _0x185973[_0x460b99(0x572)] = _0x16d4d5['id'], _0x35c1de(), _0x1f52e3(), _0x226af3(), _0xc4fdb5(), _0x1de23f(_0x460b99(0x327) + _0x1ca966 + _0x460b99(0xb2f)), _0x8cf86('chat', 'groupChatCreate'); } _0xf57854[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x269986[_0x59a4d7(0x9c7)]()), _0x1b1b74[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x29e8b3), _0x269986[_0x59a4d7(0x65f)](_0x59a4d7(0x86e), _0x253a65), _0x40b0fc['addEventListener'](_0x59a4d7(0x9c7), _0x33c8d0), _0x174ecb[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x53fdc4['classList'][_0x59a4d7(0x7ef)](_0x59a4d7(0xa02))), _0x2f648f[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x53fdc4[_0x59a4d7(0x7bb)][_0x59a4d7(0x7ef)]('show')), _0x32d746[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x46f713 = _0x59a4d7; _0xeb9c5a[_0x46f713(0x88e)](), navigator[_0x46f713(0x178)][_0x46f713(0xb13)](_0xeb9c5a[_0x46f713(0x525)])[_0x46f713(0x368)](() => { const _0x34df3e = _0x46f713; _0x1de23f(_0x34df3e(0x97c)); })[_0x46f713(0x246)](_0x135bf3 => { _0x1de23f('复制失败了，哼。'); }); }), _0x59ee03[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x39909f), _0x53911d[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x58014c), _0x50eca3[_0x59a4d7(0x65f)]('click', () => _0x5ea123[_0x59a4d7(0x7bb)][_0x59a4d7(0x7ef)](_0x59a4d7(0xa02))), _0x253444['addEventListener'](_0x59a4d7(0x9c7), () => _0x5ea123[_0x59a4d7(0x7bb)][_0x59a4d7(0x7ef)](_0x59a4d7(0xa02))), _0x5f355d[_0x59a4d7(0x65f)]('click', () => _0x4c2815[_0x59a4d7(0x9c7)]()), _0x15ee57[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x16c51b[_0x59a4d7(0x9c7)]()), _0x4c2815[_0x59a4d7(0x65f)](_0x59a4d7(0x86e), _0x5e0e39 => { const _0x924e8a = _0x59a4d7, _0x3a331c = _0x5e0e39[_0x924e8a(0x6ba)]['files'][0x0]; if (!_0x3a331c) return; const _0x1897c7 = URL['createObjectURL'](_0x3a331c); _0x5f355d[_0x924e8a(0xa8f)][_0x924e8a(0x11b)] = _0x924e8a(0x142) + _0x1897c7 + '\x27)'; }), _0x16c51b['addEventListener'](_0x59a4d7(0x86e), _0x48c798 => { const _0x2a2fd2 = _0x59a4d7; if (_0x2a2fd2(0x3b1) !== _0x2a2fd2(0x166)) { const _0x1b5021 = _0x48c798[_0x2a2fd2(0x6ba)][_0x2a2fd2(0x409)][0x0]; if (!_0x1b5021) return; const _0xfa44e6 = URL[_0x2a2fd2(0x8ca)](_0x1b5021); _0x15ee57[_0x2a2fd2(0xa8f)][_0x2a2fd2(0x11b)] = _0x2a2fd2(0x142) + _0xfa44e6 + '\x27)'; } else { _0x4b0ac2('音乐数据升级完成，迁移了\x20' + _0x148085 + _0x2a2fd2(0x7d3)), _0x18c4e3(() => _0x107359['reload'](), 0x5dc); return; } }), _0x5e0fb0[_0x59a4d7(0x65f)]('click', () => _0x2aa08a[_0x59a4d7(0x9c7)]()), _0x308295['addEventListener'](_0x59a4d7(0x9c7), () => { const _0x8f2a07 = _0x59a4d7; localStorage[_0x8f2a07(0x778)]('customFeedWallpaper'), _0x42cb30(), _0x1de23f('动态页背景已移除。'); }), _0x2aa08a[_0x59a4d7(0x65f)]('change', async _0x689c3f => { const _0x1cda60 = _0x59a4d7, _0x3cfac7 = _0x689c3f[_0x1cda60(0x6ba)][_0x1cda60(0x409)][0x0]; if (!_0x3cfac7) return; try { const _0xa04d1f = await _0x5c64ec(_0x3cfac7); localStorage[_0x1cda60(0x295)]('customFeedWallpaper', _0xa04d1f), _0x42cb30(), _0x1de23f(_0x1cda60(0xa55)); } catch (_0x2dad90) { if (_0x1cda60(0x7fa) === _0x1cda60(0xb30)) { if (_0x372f09[_0x1cda60(0x296)]) return; const _0x529e25 = _0x2ca034['diaryCurrentPage']; if (_0x529e25 <= 0x0) return; _0x106dfe[_0x1cda60(0x296)] = !![]; const _0x1fd199 = _0x529e25 - 0x1, _0x18581c = _0x9560db[_0x1cda60(0x727)](_0x1cda60(0x7cf) + _0x529e25), _0x2b8112 = _0x40f752[_0x1cda60(0x727)]('diary-page-' + _0x1fd199); _0x18581c && _0x2b8112 ? (_0x2b8112[_0x1cda60(0x7bb)][_0x1cda60(0x99b)](_0x1cda60(0x74a)), _0x18581c['classList'][_0x1cda60(0x99b)](_0x1cda60(0x428)), _0x2b8112['classList'][_0x1cda60(0x99b)](_0x1cda60(0x445)), _0x4cdc19(() => { const _0x101a05 = _0x1cda60; _0x18581c['classList']['remove'](_0x101a05(0x445), 'is-exiting-right'), _0x2b8112[_0x101a05(0x7bb)][_0x101a05(0x7ef)](_0x101a05(0x74a)), _0x586ba6['diaryCurrentPage'] = _0x1fd199, _0x32a2eb(), _0x471584[_0x101a05(0x296)] = ![]; }, 0x2bc)) : _0x443bc9[_0x1cda60(0x296)] = ![]; } else _0x1de23f(_0x1cda60(0x157) + _0x2dad90['message']); } }), document[_0x59a4d7(0x727)](_0x59a4d7(0x37a))['addEventListener'](_0x59a4d7(0x9c7), () => _0x8cf86(_0x59a4d7(0xb17), _0x59a4d7(0x17c))), document[_0x59a4d7(0x727)](_0x59a4d7(0x661))['addEventListener'](_0x59a4d7(0x9c7), _0x24dfb5); const _0x345f57 = document[_0x59a4d7(0x727)]('group-avatar-preview'), _0x5bf281 = document[_0x59a4d7(0x727)](_0x59a4d7(0x207)); _0x345f57[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x5bf281[_0x59a4d7(0x9c7)]()), _0x5bf281[_0x59a4d7(0x65f)]('change', _0x3225c5 => { const _0x41deba = _0x59a4d7; if ('vkAcO' === _0x41deba(0x597)) { const _0xe456e4 = _0x3225c5[_0x41deba(0x6ba)][_0x41deba(0x409)][0x0]; if (!_0xe456e4) return; const _0x186813 = URL[_0x41deba(0x8ca)](_0xe456e4); _0x345f57[_0x41deba(0x883)] = _0x186813, _0x345f57[_0x41deba(0xa11)] = () => { const _0x44a874 = _0x41deba; _0x44a874(0x312) !== _0x44a874(0x312) ? _0x343cac(_0x44a874(0x157) + _0x545389[_0x44a874(0x140)]) : URL[_0x44a874(0x33a)](_0x186813); }; } else { const _0x93d180 = _0x3ecfe0[_0x41deba(0x189)](_0x5ce87c); _0x355960[_0x41deba(0x64b)](_0x93d180) && (_0x37d265 = _0x93d180[_0x41deba(0x249)](_0x1cceaa => _0x1cceaa && typeof _0x1cceaa === _0x41deba(0x557) && typeof _0x1cceaa['role'] === 'string' && typeof _0x1cceaa[_0x41deba(0x725)] !== _0x41deba(0x12b))); } }); const _0x44cdf3 = document['getElementById'](_0x59a4d7(0x535))[_0x59a4d7(0x186)], _0x2a05f0 = document[_0x59a4d7(0x727)](_0x59a4d7(0x938)), _0x16ff64 = document[_0x59a4d7(0x727)](_0x59a4d7(0x535)); _0x44cdf3[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x2a05f0[_0x59a4d7(0x9c7)]()), _0x2a05f0[_0x59a4d7(0x65f)](_0x59a4d7(0x86e), _0x116dd6 => { const _0x5cb4d1 = _0x59a4d7, _0x4df905 = _0x116dd6['target'][_0x5cb4d1(0x409)][0x0]; if (!_0x4df905) return; const _0x1dbc99 = URL[_0x5cb4d1(0x8ca)](_0x4df905); document[_0x5cb4d1(0x727)]('group-bg-preview')[_0x5cb4d1(0xa8f)][_0x5cb4d1(0x11b)] = _0x5cb4d1(0x142) + _0x1dbc99 + '\x27)'; }); const _0x9b81fe = document[_0x59a4d7(0x99d)]('#group-settings-screen\x20.select-box'), _0x4ce8e8 = document[_0x59a4d7(0x727)](_0x59a4d7(0x1fa)); _0x9b81fe[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x45f380 => { const _0x1e9d25 = _0x59a4d7; _0x45f380[_0x1e9d25(0x693)](), _0x4ce8e8['classList'][_0x1e9d25(0x3a3)](_0x1e9d25(0x7e5)), _0x9b81fe[_0x1e9d25(0x7bb)]['toggle'](_0x1e9d25(0x421)); }), _0x4ce8e8[_0x59a4d7(0x65f)]('change', _0x4fd33d), document[_0x59a4d7(0x727)](_0x59a4d7(0x89c))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x4ef4fa), document[_0x59a4d7(0x727)](_0x59a4d7(0x881))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), async () => { const _0x2115da = _0x59a4d7, _0x37d1a9 = _0x3b6e44(); if (!_0x37d1a9 || _0x37d1a9[_0x2115da(0x117)] !== _0x2115da(0x4b1)) return; const _0x8d6c0b = await _0xf1c3f7(_0x2115da(0x85c) + _0x37d1a9[_0x2115da(0x41b)] + _0x2115da(0x951)); _0x8d6c0b && (_0x2329e4(_0x37d1a9['id']), _0x1de23f(_0x2115da(0x70c)), _0x8cf86(_0x2115da(0xb17)), _0x4f33cb(![])); }); const _0x329a5d = document['querySelector']('.custom-multiselect\x20.select-box'), _0x476cce = document[_0x59a4d7(0x727)]('world-book-checkboxes-container'); _0x329a5d[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x22df0b => { const _0x56a997 = _0x59a4d7; _0x22df0b[_0x56a997(0x693)](), _0x476cce['classList'][_0x56a997(0x3a3)](_0x56a997(0x7e5)), _0x329a5d['classList'][_0x56a997(0x3a3)](_0x56a997(0x421)); }), _0x476cce[_0x59a4d7(0x65f)](_0x59a4d7(0x86e), _0x3a6bb0), document['addEventListener'](_0x59a4d7(0x9c7), _0x5f5ba5 => { const _0x124f78 = _0x59a4d7; !document[_0x124f78(0x99d)](_0x124f78(0x995))[_0x124f78(0x40b)](_0x5f5ba5['target']) && (_0x476cce['classList'][_0x124f78(0x7ef)]('visible'), _0x329a5d['classList']['remove'](_0x124f78(0x421))); }), _0x3e9f5e[_0x59a4d7(0x65f)]('click', () => { const _0x552c9d = _0x59a4d7; _0x195cba(), _0x8cf86(_0x552c9d(0x317), _0x552c9d(0x3d4)); }), document[_0x59a4d7(0x727)](_0x59a4d7(0x5f6))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x8cf86('home', _0x59a4d7(0x317))), document[_0x59a4d7(0x727)](_0x59a4d7(0x430))[_0x59a4d7(0x65f)]('click', () => _0xd6d03a()), document[_0x59a4d7(0x727)](_0x59a4d7(0x7e4))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x4fb546 = _0x59a4d7; _0x195cba(), _0x8cf86('worldBook', _0x4fb546(0x61a)); }), document[_0x59a4d7(0x727)](_0x59a4d7(0x40c))['addEventListener'](_0x59a4d7(0x9c7), _0x394add), document[_0x59a4d7(0x727)](_0x59a4d7(0x33e))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x22067e), _0x2f849e[_0x59a4d7(0x65f)]('click', () => _0x8cf86(_0x59a4d7(0x5d1), _0x59a4d7(0x3d4))), _0x209e04[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x8cf86(_0x59a4d7(0x3d4), 'wallpaper')), _0x393662[_0x59a4d7(0x65f)]('click', () => _0x63e308['click']()), _0x63e308['addEventListener']('change', async _0x1762ac => { const _0x48a5c4 = _0x59a4d7, _0x1736ea = _0x1762ac[_0x48a5c4(0x6ba)][_0x48a5c4(0x409)][0x0]; if (!_0x1736ea) return; await _0x1d6a37(_0x1736ea); }), _0x1b9992[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0xeb9b2a = _0x59a4d7; _0x1f52e3(), _0x8cf86(_0xeb9b2a(0xb17), _0xeb9b2a(0x3d4)); }), _0x3ec34c[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x245c1f = _0x59a4d7; if (_0x245c1f(0x5dc) !== _0x245c1f(0x255)) { _0xf44c20(); const _0x4f06ac = (_0x185973[_0x245c1f(0x8a2)][_0x245c1f(0x6e2)] || '')[_0x245c1f(0x955)](_0x211af9); _0x4afbfe[_0x245c1f(0x7de)] = _0x4f06ac, _0x8cf86(_0x245c1f(0xa53), _0x245c1f(0x3d4)); } else _0x4daf6f[_0x245c1f(0xa8f)][_0x245c1f(0x11b)] = _0x245c1f(0x326) + _0x1060cf['createObjectURL'](_0x50e490) + ')', _0x79feac['style'][_0x245c1f(0x62b)] = _0x245c1f(0x766), _0x28f85f[_0x245c1f(0xa8f)]['backgroundPosition'] = 'center'; }), _0x42feb7[_0x59a4d7(0x65f)]('click', () => _0x8cf86(_0x59a4d7(0x3d4), 'settings')), _0x31d928[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x54dcb2 = _0x59a4d7; _0x4a03ff(), _0x8cf86('home', _0x54dcb2(0xb17)); }), _0x3ef061[_0x59a4d7(0x65f)]('click', () => { _0x4a03ff(), _0x4f33cb(![]); }), _0xde1f14['addEventListener']('click', () => { const _0x4d3a9f = _0x59a4d7; _0x8cf86(_0x4d3a9f(0xb17), _0x4d3a9f(0x15b)); }), _0x27a6ab[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x388156 = _0x59a4d7; _0x4a9d49[_0x388156(0x7bb)][_0x388156(0x99b)](_0x388156(0xa02)); }), _0x4c530d[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x5e8376()), _0x3c1553[_0x59a4d7(0x65f)]('click', _0x590cd1); function _0x4d3e30(_0x3c54a0) { const _0x24ee23 = _0x59a4d7; if (!_0x3c54a0 || _0x3c54a0[_0x24ee23(0x117)] !== 'group') return; const _0x3d91cd = _0x24ee23(0x26d); document[_0x24ee23(0x5df)][_0x24ee23(0x7e8)](_0x24ee23(0x942), _0x3d91cd); const _0x1a1e12 = document['getElementById'](_0x24ee23(0x181)), _0x32a970 = _0x1a1e12[_0x24ee23(0x99d)](_0x24ee23(0x49c)), _0x4c5e63 = document[_0x24ee23(0x727)](_0x24ee23(0x79a)), _0x3efcea = document[_0x24ee23(0x727)](_0x24ee23(0xa9b)), _0x4e4ad0 = document[_0x24ee23(0x727)](_0x24ee23(0x89b)), _0x97c1da = document[_0x24ee23(0x727)]('group-delete'), _0x541abc = document['getElementById']('group-options-cancel'), _0x518d65 = () => _0x1a1e12[_0x24ee23(0x7ef)](); _0x4c5e63[_0x24ee23(0x65f)](_0x24ee23(0x9c7), async () => { const _0x635d07 = _0x24ee23; if ('FIFZz' === _0x635d07(0x532)) { _0x518d65(); const _0x153d2e = await _0xf1c3f7(_0x635d07(0x318) + _0x3c54a0[_0x635d07(0x41b)] + _0x635d07(0x75a)); if (_0x153d2e) { if (_0x635d07(0x82a) === _0x635d07(0x82a)) { _0x3c54a0['id'] === _0x185973[_0x635d07(0x572)] && (_0x4a03ff(), _0x185973[_0x635d07(0x338)] = [], _0xd16a30()); try { if (_0x635d07(0x7c7) !== _0x635d07(0x7c7)) { _0x498a2f = _0x275da4(_0x593271); if (!_0x1623c8) throw new _0x4ef877(_0x635d07(0x744)); _0x461dd6['log'](_0x635d07(0x5de) + _0x2efb26['id'] + '\x20的旧格式数据翻译。'); } else localStorage[_0x635d07(0x778)]('chatHistory_' + _0x3c54a0['id']), _0x1de23f('群聊\x22' + _0x3c54a0[_0x635d07(0x41b)] + _0x635d07(0x793)); } catch (_0x460ecc) { _0x635d07(0x7ea) === 'PZlpy' ? _0x373b10 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22' + _0x179abf['id'] + _0x635d07(0x98d) + (_0x4a4552[_0x635d07(0x3bb)] || _0x3f0258) + _0x635d07(0xa76) + _0x1774cf[_0x635d07(0x508)] + _0x635d07(0x19a) + _0x3b64b6['artist'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>' + (_0xa278c5[_0x635d07(0x86d)] ? '▶' : '⚠') + _0x635d07(0xb00) : (console['error']('Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20' + _0x3c54a0['id'], _0x460ecc), _0x1de23f(_0x635d07(0x227))); } } else _0x608721[_0x635d07(0x815)](_0x635d07(0x39b), _0x171626); } } else _0x2eb8b1 = _0x94fc18[_0x635d07(0xa1d)](_0x3bc6bd), _0x176fa7[_0x635d07(0x5be)](_0x635d07(0x2b7)); }), _0x3efcea[_0x24ee23(0x65f)](_0x24ee23(0x9c7), () => { const _0xa2c6c0 = _0x24ee23; _0x518d65(), _0x1de23f(_0xa2c6c0(0x761)); }), _0x4e4ad0[_0x24ee23(0x65f)](_0x24ee23(0x9c7), async () => { const _0x3f38dd = _0x24ee23; if (_0x3f38dd(0x69f) === 'GRXDn') { _0x518d65(); const _0x142acd = prompt(_0x3f38dd(0x975), _0x3c54a0[_0x3f38dd(0x41b)]); _0x142acd && _0x142acd[_0x3f38dd(0x40e)]() && _0x142acd !== _0x3c54a0['name'] && (_0x3f38dd(0x9b6) === 'ralWe' ? _0x4dfa0d(_0x3f38dd(0x157) + _0x49d025['message']) : (_0x3c54a0[_0x3f38dd(0x41b)] = _0x142acd[_0x3f38dd(0x40e)](), _0x35c1de(), _0x1f52e3(), _0x226af3(), _0x1de23f(_0x3f38dd(0x63c) + _0x3c54a0['name'] + '\x22。'))); } else { _0x5526f8['warn'](_0x3f38dd(0x548) + _0x2f9cdd['id'] + _0x3f38dd(0x48d), _0x3e6a72['message']); try { _0x566c7a = _0x3fef87(_0x25c8c4); if (!_0x304779) throw new _0x4bfd1b(_0x3f38dd(0x744)); _0x2e4bc5['log'](_0x3f38dd(0x5de) + _0x4cc7b1['id'] + _0x3f38dd(0x932)); } catch (_0x427114) { throw _0x55769f; } } }), _0x97c1da[_0x24ee23(0x65f)](_0x24ee23(0x9c7), async () => { const _0x479fca = _0x24ee23; if (_0x479fca(0x2e6) !== _0x479fca(0x2e6)) return { 'role': _0x479fca(0x34d), 'content': [{ 'type': 'text', 'text': _0x21530f[_0x479fca(0x725)] || '\x20' }, { 'type': _0x479fca(0x130), 'image_url': { 'url': _0x315f8e[_0x479fca(0x7f8)], 'detail': 'high' } }] }; else { _0x518d65(); const _0x320a6a = await _0xf1c3f7(_0x479fca(0x6b7) + _0x3c54a0[_0x479fca(0x41b)] + _0x479fca(0x8b0)); _0x320a6a && (_0x2329e4(_0x3c54a0['id']), _0x1de23f(_0x479fca(0x6d1) + _0x3c54a0[_0x479fca(0x41b)] + _0x479fca(0x6a0)), _0x4f33cb(![])); } }), _0x32a970['addEventListener'](_0x24ee23(0x9c7), _0x518d65), _0x541abc[_0x24ee23(0x65f)]('click', _0x518d65); } _0x15ed93['addEventListener'](_0x59a4d7(0x9c7), () => { const _0x3680fb = _0x59a4d7; if (_0x3680fb(0xb04) === _0x3680fb(0xb04)) { const _0x393da8 = _0x3b6e44(); if (_0x393da8 && _0x393da8[_0x3680fb(0x117)] === 'private') _0x2d15ff(_0x393da8['participantIds'][0x0]); else _0x393da8 && _0x393da8[_0x3680fb(0x117)] === _0x3680fb(0x4b1) && _0x25de77(_0x393da8['id']); } else _0x534e12[_0x3680fb(0xa8f)][_0x3680fb(0x8f8)] = _0x3680fb(0x941), _0x47f5b2[_0x3680fb(0xa8f)]['border'] = '2px\x20dashed\x20var(--border-color)', _0x3a141d[_0x3680fb(0xa8f)]['background'] = _0x3680fb(0x3e1); }), _0x3a0975[_0x59a4d7(0x65f)]('keydown', _0x3ee1fd => { const _0x2826a9 = _0x59a4d7; _0x3ee1fd[_0x2826a9(0x8e1)] === _0x2826a9(0x6b6) && !_0x3ee1fd['shiftKey'] && (_0x3ee1fd[_0x2826a9(0x628)](), _0x5e8376()); }); const _0x1a0259 = () => _0x4a9d49[_0x59a4d7(0x7bb)][_0x59a4d7(0x7ef)](_0x59a4d7(0xa02)); _0x3a24c7[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x1a0259), _0x5de494[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x1a0259), _0x1e9f07[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { _0x1a0259(), _0x2d15ff(); }), _0x511e02[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { _0x1a0259(), _0x7ce067(); }), _0x7149f8[_0x59a4d7(0x65f)]('click', () => { const _0x18fb0e = _0x59a4d7; _0x8cf86('chat', _0x18fb0e(0xa57)), _0x4f33cb(![]); }), _0x310bd4[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0xe09c2c), _0xaf0daa[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x480da3 = _0x59a4d7; _0x1340fc[_0x480da3(0x7bb)][_0x480da3(0x3a3)](_0x480da3(0xa02)), _0x1340fc['classList'][_0x480da3(0x40b)](_0x480da3(0xa02)) && (_0x34f0f4[_0x480da3(0xb0e)] = _0x34f0f4[_0x480da3(0x784)]); }), _0x5d3185[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x416d53[_0x59a4d7(0x9c7)]()); const _0x2de7fd = document[_0x59a4d7(0x727)](_0x59a4d7(0x925)); _0x416d53['addEventListener'](_0x59a4d7(0x86e), _0x52f752), _0x2de7fd['addEventListener'](_0x59a4d7(0x9c7), _0x5b0ede), _0xebd911[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x145106), _0xaa03a5['addEventListener'](_0x59a4d7(0x9c7), _0x3689ad), _0x46860['addEventListener'](_0x59a4d7(0x9c7), _0xfa97de), _0x4e1322[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x4ef4fa), _0x5462dc['addEventListener'](_0x59a4d7(0x9c7), async () => { const _0x49c533 = _0x59a4d7; if ('RBTlR' !== _0x49c533(0x5af)) _0x2dca83 = _0x3da9d3[_0x49c533(0xa1d)](_0x17ceb9); else { const _0x1eb6ea = _0x18f698[_0x49c533(0x525)]; if (!_0x1eb6ea) return; const _0x1355a5 = _0xec7e1c(_0x1eb6ea); if (!_0x1355a5) return; const _0x183c0d = await _0xf1c3f7('确定要删除角色“' + _0x1355a5[_0x49c533(0x41b)] + _0x49c533(0x958)); _0x183c0d && (_0x49c533(0x5b4) === _0x49c533(0x7d4) ? (_0x13dd80[_0x49c533(0x4a8)] = null, _0x3bd62c('已自动断开与其他人的听歌同步。'), _0x5cb661()) : (_0x446972(_0x1eb6ea), _0x1de23f('角色“' + _0x1355a5['name'] + '”已删除。'), _0x8cf86(_0x49c533(0xb17), _0x49c533(0x15b)), _0x4f33cb(![]))); } }), _0x3dcc2e[_0x59a4d7(0x65f)]('input', () => { const _0x2c826f = _0x59a4d7; if (_0x2c826f(0x9c2) !== _0x2c826f(0x9c2)) { const _0x2bb431 = _0x598afd[_0x2c826f(0x727)]('event-content-input')['value'][_0x2c826f(0x40e)](), _0x39ee36 = _0x450cd6['querySelector'](_0x2c826f(0x66c))[_0x2c826f(0x525)]; if (!_0x2bb431) { _0x1f5867(_0x2c826f(0x436)); return; } const _0x35016b = _0x2c0565[_0x2c826f(0x621)][_0x2c826f(0x95a)](_0x354245 => _0x354245['id'] === _0x38aa5f['activeUserProfileId']); if (!_0x35016b) { _0x135173(_0x2c826f(0x4f2)); return; } _0x325b2f['calendarEvents'][_0x2c826f(0x92b)]({ 'id': _0x2c826f(0x2fa) + _0x138a6a['now'](), 'date': _0x9241ac[_0x2c826f(0x900)], 'type': _0x39ee36, 'content': _0x2bb431, 'userId': _0x35016b['id'] }), _0x16c895(), _0x4e8cea(), _0x495a47(), _0x483057(), _0x5e6158['getElementById'](_0x2c826f(0x7ce))[_0x2c826f(0x7bb)][_0x2c826f(0x7ef)](_0x2c826f(0xa02)); } else { const _0x144632 = _0x3dcc2e[_0x2c826f(0x525)][_0x2c826f(0x40e)]()[_0x2c826f(0x955)](_0x211af9); _0x4afbfe['disabled'] = _0x144632; } }); async function _0x747d1d() { const _0x3103b6 = _0x59a4d7, _0x129fe8 = _0x3dcc2e[_0x3103b6(0x525)][_0x3103b6(0x40e)](), _0x5a0ec6 = _0x201f4e[_0x3103b6(0x525)][_0x3103b6(0x40e)](); if (!_0x129fe8 || !_0x5a0ec6) { if (_0x3103b6(0x637) !== _0x3103b6(0x7d2)) { _0x1de23f(_0x3103b6(0x5cb)); return; } else _0x14bc39[_0x3103b6(0x33a)](_0x1c3eb8); } const _0x562eaf = _0x129fe8['replace'](/\/+$/, ''), _0x324dd4 = _0x562eaf + '/v1/models'; _0x4afbfe['disabled'] = !![], _0x4afbfe[_0x3103b6(0xb33)] = '获取中…', _0x3cc8a5[_0x3103b6(0x7bb)]['remove'](_0x3103b6(0xa02)); try { if (_0x3103b6(0x2b8) === _0x3103b6(0x134)) { if (_0x1a3bd7 === null) return; const _0x745849 = _0x392773[_0x3103b6(0x338)][_0x29eceb]; if (!_0x745849) return; const _0x22976d = _0x26f03b(); let _0x598189 = '未知'; if (_0x745849['role'] === _0x3103b6(0x34d)) _0x598189 = _0x243e0f[_0x3103b6(0x382)]['name'] || '我'; else { const _0x552653 = _0x745849[_0x3103b6(0x660)] || _0x22976d?.[_0x3103b6(0xa1e)][0x0], _0x28de1f = _0x545804(_0x552653); _0x598189 = _0x28de1f ? _0x28de1f[_0x3103b6(0x41b)] : '角色'; } let _0x3b1292 = _0x745849[_0x3103b6(0x725)] || ''; if (_0x745849[_0x3103b6(0x6b4)]) _0x3b1292 = _0x3103b6(0x31c); if (_0x745849[_0x3103b6(0x7f8)]) _0x3b1292 = _0x3103b6(0x87c); if (_0x3b1292[_0x3103b6(0xad2)] > 0x32) _0x3b1292 = _0x3b1292[_0x3103b6(0xb10)](0x0, 0x32) + '...'; _0x45678b[_0x3103b6(0x139)] = { 'sender': _0x598189, 'content': _0x3b1292 }, _0x499ae5(), _0xb8b940(), _0xf8b18f[_0x3103b6(0x9d3)](); } else { const _0x35c779 = await fetch(_0x324dd4, { 'headers': { 'Authorization': _0x3103b6(0x831) + _0x3add1b(_0x5a0ec6) } }); if (!_0x35c779['ok']) throw new Error(_0x3103b6(0x1f1) + _0x35c779[_0x3103b6(0x728)]); const _0x56f7c9 = await _0x35c779[_0x3103b6(0x4ac)](), _0xca6104 = (_0x56f7c9[_0x3103b6(0x737)] || _0x56f7c9)[_0x3103b6(0x3df)](_0x58588c => _0x58588c['id'])[_0x3103b6(0xab1)](); _0xca6104[_0x3103b6(0xad2)] > 0x0 ? (_0x3cc8a5[_0x3103b6(0x5b2)] = '', _0xca6104[_0x3103b6(0x3ea)](_0x49cdd7 => { const _0x4e06cf = _0x3103b6; if (_0x4e06cf(0x888) !== 'GBJWE') { const _0x10a704 = document['createElement']('div'); _0x10a704[_0x4e06cf(0xb33)] = _0x49cdd7, _0x10a704[_0x4e06cf(0x65f)]('click', () => { const _0x524a02 = _0x4e06cf; if (_0x524a02(0xa1c) === 'GiQrL') { const _0x30cb3d = _0x29a3fc['getElementById'](_0x524a02(0x162)); _0x30cb3d['innerHTML'] = ''; if (_0x184512[_0x524a02(0x6e1)][_0x524a02(0xad2)] === 0x0) { _0x30cb3d[_0x524a02(0x5b2)] = _0x524a02(0x733); return; } _0x2ca46d[_0x524a02(0x6e1)][_0x524a02(0x3ea)](_0x1d9791 => { const _0x2f3152 = _0x524a02, _0x20b877 = _0x416537['userProfiles'][_0x2f3152(0x95a)](_0x2ecf57 => _0x2ecf57['id'] === _0x1d9791[_0x2f3152(0x4eb)]) || { 'name': _0x2f3152(0xa65) }, _0x5e7340 = _0x5420bf['createElement'](_0x2f3152(0xb08)); _0x5e7340[_0x2f3152(0x8f1)] = _0x2f3152(0x448), _0x5e7340[_0x2f3152(0xa13)]['id'] = _0x1d9791['id'], _0x5e7340[_0x2f3152(0x5b2)] = _0x2f3152(0x90e) + _0x1d9791[_0x2f3152(0x41b)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x20b877[_0x2f3152(0x41b)] + '\x20|\x20' + _0x1d9791[_0x2f3152(0xa93)]['length'] + _0x2f3152(0x7f6), _0x5e7340['addEventListener'](_0x2f3152(0x9c7), () => _0x3f17ab(_0x1d9791['id'])), _0x30cb3d[_0x2f3152(0x322)](_0x5e7340); }); } else _0x55471f[_0x524a02(0x525)] = _0x49cdd7, _0x3cc8a5['classList'][_0x524a02(0x7ef)](_0x524a02(0xa02)); }), _0x3cc8a5['appendChild'](_0x10a704); } else { _0x48bdbf(_0x4e06cf(0x5e6)); return; } }), _0x3cc8a5[_0x3103b6(0x7bb)]['add'](_0x3103b6(0xa02)), _0x1de23f(_0x3103b6(0x786) + _0xca6104[_0x3103b6(0xad2)] + _0x3103b6(0x2f6))) : _0x1de23f('未找到可用模型。'); } } catch (_0x12ae0c) { _0x1de23f(_0x3103b6(0x9bd) + _0x12ae0c[_0x3103b6(0x140)] + _0x3103b6(0x585)); } finally { if (_0x3103b6(0x3dc) !== _0x3103b6(0x987)) _0x4afbfe['disabled'] = ![], _0x4afbfe[_0x3103b6(0xb33)] = '获取'; else { const _0x3d1b58 = _0x36038a[_0x3103b6(0x52b)][_0x3103b6(0x3df)](_0x4b22bc => _0xda5de3[_0x3103b6(0x177)]['find'](_0x31c190 => _0x31c190['id'] === _0x4b22bc))[_0x3103b6(0x249)](_0x24139b)[_0x3103b6(0x3df)](_0x451a65 => _0x3103b6(0xb0a) + _0x451a65['name'] + '\x0a' + _0x451a65[_0x3103b6(0x725)])[_0x3103b6(0x7e0)](''); if (_0x3d1b58) _0x549156 = _0x3103b6(0x391) + _0x3d1b58; } } } _0x4afbfe[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x2d1456 => { _0x2d1456['stopPropagation'](), _0x747d1d(); }), document[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x5e5302 => { const _0x5dfd1c = _0x59a4d7; _0x5dfd1c(0x4a7) === _0x5dfd1c(0x4a7) ? !_0x3cc8a5['contains'](_0x5e5302[_0x5dfd1c(0x6ba)]) && _0x5e5302['target'] !== _0x55471f && _0x5e5302['target'] !== _0x4afbfe && _0x3cc8a5['classList'][_0x5dfd1c(0x7ef)](_0x5dfd1c(0xa02)) : _0x1951c4[_0x5dfd1c(0x883)] = _0x3ade35[_0x5dfd1c(0x7f8)]; }); async function _0x5c64ec(_0x77f2e6) { const _0x5f3c7f = _0x59a4d7; if (_0x5f3c7f(0x670) !== _0x5f3c7f(0xa6d)) return await _0x3daecd(_0x77f2e6, 0x190, 0.85); else { _0x2e2a3e['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', _0x3286f8[_0x5f3c7f(0x5b2)] = ''; return; } } _0x26d005[_0x59a4d7(0x65f)]('click', () => _0x4b4d09[_0x59a4d7(0x9c7)]()), _0x4b4d09[_0x59a4d7(0x65f)](_0x59a4d7(0x86e), async _0xb181ae => { const _0x562511 = _0x59a4d7, _0x142a3a = _0xb181ae[_0x562511(0x6ba)][_0x562511(0x409)][0x0]; if (!_0x142a3a) return; try { if (_0x562511(0x599) !== _0x562511(0x599)) _0x3d6f69[_0x562511(0xa1b)](_0x562511(0x6e7))['forEach'](_0xc891d0 => { const _0x1ad922 = _0x562511; if (_0x22d0e8[_0x1ad922(0x52b)]['includes'](_0xc891d0['value'])) _0xc891d0['checked'] = !![]; }); else { const _0x83cb5b = await _0x5c64ec(_0x142a3a), _0x240fb9 = document[_0x562511(0x727)](_0x562511(0x47f)); _0x240fb9[_0x562511(0xa8f)][_0x562511(0x11b)] = _0x562511(0x142) + _0x83cb5b + '\x27)', _0x240fb9[_0x562511(0xa13)]['newAvatar'] = _0x83cb5b; } } catch (_0x55c142) { if (_0x562511(0xafa) === _0x562511(0x6cc)) { const { omniText: _0x586aa6 } = _0x535a30(_0x1a19dc['id'], null), _0x37c232 = _0x17aba3(_0x25bd8a['id']), _0x174e7f = _0x5265ec['linkedWorldBookIds'] && _0x10a12c[_0x562511(0x52b)][_0x562511(0xad2)] > 0x0 ? '\x0a\x0a#\x20' + _0x5446df[_0x562511(0x41b)] + _0x562511(0x94d) + _0x1a3785[_0x562511(0x52b)][_0x562511(0x3df)](_0x1c14a3 => _0x3c1dae[_0x562511(0x177)][_0x562511(0x95a)](_0xf39fd7 => _0xf39fd7['id'] === _0x1c14a3))[_0x562511(0x249)](_0x206b7c)['map'](_0x282046 => _0x562511(0x8e6) + _0x282046[_0x562511(0x41b)] + '\x0a' + _0x282046['content'])[_0x562511(0x7e0)]('') : ''; return _0x562511(0xaa4) + _0x3e122a['name'] + _0x562511(0x11f) + _0xcc6965['id'] + '\x0a\x20\x20人设:\x20' + _0x55c3b9[_0x562511(0x54e)] + '\x0a\x20\x20近期记忆:\x0a' + _0x586aa6 + '\x0a' + _0x37c232 + '\x0a' + _0x174e7f; } else _0x1de23f(_0x562511(0x157) + _0x55c142[_0x562511(0x140)]); } }), _0x3269a3[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x326602[_0x59a4d7(0x9c7)]()), _0x326602[_0x59a4d7(0x65f)]('change', async _0x46e726 => { const _0x8b391d = _0x59a4d7; if (_0x8b391d(0x121) !== _0x8b391d(0x121)) _0x5181ea[_0x8b391d(0xb33)] = '▶'; else { const _0x4e9929 = _0x46e726['target'][_0x8b391d(0x409)][0x0]; if (!_0x4e9929) return; try { _0x3269a3[_0x8b391d(0x883)] = await _0x5c64ec(_0x4e9929); } catch (_0x3597a8) { if ('JxdqK' === _0x8b391d(0xb1a)) _0x1de23f(_0x8b391d(0x157) + _0x3597a8[_0x8b391d(0x140)]); else { const _0x23919d = _0x2821d9['sender'] === _0x8b391d(0x6a6) ? '你' : _0x494fb5['contact_name']; _0x4f82ee += _0x8b391d(0x61c) + _0x23919d + ':\x20' + _0x88fb31['content'] + '\x0a'; } } } }); function _0x380e29() { const _0x54c1aa = _0x59a4d7; if (_0x54c1aa(0x187) === 'Drlms') { const _0x1f7f2c = _0x159442[_0x54c1aa(0x1f2)](_0x44345a, _0x54c1aa(0x42d)), _0x4ebff9 = _0x1f7f2c[_0x54c1aa(0x238)](_0x442e4a), _0xcf5b05 = _0x4ebff9[_0x54c1aa(0x120)](_0x233e4c); _0xcf5b05[_0x54c1aa(0x17f)] = () => _0x5b45f3(_0xcf5b05[_0x54c1aa(0x973)] ? _0xcf5b05[_0x54c1aa(0x973)][_0x54c1aa(0x737)] : null), _0xcf5b05['onerror'] = () => _0x14c103(_0xcf5b05[_0x54c1aa(0x815)]); } else _0x1340fc[_0x54c1aa(0x5b2)] = '', _0x1f134c[_0x54c1aa(0x3ea)](_0x2aa2cb => { const _0x1be059 = _0x54c1aa, _0xa8f2ec = document[_0x1be059(0x7a2)](_0x1be059(0x751)); _0xa8f2ec['src'] = _0x2aa2cb[_0x1be059(0x4e8)], _0xa8f2ec[_0x1be059(0x8a5)] = 'lazy', _0xa8f2ec[_0x1be059(0x488)] = _0x2aa2cb[_0x1be059(0x41b)], _0xa8f2ec[_0x1be059(0x7bb)]['add'](_0x1be059(0x30b)), _0xa8f2ec[_0x1be059(0x65f)](_0x1be059(0x9c7), () => _0x2f757d(_0x2aa2cb)), _0x1340fc['appendChild'](_0xa8f2ec); }); } async function _0x49e03a(_0x426d68) { const _0x469f00 = _0x59a4d7, _0x4c18b7 = await _0xf1c3f7(_0x469f00(0xa6c)); if (!_0x4c18b7) return; const _0x5375d6 = _0x185973[_0x469f00(0x1bf)][_0x469f00(0x1ff)](_0xecb670 => _0xecb670['id'] === _0x426d68); _0x5375d6 > -0x1 && (_0x185973[_0x469f00(0x1bf)]['splice'](_0x5375d6, 0x1), _0x35c1de(), _0x55fd92(), _0x3202da(), _0x4b7ffa(), _0x1de23f(_0x469f00(0x1b0))); } let _0x444575 = null; function _0x2e8349(_0x4acb25) { const _0x482866 = _0x59a4d7; if (_0x444575) clearTimeout(_0x444575); const _0x10c712 = _0x4acb25[_0x482866(0x6ba)][_0x482866(0xa37)]('.todo-item,\x20.important-day-item'); if (!_0x10c712) return; const _0x1147b2 = _0x10c712['dataset']['id']; if (!_0x1147b2) return; const _0x214c1a = () => { _0x444575 = setTimeout(() => { const _0x1637c2 = _0x1b5f; if ('BMGGv' !== _0x1637c2(0x589)) return ''; else { if (_0x4acb25[_0x1637c2(0x117)] === 'touchstart') _0x4acb25[_0x1637c2(0x628)](); _0x49e03a(_0x1147b2); } }, 0x320); }, _0x304dcd = () => { const _0x30163d = _0x482866; if (_0x30163d(0x5a3) === _0x30163d(0x5a3)) { if (_0x444575) clearTimeout(_0x444575); } else _0x28a23d[_0x30163d(0xa8f)][_0x30163d(0x11b)] = 'url(\x27' + _0x4a72e1 + '\x27)'; }; document[_0x482866(0x65f)](_0x482866(0x971), _0x304dcd, { 'once': !![] }), document[_0x482866(0x65f)](_0x482866(0x3b5), _0x304dcd, { 'once': !![] }), document[_0x482866(0x65f)]('touchcancel', _0x304dcd, { 'once': !![] }), document[_0x482866(0x65f)]('touchmove', _0x304dcd, { 'once': !![] }), _0x214c1a(); } function _0x2f626d(_0x96162b) { const _0x2772f8 = _0x59a4d7; if (_0x2772f8(0x74d) !== _0x2772f8(0xa06)) { const _0x4260af = _0x185973['chats'][_0x2772f8(0x95a)](_0x2be624 => _0x2be624[_0x2772f8(0xa1e)][_0x2772f8(0x955)](_0x96162b)); if (!_0x4260af) return ''; const _0x2b0dca = _0x16366b(_0x4260af['id']), _0x4b0444 = _0x185973[_0x2772f8(0x1bf)]['filter'](_0x5e537a => _0x5e537a[_0x2772f8(0x195)] === _0x2b0dca['id'] || !_0x5e537a[_0x2772f8(0x195)]); if (_0x4b0444[_0x2772f8(0xad2)] === 0x0) { if (_0x2772f8(0x501) !== _0x2772f8(0x345)) return ''; else _0x456b86[_0x2772f8(0x815)](_0x2772f8(0x8bc), _0xc2b85a), _0x2d47b7(_0x2772f8(0x160) + _0x1b6451[_0x2772f8(0x140)]); } const _0x3778ca = _0x4b0444[_0x2772f8(0x3df)](_0x2a9013 => { const _0x3747e4 = _0x2772f8, _0x501386 = _0x2a9013[_0x3747e4(0x117)] === 'important' ? _0x3747e4(0x8c3) : '待办'; return '-\x20[' + _0x501386 + ']\x20' + _0x2a9013[_0x3747e4(0x23e)] + ':\x20' + _0x2a9013[_0x3747e4(0x725)]; })[_0x2772f8(0x7e0)]('\x0a'); return _0x2772f8(0x654) + _0x2b0dca[_0x2772f8(0x41b)] + _0x2772f8(0x1fd) + _0x3778ca; } else _0x6fd615 += _0x2772f8(0x878) + _0x193ddc[_0x2772f8(0x508)] + '\x20-\x20' + _0x48f6bc['artist'] + ']'; } let _0x5b5a19 = { 'currentDate': new Date(), 'selectedDate': _0x3a462a() }; function _0x22456b() { const _0x4fcd7a = _0x59a4d7; document[_0x4fcd7a(0x727)]('app-calendar')[_0x4fcd7a(0x65f)](_0x4fcd7a(0x9c7), () => { const _0x20bb12 = _0x4fcd7a; _0x55fd92(), _0x8cf86(_0x20bb12(0x1ce), _0x20bb12(0x3d4)); }), document['getElementById']('back-to-home-from-calendar')[_0x4fcd7a(0x65f)]('click', () => _0x8cf86(_0x4fcd7a(0x3d4), _0x4fcd7a(0x1ce))), document['getElementById'](_0x4fcd7a(0x4ad))[_0x4fcd7a(0x65f)](_0x4fcd7a(0x9c7), () => { const _0x4d0779 = _0x4fcd7a; if ('Spzxj' === _0x4d0779(0x299)) _0x5b5a19[_0x4d0779(0x475)][_0x4d0779(0x1fb)](_0x5b5a19[_0x4d0779(0x475)][_0x4d0779(0x5ac)]() - 0x1), _0x55fd92(); else { const _0x112316 = _0xe82c4b[_0x4d0779(0x621)][_0x4d0779(0x95a)](_0x3878a0 => _0x3878a0['id'] === _0x16547d); if (!_0x112316) return; _0x2699d0['getElementById'](_0x4d0779(0x2b1))[_0x4d0779(0x525)] = _0x112316['id'], _0x5e0712[_0x4d0779(0x727)](_0x4d0779(0x40a))['textContent'] = _0x4d0779(0x3f1), _0x4451cc[_0x4d0779(0x727)](_0x4d0779(0xa70))[_0x4d0779(0x525)] = _0x112316[_0x4d0779(0x41b)], _0x112316['avatar'] ? _0x33a582['style'][_0x4d0779(0x11b)] = _0x4d0779(0x142) + _0x112316[_0x4d0779(0xa44)] + '\x27)' : _0x2da68e[_0x4d0779(0xa8f)][_0x4d0779(0x11b)] = _0x4d0779(0x142) + _0x2a969b + '\x27)', _0x314fd8[_0x4d0779(0x727)](_0x4d0779(0xa8d))['value'] = _0x112316[_0x4d0779(0x54e)], _0x2d3b52['style'][_0x4d0779(0x8f8)] = _0x112316['id'] === _0x1363b3[_0x4d0779(0x571)] ? 'none' : _0x4d0779(0x6df), _0x52f22f[_0x4d0779(0x727)](_0x4d0779(0x9f0))[_0x4d0779(0xa8f)]['display'] = _0x4d0779(0x6df); } }), document['getElementById'](_0x4fcd7a(0x8ed))[_0x4fcd7a(0x65f)](_0x4fcd7a(0x9c7), () => { const _0x826c67 = _0x4fcd7a; if ('KVPUT' === 'NPMMZ') { const _0x45b1fb = new _0xbfffb1(); _0x45b1fb[_0x826c67(0x2c1)] = () => _0x36ee2f(_0x45b1fb[_0x826c67(0x973)]), _0x45b1fb['onerror'] = _0x5f4699, _0x45b1fb[_0x826c67(0x63e)](_0x2049cc); } else _0x5b5a19[_0x826c67(0x475)][_0x826c67(0x1fb)](_0x5b5a19[_0x826c67(0x475)][_0x826c67(0x5ac)]() + 0x1), _0x55fd92(); }), document['getElementById'](_0x4fcd7a(0x96b))[_0x4fcd7a(0x65f)](_0x4fcd7a(0x9c7), () => { const _0x1d8fff = _0x4fcd7a; _0x1d8fff(0x4ee) === _0x1d8fff(0x4ee) ? (_0x5b5a19[_0x1d8fff(0x475)] = new Date(), _0x5b5a19['selectedDate'] = _0x3a462a(), _0x55fd92()) : _0x5b5edc(_0x1d8fff(0x13a) + _0x58b937['message']); }), document[_0x4fcd7a(0x727)]('add-event-fab')[_0x4fcd7a(0x65f)](_0x4fcd7a(0x9c7), () => { _0xb12cf7(_0x5b5a19['selectedDate']); }), document[_0x4fcd7a(0x727)](_0x4fcd7a(0x71e))['addEventListener'](_0x4fcd7a(0x9c7), _0x1c3717), document[_0x4fcd7a(0x727)]('cancel-event-button')[_0x4fcd7a(0x65f)]('click', () => document['getElementById'](_0x4fcd7a(0x7ce))['classList'][_0x4fcd7a(0x7ef)](_0x4fcd7a(0xa02))), document['getElementById'](_0x4fcd7a(0x1c2))[_0x4fcd7a(0x65f)]('click', () => document[_0x4fcd7a(0x727)](_0x4fcd7a(0x7ce))[_0x4fcd7a(0x7bb)][_0x4fcd7a(0x7ef)](_0x4fcd7a(0xa02))); const _0x2c863a = document[_0x4fcd7a(0x727)](_0x4fcd7a(0x564)); _0x2c863a[_0x4fcd7a(0x65f)](_0x4fcd7a(0x756), _0x2e8349), _0x2c863a[_0x4fcd7a(0x65f)](_0x4fcd7a(0x869), _0x2e8349, { 'passive': ![] }); } function _0x55fd92() { const _0x5bd143 = _0x59a4d7; if (_0x5bd143(0x74b) === _0x5bd143(0x74b)) { const _0x444ce9 = _0x5b5a19[_0x5bd143(0x475)][_0x5bd143(0x613)](), _0x480d32 = _0x5b5a19[_0x5bd143(0x475)]['getMonth'](); document['getElementById'](_0x5bd143(0x74f))[_0x5bd143(0xb33)] = _0x444ce9 + '年\x20' + (_0x480d32 + 0x1) + '月', _0x8e8a76(_0x444ce9, _0x480d32), _0x108213(_0x5b5a19['selectedDate']); } else { if (_0x414ce1['target'][_0x5bd143(0x7bb)][_0x5bd143(0x40b)](_0x5bd143(0x767))) { const _0x200732 = _0x18638c[_0x5bd143(0x6ba)]['dataset']['id']; _0x32ec35('确定要删除这笔记录吗？')[_0x5bd143(0x368)](_0x1b3c42 => { _0x1b3c42 && _0x4e02b8(_0x200732); }); } } } function _0x4b7ffa() { const _0x578699 = _0x59a4d7; if (_0x578699(0x1e9) !== 'OMuFS') { const _0x1fda84 = document[_0x578699(0x727)]('today-todo-list'); if (!_0x1fda84) return; const _0x4c2f8d = _0x3a462a(), _0x3b2322 = _0x185973[_0x578699(0x1bf)][_0x578699(0x249)](_0x2970ca => _0x2970ca['date'] === _0x4c2f8d && _0x2970ca[_0x578699(0x117)] === _0x578699(0x859)); _0x1fda84[_0x578699(0x5b2)] = '', _0x3b2322[_0x578699(0xad2)] > 0x0 ? _0x578699(0x380) !== 'jeDMt' ? _0x3b2322[_0x578699(0x3ea)](_0x1d936f => { const _0x35c163 = _0x578699; if (_0x35c163(0x73f) !== _0x35c163(0x73f)) { if (_0x255691[_0x35c163(0xad2)] === 0x0) return; _0x5c7101 = (_0x3fb73c + 0x1) % _0x732af3[_0x35c163(0xad2)], _0xdf6b1e(_0x51c3dc[_0x42d298], _0x2b2e53); } else { const _0x187162 = document[_0x35c163(0x7a2)](_0x35c163(0xb08)); _0x187162[_0x35c163(0x8f1)] = _0x35c163(0x60e), _0x187162['textContent'] = _0x1d936f['content'], _0x1fda84[_0x35c163(0x322)](_0x187162); } }) : _0x2336d0['name'] !== _0x578699(0x5db) && (_0x769999[_0x578699(0x815)](_0x578699(0x7c5), _0x2999b1), _0x3e09e6({ 'role': 'assistant', 'content': '错误:\x20' + _0x6d746[_0x578699(0x140)] }, _0x394845[_0x578699(0x338)][_0x578699(0xad2)] - 0x1)) : _0x1fda84[_0x578699(0x5b2)] = _0x578699(0x9dc); } else { const _0x3a4b25 = _0x39d439[_0x578699(0x725)][_0x578699(0x5ce)](/：(.*?)]$/); _0x3a2d77['content'] = _0x578699(0x913) + (_0x3a4b25 ? _0x3a4b25[0x1] : '未知表情') + ']', _0x4e7708[_0x578699(0x92b)](_0x22572b); } } function _0x8e8a76(_0x2ee134, _0x490ae2) { const _0x1fe0e1 = _0x59a4d7, _0x2b66e5 = document[_0x1fe0e1(0x727)](_0x1fe0e1(0x2c9)); _0x2b66e5['innerHTML'] = ''; const _0x1996d2 = new Date(_0x2ee134, _0x490ae2, 0x1)['getDay'](), _0x18f237 = new Date(_0x2ee134, _0x490ae2 + 0x1, 0x0)['getDate'](), _0x38b5bf = _0x3a462a(); for (let _0x384c5d = 0x0; _0x384c5d < _0x1996d2; _0x384c5d++) { _0x2b66e5['appendChild'](document['createElement'](_0x1fe0e1(0xb08))); } for (let _0x2efbd8 = 0x1; _0x2efbd8 <= _0x18f237; _0x2efbd8++) { if (_0x1fe0e1(0x5a8) === _0x1fe0e1(0x5a8)) { const _0x3d01d5 = document[_0x1fe0e1(0x7a2)]('div'); _0x3d01d5[_0x1fe0e1(0x8f1)] = _0x1fe0e1(0x5a2); const _0x2fe894 = _0x2ee134 + '-' + String(_0x490ae2 + 0x1)[_0x1fe0e1(0x16e)](0x2, '0') + '-' + String(_0x2efbd8)[_0x1fe0e1(0x16e)](0x2, '0'); if (_0x2fe894 === _0x38b5bf) _0x3d01d5['classList'][_0x1fe0e1(0x99b)](_0x1fe0e1(0xac6)); if (_0x2fe894 === _0x5b5a19[_0x1fe0e1(0x900)]) _0x3d01d5[_0x1fe0e1(0x7bb)]['add'](_0x1fe0e1(0x65b)); const _0x14ca8d = document[_0x1fe0e1(0x7a2)](_0x1fe0e1(0x8bb)); _0x14ca8d[_0x1fe0e1(0x8f1)] = 'day-number', _0x14ca8d[_0x1fe0e1(0xb33)] = _0x2efbd8, _0x3d01d5[_0x1fe0e1(0x322)](_0x14ca8d); const _0x18e342 = _0x185973[_0x1fe0e1(0x1bf)][_0x1fe0e1(0x249)](_0x15a9a0 => _0x15a9a0[_0x1fe0e1(0x23e)] === _0x2fe894); if (_0x18e342[_0x1fe0e1(0xad2)] > 0x0) { const _0xa5330 = document['createElement'](_0x1fe0e1(0xb08)); _0xa5330[_0x1fe0e1(0x8f1)] = _0x1fe0e1(0x656), _0x3d01d5[_0x1fe0e1(0x322)](_0xa5330); } _0x3d01d5[_0x1fe0e1(0x65f)](_0x1fe0e1(0x9c7), () => { const _0x3ca9f1 = _0x1fe0e1; _0x5b5a19[_0x3ca9f1(0x900)] = _0x2fe894, _0x55fd92(); }), _0x2b66e5['appendChild'](_0x3d01d5); } else _0x118d23[_0x1fe0e1(0x7f8)] = _0x44d9c4; } } function _0x108213(_0xd5b321) { const _0x4fd51 = _0x59a4d7; if ('XzsVq' !== _0x4fd51(0x7a6)) _0x3ec721[_0x4fd51(0x815)](_0x4fd51(0x144), _0x3dd104), _0x359d46['value'] = _0x4fd51(0x208) + _0x16d65e[_0x4fd51(0x140)]; else { const _0x41af09 = document[_0x4fd51(0x727)](_0x4fd51(0x564)), _0x461193 = document['getElementById'](_0x4fd51(0x2f3)); _0x41af09[_0x4fd51(0x5b2)] = ''; const _0x43334c = new Date(_0xd5b321 + 'T00:00:00'); _0x461193[_0x4fd51(0xb33)] = _0x43334c[_0x4fd51(0x5ac)]() + 0x1 + '月' + _0x43334c[_0x4fd51(0x8f2)]() + '日'; const _0x1181f3 = _0x185973['calendarEvents'][_0x4fd51(0x249)](_0x4c8f16 => _0x4c8f16[_0x4fd51(0x23e)] === _0xd5b321); if (_0x1181f3[_0x4fd51(0xad2)] === 0x0) { _0x41af09[_0x4fd51(0x5b2)] = _0x4fd51(0x730); return; } _0x1181f3[_0x4fd51(0x3ea)](_0x1993b0 => { const _0x169c64 = _0x4fd51, _0x4e24f1 = document[_0x169c64(0x7a2)](_0x169c64(0xb08)); _0x4e24f1[_0x169c64(0x8f1)] = _0x1993b0[_0x169c64(0x117)] === _0x169c64(0x305) ? 'important-day-item' : 'todo-item', _0x4e24f1[_0x169c64(0xb33)] = _0x1993b0[_0x169c64(0x725)], _0x4e24f1[_0x169c64(0xa13)]['id'] = _0x1993b0['id'], _0x41af09[_0x169c64(0x322)](_0x4e24f1); }); } } function _0xb12cf7(_0x30c3f9) { const _0x393154 = _0x59a4d7; _0x393154(0xa73) === 'Xywsl' ? _0x4b25c4 = _0x4a50bc[_0x393154(0x725)] : (document[_0x393154(0x727)](_0x393154(0x62f))[_0x393154(0xb33)] = '为\x20' + _0x30c3f9 + '\x20添加...', document['getElementById'](_0x393154(0x49d))[_0x393154(0x525)] = '', document[_0x393154(0x727)]('event-type-todo')['checked'] = !![], document['getElementById'](_0x393154(0x7ce))[_0x393154(0x7bb)]['add'](_0x393154(0xa02)), document['getElementById'](_0x393154(0x49d))[_0x393154(0x9d3)]()); } function _0x1c3717() { const _0x4eadc7 = _0x59a4d7; if (_0x4eadc7(0x438) !== _0x4eadc7(0xac2)) { const _0x32918c = document[_0x4eadc7(0x727)](_0x4eadc7(0x49d))[_0x4eadc7(0x525)][_0x4eadc7(0x40e)](), _0x5b8f4d = document[_0x4eadc7(0x99d)](_0x4eadc7(0x66c))[_0x4eadc7(0x525)]; if (!_0x32918c) { if (_0x4eadc7(0x9d4) === _0x4eadc7(0x1e8)) _0x4a0bc[_0x4eadc7(0xb33)] = '近期没有特别安排', _0x564f56[_0x4eadc7(0x5b2)] = '<span>--</span><span\x20class=\x22unit\x22>天</span>'; else { _0x1de23f(_0x4eadc7(0x436)); return; } } const _0x291438 = _0x185973[_0x4eadc7(0x621)][_0x4eadc7(0x95a)](_0x3ad460 => _0x3ad460['id'] === _0x185973[_0x4eadc7(0x571)]); if (!_0x291438) { if (_0x4eadc7(0x509) === _0x4eadc7(0x38e)) _0x285bb6[_0x4eadc7(0xb33)] = '▶'; else { _0x1de23f(_0x4eadc7(0x4f2)); return; } } _0x185973[_0x4eadc7(0x1bf)]['push']({ 'id': _0x4eadc7(0x2fa) + Date[_0x4eadc7(0xa59)](), 'date': _0x5b5a19[_0x4eadc7(0x900)], 'type': _0x5b8f4d, 'content': _0x32918c, 'userId': _0x291438['id'] }), _0x35c1de(), _0x55fd92(), _0x3202da(), _0x4b7ffa(), document[_0x4eadc7(0x727)](_0x4eadc7(0x7ce))[_0x4eadc7(0x7bb)][_0x4eadc7(0x7ef)](_0x4eadc7(0xa02)); } else _0x4ba3e1['style'][_0x4eadc7(0x1f7)] = '0'; } function _0x3202da() { const _0x5e8efe = _0x59a4d7, _0x2aa885 = document[_0x5e8efe(0x727)](_0x5e8efe(0x4e6)), _0x181d32 = document[_0x5e8efe(0x727)](_0x5e8efe(0x45b)), _0x57f38e = new Date(); _0x57f38e[_0x5e8efe(0x96d)](0x0, 0x0, 0x0, 0x0); const _0x55c8a7 = _0x185973[_0x5e8efe(0x1bf)][_0x5e8efe(0x249)](_0x37d8b0 => _0x37d8b0[_0x5e8efe(0x117)] === _0x5e8efe(0x305) && new Date(_0x37d8b0[_0x5e8efe(0x23e)] + _0x5e8efe(0x782)) >= _0x57f38e)[_0x5e8efe(0xab1)]((_0x3dcaad, _0x4900e8) => new Date(_0x3dcaad[_0x5e8efe(0x23e)]) - new Date(_0x4900e8[_0x5e8efe(0x23e)])); if (_0x55c8a7[_0x5e8efe(0xad2)] > 0x0) { const _0x5f4a1e = _0x55c8a7[0x0], _0x3e9285 = new Date(_0x5f4a1e[_0x5e8efe(0x23e)] + _0x5e8efe(0x782)), _0x8c3c8c = _0x3e9285 - _0x57f38e, _0x27c416 = Math['ceil'](_0x8c3c8c / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x2aa885['textContent'] = '距离「' + _0x5f4a1e[_0x5e8efe(0x725)] + '」', _0x181d32[_0x5e8efe(0x5b2)] = '<span>' + _0x27c416 + '</span><span\x20class=\x22unit\x22>天</span>'; } else _0x2aa885[_0x5e8efe(0xb33)] = _0x5e8efe(0x8b6), _0x181d32['innerHTML'] = _0x5e8efe(0x687); } function _0x3f5711() { const _0x15304d = _0x59a4d7, _0x54c194 = document[_0x15304d(0x727)](_0x15304d(0x7f3)); _0x54c194[_0x15304d(0x5b2)] = ''; if (_0x185973[_0x15304d(0x621)][_0x15304d(0xad2)] === 0x0) { if (_0x15304d(0x8e7) === 'pLMdp') _0xad4fd2 = _0x15304d(0x2e0), _0x5c90a6 = '错误：找不到角色'; else { _0x54c194[_0x15304d(0x5b2)] = _0x15304d(0x83d); return; } } _0x185973['userProfiles'][_0x15304d(0x3ea)](_0x2da4dd => { const _0xbb20e3 = _0x15304d, _0x440b64 = document[_0xbb20e3(0x7a2)](_0xbb20e3(0xb08)); _0x440b64[_0xbb20e3(0x8f1)] = _0xbb20e3(0x448), _0x440b64[_0xbb20e3(0xa13)]['id'] = _0x2da4dd['id']; const _0xd50d57 = _0x2da4dd['id'] === _0x185973[_0xbb20e3(0x571)] ? _0xbb20e3(0x4ba) : ''; _0x440b64['innerHTML'] = _0xbb20e3(0x4c4) + (_0x2da4dd[_0xbb20e3(0xa44)] || _0x5b8a69) + _0xbb20e3(0x6f2) + _0x2da4dd[_0xbb20e3(0x41b)] + _0xd50d57 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>' + _0x2da4dd[_0xbb20e3(0x54e)][_0xbb20e3(0xb10)](0x0, 0x64) + _0xbb20e3(0x5ec), _0x440b64[_0xbb20e3(0x65f)](_0xbb20e3(0x9c7), () => _0x341b89(_0x2da4dd['id'])), _0x54c194[_0xbb20e3(0x322)](_0x440b64); }); } function _0x341b89(_0x52fb11 = null) { const _0x215337 = _0x59a4d7; if (_0x215337(0x9dd) === _0x215337(0x9dd)) { _0x8cf86(_0x215337(0x382), _0x215337(0x24f)); const _0x123b46 = document[_0x215337(0x727)]('set-active-user-button'), _0x49d91f = document[_0x215337(0x727)](_0x215337(0x47f)); _0x49d91f[_0x215337(0xa8f)][_0x215337(0x11b)] = '', delete _0x49d91f['dataset'][_0x215337(0x13d)]; if (_0x52fb11) { if (_0x215337(0xa48) === 'nukzq') { const _0x39c3f8 = _0x185973[_0x215337(0x621)][_0x215337(0x95a)](_0x10f787 => _0x10f787['id'] === _0x52fb11); if (!_0x39c3f8) return; document[_0x215337(0x727)]('editing-user-id')[_0x215337(0x525)] = _0x39c3f8['id'], document['getElementById'](_0x215337(0x40a))['textContent'] = _0x215337(0x3f1), document[_0x215337(0x727)](_0x215337(0xa70))[_0x215337(0x525)] = _0x39c3f8['name'], _0x39c3f8['avatar'] ? _0x49d91f[_0x215337(0xa8f)][_0x215337(0x11b)] = 'url(\x27' + _0x39c3f8[_0x215337(0xa44)] + '\x27)' : _0x49d91f[_0x215337(0xa8f)][_0x215337(0x11b)] = 'url(\x27' + _0x5b8a69 + '\x27)', document[_0x215337(0x727)](_0x215337(0xa8d))[_0x215337(0x525)] = _0x39c3f8['persona'], _0x123b46['style'][_0x215337(0x8f8)] = _0x39c3f8['id'] === _0x185973[_0x215337(0x571)] ? _0x215337(0x941) : _0x215337(0x6df), document['getElementById'](_0x215337(0x9f0))['style'][_0x215337(0x8f8)] = _0x215337(0x6df); } else _0xf83d2a[_0x215337(0x239)](); } else document[_0x215337(0x727)](_0x215337(0x2b1))[_0x215337(0x525)] = '', document['getElementById'](_0x215337(0x40a))[_0x215337(0xb33)] = '创建新用户', document[_0x215337(0x727)](_0x215337(0xa70))[_0x215337(0x525)] = _0x215337(0x653) + (_0x185973[_0x215337(0x621)][_0x215337(0xad2)] + 0x1), _0x49d91f['style']['backgroundImage'] = _0x215337(0x142) + _0x5b8a69 + '\x27)', document[_0x215337(0x727)](_0x215337(0xa8d))[_0x215337(0x525)] = '', _0x123b46[_0x215337(0xa8f)][_0x215337(0x8f8)] = _0x215337(0x941), document[_0x215337(0x727)](_0x215337(0x9f0))['style'][_0x215337(0x8f8)] = 'none'; } else _0x86fdf5(); } function _0x3689ad() { const _0xf2b613 = _0x59a4d7, _0x22ef21 = document[_0xf2b613(0x727)](_0xf2b613(0x2b1))[_0xf2b613(0x525)], _0x17c302 = document['getElementById']('user-avatar-preview'), _0x4cf9cb = { 'name': document['getElementById'](_0xf2b613(0xa70))['value']['trim'](), 'persona': document['getElementById'](_0xf2b613(0xa8d))[_0xf2b613(0x525)][_0xf2b613(0x40e)](), 'avatar': _0x185973[_0xf2b613(0x621)][_0xf2b613(0x95a)](_0x14a2de => _0x14a2de['id'] === _0x22ef21)?.[_0xf2b613(0xa44)] || _0x17c302[_0xf2b613(0xa8f)][_0xf2b613(0x11b)][_0xf2b613(0x247)](0x5, -0x2)[_0xf2b613(0xa89)](/'/g, '') || _0x5b8a69 }; _0x17c302[_0xf2b613(0xa13)][_0xf2b613(0x13d)] && (_0x4cf9cb[_0xf2b613(0xa44)] = _0x17c302[_0xf2b613(0xa13)]['newAvatar'], delete _0x17c302[_0xf2b613(0xa13)][_0xf2b613(0x13d)]); if (!_0x4cf9cb['name']) { if (_0xf2b613(0x4e7) === 'XvRsE') { _0x1de23f(_0xf2b613(0x1d0)); return; } else _0x16031b[_0xf2b613(0x815)](_0xf2b613(0x4be), _0x1f4820); } if (_0x22ef21) { const _0x136545 = _0x185973[_0xf2b613(0x621)][_0xf2b613(0x95a)](_0x21de22 => _0x21de22['id'] === _0x22ef21); if (_0x136545) Object[_0xf2b613(0x989)](_0x136545, _0x4cf9cb); } else { const _0x111595 = { 'id': _0xf2b613(0x50a) + Date[_0xf2b613(0xa59)](), ..._0x4cf9cb }; _0x185973[_0xf2b613(0x621)][_0xf2b613(0x92b)](_0x111595), !_0x185973[_0xf2b613(0x571)] && (_0x185973['activeUserProfileId'] = _0x111595['id']); } _0x35c1de(), _0x1de23f(_0xf2b613(0x4d9)), _0x3f5711(), _0x8cf86(_0xf2b613(0x24f), _0xf2b613(0x382)); } async function _0xab1aa4() { const _0x8c69d6 = _0x59a4d7; if (_0x8c69d6(0x447) !== _0x8c69d6(0x447)) _0x996c1(), _0x209355(_0x8c69d6(0x24f), _0x8c69d6(0x3d4)); else { const _0xe6122d = document[_0x8c69d6(0x727)]('editing-user-id')['value']; if (!_0xe6122d) return; if (_0x185973[_0x8c69d6(0x621)][_0x8c69d6(0xad2)] <= 0x1) { if (_0x8c69d6(0x94f) !== _0x8c69d6(0x8dd)) { _0x1de23f(_0x8c69d6(0x865)); return; } else _0xd93761[_0x8c69d6(0x92b)]('[' + _0xb4ba13(_0x118a01) + _0x8c69d6(0x593) + (_0x2ddeb3['content']?.[_0x8c69d6(0x5ce)](/：(.+?)]/)?.[0x1] || '表情') + ']'); } const _0x5bd1f4 = await _0xf1c3f7(_0x8c69d6(0x51e)); _0x5bd1f4 && (_0x8c69d6(0x89a) !== _0x8c69d6(0x89a) ? _0x11362b = _0x4b57e2[_0x8c69d6(0xa1d)](_0x5c0d47) : (_0x185973[_0x8c69d6(0x621)] = _0x185973['userProfiles']['filter'](_0x4eebae => _0x4eebae['id'] !== _0xe6122d), _0x185973[_0x8c69d6(0x571)] === _0xe6122d && (_0x185973[_0x8c69d6(0x571)] = _0x185973[_0x8c69d6(0x621)][0x0]['id']), _0x185973['chats'][_0x8c69d6(0x3ea)](_0x3230fd => { const _0x18e084 = _0x8c69d6; if (_0x18e084(0x4e2) !== _0x18e084(0x20f)) _0x3230fd[_0x18e084(0x4eb)] === _0xe6122d && (_0x18e084(0x68e) === _0x18e084(0x2cd) ? (_0x5befa9[_0x18e084(0x900)] = _0x396d2e, _0xdfdf5()) : _0x3230fd['boundUserProfileId'] = _0x185973['activeUserProfileId']); else { const _0x46dd4f = _0x148c84(_0x4482ee[_0x18e084(0x7b7)]); _0x46dd4f && (_0x46dd4f[_0x18e084(0x3bd)] = _0x21b45d, _0x56209e(_0x22f354[_0x18e084(0x7b7)], _0x18e084(0x2ba))); } }), _0x35c1de(), _0x1de23f(_0x8c69d6(0x9ef)), _0x3f5711(), _0x8cf86(_0x8c69d6(0x24f), _0x8c69d6(0x382)))); } } function _0x195cba() { const _0x453a1e = _0x59a4d7; if (_0x453a1e(0x465) !== 'Akyyd') { const _0x12647d = document[_0x453a1e(0x727)](_0x453a1e(0x93c)); _0x12647d[_0x453a1e(0x5b2)] = ''; if (_0x185973[_0x453a1e(0x177)][_0x453a1e(0xad2)] === 0x0) { _0x12647d[_0x453a1e(0x5b2)] = _0x453a1e(0x374); return; } _0x185973[_0x453a1e(0x177)][_0x453a1e(0x3ea)](_0x334ccf => { const _0x529585 = _0x453a1e; if ('eMlVm' !== 'EFnHs') { const _0xe839f0 = document[_0x529585(0x7a2)](_0x529585(0xb08)); _0xe839f0[_0x529585(0x8f1)] = 'world-book-item', _0xe839f0[_0x529585(0xa13)]['id'] = _0x334ccf['id'], _0xe839f0[_0x529585(0x5b2)] = _0x529585(0x90e) + _0x334ccf[_0x529585(0x41b)] + _0x529585(0x51b) + _0x334ccf[_0x529585(0x725)][_0x529585(0xb10)](0x0, 0x64) + _0x529585(0x2dd), _0xe839f0['addEventListener'](_0x529585(0x9c7), () => _0xd6d03a(_0x334ccf['id'])), _0x12647d['appendChild'](_0xe839f0); } else _0x324e43(_0x542f02, _0x5bd745[_0x529585(0x2ea)]); }); } else { const _0x485d73 = { 'role': _0x453a1e(0x72a), 'content': _0x453a1e(0x3eb) + _0x2a6a77['name'] + ']', 'displayUrl': _0x1328a0[_0x453a1e(0x4e8)], 'senderId': _0x561399[_0x453a1e(0x660)], 'timestamp': _0x3ccac8['now'](), 'isOffline': _0x2d79a1 }; _0x52ca7a[_0x453a1e(0x338)][_0x453a1e(0x92b)](_0x485d73); } } function _0xd6d03a(_0x43b3fb = null) { const _0x49a29d = _0x59a4d7; _0x8cf86(_0x49a29d(0x61a), _0x49a29d(0x317)); if (_0x43b3fb) { const _0x826ee0 = _0x185973[_0x49a29d(0x177)][_0x49a29d(0x95a)](_0x82a402 => _0x82a402['id'] === _0x43b3fb); if (!_0x826ee0) return; document['getElementById'](_0x49a29d(0x499))[_0x49a29d(0x525)] = _0x826ee0['id'], document['getElementById']('world-book-editor-title')[_0x49a29d(0xb33)] = _0x49a29d(0xae0), document[_0x49a29d(0x727)]('world-book-edit-name')[_0x49a29d(0x525)] = _0x826ee0[_0x49a29d(0x41b)], document[_0x49a29d(0x727)](_0x49a29d(0x3e8))['value'] = _0x826ee0[_0x49a29d(0x725)]; } else _0x49a29d(0x169) !== _0x49a29d(0x169) ? _0xfe07eb[_0x49a29d(0x417)][_0x49a29d(0xa82)]('New\x20request\x20started') : (document[_0x49a29d(0x727)](_0x49a29d(0x499))[_0x49a29d(0x525)] = '', document[_0x49a29d(0x727)](_0x49a29d(0x607))[_0x49a29d(0xb33)] = _0x49a29d(0x2d3), document[_0x49a29d(0x727)]('world-book-edit-name')['value'] = '', document[_0x49a29d(0x727)](_0x49a29d(0x3e8))[_0x49a29d(0x525)] = ''); } function _0x394add() { const _0x3bfed0 = _0x59a4d7; if (_0x3bfed0(0x1a3) === _0x3bfed0(0x8ab)) _0x361f3a > _0x4e275b && (_0x427f2b *= _0x2e9875 / _0x5a1056, _0x4140ed = _0x577c9c); else { const _0x37800c = document[_0x3bfed0(0x727)](_0x3bfed0(0x499))[_0x3bfed0(0x525)], _0x2ac537 = document[_0x3bfed0(0x727)](_0x3bfed0(0xadd))['value'][_0x3bfed0(0x40e)](), _0x8952b6 = document['getElementById'](_0x3bfed0(0x3e8))['value'][_0x3bfed0(0x40e)](); if (!_0x2ac537 || !_0x8952b6) { _0x1de23f(_0x3bfed0(0x80c)); return; } if (_0x37800c) { const _0x1e03b5 = _0x185973['worldBooks']['find'](_0x27b238 => _0x27b238['id'] === _0x37800c); _0x1e03b5 && (_0x1e03b5['name'] = _0x2ac537, _0x1e03b5[_0x3bfed0(0x725)] = _0x8952b6); } else { if (_0x3bfed0(0x29b) === _0x3bfed0(0x29b)) { const _0x340a22 = { 'id': 'wb_' + Date[_0x3bfed0(0xa59)](), 'name': _0x2ac537, 'content': _0x8952b6 }; _0x185973['worldBooks'][_0x3bfed0(0x92b)](_0x340a22); } else _0x3eff06[_0x3bfed0(0x815)](_0x3bfed0(0x92e), _0xf94ecb), _0x489a5a && (_0x39625d[_0x3bfed0(0xa8f)]['backgroundImage'] = ''); } _0x35c1de(), _0x1de23f(_0x3bfed0(0x219)), _0x195cba(), _0x8cf86(_0x3bfed0(0x317), 'worldBookEditor'); } } async function _0x22067e() { const _0x5b1cb8 = _0x59a4d7, _0x21a28c = document[_0x5b1cb8(0x727)]('editing-world-book-id')['value']; if (!_0x21a28c) return; const _0x2adaeb = await _0xf1c3f7(_0x5b1cb8(0x2ef)); if (_0x2adaeb) { if (_0x5b1cb8(0x9e2) === _0x5b1cb8(0x9e2)) _0x185973['worldBooks'] = _0x185973[_0x5b1cb8(0x177)][_0x5b1cb8(0x249)](_0x438015 => _0x438015['id'] !== _0x21a28c), _0x185973['characters'][_0x5b1cb8(0x3ea)](_0x10e249 => { const _0x1b6d1c = _0x5b1cb8; _0x10e249[_0x1b6d1c(0x52b)] && ('JLBeS' !== _0x1b6d1c(0xabe) ? _0x10e249[_0x1b6d1c(0x52b)] = _0x10e249[_0x1b6d1c(0x52b)][_0x1b6d1c(0x249)](_0x1da92b => _0x1da92b !== _0x21a28c) : _0x17e81c === _0x1b6d1c(0x3d4) ? _0x3df6a8[_0x1b6d1c(0xa8f)][_0x1b6d1c(0x8f8)] = 'inline-block' : _0x21c58c[_0x1b6d1c(0xa8f)][_0x1b6d1c(0x8f8)] = _0x1b6d1c(0x941)); }), _0x35c1de(), _0x1de23f(_0x5b1cb8(0x46d)), _0x195cba(), _0x8cf86(_0x5b1cb8(0x317), _0x5b1cb8(0x61a)); else { _0x558782(); const _0x190c7a = _0xf589fc(_0x5b1cb8(0x975), _0x520183[_0x5b1cb8(0x41b)]); _0x190c7a && _0x190c7a[_0x5b1cb8(0x40e)]() && _0x190c7a !== _0x1a22fd['name'] && (_0xe487af[_0x5b1cb8(0x41b)] = _0x190c7a['trim'](), _0x4af0fb(), _0x24eb08(), _0x26a084(), _0x23224b('群名称已更改为\x22' + _0x19ae8a[_0x5b1cb8(0x41b)] + '\x22。')); } } } function _0x3a6bb0() { const _0x5ea6c8 = _0x59a4d7; if (_0x5ea6c8(0x4a4) !== _0x5ea6c8(0x706)) { const _0x14e5af = document[_0x5ea6c8(0x727)](_0x5ea6c8(0x7b4)), _0x104d00 = _0x14e5af[_0x5ea6c8(0xa1b)](_0x5ea6c8(0x3a0)), _0x58bd1b = document[_0x5ea6c8(0x99d)]('.selected-options-text'); if (_0x104d00['length'] === 0x0) _0x58bd1b['textContent'] = '--\x20点击选择\x20--'; else { if (_0x104d00[_0x5ea6c8(0xad2)] > 0x2) _0x58bd1b['textContent'] = _0x5ea6c8(0x20a) + _0x104d00[_0x5ea6c8(0xad2)] + '\x20项'; else { if (_0x5ea6c8(0x566) !== _0x5ea6c8(0x18c)) _0x58bd1b['textContent'] = Array[_0x5ea6c8(0x81a)](_0x104d00)[_0x5ea6c8(0x3df)](_0x2851c4 => _0x2851c4[_0x5ea6c8(0x186)][_0x5ea6c8(0xb33)][_0x5ea6c8(0x40e)]())[_0x5ea6c8(0x7e0)]('、'); else { _0x59f55d = _0x102509(_0x48820e); if (!_0x56dc42) throw new _0x18021b(_0x5ea6c8(0x972)); } } } } else _0x1bc12a[_0x59f9b4][_0x5ea6c8(0x65f)](_0x5ea6c8(0x9c7), () => _0x13a629[_0xec4205][_0x5ea6c8(0x9c7)]()), _0xe80462[_0x4e4107]['addEventListener'](_0x5ea6c8(0x86e), _0x403b8d => { const _0x334491 = _0x5ea6c8; _0x2adc7f(_0x2a80f2, _0x403b8d[_0x334491(0x6ba)][_0x334491(0x409)][0x0]); }); } async function _0x25de77(_0x14657f) { const _0x56a91d = _0x59a4d7, _0x3e4d82 = _0x185973[_0x56a91d(0x6ac)][_0x56a91d(0x95a)](_0x5998cf => _0x5998cf['id'] === _0x14657f); if (!_0x3e4d82 || _0x3e4d82[_0x56a91d(0x117)] !== _0x56a91d(0x4b1)) return; document['getElementById'](_0x56a91d(0x6fb))[_0x56a91d(0x525)] = _0x3e4d82[_0x56a91d(0x41b)] || '', _0x40e732('group-settings-bind-user'), document[_0x56a91d(0x727)](_0x56a91d(0x93b))[_0x56a91d(0x525)] = _0x3e4d82['boundUserProfileId'] || _0x185973[_0x56a91d(0x571)]; const _0x23601e = document['getElementById'](_0x56a91d(0x1fa)); _0x23601e[_0x56a91d(0x5b2)] = '', _0x185973[_0x56a91d(0x177)][_0x56a91d(0x3ea)](_0x315874 => { const _0x5b0f4d = _0x56a91d, _0x31918b = _0x3e4d82[_0x5b0f4d(0x52b)]?.['includes'](_0x315874['id']), _0x167b87 = document['createElement']('label'); _0x167b87[_0x5b0f4d(0x5b2)] = _0x5b0f4d(0x8b2) + _0x315874['id'] + '\x22\x20' + (_0x31918b ? _0x5b0f4d(0x7b1) : '') + '>\x20' + _0x315874[_0x5b0f4d(0x41b)], _0x23601e[_0x5b0f4d(0x322)](_0x167b87); }), _0x4fd33d(); const _0x1cb453 = document['getElementById'](_0x56a91d(0x404)), _0x5068c8 = document[_0x56a91d(0x727)](_0x56a91d(0x535)); _0x5068c8[_0x56a91d(0xa8f)][_0x56a91d(0x11b)] = '', _0x27b140(_0x56a91d(0x36c) + _0x14657f)[_0x56a91d(0x368)](_0x31e421 => { const _0xaaacfa = _0x56a91d; _0xaaacfa(0x481) === _0xaaacfa(0x481) ? _0x1cb453['src'] = _0x31e421 ? URL[_0xaaacfa(0x8ca)](_0x31e421) : _0xcd0fda : _0x27a264[_0xaaacfa(0x322)](_0x548887); }), _0x27b140(_0x56a91d(0x25d) + _0x14657f)[_0x56a91d(0x368)](_0x1239e5 => { const _0x35210a = _0x56a91d; if (_0x1239e5) _0x5068c8[_0x35210a(0xa8f)][_0x35210a(0x11b)] = _0x35210a(0x142) + URL[_0x35210a(0x8ca)](_0x1239e5) + '\x27)'; }), _0x8cf86(_0x56a91d(0x17c), _0x56a91d(0xb17)); } async function _0x24dfb5() { const _0x110560 = _0x59a4d7, _0xf80988 = _0x3b6e44(); if (!_0xf80988 || _0xf80988['type'] !== 'group') return; const _0x2490ca = document['getElementById'](_0x110560(0x6fb))['value'][_0x110560(0x40e)](); if (!_0x2490ca) { _0x1de23f(_0x110560(0x4bb)); return; } _0xf80988[_0x110560(0x41b)] = _0x2490ca; const _0x155a3e = document['querySelectorAll'](_0x110560(0x8bf)); _0xf80988[_0x110560(0x52b)] = Array[_0x110560(0x81a)](_0x155a3e)[_0x110560(0x3df)](_0x590d04 => _0x590d04[_0x110560(0x525)]), _0xf80988[_0x110560(0x4eb)] = document[_0x110560(0x727)]('group-settings-bind-user')['value']; const _0xd43780 = document[_0x110560(0x727)]('group-avatar-input')[_0x110560(0x409)][0x0], _0x52c72b = document['getElementById'](_0x110560(0x938))['files'][0x0]; if (_0xd43780) await _0x5bc724(_0x110560(0x36c) + _0xf80988['id'], _0xd43780); if (_0x52c72b) await _0x5bc724(_0x110560(0x25d) + _0xf80988['id'], _0x52c72b); _0x35c1de(), _0x226af3(), await _0x1f52e3(), _0x1de23f(_0x110560(0x4e9)), _0x8cf86(_0x110560(0xb17), _0x110560(0x17c)); } function _0x4fd33d() { const _0x46e44f = _0x59a4d7; if (_0x46e44f(0xb21) === _0x46e44f(0xb21)) { const _0x1655c2 = document['getElementById'](_0x46e44f(0x1fa)), _0x31b173 = _0x1655c2[_0x46e44f(0xa1b)](_0x46e44f(0x3a0)), _0x15ba84 = document[_0x46e44f(0x99d)]('#group-settings-screen\x20.selected-options-text'); if (_0x31b173[_0x46e44f(0xad2)] === 0x0) _0x46e44f(0x3d3) !== 'SeUMm' ? _0x15ba84['textContent'] = '--\x20点击选择\x20--' : _0x6ef359(_0x4194be['id']); else { if (_0x31b173[_0x46e44f(0xad2)] > 0x2) _0x15ba84[_0x46e44f(0xb33)] = _0x46e44f(0x20a) + _0x31b173[_0x46e44f(0xad2)] + '\x20项'; else { if ('yUqpj' === 'VGqtD') { if (_0x2ad1b0 < 0x0 || _0x2896c0 >= _0x9874b1[_0x46e44f(0xad2)]) return; _0x40c9f9 = _0x1ab44; const _0x29effc = _0x3c8fe6[_0x3aaab4]; _0x5d7ab7['src'] = _0x29effc[_0x46e44f(0x86d)] || _0x29effc['url'], _0x35809f[_0x46e44f(0x462)](), _0x23e2aa(), _0x1b4505(); } else _0x15ba84['textContent'] = Array['from'](_0x31b173)[_0x46e44f(0x3df)](_0x2b76d8 => _0x2b76d8[_0x46e44f(0x186)][_0x46e44f(0xb33)][_0x46e44f(0x40e)]())[_0x46e44f(0x7e0)]('、'); } } } else _0x3b99a6[_0x46e44f(0x507)] = _0x46e44f(0x912); } async function _0x1b4e0c() { const _0x3d523b = _0x59a4d7, _0x287e5b = _0x3b6e44(), _0x1950fc = (_0x287e5b?.[_0x3d523b(0xa1e)] || [])[_0x3d523b(0x3df)](_0xec7e1c)[_0x3d523b(0x249)](Boolean), _0x3b4a09 = _0x16366b(_0x287e5b['id']); if (!_0x287e5b || _0x287e5b[_0x3d523b(0x117)] !== 'group' || _0x1950fc[_0x3d523b(0xad2)] < 0x2) return null; const _0x3f755b = _0x287e5b[_0x3d523b(0x52b)] && _0x287e5b[_0x3d523b(0x52b)]['length'] > 0x0 ? '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a' + _0x287e5b[_0x3d523b(0x52b)]['map'](_0x35fec6 => _0x185973[_0x3d523b(0x177)][_0x3d523b(0x95a)](_0x22d36a => _0x22d36a['id'] === _0x35fec6))[_0x3d523b(0x249)](Boolean)[_0x3d523b(0x3df)](_0x255cae => _0x3d523b(0x3c8) + _0x255cae[_0x3d523b(0x41b)] + '\x0a' + _0x255cae[_0x3d523b(0x725)])[_0x3d523b(0x7e0)]('') : '', _0x25b79d = _0x3b4a09[_0x3d523b(0x54e)] ? '\x0a\x0a#\x20关于群聊参与者“' + _0x3b4a09[_0x3d523b(0x41b)] + '”的补充信息\x0a' + _0x3b4a09[_0x3d523b(0x54e)] : ''; let _0x4cd37d = ''; const _0x259fcb = new Date(), _0x4c503a = _0x185973[_0x3d523b(0x338)]['at'](-0x1); _0x4cd37d += '\x0a-\x20**当前时间**:\x20' + _0x259fcb[_0x3d523b(0xa5f)]('zh-CN', { 'dateStyle': 'full', 'timeStyle': _0x3d523b(0x2ff) }); if (_0x4c503a) { const _0x5e697a = new Date(_0x4c503a[_0x3d523b(0x55a)]), _0x14f6c4 = Math['floor']((_0x259fcb - _0x5e697a) / (0x3e8 * 0x3c)); if (_0x14f6c4 < 0x5) _0x4cd37d += _0x3d523b(0x675); else { if (_0x14f6c4 < 0x78) _0x4cd37d += _0x3d523b(0x284) + _0x14f6c4 + '分钟前聊过，请注意衔接。'; else { if (_0x3d523b(0x44d) !== _0x3d523b(0x44d)) { const _0x242545 = _0x2e5938(_0x950dad['id']); if (_0x242545 && _0x242545[_0x3d523b(0xad2)] > 0x0) { const _0x3c1a27 = _0x242545[_0x242545[_0x3d523b(0xad2)] - 0x1]; (!_0x3a4e20 || _0x3c1a27['timestamp'] > _0x586f90['timestamp']) && (_0xad506b = _0x3c1a27); } } else { const _0x484500 = Math[_0x3d523b(0x757)](_0x14f6c4 / 0x3c); if (_0x484500 < 0x30) _0x4cd37d += _0x3d523b(0x284) + _0x484500 + _0x3d523b(0x192); else _0x4cd37d += '\x0a-\x20**对话状态**:\x20群里已经有' + Math['floor'](_0x484500 / 0x18) + '天没动静了。你的角色们应该发起新的问候或话题。'; } } } } else _0x4cd37d += _0x3d523b(0x3ad); const _0x599054 = [..._0x185973['conversationHistory']][_0x3d523b(0x392)]()[_0x3d523b(0x95a)](_0x130265 => _0x130265[_0x3d523b(0x25b)] === 'user')?.[_0x3d523b(0x725)] || '', _0x4ae2ea = _0x79ca82(_0x287e5b, _0x599054), _0x31e210 = _0x185973[_0x3d523b(0x338)][_0x3d523b(0x247)](-0x78), _0x45b62c = _0x1f134c[_0x3d523b(0x3df)](_0x3b7b48 => _0x3b7b48['name']), _0xeae3a5 = _0x374fbc(), _0x5b25e6 = _0x1950fc['map'](_0x406895 => { const _0x3f8203 = _0x3d523b, { omniText: _0x20796b } = _0x341641(_0x406895['id'], _0x287e5b['id']), _0x25d0ec = _0x32c8a5(_0x406895['id']), _0x5d9ad0 = _0x406895[_0x3f8203(0x52b)] && _0x406895[_0x3f8203(0x52b)][_0x3f8203(0xad2)] > 0x0 ? _0x3f8203(0x126) + _0x406895[_0x3f8203(0x41b)] + _0x3f8203(0x94d) + _0x406895[_0x3f8203(0x52b)]['map'](_0x564fa8 => _0x185973[_0x3f8203(0x177)][_0x3f8203(0x95a)](_0x23f8bf => _0x23f8bf['id'] === _0x564fa8))['filter'](Boolean)[_0x3f8203(0x3df)](_0xe46612 => _0x3f8203(0x8e6) + _0xe46612[_0x3f8203(0x41b)] + '\x0a' + _0xe46612['content'])[_0x3f8203(0x7e0)]('') : ''; let _0x377662 = _0x3f8203(0x32e) + _0x406895[_0x3f8203(0x41b)] + ')\x20的专属时间锚点\x0a'; const _0x3cf968 = _0x1db616(_0x406895['id']), _0x5f00a2 = new Date(); if (_0x3cf968) { const _0x1a0ad7 = new Date(_0x3cf968[_0x3f8203(0x55a)]); _0x377662 += '-\x20**你与' + _0x3b4a09[_0x3f8203(0x41b)] + _0x3f8203(0x4a3) + _0xa926c9(_0x1a0ad7) + '\x0a'; const _0x152c8e = _0x5f00a2[_0x3f8203(0x50d)]() === _0x1a0ad7[_0x3f8203(0x50d)](), _0x29d330 = new Date(); _0x29d330[_0x3f8203(0x8df)](_0x5f00a2[_0x3f8203(0x8f2)]() - 0x1); const _0x16bd2d = _0x29d330[_0x3f8203(0x50d)]() === _0x1a0ad7['toDateString'](); if (_0x152c8e) 'YqsYz' === _0x3f8203(0x32f) ? _0x377662 += _0x3f8203(0x16f) : (_0x103011[_0x3f8203(0x525)] = '', _0x4f5a38['textContent'] = _0x3f8203(0x61d), _0x8a40f5[_0x3f8203(0x525)] = _0x3f8203(0x961) + (_0x5ab1de[_0x3f8203(0xb29)][_0x3f8203(0xad2)] + 0x1), _0x37c98e[_0x3f8203(0x525)] = '', _0x4e2ea5['value'] = _0x3f8203(0x4d7), _0xc9a9a4['getElementById']('char-edit-css')['value'] = '', _0x38d38f()); else _0x16bd2d ? _0x377662 += '-\x20**状态提示**:\x20你和Ta上次聊天是在昨天，注意你发言的时间感。\x0a' : _0x377662 += _0x3f8203(0x179); } else { if (_0x3f8203(0x423) !== _0x3f8203(0x33c)) _0x377662 += '-\x20**状态提示**:\x20这是你和' + _0x3b4a09['name'] + _0x3f8203(0x118); else { const _0x1ce853 = new _0x340f2b(), _0x14a296 = _0x7b165c[_0x3f8203(0x727)](_0x3f8203(0x783)), _0xc67f11 = _0x4f4db4[_0x3f8203(0x727)](_0x3f8203(0x688)); if (_0x14a296 && _0xc67f11) { const _0x243423 = _0x3e89c4(_0x1ce853[_0x3f8203(0x342)]())[_0x3f8203(0x16e)](0x2, '0'), _0x31ebbd = _0x2f160b(_0x1ce853[_0x3f8203(0xa2d)]())[_0x3f8203(0x16e)](0x2, '0'); _0x14a296['textContent'] = _0x243423 + ':' + _0x31ebbd; const _0x379511 = _0x1ce853[_0x3f8203(0x5ac)]() + 0x1, _0xe6bf84 = _0x1ce853[_0x3f8203(0x8f2)](), _0x4b9e35 = [_0x3f8203(0x5ed), '星期一', _0x3f8203(0x7ee), _0x3f8203(0x8c4), _0x3f8203(0x2eb), _0x3f8203(0x2c8), _0x3f8203(0x8ef)][_0x1ce853[_0x3f8203(0x60f)]()]; _0xc67f11[_0x3f8203(0xb33)] = _0x379511 + '月' + _0xe6bf84 + '日\x20' + _0x4b9e35; } } } return { 'id': _0x406895['id'], 'name': _0x406895['name'], 'persona': _0x406895['persona'] || _0x3f8203(0x8b7), 'memory': _0x20796b + _0x25d0ec + _0x5d9ad0 + _0x377662 }; }), _0x242727 = 0x5, _0x5df7be = 0xc, _0x5bb4c7 = _0x3d523b(0x13f)[_0x3d523b(0x40e)](), _0x21f05a = { 'instruction': ('\x0a-\x20你正在为一个名为“' + (_0x3b4a09[_0x3d523b(0x41b)] || '用户') + '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“' + (_0x3b4a09[_0x3d523b(0x41b)] || '用户') + _0x3d523b(0x468) + _0x242727 + _0x3d523b(0x65c) + _0x5df7be + '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕' + (_0x3b4a09[_0x3d523b(0x41b)] || '用户') + '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a' + _0x4cd37d + '\x20\x0a' + _0x25b79d + '\x0a' + _0x3f755b + _0x3d523b(0x867) + _0xeae3a5 + '\x0a')[_0x3d523b(0x40e)](), 'personas': _0x5b25e6, 'mentioned': _0x4ae2ea ? { 'id': _0x4ae2ea['id'], 'name': _0x4ae2ea[_0x3d523b(0x41b)] } : null, 'stickerList': _0x45b62c }, _0x43089c = { 'type': _0x3d523b(0x557), 'properties': { 'events': { 'type': _0x3d523b(0x424), 'items': { 'type': 'object', 'required': [_0x3d523b(0x660), _0x3d523b(0x2ed)], 'properties': { 'senderId': { 'type': _0x3d523b(0x486) }, 'kind': { 'type': 'string', 'enum': ['text', _0x3d523b(0x2dc), _0x3d523b(0x373)] }, 'content': { 'type': _0x3d523b(0x486) }, 'sticker': { 'type': _0x3d523b(0x486) }, 'songName': { 'type': _0x3d523b(0x486) }, 'artist': { 'type': 'string' } } } } }, 'required': ['events'] }, _0x5de722 = []; _0x5de722[_0x3d523b(0x92b)]({ 'role': 'system', 'content': _0x5bb4c7 }); for (const _0x58bb83 of _0x31e210) { if (_0x3d523b(0x203) === 'uUDvd') _0x53390d[_0x3d523b(0x92b)](_0x523d1d[_0x3d523b(0x247)](_0x164c67, _0x58016d + _0x5330b5)); else { const _0x2c2e6f = _0x58bb83[_0x3d523b(0x25b)] === 'ai' || _0x58bb83[_0x3d523b(0x25b)] === 'assistant' ? _0x3d523b(0x72a) : _0x3d523b(0x34d); let _0xf4e5fc = { 'role': _0x2c2e6f, 'content': _0x58bb83[_0x3d523b(0x725)] }, _0x266583 = !!_0x58bb83[_0x3d523b(0x725)], _0x281e73 = null; if (_0x58bb83['image']) _0x3d523b(0x98b) !== _0x3d523b(0x98b) ? (_0x24d9a7[_0x3d523b(0x883)] = _0xbd8f39[_0x3d523b(0x4e8)], _0x57347c[_0x3d523b(0x462)](), _0x4077cb['querySelector']('.music-post-play-icon,\x20.music-share-play-icon')[_0x3d523b(0xb33)] = '❚❚') : _0x281e73 = _0x58bb83['image']; else { if (_0x58bb83[_0x3d523b(0x4c8)]) { if ('DVnuW' !== _0x3d523b(0x861)) try { if ('eXiwI' !== _0x3d523b(0x513)) { const _0x3654e5 = _0x5da8a8[_0x3d523b(0x727)]('user-profile-list-container'); _0x3654e5[_0x3d523b(0x5b2)] = ''; if (_0x5da60c[_0x3d523b(0x621)][_0x3d523b(0xad2)] === 0x0) { _0x3654e5[_0x3d523b(0x5b2)] = _0x3d523b(0x83d); return; } _0x21a775[_0x3d523b(0x621)][_0x3d523b(0x3ea)](_0x2f5bf0 => { const _0x329776 = _0x3d523b, _0x10e0be = _0x2e8ef2['createElement']('div'); _0x10e0be['className'] = 'world-book-item', _0x10e0be[_0x329776(0xa13)]['id'] = _0x2f5bf0['id']; const _0xdeaf31 = _0x2f5bf0['id'] === _0x54fedb['activeUserProfileId'] ? _0x329776(0x4ba) : ''; _0x10e0be[_0x329776(0x5b2)] = _0x329776(0x4c4) + (_0x2f5bf0[_0x329776(0xa44)] || _0x4f9ce6) + _0x329776(0x6f2) + _0x2f5bf0[_0x329776(0x41b)] + _0xdeaf31 + _0x329776(0x30e) + _0x2f5bf0['persona']['substring'](0x0, 0x64) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x10e0be[_0x329776(0x65f)](_0x329776(0x9c7), () => _0x4047cb(_0x2f5bf0['id'])), _0x3654e5[_0x329776(0x322)](_0x10e0be); }); } else { const _0x3a5194 = await _0x27b140(_0x58bb83[_0x3d523b(0x4c8)]); _0x3a5194 && ('wpHIF' !== _0x3d523b(0x4cf) ? _0xe6bddb += '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a' : _0x281e73 = await _0x4ddc71(_0x3a5194)); } } catch (_0x284bd7) { console[_0x3d523b(0x815)](_0x3d523b(0x8f3), _0x284bd7); } else _0xe0f363(_0x3d523b(0x398) + _0x4cf527[_0x3d523b(0x140)]); } } _0x281e73 && (_0xf4e5fc[_0x3d523b(0x7f8)] = _0x281e73, _0x266583 = !![]); if (_0x266583) { if (_0x3d523b(0x17b) !== 'trpes') _0x5de722[_0x3d523b(0x92b)](_0xf4e5fc); else { const _0x23bc6f = _0x4ee9f7[_0x3d523b(0x727)](_0x272c90); if (_0x23bc6f && _0x8dcc80) _0x23bc6f[_0x3d523b(0x883)] = _0x4c22ce[_0x3d523b(0x8ca)](_0x293584); } } } } _0x5de722[_0x3d523b(0x92b)]({ 'role': _0x3d523b(0x34d), 'content': _0x3d523b(0x357) + JSON['stringify'](_0x43089c) + '\x0a\x0aINPUT:\x0a' + JSON[_0x3d523b(0xa1d)](_0x21f05a) }); try { const _0x447c1d = await _0x9e4405(_0x5de722, { 'json': !![] }); if (!_0x447c1d) return null; let _0x136f54 = _0x447c1d[_0x3d523b(0x40e)](); const _0x29a17d = _0x136f54[_0x3d523b(0x5ce)](/```json([\s\S]*?)```/i); if (_0x29a17d) _0x136f54 = _0x29a17d[0x1][_0x3d523b(0x40e)](); _0x136f54 = _0x47a396(_0x136f54); let _0x32ac1b = null; try { _0x32ac1b = JSON[_0x3d523b(0x189)](_0x136f54); } catch (_0x45b669) { _0x3d523b(0x8c0) === _0x3d523b(0x8c0) ? (console[_0x3d523b(0x815)](_0x3d523b(0x22c), _0x45b669), console['error'](_0x3d523b(0xa2e), _0x136f54)) : _0x5b7274[_0x3d523b(0x525)] = _0x143997[_0x3d523b(0x3df)](_0x29147e => _0x29147e[_0x3d523b(0x41b)] + '--' + _0x29147e[_0x3d523b(0x4e8)])['join']('\x0a'); } if (!_0x32ac1b || !Array['isArray'](_0x32ac1b[_0x3d523b(0x375)])) return null; return _0x32ac1b = _0x56d592(_0x32ac1b, _0x1950fc, _0x45b62c), _0x32ac1b[_0x3d523b(0x375)] = _0x32ac1b['events'][_0x3d523b(0x247)](0x0, _0x5df7be), _0x32ac1b['events'][_0x3d523b(0xad2)] ? _0x32ac1b : null; } catch (_0x272c88) { return _0x272c88[_0x3d523b(0x41b)] !== _0x3d523b(0x5db) && console[_0x3d523b(0x815)](_0x3d523b(0x286), _0x272c88), null; } } function _0x352efd() { const _0x500ca1 = _0x59a4d7; if (_0x500ca1(0x5cc) === _0x500ca1(0x5cc)) { const _0x32ac56 = document[_0x500ca1(0x727)](_0x500ca1(0x162)); _0x32ac56[_0x500ca1(0x5b2)] = ''; if (_0x185973[_0x500ca1(0x6e1)][_0x500ca1(0xad2)] === 0x0) { _0x32ac56[_0x500ca1(0x5b2)] = _0x500ca1(0x733); return; } _0x185973[_0x500ca1(0x6e1)]['forEach'](_0x51cbfb => { const _0x654753 = _0x500ca1, _0x305c25 = _0x185973['userProfiles'][_0x654753(0x95a)](_0x4141c1 => _0x4141c1['id'] === _0x51cbfb[_0x654753(0x4eb)]) || { 'name': _0x654753(0xa65) }, _0x50fd74 = document[_0x654753(0x7a2)](_0x654753(0xb08)); _0x50fd74[_0x654753(0x8f1)] = _0x654753(0x448), _0x50fd74[_0x654753(0xa13)]['id'] = _0x51cbfb['id'], _0x50fd74[_0x654753(0x5b2)] = _0x654753(0x90e) + _0x51cbfb[_0x654753(0x41b)] + '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20' + _0x305c25['name'] + '\x20|\x20' + _0x51cbfb['memberCharacterIds'][_0x654753(0xad2)] + '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', _0x50fd74[_0x654753(0x65f)](_0x654753(0x9c7), () => _0x5aee74(_0x51cbfb['id'])), _0x32ac56['appendChild'](_0x50fd74); }); } else _0xba6406[_0x500ca1(0x815)](_0x500ca1(0x229), _0x1ba00a), _0x18b405 = _0x500ca1(0xb14) + _0x30b2fe + _0x500ca1(0x1de); } async function _0x5be7f1(_0x5db94f = null) { const _0x564006 = _0x59a4d7, _0x498a8b = document[_0x564006(0x727)](_0x564006(0x8f7)), _0x412081 = document[_0x564006(0x727)](_0x564006(0x4cc)), _0x33b27c = document['getElementById']('friend-circle-member-selection'), _0x8de18 = document[_0x564006(0x727)](_0x564006(0xadb)), _0x47bf90 = document[_0x564006(0x727)](_0x564006(0x7e1)), _0x449b07 = document[_0x564006(0x727)](_0x564006(0x141)); _0x40e732(_0x564006(0x4cc)), _0x33b27c[_0x564006(0x5b2)] = ''; for (const _0x527b9c of _0x185973['characters']) { const _0x5679d8 = document['createElement'](_0x564006(0xb08)); _0x5679d8[_0x564006(0x8f1)] = _0x564006(0xaf4); const _0x229085 = await _0x27b140(_0x564006(0x6e6) + _0x527b9c['id']), _0x27bfa2 = _0x229085 ? URL[_0x564006(0x8ca)](_0x229085) : _0x527b9c[_0x564006(0xa44)] || _0xcd0fda; _0x5679d8[_0x564006(0x5b2)] = _0x564006(0x651) + _0x527b9c['id'] + _0x564006(0x440) + _0x527b9c['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x27bfa2 + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-' + _0x527b9c['id'] + '\x22\x20class=\x22char-name\x22>' + _0x527b9c[_0x564006(0x41b)] + _0x564006(0xa7c), _0x33b27c[_0x564006(0x322)](_0x5679d8); } if (_0x5db94f) { if (_0x564006(0x9f2) !== 'Mhjgz') { const _0x460d50 = _0x185973[_0x564006(0x6e1)][_0x564006(0x95a)](_0x292629 => _0x292629['id'] === _0x5db94f); if (!_0x460d50) return; _0x8de18['textContent'] = '编辑好友圈', _0x47bf90['value'] = _0x460d50['id'], _0x498a8b[_0x564006(0x525)] = _0x460d50[_0x564006(0x41b)], _0x412081[_0x564006(0x525)] = _0x460d50[_0x564006(0x4eb)], _0x449b07[_0x564006(0xa8f)][_0x564006(0x8f8)] = _0x564006(0x6df), _0x460d50[_0x564006(0xa93)]['forEach'](_0x4575b7 => { const _0x5e97c2 = _0x564006, _0x17ea63 = _0x33b27c['querySelector'](_0x5e97c2(0x84e) + _0x4575b7); if (_0x17ea63) _0x17ea63[_0x5e97c2(0x7b1)] = !![]; }); } else _0xb630b2(), _0x47af05(!![]); } else _0x8de18[_0x564006(0xb33)] = _0x564006(0x66a), _0x47bf90[_0x564006(0x525)] = '', _0x498a8b[_0x564006(0x525)] = _0x564006(0x3f2) + (_0x185973[_0x564006(0x6e1)][_0x564006(0xad2)] + 0x1), _0x412081[_0x564006(0x525)] = _0x185973[_0x564006(0x571)], _0x449b07[_0x564006(0xa8f)][_0x564006(0x8f8)] = _0x564006(0x941); _0x8cf86(_0x564006(0x2bc), _0x564006(0x4e4)); } function _0x3680d3() { const _0x19e7d7 = _0x59a4d7; if (_0x19e7d7(0x2ec) !== _0x19e7d7(0x8f5)) { const _0x28c337 = document[_0x19e7d7(0x727)](_0x19e7d7(0x7e1))[_0x19e7d7(0x525)], _0x4a7402 = document[_0x19e7d7(0x727)](_0x19e7d7(0x8f7))[_0x19e7d7(0x525)]['trim'](), _0xbd4326 = document['getElementById'](_0x19e7d7(0x4cc))['value'], _0x4c9411 = Array[_0x19e7d7(0x81a)](document[_0x19e7d7(0xa1b)]('#friend-circle-member-selection\x20input:checked'))['map'](_0x2dcd6d => _0x2dcd6d[_0x19e7d7(0xa13)]['id']); if (!_0x4a7402) { _0x1de23f(_0x19e7d7(0x695)); return; } if (_0x4c9411[_0x19e7d7(0xad2)] === 0x0) { _0x1de23f('至少要选择一个圈内成员！'); return; } if (_0x28c337) { if (_0x19e7d7(0x432) === 'VQMtF') _0x252a3e[_0x19e7d7(0xa8f)]['backgroundImage'] = ''; else { const _0x1ac797 = _0x185973['friendCircles']['find'](_0x16acfc => _0x16acfc['id'] === _0x28c337); _0x1ac797 && (_0x1ac797[_0x19e7d7(0x41b)] = _0x4a7402, _0x1ac797[_0x19e7d7(0x4eb)] = _0xbd4326, _0x1ac797['memberCharacterIds'] = _0x4c9411); } } else { if (_0x19e7d7(0x329) !== _0x19e7d7(0x43b)) { const _0x50f0fe = { 'id': _0x19e7d7(0xac8) + Date[_0x19e7d7(0xa59)](), 'name': _0x4a7402, 'boundUserProfileId': _0xbd4326, 'memberCharacterIds': _0x4c9411, 'posts': [] }; _0x185973[_0x19e7d7(0x6e1)][_0x19e7d7(0x92b)](_0x50f0fe); } else { const _0x42d702 = _0x19e7d7(0x1a2); _0x1caa14['body'][_0x19e7d7(0x7e8)]('beforeend', _0x42d702); const _0x471edc = _0x34ca23[_0x19e7d7(0x727)](_0x19e7d7(0x2c5)), _0x32661c = _0x575be2['getElementById'](_0x19e7d7(0x7f9)), _0x258b2f = _0x1aad00[_0x19e7d7(0x727)](_0x19e7d7(0x308)), _0x31514d = _0x4331b4[_0x19e7d7(0x727)](_0x19e7d7(0x862)), _0x3cf5f8 = _0x471edc['querySelector'](_0x19e7d7(0x49c)), _0x3cd301 = () => { const _0x100541 = _0x19e7d7; _0x471edc[_0x100541(0x7ef)](), _0x940bd(); }; _0x258b2f[_0x19e7d7(0x88c)] = () => { const _0x4f4d92 = _0x19e7d7; _0xe268ff(_0x32661c[_0x4f4d92(0x525)]), _0x3cd301(); }, _0x31514d['onclick'] = _0x3cd301, _0x3cf5f8[_0x19e7d7(0x88c)] = _0x3cd301; } } _0x35c1de(), _0x1de23f(_0x19e7d7(0x6bd)), _0x352efd(), _0x8cf86(_0x19e7d7(0x4e4), _0x19e7d7(0x2bc)); } else { const _0x3af8cc = _0x4189a3[_0x19e7d7(0x727)](_0x19e7d7(0x907)); _0x3c5bf7[_0x19e7d7(0x1a7)] && _0x82f8c4[_0x19e7d7(0x4b7)] ? _0x3af8cc[_0x19e7d7(0x7de)] = ![] : _0x3af8cc['disabled'] = !![]; } } async function _0x4541d2() { const _0x32eef1 = _0x59a4d7, _0x40dc35 = document[_0x32eef1(0x727)]('editing-friend-circle-id')['value']; if (!_0x40dc35) return; const _0x353176 = await _0xf1c3f7(_0x32eef1(0x9a4)); _0x353176 && (_0x185973['friendCircles'] = _0x185973['friendCircles'][_0x32eef1(0x249)](_0x1b701f => _0x1b701f['id'] !== _0x40dc35), _0x185973[_0x32eef1(0xb0d)] === _0x40dc35 && (_0x32eef1(0x8a9) === _0x32eef1(0x8a9) ? _0x185973[_0x32eef1(0xb0d)] = null : _0x4bdf04(_0x32eef1(0x157) + _0x395f99[_0x32eef1(0x140)])), _0x35c1de(), _0x1de23f(_0x32eef1(0x59a)), _0x352efd(), _0x8cf86(_0x32eef1(0x4e4), _0x32eef1(0x2bc))); } function _0x5aee74(_0x547696) { const _0x4a424d = _0x59a4d7; _0x243ded(); const _0x42aa34 = _0x185973['friendCircles']['find'](_0x40bc7f => _0x40bc7f['id'] === _0x547696); if (!_0x42aa34) return; _0x185973[_0x4a424d(0xb0d)] = _0x547696, _0x35c1de(), document[_0x4a424d(0x727)]('friend-circle-title')[_0x4a424d(0xb33)] = _0x42aa34[_0x4a424d(0x41b)], _0x4d551f(), _0x8cf86(_0x4a424d(0x373), _0x4a424d(0x4e4)), _0x32099a(); } function _0x10bf87() { const _0x569c4c = _0x59a4d7; if (_0x569c4c(0x353) === _0x569c4c(0x353)) { if (!_0x185973[_0x569c4c(0x6e1)] || _0x185973[_0x569c4c(0x6e1)]['length'] === 0x0) { if (_0x569c4c(0x93e) !== _0x569c4c(0x9c3)) { console[_0x569c4c(0x815)](_0x569c4c(0x97b)); return; } else _0xd1e906 += _0x569c4c(0xa94); } const _0x2de119 = _0x185973[_0x569c4c(0x6e1)][0x0]; if (_0x2de119[_0x569c4c(0xa93)]['length'] < 0x2) { if (_0x569c4c(0xa88) !== 'OMewi') _0x5f1161 = _0x1ccfc[_0x569c4c(0x249)](_0x24d034 => _0x24d034 && typeof _0x24d034 === _0x569c4c(0x557) && typeof _0x24d034[_0x569c4c(0x25b)] === _0x569c4c(0x486) && typeof _0x24d034['content'] !== 'undefined'); else { console[_0x569c4c(0x815)](_0x569c4c(0x34c) + _0x2de119[_0x569c4c(0x41b)] + '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。'); return; } } const _0xeea464 = { 'id': 'test_post_' + Date[_0x569c4c(0xa59)](), 'authorType': _0x569c4c(0x6a6), 'authorId': _0x2de119['memberCharacterIds'][0x0], 'content': _0x569c4c(0x4df), 'timestamp': Date['now'](), 'likes': [_0x2de119[_0x569c4c(0xa93)][0x1]], 'comments': [{ 'commentId': 'c_' + Date[_0x569c4c(0xa59)](), 'authorId': _0x2de119['memberCharacterIds'][0x1], 'content': '赞同！渲染效果一级棒！' }] }; _0x2de119['posts'][_0x569c4c(0x92b)](_0xeea464), _0x35c1de(), console[_0x569c4c(0x5be)](_0x569c4c(0xae9) + _0x2de119[_0x569c4c(0x41b)] + _0x569c4c(0x434)), _0x1de23f(_0x569c4c(0x9cf)); } else { const _0x4a5230 = _0x501359[_0xfcdcc8]; _0x5b72a(_0x4a5230); } } window[_0x59a4d7(0x469)] = _0x10bf87; function _0x176093(_0x2547f6) { const _0x19f279 = _0x59a4d7; return _0x185973[_0x19f279(0x621)][_0x19f279(0x95a)](_0x2525e1 => _0x2525e1['id'] === _0x2547f6); } function _0x55dd5e(_0x2cb2cf, _0xd2590e = _0x59a4d7(0xad4)) { const _0x2f8307 = _0x59a4d7, _0x314552 = document[_0x2f8307(0x727)]('phone-container'); let _0x44f5c7 = document[_0x2f8307(0x727)](_0x2f8307(0x24a)); if (_0x2cb2cf) !_0x44f5c7 && (_0x44f5c7 = document[_0x2f8307(0x7a2)](_0x2f8307(0xb08)), _0x44f5c7['id'] = 'feed-loader', _0x314552[_0x2f8307(0x322)](_0x44f5c7)), _0x44f5c7['innerHTML'] = _0x2f8307(0x14d) + _0xd2590e + '</span>', _0x44f5c7[_0x2f8307(0xa8f)]['display'] = _0x2f8307(0x26a); else { if (_0x2f8307(0x63b) === 'VyRXF') _0x44f5c7 && (_0x44f5c7['style'][_0x2f8307(0x8f8)] = 'none'); else { if (_0x4975b4[_0x2f8307(0x41b)] !== 'AbortError') { _0x4533c8[_0x2f8307(0x815)](_0x2f8307(0x5c1), _0x3a68a9); const _0x40d968 = { 'role': 'assistant', 'content': '错误:\x20' + _0x1179b5[_0x2f8307(0x140)], 'senderId': _0x2e9d45['id'], 'isOffline': _0x53823d }; _0x5859d2[_0x2f8307(0x338)][_0x2f8307(0x92b)](_0x40d968), _0x521571(); } return ![]; } } } async function _0x2e8820() { const _0x390327 = _0x59a4d7, _0x2204cb = _0x185973[_0x390327(0x6e1)][_0x390327(0x95a)](_0x4927f9 => _0x4927f9['id'] === _0x185973[_0x390327(0xb0d)]); if (!_0x2204cb || _0x185973[_0x390327(0x608)]) return; _0x55dd5e(!![], _0x390327(0x8ec)), _0x185973[_0x390327(0x608)] = !![]; try { if (_0x390327(0x774) !== _0x390327(0x774)) _0x12f684['diaries'][_0x390327(0x81e)](_0x45f36c, 0x1), _0x2ef449(), _0x18ee4d(), _0x17ba4f('【' + _0x3f263f[_0x390327(0x41b)] + _0x390327(0x9ea)); else { let _0x3d4457 = Date[_0x390327(0xa59)](); _0x2204cb['posts'] && _0x2204cb[_0x390327(0x9af)][_0x390327(0xad2)] > 0x0 && (_0x3d4457 = Math[_0x390327(0x3a2)](..._0x2204cb['posts']['map'](_0x25f116 => _0x25f116[_0x390327(0x55a)]))); const _0x4a6ad2 = await _0x1e43ec(_0x2204cb); if (!_0x4a6ad2 || _0x4a6ad2[_0x390327(0xad2)] === 0x0) { _0x1de23f('AI似乎没有想出任何新动态。'); return; } const _0x42e02e = _0x4a6ad2[_0x390327(0x3df)](async (_0x22e08c, _0x5b3783) => { const _0x20424b = _0x390327; _0x55dd5e(!![], _0x20424b(0x171) + (_0x5b3783 + 0x1) + _0x20424b(0x336) + _0x4a6ad2[_0x20424b(0xad2)] + _0x20424b(0x546)); const _0x4f1b42 = _0x3d4457 + (_0x5b3783 + 0x1) * 0x3c * 0x3e8, _0x29e652 = { 'id': _0x20424b(0x708) + _0x22e08c[_0x20424b(0x180)] + '_' + _0x4f1b42, 'authorType': _0x20424b(0x6a6), 'authorId': _0x22e08c[_0x20424b(0x180)], 'content': _0x22e08c[_0x20424b(0xa2c)], 'timestamp': _0x4f1b42, 'likes': _0x22e08c[_0x20424b(0xb2e)] || [], 'comments': (_0x22e08c[_0x20424b(0x892)] || [])['map']((_0xfea35c, _0x236146) => ({ 'commentId': 'c_' + _0x4f1b42 + '_' + _0x236146, 'authorId': _0xfea35c['authorId'], 'content': _0xfea35c[_0x20424b(0x725)] })) }; if (_0x22e08c['postType'] === _0x20424b(0x373) && _0x22e08c['songName'] && _0x22e08c[_0x20424b(0x9aa)]) try { const _0x11e06b = await _0x5c775b(_0x22e08c[_0x20424b(0x508)], _0x22e08c['artist']); _0x29e652[_0x20424b(0x117)] = 'music', _0x29e652[_0x20424b(0x508)] = _0x22e08c[_0x20424b(0x508)], _0x29e652['artist'] = _0x22e08c[_0x20424b(0x9aa)], _0x29e652[_0x20424b(0x3bb)] = _0x11e06b[_0x20424b(0x766)], _0x29e652[_0x20424b(0x86d)] = _0x11e06b[_0x20424b(0x4e8)]; } catch (_0x35282d) { console['error'](_0x20424b(0x75d), _0x35282d), _0x29e652[_0x20424b(0x117)] = _0x20424b(0xa15); } else _0x29e652[_0x20424b(0x117)] = 'text'; return _0x29e652; }), _0x2c0222 = await Promise[_0x390327(0x4cd)](_0x42e02e); _0x2204cb[_0x390327(0x9af)]['push'](..._0x2c0222), _0x35c1de(); } } catch (_0x138576) { console[_0x390327(0x815)](_0x390327(0x122), _0x138576), _0x1de23f(_0x390327(0x735) + _0x138576[_0x390327(0x140)]); } finally { _0x390327(0x4ae) !== _0x390327(0xa62) ? (_0x4d551f(), _0x55dd5e(![]), _0x185973[_0x390327(0x608)] = ![]) : _0x308fcd[_0x390327(0xb33)] = _0x1758db[_0x390327(0x81a)](_0x5abe49)[_0x390327(0x3df)](_0x44c6c8 => _0x44c6c8[_0x390327(0x186)]['textContent'][_0x390327(0x40e)]())['join']('、'); } } async function _0x1e43ec(_0x21517c) { const _0x43c119 = _0x59a4d7, _0x4e4ab0 = _0x21517c[_0x43c119(0xa93)][_0x43c119(0x3df)](_0x42135d => _0xec7e1c(_0x42135d))[_0x43c119(0x249)](Boolean); if (_0x4e4ab0[_0x43c119(0xad2)] === 0x0) return null; const _0x50ad78 = _0x374fbc(), _0x4dbe57 = _0x176093(_0x21517c[_0x43c119(0x4eb)]) || _0x185973[_0x43c119(0x621)][0x0], _0x46917d = _0x4dbe57 ? '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20' + _0x4dbe57[_0x43c119(0x41b)] + _0x43c119(0x57f) + (_0x4dbe57[_0x43c119(0x54e)] || '无') + '\x0a' : '', _0x84053e = _0x4e4ab0['map'](_0x4c516e => { const _0xd90057 = _0x43c119, { omniText: _0x40f9c6 } = _0x341641(_0x4c516e['id'], null), _0x3fd70b = _0x32c8a5(_0x4c516e['id']), _0x527e91 = _0x4c516e['linkedWorldBookIds'] && _0x4c516e[_0xd90057(0x52b)][_0xd90057(0xad2)] > 0x0 ? '\x0a\x0a#\x20' + _0x4c516e[_0xd90057(0x41b)] + _0xd90057(0x94d) + _0x4c516e[_0xd90057(0x52b)][_0xd90057(0x3df)](_0x4fd4ba => _0x185973['worldBooks'][_0xd90057(0x95a)](_0x7c90f5 => _0x7c90f5['id'] === _0x4fd4ba))[_0xd90057(0x249)](Boolean)[_0xd90057(0x3df)](_0x466867 => _0xd90057(0x8e6) + _0x466867[_0xd90057(0x41b)] + '\x0a' + _0x466867[_0xd90057(0x725)])[_0xd90057(0x7e0)]('') : ''; return _0xd90057(0xaa4) + _0x4c516e['name'] + _0xd90057(0x11f) + _0x4c516e['id'] + _0xd90057(0x241) + _0x4c516e[_0xd90057(0x54e)] + _0xd90057(0x658) + _0x40f9c6 + '\x0a' + _0x3fd70b + '\x0a' + _0x527e91; })['join']('\x0a\x0a'), _0x168459 = Math[_0x43c119(0x757)](Math['random']() * 0x3) + 0x2, _0x1f7e29 = _0x43c119(0x15f) + _0x168459 + _0x43c119(0x412) + _0x84053e + '\x0a' + _0x46917d + _0x43c119(0xa27) + _0x50ad78 + '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为' + _0x168459 + _0x43c119(0x7dd) + _0x168459 + _0x43c119(0x182), _0x283ad3 = [{ 'role': _0x43c119(0x63a), 'content': _0x1f7e29 }, { 'role': 'user', 'content': _0x43c119(0x8b1) }]; _0x283ad3[_0x43c119(0x92b)]({ 'role': 'user', 'content': '请根据以上所有规则，生成\x20' + _0x168459 + _0x43c119(0x60b) }); try { const _0x15b1a9 = await _0x9e4405(_0x283ad3, { 'json': !![] }), _0x327b59 = _0x15b1a9['match'](/(\[[\s\S]*\])/); if (!_0x327b59) throw new Error('AI未能返回有效的JSON数组格式。'); const _0x30f36f = _0x327b59[0x1], _0x3dce22 = JSON[_0x43c119(0x189)](_0x30f36f); if (!Array[_0x43c119(0x64b)](_0x3dce22)) throw new Error(_0x43c119(0x837)); return _0x3dce22; } catch (_0x400bde) { return console[_0x43c119(0x815)](_0x43c119(0x570), _0x400bde), console[_0x43c119(0x815)](_0x43c119(0x3f4), _0x400bde[_0x43c119(0x8cf)] || 'AI返回了无法解析的文本'), null; } } async function _0x465dd2() { const _0x1fb362 = _0x59a4d7, _0x42e898 = _0x185973[_0x1fb362(0x6e1)][_0x1fb362(0x95a)](_0x36dff6 => _0x36dff6['id'] === _0x185973[_0x1fb362(0xb0d)]); if (!_0x42e898) return; const _0x2bccde = await _0xf1c3f7(_0x1fb362(0x282) + _0x42e898[_0x1fb362(0x41b)] + _0x1fb362(0x838)); _0x2bccde && (_0x42e898[_0x1fb362(0x9af)] = [], _0x35c1de(), _0x4d551f(), _0x1de23f(_0x1fb362(0x82f))); } async function _0x4d551f() { const _0x2accac = _0x59a4d7; if (_0x2accac(0x32c) !== _0x2accac(0x32c)) { const _0x494b0a = _0x2ed4e3[_0x2accac(0x6ba)][_0x2accac(0x973)]; _0x53c8ed[_0x2accac(0x5be)](_0x2accac(0x9a8) + _0x494b0a[_0x2accac(0x2c2)] + _0x2accac(0x337)), !_0x494b0a[_0x2accac(0x609)]['contains'](_0x1f29a2) && (_0x4b77ed['log'](_0x2accac(0x358) + _0x549c00), _0x494b0a[_0x2accac(0x2a8)](_0x35e1e0, { 'keyPath': 'id' })), !_0x494b0a[_0x2accac(0x609)][_0x2accac(0x40b)](_0x2accac(0x85b)) && (_0x530b11[_0x2accac(0x5be)]('Creating\x20object\x20store:\x20music_library'), _0x494b0a[_0x2accac(0x2a8)](_0x2accac(0x85b), { 'keyPath': 'id' })), !_0x494b0a[_0x2accac(0x609)]['contains'](_0x1cfdd7) && (_0x2d21af[_0x2accac(0x5be)]('Creating\x20object\x20store:\x20' + _0x5837ae), _0x494b0a[_0x2accac(0x2a8)](_0x41f36c, { 'keyPath': 'id' })); } else { const _0x1c23d1 = document[_0x2accac(0x727)](_0x2accac(0x9b3)), _0x412b35 = _0x185973[_0x2accac(0x6e1)][_0x2accac(0x95a)](_0x5cbc7f => _0x5cbc7f['id'] === _0x185973[_0x2accac(0xb0d)]); if (!_0x412b35) { _0x1c23d1[_0x2accac(0x5b2)] = _0x2accac(0xa52); return; } if (!_0x412b35[_0x2accac(0x9af)] || _0x412b35[_0x2accac(0x9af)][_0x2accac(0xad2)] === 0x0) { if ('PHYOd' === _0x2accac(0x2c0)) { const _0x5c524d = _0x1a61f5[_0x2accac(0x7a2)]('li'); _0x5c524d[_0x2accac(0x8f1)] = _0x2accac(0xaf4), _0x5c524d[_0x2accac(0x5b2)] = _0x2accac(0x1bd) + _0x10ae00['id'] + _0x2accac(0x440) + _0x4cb48c['id'] + _0x2accac(0x9f5) + (_0x3f6192['avatar'] || _0x59831d) + _0x2accac(0xa61) + _0x284741['id'] + _0x2accac(0x8cc) + _0x2ef1dd['name'] + '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0xbe9786[_0x2accac(0x322)](_0x5c524d); } else { _0x1c23d1['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>'; return; } } _0x1c23d1[_0x2accac(0x5b2)] = ''; const _0x5403fd = [..._0x412b35[_0x2accac(0x9af)]][_0x2accac(0xab1)]((_0x11a6bf, _0x4688b3) => _0x4688b3['timestamp'] - _0x11a6bf[_0x2accac(0x55a)]); for (const _0x2d783b of _0x5403fd) { if (_0x2accac(0x354) === _0x2accac(0x96c)) _0x24dab0[_0x2accac(0xa8f)]['display'] = _0x2accac(0x941); else { const _0x11cd56 = document[_0x2accac(0x7a2)](_0x2accac(0xb08)); _0x11cd56['className'] = _0x2accac(0x1af); let _0x5ba791 = '未知', _0x49dbc9 = _0xcd0fda; if (_0x2d783b['authorType'] === _0x2accac(0x34d)) { if ('LNUbE' !== _0x2accac(0x2b2)) { _0x361204 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x4267e4 in _0x2dbdbe) { _0x89de03[_0x4267e4][_0x2accac(0x7bb)][_0x2accac(0x7ef)](_0x2accac(0x50c)), _0x198a90[_0x4267e4][_0x2accac(0x525)] = ''; } _0x313034['audio'][_0x2accac(0x99d)](_0x2accac(0x796))[_0x2accac(0xb33)] = _0x2accac(0x7b9), _0x3b9d51['cover'][_0x2accac(0x99d)]('.slot-filename')[_0x2accac(0xb33)] = _0x2accac(0x1ee), _0x162867[_0x2accac(0x4b7)][_0x2accac(0x99d)]('.slot-filename')[_0x2accac(0xb33)] = _0x2accac(0x30d), _0xd65d8a['lyrics'][_0x2accac(0x99d)]('.slot-filename')[_0x2accac(0xb33)] = _0x2accac(0x4ca), _0x25af6a(); } else { const _0x5a175b = _0x176093(_0x2d783b['authorId']); if (_0x5a175b) { if (_0x2accac(0x28b) === _0x2accac(0x7f1)) { if (!_0x24d3f9) return; _0x71d699 = _0x29504e[_0x2accac(0xaba)][0x0][_0x2accac(0xa72)], _0x207668 === _0x2accac(0x86a) && _0x5a7266(), _0x33df3f = ![]; } else _0x5ba791 = _0x5a175b[_0x2accac(0x41b)], _0x49dbc9 = _0x5a175b[_0x2accac(0xa44)]; } } } else { if (_0x2accac(0x58a) !== _0x2accac(0x58a)) try { _0x359f83[_0x5d28fb] = _0x32c661[_0x2accac(0x189)](_0x145c93); } catch (_0x29415a) { } else { const _0x26fa2a = _0xec7e1c(_0x2d783b[_0x2accac(0x180)]); if (_0x26fa2a) { if (_0x2accac(0x506) === _0x2accac(0x997)) { if (_0x5e95ba['key'] === _0x2accac(0x361)) _0x592812(null); _0x24dbdd[_0x2accac(0x8e1)] === _0x2accac(0x6b6) && (_0x335d43[_0x2accac(0x628)](), _0x402ea5()); } else { _0x5ba791 = _0x26fa2a['name']; const _0x1462e7 = await _0x27b140(_0x2accac(0x6e6) + _0x26fa2a['id']); _0x49dbc9 = _0x1462e7 ? URL[_0x2accac(0x8ca)](_0x1462e7) : _0x26fa2a[_0x2accac(0xa44)] || _0xcd0fda; } } } } const _0x25709d = _0x2accac(0x44f) + _0x49dbc9 + _0x2accac(0x340) + _0x5ba791 + _0x2accac(0x79e), _0xab9e67 = _0x2accac(0xaf0) + _0x2d783b['content'] + '</p>'; let _0x32d8f9 = ''; if (_0x2d783b['image'] || _0x2d783b[_0x2accac(0x4c8)]) { if ('zaXey' === _0x2accac(0x5f0)) { const _0x2666c7 = _0x2accac(0x91c) + _0x2d783b['id']; _0x32d8f9 = _0x2accac(0x606) + _0x2666c7 + _0x2accac(0x148), setTimeout(() => { const _0x128574 = _0x2accac; if ('tEfmZ' !== _0x128574(0x6ce)) { const _0x3128c0 = _0x5a05d1[_0x128574(0x6ba)][_0x128574(0x409)][0x0]; if (!_0x3128c0) return; const _0x311944 = _0x5b9fd5[_0x128574(0x8ca)](_0x3128c0); _0x5001b5['src'] = _0x311944, _0x2da628[_0x128574(0xa11)] = () => { const _0x226f11 = _0x128574; _0x55cea6[_0x226f11(0x33a)](_0x311944); }; } else { const _0x29e5ee = document[_0x128574(0x727)](_0x2666c7); if (!_0x29e5ee) return; if (_0x2d783b[_0x128574(0x7f8)]) _0x128574(0x9ce) !== _0x128574(0x9ce) ? _0x6e2567(!![]) : _0x29e5ee[_0x128574(0x883)] = _0x2d783b[_0x128574(0x7f8)]; else _0x2d783b[_0x128574(0x4c8)] && _0x27b140(_0x2d783b[_0x128574(0x4c8)])['then'](_0x4cc894 => { const _0x32cdd7 = _0x128574; if (_0x4cc894) { const _0x154c26 = URL[_0x32cdd7(0x8ca)](_0x4cc894); _0x29e5ee[_0x32cdd7(0x883)] = _0x154c26, _0x29e5ee[_0x32cdd7(0xa11)] = () => URL[_0x32cdd7(0x33a)](_0x154c26); } }); } }, 0x0); } else _0x185a4b(); } let _0x3f8fdf = ''; _0x2d783b['type'] === 'music' && _0x2d783b[_0x2accac(0x508)] && (_0x3f8fdf = _0x2accac(0x845) + _0x2d783b['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x2d783b[_0x2accac(0x3bb)] || _0xcd0fda) + _0x2accac(0xa76) + _0x2d783b['songName'] + _0x2accac(0x19a) + _0x2d783b[_0x2accac(0x9aa)] + _0x2accac(0x23f) + (_0x2d783b['playableUrl'] ? '▶' : '⚠') + _0x2accac(0xb00)); const _0x3f55e6 = '<div\x20class=\x22post-timestamp\x22>' + new Date(_0x2d783b[_0x2accac(0x55a)])['toLocaleString']('zh-CN') + _0x2accac(0x9ca); let _0x3f548a = ''; if (_0x2d783b[_0x2accac(0xb2e)] && _0x2d783b[_0x2accac(0xb2e)][_0x2accac(0xad2)] > 0x0 || _0x2d783b[_0x2accac(0x892)] && _0x2d783b[_0x2accac(0x892)][_0x2accac(0xad2)] > 0x0) { let _0x53c64e = ''; if (_0x2d783b['likes'] && _0x2d783b['likes'][_0x2accac(0xad2)] > 0x0) { if (_0x2accac(0x3b8) !== _0x2accac(0x3b8)) _0x12916b[_0x2accac(0x33a)](_0x19a65e); else { const _0x537c44 = _0x2d783b[_0x2accac(0xb2e)]['map'](_0x484672 => _0xec7e1c(_0x484672)?.[_0x2accac(0x41b)] || '未知')[_0x2accac(0x7e0)]('、'), _0x25d835 = '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>'; _0x53c64e = '<div\x20class=\x22post-likes\x22>' + _0x25d835 + '\x20' + _0x537c44 + '</div>'; } } let _0x504a78 = ''; if (_0x2d783b[_0x2accac(0x892)] && _0x2d783b[_0x2accac(0x892)][_0x2accac(0xad2)] > 0x0) { if (_0x2accac(0x923) !== 'sgNfs') { const _0x5ead1c = _0x2d783b[_0x2accac(0x892)]['map'](_0x3e5b67 => { const _0x15fac4 = _0x2accac, _0xcf536 = _0xec7e1c(_0x3e5b67[_0x15fac4(0x180)])?.[_0x15fac4(0x41b)] || '未知'; return _0x15fac4(0x449) + _0xcf536 + _0x15fac4(0x407) + _0x3e5b67[_0x15fac4(0x725)] + _0x15fac4(0x9ca); })['join'](''); _0x504a78 = _0x2accac(0x7fd) + _0x5ead1c + _0x2accac(0x9ca); } else { _0x40dfeb(_0x2accac(0xa8b)); return; } } _0x3f548a = _0x2accac(0x970) + _0x53c64e + _0x2accac(0x7ad) + _0x504a78 + _0x2accac(0x214); } const _0x2fd6f5 = _0x2accac(0x3ba) + _0xab9e67 + _0x32d8f9 + _0x3f8fdf + _0x2accac(0x9ca); _0x11cd56[_0x2accac(0x5b2)] = _0x25709d + _0x2fd6f5 + _0x3f55e6 + _0x3f548a; if (_0x2d783b[_0x2accac(0x117)] === _0x2accac(0x373) && _0x2d783b[_0x2accac(0x86d)]) { const _0x172b6c = _0x11cd56['querySelector']('.music-post-song-card'); _0x172b6c && _0x172b6c[_0x2accac(0x65f)](_0x2accac(0x9c7), function () { const _0x4d3c6a = _0x2accac, _0x5e8102 = { 'id': _0x2d783b['id'], 'url': _0x2d783b[_0x4d3c6a(0x86d)] }; _0xd798d9(this, _0x5e8102); }); } _0x1c23d1[_0x2accac(0x322)](_0x11cd56); } } } } document[_0x59a4d7(0x727)](_0x59a4d7(0xade))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x465dd2), document['getElementById'](_0x59a4d7(0x545))['addEventListener'](_0x59a4d7(0x9c7), _0x2e8820), document[_0x59a4d7(0x727)](_0x59a4d7(0x5d4))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x8cf86(_0x59a4d7(0x3d4), _0x59a4d7(0x4e4))), document[_0x59a4d7(0x727)](_0x59a4d7(0x201))[_0x59a4d7(0x65f)]('click', async () => await _0x5be7f1()), document['getElementById'](_0x59a4d7(0x652))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x8cf86(_0x59a4d7(0x4e4), _0x59a4d7(0x2bc))), document[_0x59a4d7(0x727)](_0x59a4d7(0x89f))['addEventListener']('click', _0x3680d3), document['getElementById']('delete-friend-circle-button')['addEventListener'](_0x59a4d7(0x9c7), _0x4541d2), document['getElementById'](_0x59a4d7(0x6cb))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x4f17f0 = _0x59a4d7; _0x352efd(), _0x8cf86(_0x4f17f0(0x4e4), 'music'); }), document[_0x59a4d7(0x727)](_0x59a4d7(0x711))['addEventListener'](_0x59a4d7(0x9c7), async () => { const _0x5ae266 = _0x59a4d7; if (_0x185973['activeFriendCircleId']) { if ('QroUK' !== _0x5ae266(0x1f3)) await _0x5be7f1(_0x185973['activeFriendCircleId']); else { const _0x37cc7e = _0x1b5228[_0x5ae266(0x9af)]['filter'](_0x3afcec => _0x3afcec[_0x5ae266(0x117)] === _0x5ae266(0x373) && _0x3afcec[_0x5ae266(0x86d)])[_0x5ae266(0x3df)](_0x491802 => ({ ..._0x491802, 'source': 'feed' })); _0x27b2ff[_0x5ae266(0x92b)](..._0x37cc7e); } } }), document[_0x59a4d7(0x727)](_0x59a4d7(0x990))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), async () => { const _0x4f837c = _0x59a4d7, _0x4f7542 = _0x185973[_0x4f837c(0x6e1)][_0x4f837c(0x95a)](_0xd8c82c => _0xd8c82c['id'] === _0x185973[_0x4f837c(0xb0d)]); if (!_0x4f7542 || _0x185973[_0x4f837c(0x608)]) return; const _0x395b97 = _0x4f7542[_0x4f837c(0x4eb)], _0x479dbc = _0x185973[_0x4f837c(0x621)][_0x4f837c(0x95a)](_0x3bae37 => _0x3bae37['id'] === _0x395b97); if (!_0x479dbc) { if ('FNcye' !== 'aCVkg') { _0x1de23f(_0x4f837c(0x5b6)); return; } else { const _0x31a837 = _0x46ed28 === _0x5bd512 ? '>>\x20' : ''; return '' + _0x31a837 + _0x315d29[_0x4f837c(0xa15)]; } } const _0x534fae = document[_0x4f837c(0x727)](_0x4f837c(0xa83))[_0x4f837c(0x525)][_0x4f837c(0x40e)](), _0x35c0e7 = _0x185973[_0x4f837c(0x577)][_0x4f837c(0x7f8)], _0xcd4c0 = _0x185973[_0x4f837c(0x577)][_0x4f837c(0x373)], _0x56c1f2 = _0x185973[_0x4f837c(0x577)][_0x4f837c(0x4c8)]; if (!_0x534fae && !_0x35c0e7 && !_0xcd4c0) { _0x1de23f(_0x4f837c(0x196)); return; } const _0x21e348 = { 'id': _0x4f837c(0x21b) + Date[_0x4f837c(0xa59)](), 'authorType': _0x4f837c(0x34d), 'authorId': _0x479dbc['id'], 'content': _0x534fae, 'timestamp': Date[_0x4f837c(0xa59)](), 'likes': [], 'comments': [] }; if (_0x56c1f2) _0x21e348[_0x4f837c(0x4c8)] = _0x56c1f2; else _0x35c0e7 && (_0x21e348[_0x4f837c(0x7f8)] = _0x35c0e7); _0xcd4c0 ? (_0x21e348[_0x4f837c(0x117)] = 'music', Object[_0x4f837c(0x989)](_0x21e348, _0xcd4c0)) : _0x21e348['type'] = _0x4f837c(0xa15), _0x4f7542['posts'][_0x4f837c(0x92b)](_0x21e348), _0x35c1de(), _0x4d551f(), document['getElementById'](_0x4f837c(0xa83))[_0x4f837c(0x525)] = '', _0x185973[_0x4f837c(0x577)]['image'] = null, _0x185973[_0x4f837c(0x577)][_0x4f837c(0x373)] = null, _0x185973[_0x4f837c(0x577)]['imageId'] = null, _0x37bfa3(), _0x587dbd(_0x21e348); }), document[_0x59a4d7(0x727)](_0x59a4d7(0x6c7))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x10407a = _0x59a4d7; document[_0x10407a(0x727)](_0x10407a(0xa87))[_0x10407a(0x9c7)](); }), document[_0x59a4d7(0x727)]('user-post-image-input')[_0x59a4d7(0x65f)]('change', async _0x3cf64c => { const _0x169530 = _0x59a4d7, _0x53bf93 = _0x3cf64c['target'][_0x169530(0x409)][0x0]; if (!_0x53bf93) return; try { const _0xe6199d = await _0x3daecd(_0x53bf93, 0x320, 0.8, !![]), _0x3f856d = _0x169530(0x80e) + Date[_0x169530(0xa59)](); await _0x5bc724(_0x3f856d, _0xe6199d), _0x185973[_0x169530(0x577)][_0x169530(0x4c8)] = _0x3f856d, _0x185973[_0x169530(0x577)][_0x169530(0x7f8)] = null, _0x185973['pendingPostAttachments'][_0x169530(0x373)] = null, _0x37bfa3(); } catch (_0x1cfac9) { _0x1de23f(_0x169530(0x7af) + _0x1cfac9[_0x169530(0x140)]); } _0x3cf64c['target']['value'] = ''; }), document['getElementById']('user-post-music-button')['addEventListener'](_0x59a4d7(0x9c7), async () => { const _0x2eecff = _0x59a4d7, _0x2ae42a = await _0x10b4cf(); if (!_0x2ae42a) return; _0x1de23f(_0x2eecff(0x841)); try { const _0x214a7c = await _0x5c775b(_0x2ae42a[_0x2eecff(0x508)], _0x2ae42a[_0x2eecff(0x9aa)]); _0x185973[_0x2eecff(0x577)]['music'] = { 'songName': _0x2ae42a[_0x2eecff(0x508)], 'artist': _0x2ae42a[_0x2eecff(0x9aa)], 'coverUrl': _0x214a7c[_0x2eecff(0x766)], 'playableUrl': _0x214a7c['url'] }, _0x185973[_0x2eecff(0x577)][_0x2eecff(0x7f8)] = null, _0x37bfa3(); } catch (_0x56d74a) { if ('ZEvGt' === 'KueAw') { _0x3e9846(_0x2eecff(0x436)); return; } else _0x1de23f(_0x2eecff(0x9b9) + _0x56d74a[_0x2eecff(0x140)]); } }); function _0x421813() { const _0x173a62 = _0x59a4d7, _0x39e99c = new Date(), _0xf604b6 = document[_0x173a62(0x727)](_0x173a62(0x783)), _0x1c9e46 = document[_0x173a62(0x727)](_0x173a62(0x688)); if (_0xf604b6 && _0x1c9e46) { if (_0x173a62(0xa01) !== 'MYccl') _0x40428e[_0x173a62(0x572)] = _0x4c3405[_0x173a62(0x6ac)][0x0]?.['id'] || null, _0x2fdab3(_0x3a752c[_0x173a62(0x572)]); else { const _0x51efef = String(_0x39e99c[_0x173a62(0x342)]())[_0x173a62(0x16e)](0x2, '0'), _0x1cbf3d = String(_0x39e99c[_0x173a62(0xa2d)]())[_0x173a62(0x16e)](0x2, '0'); _0xf604b6['textContent'] = _0x51efef + ':' + _0x1cbf3d; const _0x20c031 = _0x39e99c[_0x173a62(0x5ac)]() + 0x1, _0x2a903c = _0x39e99c[_0x173a62(0x8f2)](), _0x4bd9a4 = [_0x173a62(0x5ed), _0x173a62(0x60a), _0x173a62(0x7ee), _0x173a62(0x8c4), _0x173a62(0x2eb), _0x173a62(0x2c8), '星期六'][_0x39e99c[_0x173a62(0x60f)]()]; _0x1c9e46[_0x173a62(0xb33)] = _0x20c031 + '月' + _0x2a903c + '日\x20' + _0x4bd9a4; } } } function _0x349ee4(_0x582cb6) { const _0x10eaa3 = _0x59a4d7; if (!_0x582cb6) return ''; const _0x41cf10 = new Date(_0x582cb6), _0x43907d = String(_0x41cf10[_0x10eaa3(0x342)]())[_0x10eaa3(0x16e)](0x2, '0'), _0xdf2b32 = String(_0x41cf10['getMinutes']())['padStart'](0x2, '0'); return _0x43907d + ':' + _0xdf2b32; } function _0x374fbc() { const _0x33e9f7 = _0x59a4d7, _0x17d238 = _0x185973[_0x33e9f7(0x6e1)][_0x33e9f7(0x95a)](_0xf4d722 => _0xf4d722['id'] === _0x185973['activeFriendCircleId']), _0x2dbcea = _0x17d238 ? _0x17d238[_0x33e9f7(0x9af)] : []; if (!_0x2dbcea || _0x2dbcea['length'] === 0x0) return ''; const _0x180af4 = _0x2dbcea[_0x33e9f7(0x247)](0x0, 0x5), _0x5a0024 = _0x180af4[_0x33e9f7(0x3df)](_0x165e14 => { const _0x5b2df4 = _0x33e9f7, _0x1445b8 = _0xec7e1c(_0x165e14[_0x5b2df4(0x180)]) || { 'name': '未知' }; let _0x319588 = _0x5b2df4(0x87f) + _0x1445b8[_0x5b2df4(0x41b)] + _0x5b2df4(0x72c) + (_0x165e14[_0x5b2df4(0xa75)] || _0x165e14['content']) + '”'; return _0x165e14['type'] === 'music' && (_0x5b2df4(0x7a8) === 'llliZ' ? _0x319588 += _0x5b2df4(0x53d) + _0x165e14[_0x5b2df4(0x508)] + _0x5b2df4(0x908) + _0x165e14[_0x5b2df4(0x9aa)] + ')' : (_0x2310ac[_0x5b2df4(0xa8f)]['display'] = _0x5b2df4(0x941), _0x3cc15a[_0x5b2df4(0x88c)] = _0x24ede4[_0x5b2df4(0x88c)] = _0x1c405c[_0x5b2df4(0x88c)] = null, _0xdd83ac[_0x5b2df4(0x149)](_0x5b2df4(0x701), _0x4848af), _0x1441a5(_0x314982))), _0x319588; }); return _0x33e9f7(0x988) + _0x5a0024[_0x33e9f7(0x7e0)]('\x0a'); } function _0x32c8a5(_0x404a8a) { const _0x2e82fd = _0x59a4d7; if (_0x2e82fd(0x806) === _0x2e82fd(0x420)) _0x5b5f54['style'][_0x2e82fd(0x8f8)] = _0x2e82fd(0x941), _0x3cb55d[_0x2e82fd(0xa8f)][_0x2e82fd(0x14a)] = _0x2e82fd(0x9e0); else { const _0x517abc = _0x185973[_0x2e82fd(0x621)][_0x2e82fd(0x95a)](_0x103420 => _0x103420['id'] === _0x185973['activeUserProfileId']) || { 'name': '你' }, _0x23acfc = _0x185973[_0x2e82fd(0x3fe)][_0x2e82fd(0x95a)](_0x1a94b5 => _0x1a94b5[_0x2e82fd(0x24e)] === _0x404a8a); if (!_0x23acfc || !_0x23acfc[_0x2e82fd(0xaeb)] || _0x23acfc[_0x2e82fd(0xaeb)][_0x2e82fd(0xad2)] === 0x0) { if (_0x2e82fd(0x689) === _0x2e82fd(0x689)) return ''; else _0x2b4124[_0x2e82fd(0x815)](_0x2e82fd(0xa1a), _0x258dd3), _0x1f7c2d(_0x2e82fd(0x3c3)); } const _0x9c2714 = _0x23acfc['entries'][_0x2e82fd(0x247)](-0x8), _0x47649e = _0x9c2714[_0x2e82fd(0x3df)](_0x30d58f => { const _0x285280 = _0x2e82fd; if (_0x285280(0x7cb) !== _0x285280(0x7cb)) { const _0x186953 = _0x2a07d2[_0x285280(0x892)][_0x285280(0x3df)](_0x111942 => { const _0x5e75bf = _0x285280, _0x27e119 = _0x290cb1(_0x111942[_0x5e75bf(0x180)])?.['name'] || '未知'; return _0x5e75bf(0x449) + _0x27e119 + '</span>:\x20' + _0x111942[_0x5e75bf(0x725)] + _0x5e75bf(0x9ca); })[_0x285280(0x7e0)](''); _0x112515 = _0x285280(0x7fd) + _0x186953 + _0x285280(0x9ca); } else { const _0x13028f = _0x30d58f[_0x285280(0x234)] === _0x285280(0x34d) ? _0x517abc[_0x285280(0x41b)] : _0xec7e1c(_0x30d58f[_0x285280(0x234)])['name']; return '-\x20[' + new Date(_0x30d58f[_0x285280(0x55a)])[_0x285280(0x3ee)]() + ']\x20' + _0x13028f + '\x20写道:\x20' + _0x30d58f[_0x285280(0x725)]; } })[_0x2e82fd(0x7e0)]('\x0a'); return '\x0a#\x20交换日记摘要\x20(你和\x20' + _0x517abc[_0x2e82fd(0x41b)] + _0x2e82fd(0x9fa) + _0x47649e; } } function _0x4d8807() { const _0x21722d = _0x59a4d7, _0x5639e6 = document[_0x21722d(0x727)](_0x21722d(0xb01)), _0x360b72 = _0x185973[_0x21722d(0x55c)][_0x21722d(0x16d)]; _0x360b72 ? (_0x5639e6[_0x21722d(0xa8f)][_0x21722d(0x11b)] = _0x21722d(0x326) + _0x360b72 + ')', _0x5639e6['style'][_0x21722d(0x62b)] = _0x21722d(0x766), _0x5639e6[_0x21722d(0xa8f)][_0x21722d(0x2af)] = 'center', _0x5639e6[_0x21722d(0xa8f)][_0x21722d(0xa33)] = 'white', _0x5639e6[_0x21722d(0xa1b)]('.widget-info\x20>\x20div')[_0x21722d(0x3ea)](_0x53e2b2 => { const _0x47510a = _0x21722d; _0x53e2b2[_0x47510a(0xa8f)]['textShadow'] = _0x47510a(0x6fa); })) : (_0x5639e6['style'][_0x21722d(0x11b)] = '', _0x5639e6[_0x21722d(0xa8f)]['color'] = '', _0x5639e6['querySelectorAll'](_0x21722d(0x6b2))[_0x21722d(0x3ea)](_0x597de1 => { const _0x29e3ca = _0x21722d; _0x597de1[_0x29e3ca(0xa8f)][_0x29e3ca(0x4bf)] = ''; })); } const _0x16a27d = document['getElementById'](_0x59a4d7(0x72f)), _0x3d0cf4 = document['getElementById'](_0x59a4d7(0x205)); _0x16a27d[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x4b45fd = _0x59a4d7; if ('fmkdm' === 'fmkdm') _0x352efd(), _0x8cf86(_0x4b45fd(0x4e4), _0x4b45fd(0x3d4)); else { const _0x509a64 = _0x1634ed[_0x4b45fd(0x5ab)][_0x2012db]; _0x509a64 && _0x509a64[_0x4b45fd(0x1b6)] && _0x2cf9c6[_0x4b45fd(0x524)][_0x4b45fd(0x92b)](..._0x509a64['originalExpenses']), delete _0x127d50[_0x4b45fd(0x5ab)][_0x39693b], _0x241ff2(), _0x51d57b(); } }), _0x3d0cf4[_0x59a4d7(0x65f)]('click', async () => { const _0x1bbb86 = _0x59a4d7; if ('DNgLt' === _0x1bbb86(0x23b)) { if (_0x32ecf0['type'] === _0x1bbb86(0x869)) _0x39ff15['preventDefault'](); _0x46425d(_0xfc26fc); } else await _0x5ecce5(), _0x8cf86(_0x1bbb86(0x4dd), _0x1bbb86(0x3d4)); }), document[_0x59a4d7(0x727)](_0x59a4d7(0x58d))[_0x59a4d7(0x65f)]('click', () => { const _0x19391a = _0x59a4d7; 'woiqz' !== 'JoNKM' ? _0x8cf86('home', _0x19391a(0x4dd)) : _0x2772a4 += _0x19391a(0x4f0); }), document['getElementById'](_0x59a4d7(0x18a))['addEventListener'](_0x59a4d7(0x9c7), () => { const _0x3b1e8c = _0x59a4d7; if (_0x3b1e8c(0x2cc) !== _0x3b1e8c(0x470)) { if (_0x18ed5e) clearInterval(_0x18ed5e); _0x18ed5e = null, _0x185973['activeMeetingScriptQueue'] = [], _0x185973[_0x3b1e8c(0x7b7)] = null, document[_0x3b1e8c(0x727)](_0x3b1e8c(0x46f))[_0x3b1e8c(0xa8f)]['display'] = 'none', _0x185973[_0x3b1e8c(0x572)] = null, _0x35c1de(), _0x8cf86('meetingList', 'meetingView'); } else _0xee492f[_0x3b1e8c(0x7bb)][_0x3b1e8c(0x3a3)](_0x3b1e8c(0xa02)), _0x2ff590[_0x3b1e8c(0x7bb)][_0x3b1e8c(0x40b)](_0x3b1e8c(0xa02)) && (_0x138c69[_0x3b1e8c(0xb0e)] = _0x587bda['scrollHeight']); }); const _0x46c115 = document[_0x59a4d7(0x727)](_0x59a4d7(0x6b5)), _0x2360c3 = document[_0x59a4d7(0x727)](_0x59a4d7(0xa77)); _0x2360c3[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x48b79e = _0x59a4d7; if (_0x48b79e(0x79f) !== _0x48b79e(0x59d)) { const _0x5ecee4 = _0x46c115[_0x48b79e(0x525)][_0x48b79e(0x40e)](); _0x5ecee4 && (_0x5e8376(_0x5ecee4), _0x46c115[_0x48b79e(0x525)] = '', setTimeout(_0x590cd1, 0x64)); } else return _0x5b732a[_0x48b79e(0x815)](_0x48b79e(0x771)), null; }); function _0xd798d9(_0x1b6177, _0x2bbfa0) { const _0x32af8f = _0x59a4d7, _0x57fa9d = document['getElementById'](_0x32af8f(0x7a5)), _0x51db89 = document['querySelectorAll']('.music-post-play-icon,\x20.music-share-play-icon'); _0x51db89['forEach'](_0x857bbd => { const _0x15ba3d = _0x32af8f; _0x857bbd !== _0x1b6177[_0x15ba3d(0x99d)](_0x15ba3d(0x383)) && (_0x857bbd['textContent'] = '▶'); }); if (_0x57fa9d['src'] === _0x2bbfa0[_0x32af8f(0x4e8)] && !_0x57fa9d[_0x32af8f(0x732)]) { if (_0x32af8f(0x9fc) !== _0x32af8f(0x9fc)) { const _0xbe6e3c = 0x32; if (_0x2375bf < _0x3bba12 - _0xbe6e3c) _0x2c198e(_0x313d13 + 0x1); else _0x183866 > _0x1d85e3 + _0xbe6e3c && _0x3f6f38(_0x313d5f - 0x1); } else _0x57fa9d[_0x32af8f(0x239)](), _0x1b6177[_0x32af8f(0x99d)](_0x32af8f(0x383))['textContent'] = '▶'; } else _0x57fa9d['src'] = _0x2bbfa0[_0x32af8f(0x4e8)], _0x57fa9d['play'](), _0x1b6177[_0x32af8f(0x99d)](_0x32af8f(0x383))['textContent'] = '❚❚'; } const _0x74efe9 = document[_0x59a4d7(0x727)](_0x59a4d7(0x650)); async function _0x33d002(_0x20efc7) { const _0x219e6c = _0x59a4d7; if (!_0x20efc7 || !_0x20efc7[_0x219e6c(0xa51)](_0x219e6c(0x810))) return ![]; return new Promise(_0x1925e3 => { const _0x5de16d = _0x219e6c, _0x4224b5 = document['createElement']('audio'); _0x4224b5[_0x5de16d(0x883)] = _0x20efc7; const _0x3b7f08 = setTimeout(() => { _0x5c8c5c(), _0x1925e3(![]); }, 0xbb8), _0x5c8c5c = () => { const _0xd7ef5e = _0x5de16d; clearTimeout(_0x3b7f08), _0x4224b5[_0xd7ef5e(0x149)](_0xd7ef5e(0x425), _0x29fac2), _0x4224b5[_0xd7ef5e(0x149)](_0xd7ef5e(0x815), _0x2c4a65), _0x4224b5[_0xd7ef5e(0x883)] = '', _0x4224b5[_0xd7ef5e(0x7ef)](); }, _0x29fac2 = () => { const _0x4f2086 = _0x5de16d; if (_0x4f2086(0x9e6) === _0x4f2086(0x676)) { if (_0x55028f) _0x563fcc['textContent'] = '▶'; } else _0x5c8c5c(), _0x1925e3(!![]); }, _0x2c4a65 = () => { const _0x131aa0 = _0x5de16d; _0x131aa0(0x581) === _0x131aa0(0x581) ? (_0x5c8c5c(), _0x1925e3(![])) : _0x1a97b1 = _0x1c62b6(_0x549e73); }; _0x4224b5['addEventListener'](_0x5de16d(0x425), _0x29fac2), _0x4224b5[_0x5de16d(0x65f)](_0x5de16d(0x815), _0x2c4a65); }); } async function _0x5c775b(_0x30b52c, _0x101960) { const _0x409895 = _0x59a4d7; if (_0x409895(0x78c) !== _0x409895(0x78c)) _0x46f371 = _0x12f87a[_0x409895(0x189)](_0x5478f3); else { const _0x5623c7 = [_0x409895(0x7b3), _0x409895(0x3b2)]; for (const _0x237903 of _0x5623c7) { try { if (_0x409895(0x3f8) === _0x409895(0x3f8)) { const _0x516c1b = _0x409895(0x1a8) + _0x237903 + '?word=' + encodeURIComponent(_0x30b52c) + '-' + encodeURIComponent(_0x101960), _0x3b0636 = await fetch(_0x516c1b), _0x44d01b = await _0x3b0636['json'](); if (_0x44d01b['code'] !== 0xc8 || !_0x44d01b[_0x409895(0x737)] || _0x44d01b['data'][_0x409895(0xad2)] === 0x0) continue; const _0x365bd5 = _0x44d01b[_0x409895(0x737)][_0x409895(0x247)](0x0, 0x5); for (const _0x5f34b4 of _0x365bd5) { if (_0x409895(0x429) !== _0x409895(0x429)) _0x3cf3c4[_0x409895(0xb33)] = '❚❚'; else { const _0x550d50 = _0x409895(0x1a8) + _0x237903 + _0x409895(0x4f1) + _0x5f34b4['id'], _0x4e8a87 = await fetch(_0x550d50), _0x4bd936 = await _0x4e8a87[_0x409895(0x4ac)](), _0x1da08a = _0x4bd936[_0x409895(0x737)]?.[_0x409895(0x4e8)]; if (await _0x33d002(_0x1da08a)) return { 'url': _0x1da08a, 'cover': _0x5f34b4[_0x409895(0x766)], 'source': _0x237903 }; } } } else _0x4509ed[_0x3c4d7c] = _0x4a60c2[_0x409895(0x189)](_0x461025); } catch (_0x28d8e8) { console[_0x409895(0x815)]('Error\x20fetching\x20from\x20' + _0x237903 + ':', _0x28d8e8); } } return { 'url': null, 'cover': null, 'source': null }; } } function _0x23332e(_0x35120c) { const _0xe0dda2 = _0x59a4d7; try { if (_0xe0dda2(0x4ff) === _0xe0dda2(0x4ff)) { const _0x4ac70f = JSON[_0xe0dda2(0x189)](localStorage['getItem']('badgeState') || '{}'), _0x2ca949 = { ..._0x4ac70f, ..._0x35120c }; localStorage[_0xe0dda2(0x295)](_0xe0dda2(0x399), JSON[_0xe0dda2(0xa1d)](_0x2ca949)); } else { _0x2d7067(_0xe0dda2(0x839)); return; } } catch (_0xb54eeb) { console['error'](_0xe0dda2(0x22e), _0xb54eeb); } } async function _0x3776a7() { const _0x3424ea = _0x59a4d7, _0x31d91c = document['getElementById'](_0x3424ea(0xabb)), _0x21eb8f = document[_0x3424ea(0x727)](_0x3424ea(0x528)); try { let _0x5b6c5a = await _0x27b140(_0x3424ea(0x96a)); if (!_0x5b6c5a) { if (_0x3424ea(0x311) !== _0x3424ea(0x311)) _0x2169de['click'](); else { const _0xba79cf = JSON['parse'](localStorage[_0x3424ea(0x8ee)](_0x3424ea(0x399)) || '{}'); if (_0xba79cf[_0x3424ea(0x7f8)]) { if (_0x3424ea(0x686) !== _0x3424ea(0x686)) { const _0x1d7067 = _0x4dd645[_0x3424ea(0x7a2)](_0x3424ea(0xb08)); _0x1d7067[_0x3424ea(0x8f1)] = 'html-module-container', _0x1d7067['innerHTML'] = _0x23a7c5, _0x57640d === _0x3424ea(0x34d) ? (_0x1b2034['appendChild'](_0x1d7067), _0x1574d1[_0x3424ea(0x322)](_0x502a99)) : (_0x3f44fa[_0x3424ea(0x322)](_0x514f19), _0x18ce49['appendChild'](_0x1d7067)); } else _0x5b6c5a = await _0x3a1fc9(_0xba79cf[_0x3424ea(0x7f8)]), await _0x5bc724(_0x3424ea(0x96a), _0x5b6c5a); } } } if (_0x5b6c5a) _0x21eb8f['src'] = URL[_0x3424ea(0x8ca)](_0x5b6c5a), _0x21eb8f[_0x3424ea(0xa8f)][_0x3424ea(0x8f8)] = 'block', _0x31d91c['style'][_0x3424ea(0x14a)] = 'none'; else { if (_0x3424ea(0x7c8) === _0x3424ea(0x4c6)) { const _0x5f0683 = _0x382f66['querySelector'](_0x3424ea(0x87a)); if (_0x5f0683) _0x5f0683['remove'](); } else _0x21eb8f[_0x3424ea(0xa8f)][_0x3424ea(0x8f8)] = _0x3424ea(0x941), _0x31d91c['style']['border'] = '2px\x20dashed\x20var(--border-color)'; } _0x31d91c[_0x3424ea(0xa8f)][_0x3424ea(0x8f8)] = _0x3424ea(0x6df); } catch (_0x487cf9) { _0x3424ea(0x3aa) !== _0x3424ea(0x3aa) ? _0x5892b0['classList'][_0x3424ea(0x7ef)]('show-chat-view') : console[_0x3424ea(0x815)](_0x3424ea(0x79b), _0x487cf9); } } async function _0x1a9ac3() { const _0x586b68 = _0x59a4d7, _0x2351ec = document[_0x586b68(0x727)](_0x586b68(0x7ba)), _0x4629fe = document['getElementById'](_0x586b68(0xa7f)), _0x460b8a = document[_0x586b68(0x727)](_0x586b68(0xa92)), _0x375362 = document[_0x586b68(0x727)](_0x586b68(0x3c2)); try { if (_0x586b68(0x287) !== _0x586b68(0x287)) _0x495a56[_0x586b68(0x7de)] = !![]; else { let _0x1cf2c1 = await _0x27b140(_0x586b68(0x5fc)); _0x1cf2c1 ? (_0x4629fe[_0x586b68(0x883)] = URL[_0x586b68(0x8ca)](_0x1cf2c1), _0x4629fe[_0x586b68(0xa8f)]['display'] = _0x586b68(0x6df), _0x2351ec[_0x586b68(0xa8f)]['border'] = _0x586b68(0x941), _0x2351ec[_0x586b68(0xa8f)]['background'] = _0x586b68(0x957)) : _0x586b68(0x89e) !== _0x586b68(0x89e) ? (_0x5a9b16['error'](_0x586b68(0x75d), _0x6c6986), _0x39b518[_0x586b68(0x117)] = _0x586b68(0xa15)) : (_0x4629fe[_0x586b68(0xa8f)][_0x586b68(0x8f8)] = 'none', _0x2351ec['style'][_0x586b68(0x14a)] = '2px\x20dashed\x20var(--border-color)', _0x2351ec[_0x586b68(0xa8f)]['background'] = _0x586b68(0x3e1)); _0x2351ec['style'][_0x586b68(0x8f8)] = _0x586b68(0x6df); let _0x17a1a1 = await _0x27b140('widget_card_2'); _0x17a1a1 ? (_0x375362[_0x586b68(0x883)] = URL[_0x586b68(0x8ca)](_0x17a1a1), _0x375362['style'][_0x586b68(0x8f8)] = _0x586b68(0x6df), _0x460b8a[_0x586b68(0xa8f)][_0x586b68(0x14a)] = _0x586b68(0x941), _0x460b8a[_0x586b68(0xa8f)][_0x586b68(0x67d)] = _0x586b68(0x957)) : (_0x375362[_0x586b68(0xa8f)][_0x586b68(0x8f8)] = _0x586b68(0x941), _0x460b8a[_0x586b68(0xa8f)][_0x586b68(0x14a)] = _0x586b68(0x9e0), _0x460b8a[_0x586b68(0xa8f)][_0x586b68(0x67d)] = 'rgba(255,255,255,0.2)'), _0x460b8a[_0x586b68(0xa8f)][_0x586b68(0x8f8)] = _0x586b68(0x6df); } } catch (_0x593a92) { console[_0x586b68(0x815)](_0x586b68(0x5fb), _0x593a92); } } async function _0x1a9ac3() { const _0xe9d52 = _0x59a4d7, _0x785f2e = document['getElementById'](_0xe9d52(0x7ba)), _0x4dacd8 = document[_0xe9d52(0x727)]('card-image'); try { let _0x5793ef = await _0x27b140(_0xe9d52(0x5fc)); if (!_0x5793ef) { const _0x424334 = JSON[_0xe9d52(0x189)](localStorage[_0xe9d52(0x8ee)](_0xe9d52(0xa4a)) || '{}'); _0x424334[_0xe9d52(0x7f8)] && (_0xe9d52(0xa38) === 'IhPND' ? (console['log'](_0xe9d52(0xaaf)), _0x5793ef = await _0x3a1fc9(_0x424334['image']), await _0x5bc724(_0xe9d52(0x5fc), _0x5793ef)) : _0x399921[_0xe9d52(0x92b)](_0x56bb03)); } _0x5793ef ? _0xe9d52(0x25a) !== _0xe9d52(0x25a) ? _0x4b1a46(_0x41e3da['id']) : (_0x4dacd8[_0xe9d52(0x883)] = URL[_0xe9d52(0x8ca)](_0x5793ef), _0x785f2e['style']['display'] = 'block') : _0xe9d52(0x36a) !== 'QuVya' ? _0x785f2e[_0xe9d52(0xa8f)]['display'] = _0xe9d52(0x941) : (_0x1ad3b0[_0xe9d52(0xb33)] = _0x124b16[_0xe9d52(0x72e)] === _0xe9d52(0x1a4) ? '旁白' : _0x138f3e[_0xe9d52(0x72e)], _0x158f9d[_0xe9d52(0xb33)] = _0xce54eb[_0xe9d52(0x6a4)], _0x2fdd1c[_0xe9d52(0x72e)] === _0x52a858[_0xe9d52(0x41b)] ? _0x56d6d9(_0x1e82d8, _0x3e5b95[_0xe9d52(0x2ea)]) : _0x2c99f1(_0x3cb24d, _0xe9d52(0x2ba))); } catch (_0x3482c4) { console['error'](_0xe9d52(0x5fb), _0x3482c4); } try { let _0x9a417b = await _0x27b140(_0xe9d52(0x52a)); const _0x430c2a = document[_0xe9d52(0x727)](_0xe9d52(0x3c2)), _0x57f08d = document[_0xe9d52(0x727)]('card-widget-2'); _0x9a417b ? (_0x430c2a[_0xe9d52(0x883)] = URL[_0xe9d52(0x8ca)](_0x9a417b), _0x57f08d[_0xe9d52(0xa8f)]['display'] = _0xe9d52(0x6df)) : _0x57f08d['style'][_0xe9d52(0x8f8)] = 'none'; } catch (_0x592b83) { console[_0xe9d52(0x815)](_0xe9d52(0x917), _0x592b83); } } _0x45c320[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { _0x3f5711(), _0x8cf86('userProfileList', 'home'); }), document['getElementById'](_0x59a4d7(0x717))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x8cf86('home', _0x59a4d7(0x24f))), document['getElementById'](_0x59a4d7(0x758))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x341b89()), document[_0x59a4d7(0x727)](_0x59a4d7(0xa5e))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0xf16d1d = _0x59a4d7; _0x3f5711(), _0x8cf86('userProfileList', _0xf16d1d(0x382)); }), document['getElementById'](_0x59a4d7(0x291))[_0x59a4d7(0x65f)]('click', _0x3689ad), document[_0x59a4d7(0x727)](_0x59a4d7(0x9f0))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0xab1aa4), document[_0x59a4d7(0x727)]('set-active-user-button')[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0xb84d56 = _0x59a4d7; if (_0xb84d56(0x21d) === 'mVisP') { const _0x1841c3 = _0x6dc44d['getFullYear'](), _0x31ce96 = _0x2d820a(_0x35d01f[_0xb84d56(0x5ac)]() + 0x1)[_0xb84d56(0x16e)](0x2, '0'), _0x48fb57 = _0xb979fd(_0x16f0ce[_0xb84d56(0x8f2)]())[_0xb84d56(0x16e)](0x2, '0'); return _0x1841c3 + '-' + _0x31ce96 + '-' + _0x48fb57; } else { const _0x12e9ec = document[_0xb84d56(0x727)](_0xb84d56(0x2b1))['value']; _0x12e9ec && (_0x185973[_0xb84d56(0x571)] = _0x12e9ec, _0x35c1de(), _0x1de23f(_0xb84d56(0x84c)), _0x3f5711(), document[_0xb84d56(0x727)](_0xb84d56(0x39e))[_0xb84d56(0xa8f)][_0xb84d56(0x8f8)] = 'none'); } }); function _0x16366b(_0x5ba959) { const _0x3219ea = _0x59a4d7; if (_0x3219ea(0x575) === _0x3219ea(0xad8)) return _0x3df826['substring'](_0x311470, _0x58474c + 0x1); else { const _0x25b85f = _0x185973[_0x3219ea(0x6ac)][_0x3219ea(0x95a)](_0x20abcd => _0x20abcd['id'] === _0x5ba959), _0x275177 = _0x25b85f?.[_0x3219ea(0x4eb)]; let _0x107a24 = _0x185973['userProfiles'][_0x3219ea(0x95a)](_0x2f0eca => _0x2f0eca['id'] === _0x275177); return !_0x107a24 && ('DbOSq' === _0x3219ea(0x3cb) ? _0x33a3d5 = _0x28af6f[_0x3219ea(0x621)]['find'](_0x598d50 => _0x598d50['id'] === _0x4426bb['activeUserProfileId']) : _0x107a24 = _0x185973[_0x3219ea(0x621)][_0x3219ea(0x95a)](_0x22d3c3 => _0x22d3c3['id'] === _0x185973[_0x3219ea(0x571)]) || _0x185973['userProfiles'][0x0]), _0x107a24 || { 'name': '用户', 'avatar': _0x5b8a69, 'persona': '' }; } } function _0x40e732(_0x35b1ac) { const _0x2c9e22 = _0x59a4d7, _0x5aca95 = document[_0x2c9e22(0x727)](_0x35b1ac); _0x5aca95[_0x2c9e22(0x5b2)] = '', _0x185973[_0x2c9e22(0x621)][_0x2c9e22(0x3ea)](_0x6b0090 => { const _0x499b75 = _0x2c9e22; if (_0x499b75(0xa34) === _0x499b75(0x9f4)) { const _0x20f42d = _0x1498fe[_0x499b75(0x7a2)](_0x499b75(0xb08)); _0x20f42d['className'] = _0x499b75(0x3ac), _0x20f42d[_0x499b75(0x5b2)] = _0x499b75(0xa69) + _0x5921b4[_0x499b75(0x2b3)] + _0x499b75(0x1d3) + _0x46630d[_0x499b75(0x41b)] + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x20f42d[_0x499b75(0x65f)](_0x499b75(0x9c7), () => _0x29f4a9(_0x588062['id'], _0xd12078[_0x499b75(0x41b)])), _0x231068['area'] === _0x499b75(0xb32) ? _0x30e1f7['appendChild'](_0x20f42d) : _0x4d5827[_0x499b75(0x322)](_0x20f42d); } else { const _0x5cf9b8 = document[_0x499b75(0x7a2)](_0x499b75(0x2be)); _0x5cf9b8[_0x499b75(0x525)] = _0x6b0090['id'], _0x5cf9b8[_0x499b75(0xb33)] = _0x6b0090[_0x499b75(0x41b)], _0x5aca95[_0x499b75(0x322)](_0x5cf9b8); } }); } function _0x38fd87(_0x5433b4) { const _0x48b524 = _0x59a4d7, _0x39905e = _0xec7e1c(_0x5433b4), _0x4fbadc = document['getElementById'](_0x48b524(0x522)); _0x4fbadc[_0x48b524(0xa8f)]['backgroundImage'] = ''; let _0x4bff14 = document[_0x48b524(0x727)](_0x48b524(0x91f) + _0x5433b4); if (_0x4bff14) _0x4bff14[_0x48b524(0x5b2)] = ''; if (!_0x39905e) return; _0x39905e[_0x48b524(0x47b)] && ('jUynY' !== _0x48b524(0x7fe) ? (_0x4fbadc[_0x48b524(0xa8f)][_0x48b524(0x11b)] = _0x48b524(0x142) + _0x39905e['chatWallpaper'] + '\x27)', _0x4fbadc[_0x48b524(0xa8f)][_0x48b524(0x62b)] = 'cover', _0x4fbadc[_0x48b524(0xa8f)]['backgroundPosition'] = _0x48b524(0x7b0)) : (_0x55c316[_0x48b524(0xa8f)][_0x48b524(0x11b)] = 'url(' + _0x1d2f7c + ')', _0x24d61f['style']['backgroundSize'] = _0x48b524(0x766), _0x56eb34['style'][_0x48b524(0x2af)] = _0x48b524(0x7b0), _0x1602b8[_0x48b524(0xa8f)][_0x48b524(0xa33)] = _0x48b524(0x41e), _0x5bcd12[_0x48b524(0xa1b)](_0x48b524(0x6b2))['forEach'](_0x2e6e3a => { const _0x2828bf = _0x48b524; _0x2e6e3a['style'][_0x2828bf(0x4bf)] = _0x2828bf(0x6fa); }))); if (_0x39905e['bubbleCss']) { let _0x3779f0 = document[_0x48b524(0x727)]('style-' + _0x39905e['id']); if (!_0x3779f0) { if (_0x48b524(0x405) !== _0x48b524(0x405)) { const _0x94c660 = _0x4e352e[_0x48b524(0x346)][0x0][_0x48b524(0xa80)] - _0x57522f, _0x29afec = _0xfd5e76[_0x48b524(0x346)][0x0][_0x48b524(0x914)] - _0x4e0ac2; _0x1baa6e[_0x48b524(0x5f8)](_0x94c660) > _0x582dfa[_0x48b524(0x5f8)](_0x29afec) ? _0x2767b4 = 'horizontal' : _0x2a3ed0 = _0x48b524(0xa09); } else _0x3779f0 = document[_0x48b524(0x7a2)]('style'), _0x3779f0['id'] = _0x48b524(0x91f) + _0x39905e['id'], document['head'][_0x48b524(0x322)](_0x3779f0); } const _0x3905d6 = _0x39905e['bubbleCss'], _0x1e4d3e = _0x3905d6['replace'](/\.bubble\.sent/g, _0x48b524(0x5fd) + _0x39905e['id'] + _0x48b524(0x866))[_0x48b524(0xa89)](/\.bubble\.received/g, _0x48b524(0x5fd) + _0x39905e['id'] + _0x48b524(0xaa3)); _0x3779f0[_0x48b524(0x5b2)] = _0x1e4d3e; } } function _0x37bfa3() { const _0x40ffce = _0x59a4d7, _0x29eb71 = document[_0x40ffce(0x727)](_0x40ffce(0x2f2)); _0x29eb71[_0x40ffce(0x5b2)] = ''; const _0x199c77 = _0x352b5b => { const _0x378ac8 = _0x40ffce; if ('AwVpn' === _0x378ac8(0x9cc)) _0x57911d[_0x378ac8(0x8cb)][_0x378ac8(0x7e8)](_0x378ac8(0x942), _0x378ac8(0x56f)); else { _0x185973[_0x378ac8(0x577)][_0x352b5b] = null; if (_0x352b5b === _0x378ac8(0x7f8)) _0x185973[_0x378ac8(0x577)][_0x378ac8(0x4c8)] = null; _0x37bfa3(); } }, _0x53e39c = _0x185973['pendingPostAttachments'][_0x40ffce(0x4c8)], _0x172088 = _0x185973[_0x40ffce(0x577)][_0x40ffce(0x373)]; if (_0x53e39c) { const _0x59736b = document[_0x40ffce(0x7a2)](_0x40ffce(0xb08)); _0x59736b[_0x40ffce(0x8f1)] = 'preview-item', _0x59736b[_0x40ffce(0x5b2)] = _0x40ffce(0xb07), _0x59736b[_0x40ffce(0x99d)](_0x40ffce(0x5ea))[_0x40ffce(0x88c)] = () => _0x199c77('image'), _0x29eb71[_0x40ffce(0x322)](_0x59736b), _0x27b140(_0x53e39c)[_0x40ffce(0x368)](_0x18b520 => { const _0x25878e = _0x40ffce, _0x16d0e5 = document[_0x25878e(0x727)]('pending-post-image-preview'); _0x16d0e5 && _0x18b520 && (_0x16d0e5['src'] = URL[_0x25878e(0x8ca)](_0x18b520)); }); } if (_0x172088) { const _0x3e682b = document[_0x40ffce(0x7a2)](_0x40ffce(0xb08)); _0x3e682b[_0x40ffce(0x8f1)] = _0x40ffce(0x520), _0x3e682b[_0x40ffce(0x5b2)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x172088['coverUrl'] || _0xcd0fda) + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0x172088[_0x40ffce(0x508)] + _0x40ffce(0x563) + _0x172088[_0x40ffce(0x9aa)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x3e682b[_0x40ffce(0x99d)](_0x40ffce(0x5ea))[_0x40ffce(0x88c)] = () => _0x199c77(_0x40ffce(0x373)), _0x29eb71['appendChild'](_0x3e682b); } } async function _0x587dbd(_0x1395ec) { const _0x28b98f = _0x59a4d7, _0x537cdc = _0x185973[_0x28b98f(0x6e1)][_0x28b98f(0x95a)](_0x12db3c => _0x12db3c['id'] === _0x185973[_0x28b98f(0xb0d)]); if (!_0x537cdc) return; _0x55dd5e(!![], _0x28b98f(0x9f8)), _0x185973['isGenerating'] = !![]; try { const _0x221998 = _0x537cdc[_0x28b98f(0xa93)]['map'](_0x586de0 => _0xec7e1c(_0x586de0))[_0x28b98f(0x249)](Boolean), _0x3693a6 = _0x374fbc(), _0x73f4ec = _0x221998[_0x28b98f(0x3df)](_0x190a8f => { const _0x565a4c = _0x28b98f; if ('pNIdz' === _0x565a4c(0x2d8)) _0x4f816a = _0x5bacb5[_0x565a4c(0x41b)], _0x373c73 = _0x5c9308[_0x565a4c(0xa44)]; else { const { omniText: _0x43ec4d } = _0x341641(_0x190a8f['id'], null), _0x219bb8 = _0x32c8a5(_0x190a8f['id']), _0x368ef0 = _0x190a8f['linkedWorldBookIds'] && _0x190a8f[_0x565a4c(0x52b)][_0x565a4c(0xad2)] > 0x0 ? _0x565a4c(0x126) + _0x190a8f[_0x565a4c(0x41b)] + _0x565a4c(0x94d) + _0x190a8f[_0x565a4c(0x52b)][_0x565a4c(0x3df)](_0x14a623 => _0x185973['worldBooks']['find'](_0x10114e => _0x10114e['id'] === _0x14a623))[_0x565a4c(0x249)](Boolean)['map'](_0x175d1a => '\x0a##\x20条目:\x20' + _0x175d1a[_0x565a4c(0x41b)] + '\x0a' + _0x175d1a['content'])[_0x565a4c(0x7e0)]('') : ''; return _0x565a4c(0xaa4) + _0x190a8f[_0x565a4c(0x41b)] + _0x565a4c(0x11f) + _0x190a8f['id'] + _0x565a4c(0x241) + _0x190a8f[_0x565a4c(0x54e)] + _0x565a4c(0x2e9) + _0x43ec4d + '\x0a' + _0x219bb8 + '\x0a' + _0x368ef0; } })[_0x28b98f(0x7e0)]('\x0a\x0a'), _0x5c4678 = _0x176093(_0x1395ec[_0x28b98f(0x180)]) || { 'name': '用户' }, _0x14af26 = _0x5c4678[_0x28b98f(0x54e)] ? '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20' + _0x5c4678[_0x28b98f(0x41b)] + '\x0a-\x20人设:\x20' + _0x5c4678[_0x28b98f(0x54e)] + '\x0a' : ''; let _0x50e067 = null; if (_0x1395ec[_0x28b98f(0x7f8)]) _0x50e067 = _0x1395ec[_0x28b98f(0x7f8)]; else { if (_0x1395ec[_0x28b98f(0x4c8)]) { if ('qfLHT' !== _0x28b98f(0xabf)) _0x20d2fe(_0x28b98f(0x157) + _0x50045f['message']); else try { if (_0x28b98f(0x9a2) !== 'gVbfm') { const _0x1069d2 = _0x5cbcc8['friendCircles'][_0x28b98f(0x95a)](_0x1d94d6 => _0x1d94d6['id'] === _0x1a0ead[_0x28b98f(0xb0d)]), _0x4bf842 = _0x1069d2 ? _0x1069d2[_0x28b98f(0x9af)] : []; if (!_0x4bf842 || _0x4bf842[_0x28b98f(0xad2)] === 0x0) return ''; const _0x57c7c8 = _0x4bf842[_0x28b98f(0x247)](0x0, 0x5), _0x1a75df = _0x57c7c8[_0x28b98f(0x3df)](_0x5cca21 => { const _0x17d291 = _0x28b98f, _0x1a13db = _0x59cce0(_0x5cca21[_0x17d291(0x180)]) || { 'name': '未知' }; let _0x5e6e47 = _0x17d291(0x87f) + _0x1a13db[_0x17d291(0x41b)] + _0x17d291(0x72c) + (_0x5cca21[_0x17d291(0xa75)] || _0x5cca21[_0x17d291(0x725)]) + '”'; return _0x5cca21['type'] === _0x17d291(0x373) && (_0x5e6e47 += _0x17d291(0x53d) + _0x5cca21[_0x17d291(0x508)] + '\x20-\x20' + _0x5cca21[_0x17d291(0x9aa)] + ')'), _0x5e6e47; }); return '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a' + _0x1a75df[_0x28b98f(0x7e0)]('\x0a'); } else { const _0x3d3c74 = await _0x27b140(_0x1395ec[_0x28b98f(0x4c8)]); _0x3d3c74 && (_0x50e067 = await _0x4ddc71(_0x3d3c74)); } } catch (_0x2d491e) { if ('dXzBO' !== _0x28b98f(0x3d8)) { const _0x184d87 = [], _0x3b0920 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x69df54; while ((_0x69df54 = _0x3b0920[_0x28b98f(0x500)](_0x106b93)) !== null) { const _0x1365f7 = _0x69df54[0x1][_0x28b98f(0xa89)](/\\"/g, '\x22')['replace'](/\\n/g, '\x0a')[_0x28b98f(0x40e)](); if (_0x1365f7) _0x184d87['push'](_0x1365f7); } if (_0x184d87[_0x28b98f(0xad2)]) return _0x184d87['flatMap'](_0x42086d)[_0x28b98f(0x247)](0x0, 0x9); } else console[_0x28b98f(0x815)](_0x28b98f(0xa78), _0x2d491e); } } } let _0x4328da = _0x5c4678[_0x28b98f(0x41b)] + _0x28b98f(0x5fe) + _0x1395ec[_0x28b98f(0x725)] + '”'; _0x50e067 && (_0x4328da += _0x28b98f(0x812)); if (_0x1395ec[_0x28b98f(0x117)] === _0x28b98f(0x373)) { if (_0x28b98f(0x66e) === _0x28b98f(0x805)) { _0x5637c9 = _0x108fba; const _0x4127c5 = _0x3ea306(_0x1152f4); if (!_0x4127c5) return; const _0x5aa5e6 = _0x3210b9['getElementById'](_0x28b98f(0x8d8)), _0x5a2960 = _0x3a6c01['getElementById']('snoop-home-clock'); if (_0x5a2960) _0x5a2960['remove'](); const _0x4686a1 = _0x933a7[_0x28b98f(0x727)](_0x28b98f(0x884)); if (_0x4686a1) _0x4686a1[_0x28b98f(0x7ef)](); _0x5aa5e6[_0x28b98f(0x7e8)](_0x28b98f(0x942), _0x28b98f(0x3a5)), _0x5aa5e6[_0x28b98f(0x7e8)](_0x28b98f(0x942), '<div\x20id=\x22snoop-dock\x22></div>'), _0x3835c7[_0x28b98f(0x727)](_0x28b98f(0x1e6))[_0x28b98f(0xb33)] = '', _0x474485(); if (_0x2843b6) _0x2eeb62(_0x4cca53); _0x5928a9(), _0x32884d = _0x14c72f(_0x2ac3fa, 0x2710), _0x4b1a72(_0x28b98f(0x15a), _0x28b98f(0x4a2)); } else _0x4328da += _0x28b98f(0x878) + _0x1395ec['songName'] + _0x28b98f(0x908) + _0x1395ec['artist'] + ']'; } const _0x515296 = _0x28b98f(0x754) + _0x73f4ec + '\x0a\x0a' + _0x14af26 + _0x28b98f(0x27a) + _0x3693a6 + _0x28b98f(0x5b3) + _0x4328da + _0x28b98f(0x456), _0x1f521d = [{ 'role': _0x28b98f(0x63a), 'content': _0x515296 }], _0x2e87d6 = { 'role': _0x28b98f(0x34d), 'content': _0x28b98f(0x113) }; if (_0x50e067) { if (_0x28b98f(0x3e0) === _0x28b98f(0x55d)) { const _0x5b269d = _0x250723[_0x28b98f(0x727)](_0x28b98f(0x639)), _0x1818d9 = _0x312a47['getElementById'](_0x28b98f(0x1e7)), _0x1099d4 = _0x5b269d[_0x28b98f(0x525)][_0x28b98f(0x40e)](), _0x139587 = _0x64a7a5(_0x1818d9[_0x28b98f(0x525)]); if (!_0x1099d4 || _0x42a793(_0x139587) || _0x139587 <= 0x0) { _0x3db51a('哼，不好好写清楚花在哪、花了多少，我怎么记？'); return; } _0x2263be[_0x28b98f(0x524)]['push']({ 'id': _0x28b98f(0x1e3) + _0x3a9d84['now'](), 'description': _0x1099d4, 'amount': _0x139587, 'timestamp': _0x28ec61[_0x28b98f(0xa59)]() }), _0x1049f3(), _0x4c9d6c(), _0x5b269d[_0x28b98f(0x525)] = '', _0x1818d9['value'] = '', _0x5b269d[_0x28b98f(0x9d3)](); } else _0x2e87d6['image'] = _0x50e067; } _0x1f521d[_0x28b98f(0x92b)](_0x2e87d6); const _0x3f6152 = await _0x9e4405(_0x1f521d, { 'json': !![] }), _0xe2f17f = _0x3f6152[_0x28b98f(0x5ce)](/({[\s\S]*})/); if (!_0xe2f17f) throw new Error(_0x28b98f(0x4b4)); const _0x2e5e38 = JSON[_0x28b98f(0x189)](_0xe2f17f[0x1]), _0x257db0 = _0x537cdc['posts'][_0x28b98f(0x95a)](_0x108e3a => _0x108e3a['id'] === _0x1395ec['id']); _0x257db0 && (_0x257db0['likes'] = _0x2e5e38[_0x28b98f(0xb2e)] || [], _0x257db0[_0x28b98f(0x892)] = (_0x2e5e38[_0x28b98f(0x892)] || [])[_0x28b98f(0x3df)]((_0x28ae20, _0x5f0f1a) => ({ ..._0x28ae20, 'commentId': 'c_' + _0x1395ec[_0x28b98f(0x55a)] + '_' + _0x5f0f1a })), _0x35c1de(), _0x4d551f()); } catch (_0x2ddb96) { console[_0x28b98f(0x815)]('生成动态回复失败:', _0x2ddb96), _0x1de23f(_0x28b98f(0x4e3)); } finally { _0x55dd5e(![]), _0x185973[_0x28b98f(0x608)] = ![]; } } function _0x32099a() { const _0x3b8423 = _0x59a4d7; if ('OXtoO' !== _0x3b8423(0x813)) { const _0x22cbad = _0x185973[_0x3b8423(0x6e1)]['find'](_0x485c37 => _0x485c37['id'] === _0x185973[_0x3b8423(0xb0d)]), _0x135a97 = _0x22cbad?.[_0x3b8423(0x4eb)]; let _0x1c32f5 = _0x185973[_0x3b8423(0x621)]['find'](_0x45dcd8 => _0x45dcd8['id'] === _0x135a97); !_0x1c32f5 && (_0x1c32f5 = _0x185973['userProfiles']['find'](_0x4bf552 => _0x4bf552['id'] === _0x185973[_0x3b8423(0x571)])); !_0x1c32f5 && (_0x1c32f5 = _0x185973[_0x3b8423(0x621)][0x0]); if (_0x1c32f5) { if (_0x3b8423(0x51d) !== _0x3b8423(0x798)) document[_0x3b8423(0x727)]('user-post-avatar')[_0x3b8423(0x883)] = _0x1c32f5[_0x3b8423(0xa44)] || _0x5b8a69; else { _0x1c30ce[_0x3b8423(0x5be)]('好友圈档案柜是空的，无需净化。'); return; } } } else !_0x52fbf1[_0x3b8423(0x40b)](_0x243258[_0x3b8423(0x6ba)]) && _0x4b2226['target'] !== _0x3ec019 && _0xa646d5[_0x3b8423(0x6ba)] !== _0x24e1b8 && _0x391561[_0x3b8423(0x7bb)]['remove'](_0x3b8423(0xa02)); } function _0x1cc281(_0x334f25) { const _0x23e884 = _0x59a4d7; let _0x4051df = 0x0, _0x5e4608 = 0x0, _0x26d6da = 0x0; if (_0x334f25['length'] == 0x4) _0x4051df = '0x' + _0x334f25[0x1] + _0x334f25[0x1], _0x5e4608 = '0x' + _0x334f25[0x2] + _0x334f25[0x2], _0x26d6da = '0x' + _0x334f25[0x3] + _0x334f25[0x3]; else { if (_0x334f25['length'] == 0x7) { if (_0x23e884(0x894) === _0x23e884(0x9da)) { const _0x4f8027 = _0x506498[_0x23e884(0x1f2)](_0x139048, _0x23e884(0x3b7)), _0x233d56 = _0x4f8027['objectStore'](_0x4b1143), _0x469e60 = _0x233d56[_0x23e884(0x360)]({ 'id': _0x38568a, 'data': _0x5e0f0b }); _0x469e60['onsuccess'] = () => _0x3939ff(), _0x469e60['onerror'] = () => _0x5c83c2(_0x469e60[_0x23e884(0x815)]); } else _0x4051df = '0x' + _0x334f25[0x1] + _0x334f25[0x2], _0x5e4608 = '0x' + _0x334f25[0x3] + _0x334f25[0x4], _0x26d6da = '0x' + _0x334f25[0x5] + _0x334f25[0x6]; } } _0x4051df /= 0xff, _0x5e4608 /= 0xff, _0x26d6da /= 0xff; let _0x3a1f93 = Math['min'](_0x4051df, _0x5e4608, _0x26d6da), _0x57aae8 = Math[_0x23e884(0x3a2)](_0x4051df, _0x5e4608, _0x26d6da), _0x42038b = _0x57aae8 - _0x3a1f93, _0x33dbae = 0x0, _0x1495be = 0x0, _0x3a4e30 = 0x0; if (_0x42038b == 0x0) _0x33dbae = 0x0; else { if (_0x57aae8 == _0x4051df) _0x33dbae = (_0x5e4608 - _0x26d6da) / _0x42038b % 0x6; else { if (_0x57aae8 == _0x5e4608) _0x33dbae = (_0x26d6da - _0x4051df) / _0x42038b + 0x2; else _0x33dbae = (_0x4051df - _0x5e4608) / _0x42038b + 0x4; } } _0x33dbae = Math[_0x23e884(0x333)](_0x33dbae * 0x3c); if (_0x33dbae < 0x0) _0x33dbae += 0x168; return _0x3a4e30 = (_0x57aae8 + _0x3a1f93) / 0x2, _0x1495be = _0x42038b == 0x0 ? 0x0 : _0x42038b / (0x1 - Math['abs'](0x2 * _0x3a4e30 - 0x1)), _0x1495be = +(_0x1495be * 0x64)['toFixed'](0x1), _0x3a4e30 = +(_0x3a4e30 * 0x64)[_0x23e884(0x4b5)](0x1), { 'h': _0x33dbae, 's': _0x1495be, 'l': _0x3a4e30 }; } function _0x3c3831() { const _0x574924 = _0x59a4d7; if ('KuNXu' === _0x574924(0x6eb)) { if (_0xcc4041) _0x34ce3b(_0xc60ad4); const _0x458c5c = _0x4ea373['target'][_0x574924(0xa37)](_0x574924(0x7f4)); if (!_0x458c5c) return; const _0xf8e753 = _0x458c5c[_0x574924(0xa13)]['id']; if (!_0xf8e753) return; const _0x13dfaa = () => { _0x28c7ca = _0x34df1e(() => { const _0xa85db7 = _0x1b5f; if (_0x5dfb48[_0xa85db7(0x117)] === _0xa85db7(0x869)) _0x277bc1[_0xa85db7(0x628)](); _0x23170f(_0xf8e753); }, 0x320); }, _0x5bae66 = () => { if (_0x1cce1e) _0xd67931(_0x2537bb); }; _0x40fecf['addEventListener'](_0x574924(0x971), _0x5bae66, { 'once': !![] }), _0x458910[_0x574924(0x65f)](_0x574924(0x3b5), _0x5bae66, { 'once': !![] }), _0x450a17['addEventListener'](_0x574924(0x775), _0x5bae66, { 'once': !![] }), _0x2ee62b['addEventListener'](_0x574924(0x833), _0x5bae66, { 'once': !![] }), _0x13dfaa(); } else { const _0x36a70a = (_0x6a50d4, _0x585f19, _0x19d559) => { const _0x59fb7a = _0x574924, _0x2823bf = document[_0x59fb7a(0x727)](_0x6a50d4); if (!_0x2823bf) return; let _0x356a1f = null; try { _0x356a1f = JSON[_0x59fb7a(0x189)](localStorage[_0x59fb7a(0x8ee)](_0x585f19) || '{}'); } catch { _0x356a1f = {}; } _0x2823bf[_0x59fb7a(0xa8f)][_0x59fb7a(0xa18)] = _0x59fb7a(0x442), _0x2823bf[_0x59fb7a(0xa8f)][_0x59fb7a(0x3c0)] = '', _0x2823bf[_0x59fb7a(0xa8f)]['left'] = '', _0x2823bf[_0x59fb7a(0xa8f)][_0x59fb7a(0x74e)] = '', _0x2823bf[_0x59fb7a(0xa8f)][_0x59fb7a(0xadf)] = '', _0x2823bf[_0x59fb7a(0xa8f)][_0x59fb7a(0x8f6)] = ''; if (typeof _0x356a1f['top'] === _0x59fb7a(0x634) && typeof _0x356a1f['left'] === _0x59fb7a(0x634)) { if (_0x59fb7a(0x982) !== _0x59fb7a(0x982)) { if (_0x5034aa[_0x59fb7a(0x25b)] === _0x59fb7a(0x34d)) return _0xdba34[_0x59fb7a(0x382)]?.[_0x59fb7a(0x41b)] || _0x59fb7a(0x325); if (_0x3654b5[_0x59fb7a(0x117)] === _0x59fb7a(0x4b1)) { const _0x4322ff = _0x33c514[_0x59fb7a(0x660)] ? _0x1cef8a(_0x2e6c70[_0x59fb7a(0x660)]) : null; return _0x4322ff?.[_0x59fb7a(0x41b)] || _0x59fb7a(0x226); } else { const _0x413e4c = _0x4be820(_0x4b3b0b[_0x59fb7a(0xa1e)][0x0]); return _0x413e4c?.[_0x59fb7a(0x41b)] || 'AI'; } } else _0x2823bf[_0x59fb7a(0xa8f)][_0x59fb7a(0x3c0)] = _0x356a1f[_0x59fb7a(0x3c0)] + '%', _0x2823bf[_0x59fb7a(0xa8f)][_0x59fb7a(0x510)] = _0x356a1f[_0x59fb7a(0x510)] + '%'; } else for (const _0x75eafb in _0x19d559) { _0x2823bf[_0x59fb7a(0xa8f)][_0x75eafb] = _0x19d559[_0x75eafb]; } }; _0x36a70a(_0x574924(0x871), _0x574924(0x4e1), { 'top': '15%', 'left': _0x574924(0x80d), 'transform': 'translateX(-50%)' }), _0x36a70a(_0x574924(0x13b), _0x574924(0x625), { 'top': _0x574924(0x37f), 'right': '4%' }), _0x36a70a('app-user-profiles', _0x574924(0x315), { 'top': '20%', 'right': '28%' }), _0x36a70a(_0x574924(0x56c), _0x574924(0x2cf), { 'top': '8%', 'right': _0x574924(0x5d9) }), _0x36a70a('app-world-book', _0x574924(0xb25), { 'top': '8%', 'right': '4%' }), _0x36a70a(_0x574924(0x31a), _0x574924(0x57e), { 'top': _0x574924(0x43f), 'left': '5%' }), _0x36a70a(_0x574924(0x5e0), 'appIconPosition_app-diary', { 'top': _0x574924(0xb0c), 'left': '29%' }), _0x36a70a(_0x574924(0x83c), 'appIconPosition_app-snoop', { 'top': _0x574924(0xb0c), 'left': '5%' }), _0x36a70a(_0x574924(0x6ff), _0x574924(0x63d), { 'top': '59%', 'left': _0x574924(0x48b) }), _0x36a70a(_0x574924(0xabb), _0x574924(0x399), { 'top': _0x574924(0x901), 'right': '5%' }), _0x36a70a('card-widget-2', 'cardState2', { 'top': '8%', 'left': '5%' }); const _0x15b31e = document[_0x574924(0x727)](_0x574924(0x7ba)); _0x15b31e && ('suLvM' !== _0x574924(0x92f) ? (_0x15b31e[_0x574924(0xa8f)]['position'] = _0x574924(0x442), _0x15b31e[_0x574924(0xa8f)][_0x574924(0x3c0)] = '34%', _0x15b31e[_0x574924(0xa8f)][_0x574924(0x510)] = '50%', _0x15b31e['style'][_0x574924(0x8f6)] = _0x574924(0x51f), _0x15b31e[_0x574924(0xa8f)][_0x574924(0x8f8)] = _0x574924(0x6df)) : _0x292109['src'] = _0x5ea8b8[_0x574924(0x7f8)]); const _0x4f6b87 = document[_0x574924(0x727)]('music-widget'); if (_0x4f6b87) { if (_0x574924(0x807) !== _0x574924(0x7fb)) _0x4f6b87[_0x574924(0xa8f)][_0x574924(0xa18)] = _0x574924(0x442), _0x4f6b87[_0x574924(0xa8f)][_0x574924(0x3c0)] = _0x574924(0x43c), _0x4f6b87['style'][_0x574924(0x510)] = '50%', _0x4f6b87['style'][_0x574924(0x8f6)] = 'translateX(-50%)', _0x4f6b87[_0x574924(0xa8f)][_0x574924(0x8f8)] = 'inline-block'; else { const _0xeacb71 = _0x502121[_0x574924(0x7a2)](_0x574924(0xb08)); _0xeacb71[_0x574924(0x8f1)] = _0x574924(0x2d6), _0xeacb71['id'] = _0x574924(0x7cf) + _0x22520d, _0x55970d === _0x1154ed[_0x574924(0x943)] && _0xeacb71[_0x574924(0x7bb)][_0x574924(0x99b)](_0x574924(0x445)), _0x56b1ee[_0x574924(0x3ea)](_0x59c85a => { const _0x26b6ef = _0x574924, _0x345788 = _0x59c85a[_0x26b6ef(0x234)] === _0x26b6ef(0x34d) ? _0x26b6ef(0x34d) : 'ai', _0x24b52c = _0x59c85a['author'] === 'user' ? _0x3c330f[_0x26b6ef(0x41b)] : _0x1e8eba(_0x59c85a['author'])[_0x26b6ef(0x41b)], _0x2eed53 = _0x33bfe9[_0x26b6ef(0x7a2)](_0x26b6ef(0xb08)); _0x2eed53[_0x26b6ef(0x8f1)] = _0x26b6ef(0x70d) + _0x345788, _0x2eed53['dataset'][_0x26b6ef(0x55a)] = _0x59c85a['timestamp'], _0x2eed53['style'][_0x26b6ef(0xa14)] = _0x26b6ef(0x941), _0x2eed53[_0x26b6ef(0xa8f)][_0x26b6ef(0x35f)] = '0', _0x2eed53[_0x26b6ef(0x5b2)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>' + _0x24b52c + _0x26b6ef(0xa54) + new _0x496da8(_0x59c85a[_0x26b6ef(0x55a)])[_0x26b6ef(0xa5f)]('zh-CN') + _0x26b6ef(0xa7a) + _0x59c85a[_0x26b6ef(0x725)][_0x26b6ef(0xa89)](/\n/g, _0x26b6ef(0x4a9)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0xeacb71['appendChild'](_0x2eed53); }), _0x257dde[_0x574924(0x322)](_0xeacb71); } } } } function _0x30e634() { const _0x3d3398 = _0x59a4d7; if ('fqXux' !== _0x3d3398(0x77f)) _0x31ea4a(), _0x179d1a(_0x3d3398(0x4e4), _0x3d3398(0x373)); else { const _0x1e274a = document[_0x3d3398(0x727)](_0x3d3398(0x309)); _0x1e274a[_0x3d3398(0x5b2)] = ''; const _0x458303 = document[_0x3d3398(0xa1b)](_0x3d3398(0x38b)); _0x458303[_0x3d3398(0x3ea)](_0x1b562b => { const _0x373991 = _0x3d3398, _0x5c8056 = _0x1b562b['id'], _0xd43845 = _0x1b562b[_0x373991(0x99d)](_0x373991(0x8bb))['textContent'], _0x4334d6 = _0x373991(0x9b7) + _0x5c8056, _0x2442f7 = localStorage['getItem'](_0x4334d6), _0x981e32 = document['createElement'](_0x373991(0xb08)); _0x981e32[_0x373991(0x8f1)] = _0x373991(0xaf4), _0x981e32['style']['padding'] = _0x373991(0xa25), _0x981e32[_0x373991(0x5b2)] = _0x373991(0xa6b) + _0x5c8056 + _0x373991(0x49a) + (_0x2442f7 || 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7') + _0x373991(0x94a) + _0xd43845 + _0x373991(0x7d7) + _0x5c8056 + _0x373991(0x215) + _0x5c8056 + '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27' + _0x4334d6 + _0x373991(0x684), _0x1e274a[_0x373991(0x322)](_0x981e32); const _0x18d2b9 = document[_0x373991(0x727)](_0x373991(0x230) + _0x5c8056); _0x18d2b9[_0x373991(0x65f)](_0x373991(0x86e), async _0xa51325 => { const _0x14df6c = _0x373991, _0x34595e = _0xa51325['target'][_0x14df6c(0x409)][0x0]; if (!_0x34595e) return; try { if ('ujCXm' !== _0x14df6c(0x976)) _0x19fcc0(), _0x26aeb4(![]), _0x30cc33[_0x14df6c(0x608)] = ![]; else { const _0x14506f = await _0x5c64ec(_0x34595e); localStorage[_0x14df6c(0x295)](_0x4334d6, _0x14506f), document['getElementById'](_0x14df6c(0x9c1) + _0x5c8056)['src'] = _0x14506f, _0x33146a(); } } catch (_0x28d8d6) { if ('dFYOr' === _0x14df6c(0x61b)) _0x1de23f(_0x14df6c(0xafd) + _0x28d8d6[_0x14df6c(0x140)]); else { _0x30315b[_0x14df6c(0x6ac)] = _0x5c5ea8[_0x14df6c(0x6ac)]['filter'](_0x1ce3e3 => _0x1ce3e3['id'] !== _0x434310); try { _0x18154d['removeItem'](_0x14df6c(0x6b1) + _0x495fd3); } catch (_0x32831d) { _0x3b451b['error'](_0x14df6c(0x349) + _0x40a4fc, _0x32831d); } _0xa0acca[_0x14df6c(0x572)] === _0x54a177 && (_0x1443ee[_0x14df6c(0x572)] = _0x107d4e[_0x14df6c(0x6ac)][0x0]?.['id'] || null, _0x31f7a3(_0x577f06[_0x14df6c(0x572)])), _0xaa9776(), _0x448d4c(); } } }); }); } } function _0x33146a() { const _0x5287c3 = _0x59a4d7, _0xc4998f = document[_0x5287c3(0xa1b)](_0x5287c3(0x38b)); _0xc4998f[_0x5287c3(0x3ea)](_0x590a90 => { const _0x2bf6dc = _0x5287c3; if (_0x2bf6dc(0x211) === _0x2bf6dc(0x111)) _0x234ed7(![]), _0x359201(_0x2bf6dc(0x518) + _0x37f47b[_0x2bf6dc(0x140)]); else { const _0x827a9a = _0x590a90['id'], _0x70a97f = 'customIcon_' + _0x827a9a, _0x35ee5a = localStorage['getItem'](_0x70a97f), _0x3029f7 = _0x590a90[_0x2bf6dc(0x99d)]('.app-icon-img'); if (_0x35ee5a) _0x3029f7[_0x2bf6dc(0x5b2)] = '<img\x20src=\x22' + _0x35ee5a + _0x2bf6dc(0x12e); else { const _0x194ce4 = document['querySelector'](_0x2bf6dc(0x9ff) + _0x827a9a + _0x2bf6dc(0x6d8) + _0x827a9a + _0x2bf6dc(0x96f))?.[_0x2bf6dc(0x5b2)]; _0x194ce4 && (_0x3029f7[_0x2bf6dc(0x5b2)] = _0x194ce4); } } }); } function _0x243ded() { const _0x2ad3b8 = _0x59a4d7, _0x3ffaba = _0x185973['friendCircles'][_0x2ad3b8(0x95a)](_0xb876c7 => _0xb876c7['id'] === _0x185973['activeFriendCircleId']), _0x1f3368 = _0x3b6e44(); let _0x37d005 = []; if (_0x3ffaba && _0x3ffaba[_0x2ad3b8(0x9af)]) { const _0x36b7a5 = _0x3ffaba['posts'][_0x2ad3b8(0x249)](_0x318843 => _0x318843[_0x2ad3b8(0x117)] === _0x2ad3b8(0x373) && _0x318843[_0x2ad3b8(0x86d)])[_0x2ad3b8(0x3df)](_0x1c7725 => ({ ..._0x1c7725, 'source': 'feed' })); _0x37d005[_0x2ad3b8(0x92b)](..._0x36b7a5); } if (_0x1f3368 && _0x185973[_0x2ad3b8(0x338)]) { if ('QHoJi' !== _0x2ad3b8(0x53b)) _0x54a179(_0x2ad3b8(0x703) + _0x13d94c[_0x2ad3b8(0x7e0)]('\x0a')); else { const _0xe4181d = _0x185973[_0x2ad3b8(0x338)]['filter'](_0x2c7e07 => _0x2c7e07[_0x2ad3b8(0x117)] === _0x2ad3b8(0x373) && _0x2c7e07[_0x2ad3b8(0x86d)])[_0x2ad3b8(0x3df)](_0x1f9f96 => ({ ..._0x1f9f96, 'source': 'chat' })); _0x37d005[_0x2ad3b8(0x92b)](..._0xe4181d); } } const _0x3f7832 = Array[_0x2ad3b8(0x81a)](new Map(_0x37d005[_0x2ad3b8(0x3df)](_0x72eb4f => [_0x72eb4f[_0x2ad3b8(0x86d)], _0x72eb4f]))['values']()); _0x185973[_0x2ad3b8(0x2fd)] = _0x3f7832[_0x2ad3b8(0xab1)]((_0x3dd926, _0x1ddacc) => _0x1ddacc[_0x2ad3b8(0x55a)] - _0x3dd926[_0x2ad3b8(0x55a)]); } function _0x2cf739(_0x28bedc) { const _0x501258 = _0x59a4d7; if (_0x28bedc < 0x0 || _0x28bedc >= _0x2783ab[_0x501258(0xad2)]) return; _0x36ae91 = _0x28bedc; const _0x1172b4 = _0x2783ab[_0x28bedc]; _0x5dac37['src'] = _0x1172b4[_0x501258(0x86d)] || _0x1172b4['url'], _0x5dac37['play'](), _0x555a49(), _0x102f92(); } function _0x555a49() { const _0x2eebec = _0x2783ab[_0x36ae91]; _0x42c153(_0x2eebec); } function _0x102f92() { const _0x101ab8 = _0x59a4d7; try { if (_0x101ab8(0x64e) !== _0x101ab8(0x903)) localStorage['setItem']('musicPlayerState', JSON[_0x101ab8(0xa1d)]({ 'playlist': _0x185973[_0x101ab8(0x2fd)], 'currentIndex': _0x185973[_0x101ab8(0x704)] })); else { const _0x2c97b6 = _0x537f25(); if (_0x2c97b6[_0x101ab8(0x117)] === _0x101ab8(0x4b1)) { const _0x1a0c1f = _0x55fa9e['characters']['find'](_0x5cb173 => _0x2c97b6[_0x101ab8(0xa1e)][_0x101ab8(0x955)](_0x5cb173['id']) && _0x5cb173[_0x101ab8(0x41b)] === _0x3fdccd); if (_0x1a0c1f) _0x226dc1 = _0x1a0c1f['id']; } } } catch (_0x5716b9) { console[_0x101ab8(0x815)]('保存播放器状态失败，真是没用。', _0x5716b9); } } function _0x39a8f5() { const _0x4cc7e8 = _0x59a4d7; if (_0x4cc7e8(0x396) === _0x4cc7e8(0x8ae)) _0x47c0cd = _0x4cc7e8(0x6d0) + _0x5248f9[_0x4cc7e8(0x41b)] + _0x4cc7e8(0x64a); else try { const _0x22f680 = localStorage[_0x4cc7e8(0x8ee)](_0x4cc7e8(0x748)); if (_0x22f680) { if (_0x4cc7e8(0x9a6) === _0x4cc7e8(0x248)) _0x534966 += _0x4cc7e8(0x9ee) + _0x2dfab3['description'] + '”。\x0a'; else { const { playlist: _0x40be37, currentIndex: _0x5c93ed } = JSON[_0x4cc7e8(0x189)](_0x22f680); Array[_0x4cc7e8(0x64b)](_0x40be37) && _0x40be37[_0x4cc7e8(0xad2)] > 0x0 && _0x5c93ed > -0x1 && (_0x185973[_0x4cc7e8(0x2fd)] = _0x40be37, _0x185973[_0x4cc7e8(0x704)] = _0x5c93ed, _0x185973['isPlaying'] = ![], _0x555a49()); } } } catch (_0x22cdc9) { console[_0x4cc7e8(0x815)](_0x4cc7e8(0x4be), _0x22cdc9); } } function _0x2c6459(_0x1068ad) { const _0x35786a = _0x59a4d7; if (_0x35786a(0x266) === _0x35786a(0x266)) { if (window[_0x35786a(0x478)]) clearTimeout(window[_0x35786a(0x478)]); const _0x472398 = _0x1068ad[_0x35786a(0x6ba)][_0x35786a(0xa37)](_0x35786a(0xa98)); if (!_0x472398) return; const _0x519078 = _0x472398[_0x35786a(0xa13)]['timestamp'], _0x56ebad = _0x472398[_0x35786a(0x7bb)]['contains'](_0x35786a(0x34d)) ? _0x35786a(0x34d) : 'ai'; if (!_0x519078) return; const _0x26cab0 = () => { const _0x5a75d0 = _0x35786a; window[_0x5a75d0(0x478)] = setTimeout(() => { const _0x578c90 = _0x5a75d0; if (_0x1068ad[_0x578c90(0x117)] === _0x578c90(0x869)) _0x1068ad[_0x578c90(0x628)](); _0x1e82d1(parseInt(_0x519078, 0xa), _0x56ebad); }, 0x320); }, _0x487685 = () => { const _0x2c434a = _0x35786a; if (_0x2c434a(0x697) === _0x2c434a(0x843)) { const _0x7cfd81 = _0xdbca60[_0x2c434a(0x338)][_0x54f438 - 0x2], _0x5307e8 = _0x5d8852[_0x2c434a(0x338)][_0x264732 - 0x1]; if (_0x7cfd81['isOffline'] === ![] && _0x5307e8[_0x2c434a(0x350)] === !![]) _0x29dbfe = _0x2c434a(0x536) + _0x32a34f['name'] + _0x2c434a(0x18f); else _0x7cfd81[_0x2c434a(0x350)] === !![] && _0x5307e8[_0x2c434a(0x350)] === ![] && (_0x32ad10 = _0x2c434a(0x6d0) + _0x2af87f[_0x2c434a(0x41b)] + '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。'); } else { if (window[_0x2c434a(0x478)]) clearTimeout(window['diaryPressTimer']); } }; document[_0x35786a(0x65f)](_0x35786a(0x971), _0x487685, { 'once': !![] }), document[_0x35786a(0x65f)]('touchend', _0x487685, { 'once': !![] }), document['addEventListener'](_0x35786a(0x775), _0x487685, { 'once': !![] }), _0x26cab0(); } else return { 'type': _0x35786a(0x9bf), 'eventType': _0x1ae9f4[0x1][_0x35786a(0x40e)](), 'eventDate': _0x14aaab[0x2][_0x35786a(0x40e)](), 'eventContent': _0x32882d[0x3]['trim']() }; } function _0x1e82d1(_0x163899, _0x3c61da) { const _0x22257c = _0x59a4d7; if (_0x22257c(0x6b8) !== _0x22257c(0x6b8)) _0x4013e1[_0x22257c(0x7de)] = ![], _0x5d2bb5['textContent'] = '获取'; else { const _0x23f012 = _0x22257c(0x441) + _0x163899; let _0x32168c = document[_0x22257c(0x727)](_0x23f012); if (_0x32168c) return; const _0x40fc40 = _0x22257c(0x9b0) + _0x23f012 + _0x22257c(0x720) + (_0x3c61da === 'ai' ? _0x22257c(0x5c2) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20'; document[_0x22257c(0x5df)]['insertAdjacentHTML'](_0x22257c(0x942), _0x40fc40); const _0x5dafdf = document[_0x22257c(0x727)](_0x23f012), _0x4826e1 = () => _0x5dafdf['remove'](); _0x5dafdf[_0x22257c(0x99d)]('.choice-modal-backdrop')[_0x22257c(0x88c)] = _0x4826e1, _0x5dafdf[_0x22257c(0x99d)]('#diary-action-cancel')[_0x22257c(0x88c)] = _0x4826e1, _0x5dafdf[_0x22257c(0x99d)](_0x22257c(0xa3f))[_0x22257c(0x88c)] = () => { _0xad921b(_0x163899), _0x4826e1(); }, _0x3c61da === 'ai' && (_0x5dafdf[_0x22257c(0x99d)](_0x22257c(0x5f5))[_0x22257c(0x88c)] = () => { const _0x2c70b1 = _0x22257c; 'SUbax' === _0x2c70b1(0x4d3) ? (_0x3f856b(_0x163899), _0x4826e1()) : (_0x5ed638 = _0x19aa7c[_0x2c70b1(0x346)][0x0][_0x2c70b1(0xa80)], _0x5dd0a6 = _0x328d6d[_0x2c70b1(0x346)][0x0][_0x2c70b1(0x914)], _0xda03fd = !![], _0x4cb95a = ''); }); } } async function _0xad921b(_0x14d82f) { const _0x5aa60e = _0x59a4d7; if (_0x5aa60e(0x387) !== _0x5aa60e(0xaaa)) { const _0x16a92d = await _0xf1c3f7(_0x5aa60e(0xab0)); if (!_0x16a92d) return; const _0x15a36e = _0x185973[_0x5aa60e(0x3fe)][_0x5aa60e(0x95a)](_0x2482a2 => _0x2482a2['characterId'] === _0x185973[_0x5aa60e(0x519)]); if (!_0x15a36e) return; const _0x422f0f = _0x15a36e[_0x5aa60e(0xaeb)][_0x5aa60e(0x1ff)](_0x3c9c81 => _0x3c9c81[_0x5aa60e(0x55a)] === _0x14d82f); _0x422f0f > -0x1 && (_0x15a36e[_0x5aa60e(0xaeb)][_0x5aa60e(0x81e)](_0x422f0f, 0x1), _0x35c1de(), _0x55319e(), _0x1de23f(_0x5aa60e(0x165))); } else _0x5d97bd(), _0x2116d5(_0x5aa60e(0x24f), _0x5aa60e(0x382)); } async function _0x3f856b(_0x2764e5) { const _0x1fcc37 = _0x59a4d7; if (_0x1fcc37(0x3ed) !== _0x1fcc37(0x3ed)) _0x27ab90[_0x1fcc37(0x9fd)] = _0x41798a; else { const _0x5ac2a7 = _0x185973[_0x1fcc37(0x3fe)][_0x1fcc37(0x95a)](_0x504599 => _0x504599['characterId'] === _0x185973[_0x1fcc37(0x519)]); if (!_0x5ac2a7) return; const _0x3b5582 = _0x5ac2a7[_0x1fcc37(0xaeb)][_0x1fcc37(0x1ff)](_0x5c4673 => _0x5c4673[_0x1fcc37(0x55a)] === _0x2764e5); _0x3b5582 > -0x1 && (_0x5ac2a7[_0x1fcc37(0xaeb)][_0x1fcc37(0x81e)](_0x3b5582, 0x1), _0x35c1de(), _0x55319e(), await _0x597255()); } } async function _0x2eae08() { const _0x5ead1b = _0x59a4d7; if (_0x5ead1b(0x4f4) !== _0x5ead1b(0x4f4)) _0x5cdab7 = _0x41b6d5[_0x5ead1b(0xa1e)][0x0]; else { const _0x4e10df = document[_0x5ead1b(0x727)]('diary-list-container'); _0x4e10df[_0x5ead1b(0x5b2)] = ''; const _0x2652bb = _0x185973[_0x5ead1b(0xb29)]['filter'](_0x207c60 => _0x185973['chats'][_0x5ead1b(0x899)](_0xf08040 => _0xf08040[_0x5ead1b(0x117)] === _0x5ead1b(0x261) && _0xf08040[_0x5ead1b(0xa1e)][_0x5ead1b(0x955)](_0x207c60['id']))); if (_0x2652bb[_0x5ead1b(0xad2)] === 0x0) { _0x4e10df[_0x5ead1b(0x5b2)] = _0x5ead1b(0x35b); return; } for (const _0x1e973b of _0x2652bb) { if ('AZdRC' !== _0x5ead1b(0x699)) _0x47c68f['name'] = _0x5f5a57[_0x5ead1b(0x40e)](), _0x78cce6(), _0x1e8b00(), _0x229c76(), _0x21494b(_0x5ead1b(0x63c) + _0x52e044[_0x5ead1b(0x41b)] + '\x22。'); else { const _0x826581 = document[_0x5ead1b(0x7a2)]('li'); _0x826581[_0x5ead1b(0x8f1)] = _0x5ead1b(0x541), _0x826581[_0x5ead1b(0xa13)][_0x5ead1b(0x61e)] = _0x1e973b['id']; const _0x2ef11a = await _0x27b140(_0x5ead1b(0x6e6) + _0x1e973b['id']), _0x480203 = _0x2ef11a ? URL[_0x5ead1b(0x8ca)](_0x2ef11a) : _0x1e973b[_0x5ead1b(0xa44)] || _0xcd0fda; _0x826581[_0x5ead1b(0x5b2)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x480203 + _0x5ead1b(0xa7d) + _0x1e973b[_0x5ead1b(0x41b)] + _0x5ead1b(0x88f), _0x826581[_0x5ead1b(0x99d)]('.char-info-wrapper')[_0x5ead1b(0x65f)](_0x5ead1b(0x9c7), () => { _0xa9fec0(_0x1e973b['id']); }), _0x826581['querySelector']('.diary-delete-btn')['addEventListener'](_0x5ead1b(0x9c7), _0x31b1d4 => { const _0x5abce7 = _0x5ead1b; if (_0x5abce7(0xabc) !== _0x5abce7(0x945)) _0x31b1d4[_0x5abce7(0x693)](), _0x31eb4e(_0x1e973b['id']); else { const _0x899756 = _0x4e1e0f[_0x5abce7(0x40e)](); if (!_0x899756 || !_0x39a2d8[_0x5abce7(0x519)]) return; let _0x3480c4 = _0x599b45[_0x5abce7(0x3fe)]['find'](_0x147a00 => _0x147a00[_0x5abce7(0x24e)] === _0x5a866a[_0x5abce7(0x519)]); !_0x3480c4 && (_0x3480c4 = { 'characterId': _0xab4756[_0x5abce7(0x519)], 'entries': [] }, _0x23ddac[_0x5abce7(0x3fe)]['push'](_0x3480c4)); _0x3480c4[_0x5abce7(0xaeb)]['push']({ 'timestamp': _0x6d88c7[_0x5abce7(0xa59)](), 'author': _0x5abce7(0x34d), 'content': _0x899756 }), _0x46cb96(); const _0x4a9298 = _0x3480c4[_0x5abce7(0xaeb)][_0x5abce7(0xad2)]; _0x503c73[_0x5abce7(0x943)] = _0x4d5a2c[_0x5abce7(0x5c9)](_0x4a9298 / 0x2) - 0x1, _0x3eea4f(); } }), _0x4e10df[_0x5ead1b(0x322)](_0x826581); } } } } function _0xa9fec0(_0x3cc4b3) { const _0x28a945 = _0x59a4d7, _0x14fcd3 = _0xec7e1c(_0x3cc4b3); if (!_0x14fcd3) return; _0x185973[_0x28a945(0x519)] = _0x3cc4b3; const _0x1964a1 = _0x185973[_0x28a945(0x3fe)][_0x28a945(0x95a)](_0x45ef3c => _0x45ef3c[_0x28a945(0x24e)] === _0x3cc4b3), _0x26a3a2 = _0x1964a1 ? _0x1964a1[_0x28a945(0xaeb)][_0x28a945(0xad2)] : 0x0, _0x52c704 = 0x2; _0x185973[_0x28a945(0x943)] = Math[_0x28a945(0x3a2)](0x0, Math['ceil'](_0x26a3a2 / _0x52c704) - 0x1), document[_0x28a945(0x727)]('diary-char-name-header')['textContent'] = _0x14fcd3['name'] + _0x28a945(0x4da), _0x55319e(), _0x8cf86(_0x28a945(0x5e5), 'diaryList'); } function _0x55319e() { const _0x59c1a9 = _0x59a4d7; if (_0x59c1a9(0x568) === _0x59c1a9(0x568)) { const _0x1a33c1 = document[_0x59c1a9(0x727)](_0x59c1a9(0x602)), _0x226d4d = document[_0x59c1a9(0x727)]('diary-input-wrapper'); _0x1a33c1[_0x59c1a9(0x5b2)] = '', _0x226d4d['innerHTML'] = ''; const _0xee34bf = _0x339550() || { 'name': '我' }, _0x5c58e4 = _0x185973['diaries']['find'](_0x279657 => _0x279657['characterId'] === _0x185973[_0x59c1a9(0x519)]); if (!_0x5c58e4 || !_0x5c58e4[_0x59c1a9(0xaeb)] || _0x5c58e4['entries'][_0x59c1a9(0xad2)] === 0x0) { _0x1a33c1[_0x59c1a9(0x5b2)] = _0x59c1a9(0xa63), _0x226d4d[_0x59c1a9(0x5b2)] = _0x59c1a9(0x96e), document[_0x59c1a9(0x727)](_0x59c1a9(0x152))[_0x59c1a9(0x65f)]('click', _0x2f946a), document['getElementById']('diary-get-reply-button')[_0x59c1a9(0x65f)](_0x59c1a9(0x9c7), _0x597255); return; } const _0x1c1360 = 0x2, _0x55ebc0 = [..._0x5c58e4['entries']]['sort']((_0x363301, _0xa14d45) => _0x363301['timestamp'] - _0xa14d45[_0x59c1a9(0x55a)]), _0x3ed9a8 = []; for (let _0x2d372e = 0x0; _0x2d372e < _0x55ebc0[_0x59c1a9(0xad2)]; _0x2d372e += _0x1c1360) { if (_0x59c1a9(0x678) !== 'CKbMa') { _0x2bd803(![]), _0x482f48(_0x59c1a9(0x3cd)); return; } else _0x3ed9a8['push'](_0x55ebc0[_0x59c1a9(0x247)](_0x2d372e, _0x2d372e + _0x1c1360)); } const _0x2981ac = _0x3ed9a8[_0x59c1a9(0xad2)]; _0x3ed9a8[_0x59c1a9(0x3ea)]((_0x1fd961, _0x150668) => { const _0x45d30e = _0x59c1a9, _0x5dd218 = document[_0x45d30e(0x7a2)]('div'); _0x5dd218[_0x45d30e(0x8f1)] = _0x45d30e(0x2d6), _0x5dd218['id'] = _0x45d30e(0x7cf) + _0x150668, _0x150668 === _0x185973['diaryCurrentPage'] && _0x5dd218[_0x45d30e(0x7bb)]['add']('is-visible'), _0x1fd961[_0x45d30e(0x3ea)](_0xafb8a1 => { const _0x49da5b = _0x45d30e, _0xff0e15 = _0xafb8a1[_0x49da5b(0x234)] === _0x49da5b(0x34d) ? _0x49da5b(0x34d) : 'ai', _0x559c75 = _0xafb8a1[_0x49da5b(0x234)] === _0x49da5b(0x34d) ? _0xee34bf[_0x49da5b(0x41b)] : _0xec7e1c(_0xafb8a1[_0x49da5b(0x234)])['name'], _0x45606f = document[_0x49da5b(0x7a2)](_0x49da5b(0xb08)); _0x45606f[_0x49da5b(0x8f1)] = _0x49da5b(0x70d) + _0xff0e15, _0x45606f[_0x49da5b(0xa13)][_0x49da5b(0x55a)] = _0xafb8a1[_0x49da5b(0x55a)], _0x45606f[_0x49da5b(0xa8f)]['borderBottom'] = 'none', _0x45606f[_0x49da5b(0xa8f)][_0x49da5b(0x35f)] = '0', _0x45606f[_0x49da5b(0x5b2)] = _0x49da5b(0x844) + _0x559c75 + _0x49da5b(0xa54) + new Date(_0xafb8a1[_0x49da5b(0x55a)])['toLocaleString'](_0x49da5b(0x8f4)) + _0x49da5b(0xa7a) + _0xafb8a1['content'][_0x49da5b(0xa89)](/\n/g, _0x49da5b(0x4a9)) + _0x49da5b(0x739), _0x5dd218['appendChild'](_0x45606f); }), _0x1a33c1[_0x45d30e(0x322)](_0x5dd218); }), _0x226d4d[_0x59c1a9(0x5b2)] = _0x59c1a9(0x48e) + (_0x185973[_0x59c1a9(0x943)] + 0x1) + _0x59c1a9(0x336) + _0x2981ac + _0x59c1a9(0x6c6), document[_0x59c1a9(0x727)](_0x59c1a9(0x55e))['disabled'] = _0x185973[_0x59c1a9(0x943)] === 0x0, document[_0x59c1a9(0x727)](_0x59c1a9(0x34b))[_0x59c1a9(0x7de)] = _0x185973[_0x59c1a9(0x943)] === _0x2981ac - 0x1, document[_0x59c1a9(0x727)]('diary-prev-button')[_0x59c1a9(0x65f)](_0x59c1a9(0x9c7), _0x4a1596), document[_0x59c1a9(0x727)](_0x59c1a9(0x34b))['addEventListener'](_0x59c1a9(0x9c7), _0x2dd251), document[_0x59c1a9(0x727)](_0x59c1a9(0x152))[_0x59c1a9(0x65f)](_0x59c1a9(0x9c7), _0x2f946a), document['getElementById'](_0x59c1a9(0x224))['addEventListener'](_0x59c1a9(0x9c7), _0x597255); } else _0x46dcc6[_0x59c1a9(0x815)](_0x59c1a9(0xa78), _0x4c1663); } function _0x2dd251() { const _0x384741 = _0x59a4d7; if (_0x384741(0x9a1) !== _0x384741(0x8a0)) { if (_0x185973[_0x384741(0x296)]) return; const _0x5add2c = _0x185973[_0x384741(0x943)], _0x437f5c = Math[_0x384741(0x5c9)](_0x185973[_0x384741(0x3fe)][_0x384741(0x95a)](_0x3777b9 => _0x3777b9['characterId'] === _0x185973[_0x384741(0x519)])[_0x384741(0xaeb)][_0x384741(0xad2)] / 0x2); if (_0x5add2c >= _0x437f5c - 0x1) return; _0x185973['isAnimatingDiary'] = !![]; const _0x271e66 = _0x5add2c + 0x1, _0x49a4d5 = document[_0x384741(0x727)](_0x384741(0x7cf) + _0x5add2c), _0xb1f7c5 = document[_0x384741(0x727)](_0x384741(0x7cf) + _0x271e66); _0x49a4d5 && _0xb1f7c5 ? _0x384741(0x99f) === _0x384741(0x99f) ? (_0xb1f7c5['classList']['add'](_0x384741(0x705)), _0x49a4d5[_0x384741(0x7bb)][_0x384741(0x99b)](_0x384741(0x344)), _0xb1f7c5[_0x384741(0x7bb)][_0x384741(0x99b)](_0x384741(0x445)), setTimeout(() => { const _0x15d6f4 = _0x384741; _0x49a4d5[_0x15d6f4(0x7bb)]['remove'](_0x15d6f4(0x445), _0x15d6f4(0x344)), _0xb1f7c5[_0x15d6f4(0x7bb)][_0x15d6f4(0x7ef)](_0x15d6f4(0x705)), _0x185973['diaryCurrentPage'] = _0x271e66, _0x55319e(), _0x185973[_0x15d6f4(0x296)] = ![]; }, 0x2bc)) : (_0x2b029b[_0x384741(0x55c)][_0x384741(0x97a)] = _0x3b4eb9[_0x384741(0x7b1)], _0x21fdaa(), _0x2119ef()) : _0x185973[_0x384741(0x296)] = ![]; } else _0x4e40dd[_0x384741(0x5b2)] = _0x384741(0x9dc); } function _0x4a1596() { const _0xe1c477 = _0x59a4d7; if (_0x185973[_0xe1c477(0x296)]) return; const _0x45d299 = _0x185973['diaryCurrentPage']; if (_0x45d299 <= 0x0) return; _0x185973[_0xe1c477(0x296)] = !![]; const _0x22eeed = _0x45d299 - 0x1, _0x3d44fc = document['getElementById'](_0xe1c477(0x7cf) + _0x45d299), _0x318bde = document[_0xe1c477(0x727)](_0xe1c477(0x7cf) + _0x22eeed); _0x3d44fc && _0x318bde ? (_0x318bde[_0xe1c477(0x7bb)][_0xe1c477(0x99b)]('is-entering-from-left'), _0x3d44fc[_0xe1c477(0x7bb)][_0xe1c477(0x99b)](_0xe1c477(0x428)), _0x318bde['classList'][_0xe1c477(0x99b)](_0xe1c477(0x445)), setTimeout(() => { const _0x23d33c = _0xe1c477; if (_0x23d33c(0x5ae) !== _0x23d33c(0x5ae)) { const _0x289211 = _0x19a97e[_0x23d33c(0x52b)]['map'](_0x2ee055 => _0x587646['worldBooks'][_0x23d33c(0x95a)](_0x431d25 => _0x431d25['id'] === _0x2ee055))[_0x23d33c(0x249)](_0x20f29d)[_0x23d33c(0x3df)](_0x18c866 => _0x23d33c(0xb0a) + _0x18c866['name'] + '\x0a' + _0x18c866[_0x23d33c(0x725)])[_0x23d33c(0x7e0)](''); if (_0x289211) _0x1c7230 = '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a' + _0x289211; } else _0x3d44fc[_0x23d33c(0x7bb)]['remove'](_0x23d33c(0x445), _0x23d33c(0x428)), _0x318bde[_0x23d33c(0x7bb)][_0x23d33c(0x7ef)](_0x23d33c(0x74a)), _0x185973[_0x23d33c(0x943)] = _0x22eeed, _0x55319e(), _0x185973['isAnimatingDiary'] = ![]; }, 0x2bc)) : _0xe1c477(0xa2a) !== _0xe1c477(0xa2a) ? (_0x7565aa(), _0x4b4e86()) : _0x185973[_0xe1c477(0x296)] = ![]; } function _0x2f946a() { return new Promise(_0x19692a => { const _0x2a43be = _0x1b5f; if (_0x2a43be(0xa99) === _0x2a43be(0x931)) { if (_0x4a6b91) _0x1fdfe9(_0x17672e); const _0x1eba15 = _0x540b8d[_0x2a43be(0x6ba)][_0x2a43be(0xa37)](_0x2a43be(0x57c)); if (!_0x1eba15) return; const _0x50ec9f = _0x2dda8e(_0x1eba15[_0x2a43be(0xa13)][_0x2a43be(0xa50)], 0xa); if (_0x4064e6(_0x50ec9f)) return; const _0x28a32f = () => { _0x450a02 = _0x1b82e1(() => { const _0xed7a1a = _0x1b5f; if (_0x17efb8[_0xed7a1a(0x117)] === _0xed7a1a(0x869)) _0x163577[_0xed7a1a(0x628)](); _0xac4be2(_0x50ec9f); }, 0x320); }, _0xe80d30 = () => { if (_0x403406) _0x6edd36(_0x4fb715); }; _0x39490c[_0x2a43be(0x65f)](_0x2a43be(0x971), _0xe80d30, { 'once': !![] }), _0x27fc6d[_0x2a43be(0x65f)](_0x2a43be(0x2ab), _0xe80d30, { 'once': !![] }), _0x5a0873[_0x2a43be(0x65f)](_0x2a43be(0x3b5), _0xe80d30, { 'once': !![] }), _0x23f8b9[_0x2a43be(0x65f)]('touchcancel', _0xe80d30, { 'once': !![] }), _0x28a32f(); } else { const _0xe03934 = _0x2a43be(0x1a2); document[_0x2a43be(0x5df)]['insertAdjacentHTML'](_0x2a43be(0x942), _0xe03934); const _0xb94b0b = document[_0x2a43be(0x727)]('diary-write-modal'), _0x49bc95 = document[_0x2a43be(0x727)]('diary-modal-textarea'), _0x7d9f65 = document[_0x2a43be(0x727)](_0x2a43be(0x308)), _0x12a33e = document[_0x2a43be(0x727)](_0x2a43be(0x862)), _0x2a44a6 = _0xb94b0b[_0x2a43be(0x99d)](_0x2a43be(0x49c)), _0x50c1ff = () => { const _0x34586f = _0x2a43be; if (_0x34586f(0x834) === 'bfSpV') _0xb94b0b[_0x34586f(0x7ef)](), _0x19692a(); else { _0x1ed75f = _0x153bdb(_0x4d4490[_0x34586f(0x1cb)]), _0x1b9b56[_0x34586f(0x5b2)] = ''; if (_0x13c2fc[_0x34586f(0xad2)] === 0x0) { _0xc49f19[_0x34586f(0x5b2)] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } _0x1a7c2e['forEach']((_0x416dbc, _0x2039c0) => { const _0x1c44ce = _0x34586f, _0x50771a = _0x1ea722[_0x1c44ce(0x7a2)]('p'); _0x50771a[_0x1c44ce(0xb33)] = _0x416dbc['text'], _0x50771a['id'] = _0x1c44ce(0x6a7) + _0x2039c0, _0x71cc5a[_0x1c44ce(0x322)](_0x50771a); }); } }; _0x7d9f65[_0x2a43be(0x88c)] = () => { const _0x4db676 = _0x2a43be; if ('XZRTf' === _0x4db676(0x4d5)) _0x206e11(_0x49bc95['value']), _0x50c1ff(); else { const _0x570367 = _0x380f8c[_0x4db676(0x906)](_0x1ba851); _0x21e640 = _0x5cb20d[_0x4db676(0xa1d)](_0x570367), _0x380a3a[_0x4db676(0x5be)](_0x4db676(0x794)); } }, _0x12a33e[_0x2a43be(0x88c)] = _0x50c1ff, _0x2a44a6['onclick'] = _0x50c1ff; } }); } function _0x206e11(_0x1a89f6) { const _0x3211ae = _0x59a4d7, _0x16ddb3 = _0x1a89f6[_0x3211ae(0x40e)](); if (!_0x16ddb3 || !_0x185973['activeDiaryCharacterId']) return; let _0x24b1c0 = _0x185973['diaries'][_0x3211ae(0x95a)](_0x4e52ef => _0x4e52ef[_0x3211ae(0x24e)] === _0x185973[_0x3211ae(0x519)]); !_0x24b1c0 && (_0x24b1c0 = { 'characterId': _0x185973['activeDiaryCharacterId'], 'entries': [] }, _0x185973[_0x3211ae(0x3fe)][_0x3211ae(0x92b)](_0x24b1c0)); _0x24b1c0[_0x3211ae(0xaeb)][_0x3211ae(0x92b)]({ 'timestamp': Date[_0x3211ae(0xa59)](), 'author': 'user', 'content': _0x16ddb3 }), _0x35c1de(); const _0x3000b5 = _0x24b1c0[_0x3211ae(0xaeb)][_0x3211ae(0xad2)]; _0x185973[_0x3211ae(0x943)] = Math[_0x3211ae(0x5c9)](_0x3000b5 / 0x2) - 0x1, _0x55319e(); } async function _0x597255() { const _0x260b6b = _0x59a4d7, _0x55bc27 = _0x185973[_0x260b6b(0x3fe)][_0x260b6b(0x95a)](_0xca9a0 => _0xca9a0['characterId'] === _0x185973[_0x260b6b(0x519)]), _0x1d91fd = _0x185973[_0x260b6b(0x519)], _0xce4645 = _0xec7e1c(_0x1d91fd); if (!_0xce4645 || _0x185973['isGenerating']) return; _0x55dd5e(!![], 'TA正在提笔写日记...'), _0x185973[_0x260b6b(0x608)] = !![]; let _0x7d69dd = []; try { if (_0x260b6b(0x580) !== _0x260b6b(0x5c3)) { const _0x54238a = _0x339550() || { 'name': '你' }, _0x3b8067 = _0x32c8a5(_0x1d91fd), { omniText: _0x45b23a } = _0x341641(_0x1d91fd, _0x185973['activeChatId']); let _0x4d6351 = ''; if (_0xce4645[_0x260b6b(0x52b)] && _0xce4645[_0x260b6b(0x52b)][_0x260b6b(0xad2)] > 0x0) { if ('pZatc' !== 'XQTpz') { const _0xb00777 = _0xce4645[_0x260b6b(0x52b)][_0x260b6b(0x3df)](_0x15d82a => _0x185973[_0x260b6b(0x177)][_0x260b6b(0x95a)](_0x192eac => _0x192eac['id'] === _0x15d82a))['filter'](Boolean)[_0x260b6b(0x3df)](_0x519c2a => _0x260b6b(0xb0a) + _0x519c2a[_0x260b6b(0x41b)] + '\x0a' + _0x519c2a[_0x260b6b(0x725)])[_0x260b6b(0x7e0)](''); if (_0xb00777) _0x4d6351 = '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a' + _0xb00777; } else { const _0x513411 = _0xad5cae[_0x260b6b(0x333)]((_0x221f62 - _0x48d72e) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x297386 += _0x260b6b(0x4ce) + _0x513411 + '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a'; } } const _0x5e1c0d = _0x54238a[_0x260b6b(0x54e)] ? _0x260b6b(0x851) + _0x54238a[_0x260b6b(0x41b)] + _0x260b6b(0x6c3) + _0x54238a[_0x260b6b(0x54e)] : '', _0xd072c0 = _0x374fbc(); let _0x470b04 = _0x260b6b(0x8d2); if (_0x55bc27 && _0x55bc27['entries']) { const _0x596d03 = _0x55bc27[_0x260b6b(0xaeb)][_0x260b6b(0x249)](_0x5072a9 => _0x5072a9[_0x260b6b(0x234)] === _0x260b6b(0x34d))[_0x260b6b(0x659)](); if (_0x596d03) { if (_0x260b6b(0x42b) !== _0x260b6b(0x250)) _0x470b04 = _0x596d03[_0x260b6b(0x725)]; else { const _0x402bcb = _0x30448f(_0x7b4bbb[_0x260b6b(0xa1e)][0x0]); _0x124d3b['textContent'] = _0x402bcb ? _0x402bcb[_0x260b6b(0x41b)] : _0x260b6b(0x2e0); } } } const _0x4ad345 = _0x260b6b(0x68a) + _0xce4645[_0x260b6b(0x41b)] + _0x260b6b(0x3ec) + _0x54238a[_0x260b6b(0x41b)] + '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（' + _0x54238a[_0x260b6b(0x41b)] + '）最新写下的日记内容。Ta写的是：\x0a\x20“' + _0x470b04 + _0x260b6b(0x1d9) + _0xce4645['persona'] + '\x0a' + _0x5e1c0d + '\x0a' + _0x4d6351 + '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20' + new Date()[_0x260b6b(0xa5f)]('zh-CN', { 'dateStyle': _0x260b6b(0x962), 'timeStyle': _0x260b6b(0x2ff) }) + _0x260b6b(0x83b) + _0xa926c9(new Date(_0x55bc27?.[_0x260b6b(0xaeb)]?.['at'](-0x1)?.['timestamp'] || Date[_0x260b6b(0xa59)]())) + _0x260b6b(0x13c) + (_0x45b23a || _0x260b6b(0x28c)) + _0x260b6b(0x2a1) + (_0xd072c0 || _0x260b6b(0x31b)) + '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。'; _0x7d69dd = [{ 'role': _0x260b6b(0x63a), 'content': _0x4ad345 }, { 'role': _0x260b6b(0x34d), 'content': _0x260b6b(0xa6e) }]; const _0x493d80 = await _0x9e4405(_0x7d69dd); if (_0x493d80) { if (_0x260b6b(0x44e) !== _0x260b6b(0xaae)) { let _0x22a114 = _0x185973[_0x260b6b(0x3fe)][_0x260b6b(0x95a)](_0x1e9bf5 => _0x1e9bf5[_0x260b6b(0x24e)] === _0x1d91fd); !_0x22a114 && (_0x22a114 = { 'characterId': _0x1d91fd, 'entries': [] }, _0x185973['diaries'][_0x260b6b(0x92b)](_0x22a114)); _0x22a114['entries'][_0x260b6b(0x92b)]({ 'timestamp': Date['now'](), 'author': _0x1d91fd, 'content': _0x493d80 }), _0x35c1de(); const _0x42fb6d = _0x22a114[_0x260b6b(0xaeb)][_0x260b6b(0xad2)]; _0x185973[_0x260b6b(0x943)] = Math[_0x260b6b(0x5c9)](_0x42fb6d / 0x2) - 0x1, _0x55319e(); } else _0x2263ab[_0x260b6b(0x7bb)]['remove'](_0x260b6b(0x297)); } } else { const _0x9e4f65 = _0x133b94[_0x260b6b(0x6ac)][_0x260b6b(0x95a)](_0x51d229 => _0x51d229[_0x260b6b(0x117)] === _0x260b6b(0x261) && _0x51d229[_0x260b6b(0xa1e)][_0x260b6b(0x955)](_0x10267f['id'])), _0x254279 = _0x5d27bd[_0x260b6b(0x621)][_0x260b6b(0x95a)](_0x2c4352 => _0x2c4352['id'] === (_0x9e4f65?.[_0x260b6b(0x4eb)] || _0x29da31[_0x260b6b(0x571)])) || { 'id': _0x260b6b(0x1f4), 'name': '你' }; let _0xe0e8ef = ''; return _0x10cf15['linkedWorldBookIds'] && _0x310803[_0x260b6b(0x52b)][_0x260b6b(0xad2)] > 0x0 && (_0xe0e8ef = _0x18a421['linkedWorldBookIds'][_0x260b6b(0x3df)](_0x55fba2 => _0x35751d['worldBooks'][_0x260b6b(0x95a)](_0x5b33b5 => _0x5b33b5['id'] === _0x55fba2))[_0x260b6b(0x249)](_0x4ad767)[_0x260b6b(0x3df)](_0x4e84a5 => _0x260b6b(0x5d2) + _0x4e84a5['name'] + _0x260b6b(0x2d5) + _0x4e84a5[_0x260b6b(0x725)])[_0x260b6b(0x7e0)]('')), _0x260b6b(0xa0e) + _0x2702be['id'] + _0x260b6b(0x1b8) + _0xd75b40[_0x260b6b(0x41b)] + _0x260b6b(0x1f6) + _0x349e9d[_0x260b6b(0x54e)] + _0x260b6b(0x17e) + _0x254279[_0x260b6b(0x41b)] + _0x260b6b(0xace) + _0x254279['id'] + ')\x0a' + _0xe0e8ef; } } catch (_0x2d0589) { _0x1de23f('生成日记失败:\x20' + _0x2d0589[_0x260b6b(0x140)]); } finally { _0x55dd5e(![]), _0x185973[_0x260b6b(0x608)] = ![]; } } function _0x42a3c9() { const _0x635df8 = _0x59a4d7, _0x566f88 = document[_0x635df8(0x727)](_0x635df8(0x97d)), _0x1d4f14 = document['getElementById'](_0x635df8(0x822)), _0x431f78 = document['querySelector'](_0x635df8(0x7a1)); _0x185973['meetingViewMode'] === _0x635df8(0x73a) ? (_0x566f88[_0x635df8(0xa8f)][_0x635df8(0x8f8)] = _0x635df8(0x941), _0x1d4f14['style'][_0x635df8(0x8f8)] = 'block') : (_0x566f88['style'][_0x635df8(0x8f8)] = _0x635df8(0x6df), _0x1d4f14[_0x635df8(0xa8f)][_0x635df8(0x8f8)] = _0x635df8(0x941)), _0x431f78[_0x635df8(0xa8f)][_0x635df8(0x8f8)] = 'block'; } function _0x4318d4() { const _0x143e93 = _0x59a4d7; if (_0x143e93(0x59f) === 'zPEEk') { if (_0x2bbb1a[_0x143e93(0x41b)] === _0x143e93(0x5db)) return _0x22ab1c['log']('Fetch\x20request\x20was\x20aborted.'), ''; throw _0x2a7f51; } else { const _0x2c4fbc = document['getElementById'](_0x143e93(0x37b)), _0x5ec7e7 = document[_0x143e93(0x727)](_0x143e93(0xb18)); if (_0x185973[_0x143e93(0x60d)]['length'] > 0x0) { const _0x41071b = _0x185973[_0x143e93(0x60d)][_0x143e93(0xa2b)](); _0x2c4fbc['textContent'] = _0x41071b['speaker'] === _0x143e93(0x1a4) ? '旁白' : _0x41071b[_0x143e93(0x72e)], _0x5ec7e7[_0x143e93(0xb33)] = _0x41071b['line'], _0x41071b[_0x143e93(0x72e)] !== _0x143e93(0x1a4) && _0x2c190b(_0x185973[_0x143e93(0x7b7)], _0x41071b[_0x143e93(0x2ea)]); } else { const _0x399be4 = _0x185973[_0x143e93(0x90a)][_0x185973[_0x143e93(0x7b7)]]; if (_0x399be4 && _0x399be4[_0x143e93(0xad2)] > 0x0) { _0x185973['activeMeetingScriptQueue'] = [..._0x399be4]; const _0x1291af = _0x185973[_0x143e93(0x60d)]['shift'](); _0x2c4fbc[_0x143e93(0xb33)] = _0x1291af[_0x143e93(0x72e)] === _0x143e93(0x1a4) ? '旁白' : _0x1291af[_0x143e93(0x72e)], _0x5ec7e7['textContent'] = _0x1291af[_0x143e93(0x6a4)]; if (_0x1291af[_0x143e93(0x72e)] !== _0x143e93(0x1a4)) { if (_0x143e93(0x804) !== _0x143e93(0xae3)) _0x2c190b(_0x185973['activeMeetingCharId'], _0x1291af['emotion']); else { const _0x467886 = _0x20def9[_0x143e93(0x727)](_0x143e93(0xb20)), _0x445420 = _0x21b98b[_0x143e93(0x727)]('modal-text'), _0x3c28fa = _0x385151['getElementById'](_0x143e93(0x36d)), _0x1d54c7 = _0x6074b9['getElementById'](_0x143e93(0x1b7)), _0x181150 = _0xccf0c['getElementById'](_0x143e93(0x1e2)); _0x445420[_0x143e93(0xb33)] = _0xa87934, _0x467886[_0x143e93(0xa8f)]['display'] = _0x143e93(0x26a); const _0x5c46b7 = _0x446349 => { const _0x2074fa = _0x143e93; _0x467886[_0x2074fa(0xa8f)][_0x2074fa(0x8f8)] = _0x2074fa(0x941), _0x3c28fa['onclick'] = _0x1d54c7[_0x2074fa(0x88c)] = _0x181150['onclick'] = null, _0x48387c[_0x2074fa(0x149)](_0x2074fa(0x701), _0x46be70), _0x3e4b86(_0x446349); }, _0x46be70 = _0x19aef7 => { const _0x5f5b67 = _0x143e93; if (_0x19aef7['key'] === _0x5f5b67(0x361)) _0x5c46b7(![]); if (_0x19aef7[_0x5f5b67(0x8e1)] === _0x5f5b67(0x6b6)) _0x5c46b7(!![]); }; _0x3c28fa[_0x143e93(0x88c)] = () => _0x5c46b7(!![]), _0x1d54c7[_0x143e93(0x88c)] = () => _0x5c46b7(![]), _0x181150[_0x143e93(0x88c)] = () => _0x5c46b7(![]), _0x47f537[_0x143e93(0x65f)](_0x143e93(0x701), _0x46be70); } } } else _0x2c4fbc[_0x143e93(0xb33)] = '旁白', _0x5ec7e7[_0x143e93(0xb33)] = _0x143e93(0x2e7); } } } async function _0x2c190b(_0x309431, _0x94e010) { const _0x43f98b = _0x59a4d7, _0x4518f6 = document[_0x43f98b(0x727)]('galgame-sprite'), _0x503602 = document['getElementById'](_0x43f98b(0xab5)), _0x32246b = _0xec7e1c(_0x309431), _0x3a938c = _0x32246b?.[_0x43f98b(0x3bd)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0xc18d44 = 0x50 * _0x3a938c[_0x43f98b(0xac0)]; _0x503602[_0x43f98b(0xa8f)][_0x43f98b(0xae7)] = _0xc18d44 + '%', _0x503602['style'][_0x43f98b(0x7be)] = _0xc18d44 + '%', _0x503602['style'][_0x43f98b(0x510)] = _0x3a938c['x'] + '%', _0x503602['style'][_0x43f98b(0x3c0)] = _0x3a938c['y'] + '%', _0x503602[_0x43f98b(0xa8f)][_0x43f98b(0x8f6)] = _0x43f98b(0x480), _0x503602['style']['bottom'] = _0x43f98b(0xa9d); const _0x1efe20 = [_0x43f98b(0x2ba), 'happy', _0x43f98b(0x4b0), _0x43f98b(0x81d), _0x43f98b(0x920)], _0x14eef6 = _0x1efe20[_0x43f98b(0x955)](_0x94e010) ? _0x94e010 : _0x43f98b(0x2ba); try { const _0x1b7c53 = await _0x27b140(_0x43f98b(0x6a5) + _0x14eef6 + '_' + _0x309431); if (_0x1b7c53) _0x4518f6[_0x43f98b(0x883)] && _0x4518f6[_0x43f98b(0xa8f)]['opacity'] !== '0' ? (_0x4518f6[_0x43f98b(0xa8f)][_0x43f98b(0xae8)] = 0x0, setTimeout(() => { const _0x3a28aa = _0x43f98b; if ('YvFpr' !== _0x3a28aa(0x91d)) { const _0x20a55e = _0x2bfee8[_0x3a28aa(0x657)](/:\s(.+)/); if (_0x20a55e['length'] > 0x1) { const _0x3c5614 = _0x20a55e[0x0][_0x3a28aa(0x40e)](), _0x1d2c0f = _0x20a55e[0x1][_0x3a28aa(0x40e)]()['replace'](/^"|"$/g, ''); _0x3bdc27[_0x3c5614] = _0x1d2c0f; } } else _0x4518f6[_0x3a28aa(0x883)] = URL[_0x3a28aa(0x8ca)](_0x1b7c53), _0x4518f6[_0x3a28aa(0xa8f)][_0x3a28aa(0xae8)] = 0x1; }, 0x96)) : (_0x4518f6[_0x43f98b(0x883)] = URL[_0x43f98b(0x8ca)](_0x1b7c53), _0x4518f6[_0x43f98b(0xa8f)][_0x43f98b(0xae8)] = 0x1); else { if (_0x43f98b(0xa23) === _0x43f98b(0x816)) _0x3a5b17(_0x43f98b(0x381) + _0x207b45[_0x43f98b(0x140)]); else { const _0x28eac8 = await _0x27b140('char_sprite_normal_' + _0x309431); _0x4518f6[_0x43f98b(0x883)] = _0x28eac8 ? URL[_0x43f98b(0x8ca)](_0x28eac8) : ''; } } } catch (_0x2f97cb) { _0x43f98b(0x3ce) === _0x43f98b(0x3ce) ? (console[_0x43f98b(0x815)](_0x43f98b(0xb12), _0x2f97cb), _0x4518f6[_0x43f98b(0x883)] = '') : (_0x1944fc[_0x43f98b(0x9af)] = [], _0x53051c(), _0x79ef71(), _0x138b9c(_0x43f98b(0x82f))); } } let _0x32e880 = ![], _0x14809e = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x2a49a4 = document[_0x59a4d7(0x727)]('sprite-adjust-button'), _0x45557b = document['getElementById'](_0x59a4d7(0x14f)), _0x26f5bd = document[_0x59a4d7(0x727)](_0x59a4d7(0xaab)), _0xe24aa2 = document[_0x59a4d7(0x727)](_0x59a4d7(0x487)), _0x373645 = document[_0x59a4d7(0x727)](_0x59a4d7(0x2ce)), _0x288872 = document[_0x59a4d7(0x727)](_0x59a4d7(0xab5)), _0xb622e8 = document[_0x59a4d7(0x727)](_0x59a4d7(0xb06)), _0x1c6d11 = document[_0x59a4d7(0x727)](_0x59a4d7(0x9f3)); let _0xe8a516 = {}; function _0x1af0d5() { const _0x2ce53f = _0x59a4d7; if ('ojflb' === 'ojflb') { const _0x472232 = _0xec7e1c(_0x185973[_0x2ce53f(0x7b7)]); if (!_0x472232) return; _0x32e880 = !![], _0x373645[_0x2ce53f(0xa8f)][_0x2ce53f(0x8f8)] = 'block'; const _0x4b32c3 = _0x472232[_0x2ce53f(0x3bd)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document[_0x2ce53f(0x727)](_0x2ce53f(0x5b0))[_0x2ce53f(0x525)] = _0x4b32c3['x'], document[_0x2ce53f(0x727)]('sprite-slider-y')[_0x2ce53f(0x525)] = _0x4b32c3['y'], document[_0x2ce53f(0x727)]('sprite-slider-scale')[_0x2ce53f(0x525)] = _0x4b32c3[_0x2ce53f(0xac0)] * 0x64, _0xe8a516 = { ..._0x4b32c3 }, document[_0x2ce53f(0x727)](_0x2ce53f(0x99e))[_0x2ce53f(0xa8f)][_0x2ce53f(0x8f8)] = 'none', document[_0x2ce53f(0x727)]('galgame-sprite-adjust-ui')[_0x2ce53f(0xa8f)][_0x2ce53f(0x8f8)] = 'none'; } else { const _0xdc63bd = _0x4c71bc[_0x2ce53f(0x7a2)](_0x2ce53f(0xb08)); _0xdc63bd[_0x2ce53f(0xb33)] = _0x307ae5, _0xdc63bd['addEventListener'](_0x2ce53f(0x9c7), () => { const _0x23fe76 = _0x2ce53f; _0x36201d[_0x23fe76(0x525)] = _0x3929cc, _0x21d783[_0x23fe76(0x7bb)][_0x23fe76(0x7ef)](_0x23fe76(0xa02)); }), _0x43f479[_0x2ce53f(0x322)](_0xdc63bd); } } function _0x1a172(_0x23564a = ![]) { const _0x398db3 = _0x59a4d7; if ('AOPfZ' !== _0x398db3(0x994)) return _0x168b08['name'] !== _0x398db3(0x5db) && _0x7529eb[_0x398db3(0x815)]('Failed\x20to\x20plan\x20group\x20replies:', _0x143f32), null; else { _0x32e880 = ![], _0x373645[_0x398db3(0xa8f)][_0x398db3(0x8f8)] = _0x398db3(0x941), document[_0x398db3(0x727)](_0x398db3(0x99e))[_0x398db3(0xa8f)][_0x398db3(0x8f8)] = _0x398db3(0x6df), document['getElementById'](_0x398db3(0x46f))['style'][_0x398db3(0x8f8)] = _0x398db3(0x6df); if (!_0x23564a) { if (_0x398db3(0x1b2) === 'nqUQV') { const _0x24e1f2 = _0xec7e1c(_0x185973[_0x398db3(0x7b7)]); _0x24e1f2 && (_0x24e1f2[_0x398db3(0x3bd)] = _0xe8a516, _0x2c190b(_0x185973[_0x398db3(0x7b7)], _0x398db3(0x2ba))); } else { const _0x8c9756 = _0x42bdec(_0x4289e9['content']); _0x4ff95b[_0x398db3(0x989)](_0x54b469, { 'content': _0x8c9756['content'], 'quotedMessage': _0x8c9756['quotedMessage'] }); } } } } function _0x22308b() { const _0x11ab73 = _0x59a4d7; if ('PxbnJ' === _0x11ab73(0x9c8)) { const _0x339f6d = _0xec7e1c(_0x185973[_0x11ab73(0x7b7)]); if (!_0x339f6d) return; const _0x12aaba = parseFloat(document[_0x11ab73(0x727)](_0x11ab73(0x5b0))['value']), _0x214b30 = parseFloat(document[_0x11ab73(0x727)](_0x11ab73(0x821))[_0x11ab73(0x525)]), _0x50c0df = parseFloat(document['getElementById'](_0x11ab73(0xab7))[_0x11ab73(0x525)]) / 0x64; _0x339f6d[_0x11ab73(0x3bd)] = { 'x': _0x12aaba, 'y': _0x214b30, 'scale': _0x50c0df }, _0x35c1de(), _0x1de23f(_0x11ab73(0x153)), _0x1a172(!![]); } else _0x192ce2 = _0x5eb915[_0x11ab73(0x525)]; } function _0x50ebea() { const _0x583b79 = _0x59a4d7; _0x583b79(0x11a) !== _0x583b79(0x91b) ? _0xf1c3f7(_0x583b79(0x47d))['then'](_0x58efa0 => { const _0x1fb42c = _0x583b79; if (_0x1fb42c(0x9ac) === _0x1fb42c(0x9ac)) { if (_0x58efa0) { if (_0x1fb42c(0x16a) !== _0x1fb42c(0x16a)) _0x4420f4[_0x1fb42c(0x883)] = _0x2f6667[_0x1fb42c(0x8ca)](_0x53860c), _0x329295[_0x1fb42c(0xa8f)][_0x1fb42c(0x8f8)] = 'block'; else { const _0x36753c = _0xec7e1c(_0x185973[_0x1fb42c(0x7b7)]); if (_0x36753c) { if (_0x1fb42c(0xafc) === _0x1fb42c(0x8db)) { const _0x3e6ed1 = _0x263770[_0x1fb42c(0x189)](_0x4a0be5); _0x2498b9[_0x1fb42c(0x64b)](_0x3e6ed1) && (_0x51a4dc[_0x1fb42c(0x525)] = _0x3e6ed1[_0x1fb42c(0x3df)](_0x3c543c => _0x3c543c[_0x1fb42c(0x41b)] + '--' + _0x3c543c[_0x1fb42c(0x4e8)])[_0x1fb42c(0x7e0)]('\x0a')); } else delete _0x36753c[_0x1fb42c(0x3bd)], _0x35c1de(), _0x2c190b(_0x36753c['id'], 'normal'), _0x1de23f('已恢复默认。'), _0x1a172(!![]); } } } } else { if (!_0xa34f67[_0x1fb42c(0x64b)](_0xee3229)) return _0x1fb42c(0x75b); if (_0xa9b8dd[_0x1fb42c(0xad2)] === 0x0) return _0x1fb42c(0x45a); return _0x5b9b95['sort']((_0xbfcd74, _0x398c27) => new _0x3724ec(_0x398c27['timestamp']) - new _0x3075ef(_0xbfcd74[_0x1fb42c(0x55a)])), _0x1fb42c(0x7c9) + _0x457a38[_0x1fb42c(0x3df)](_0x277ebe => '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>' + (_0x277ebe['location_name'] || _0x1fb42c(0x41a)) + _0x1fb42c(0x71f) + (_0x277ebe[_0x1fb42c(0x9e1)] || '') + _0x1fb42c(0x776) + (_0x277ebe[_0x1fb42c(0x55a)] || '') + _0x1fb42c(0x129))[_0x1fb42c(0x7e0)]('') + _0x1fb42c(0x9ca); } }) : _0x2d0870[_0x583b79(0x628)](); } function _0x25f022() { const _0x39eda5 = _0x59a4d7; if (_0x39eda5(0x819) !== _0x39eda5(0x819)) { if (_0x422edd[_0x39eda5(0x25b)] === _0x39eda5(0x34d) && _0x2e012d[_0x39eda5(0x7f8)]) return { 'role': 'user', 'content': [{ 'type': 'text', 'text': _0x317558[_0x39eda5(0x725)] || '\x20' }, { 'type': _0x39eda5(0x130), 'image_url': { 'url': _0x5932f9[_0x39eda5(0x7f8)], 'detail': _0x39eda5(0x267) } }] }; return { 'role': _0xb3e163[_0x39eda5(0x25b)], 'content': _0x562cf2['content'] }; } else { if (!_0x32e880) return; const _0x2ea2ad = _0x185973[_0x39eda5(0x7b7)], _0x25f603 = _0xec7e1c(_0x2ea2ad); if (!_0x25f603) return; const _0xc242ef = parseFloat(document[_0x39eda5(0x727)](_0x39eda5(0x5b0))[_0x39eda5(0x525)]), _0x197731 = parseFloat(document[_0x39eda5(0x727)](_0x39eda5(0x821))[_0x39eda5(0x525)]), _0xee7cb7 = parseFloat(document[_0x39eda5(0x727)](_0x39eda5(0xab7))[_0x39eda5(0x525)]) / 0x64; _0x25f603[_0x39eda5(0x3bd)] = { 'x': _0xc242ef, 'y': _0x197731, 'scale': _0xee7cb7 }; const _0x5e617a = document[_0x39eda5(0x727)](_0x39eda5(0xab5)), _0x46996f = 0x50 * _0xee7cb7; _0x5e617a['style']['height'] = _0x46996f + '%', _0x5e617a[_0x39eda5(0xa8f)][_0x39eda5(0x7be)] = _0x46996f + '%', _0x5e617a['style']['left'] = _0xc242ef + '%', _0x5e617a['style'][_0x39eda5(0x3c0)] = _0x197731 + '%', _0x5e617a[_0x39eda5(0xa8f)][_0x39eda5(0x8f6)] = _0x39eda5(0x480); } } document[_0x59a4d7(0x727)](_0x59a4d7(0x5b0))['addEventListener'](_0x59a4d7(0x2d0), _0x25f022), document[_0x59a4d7(0x727)](_0x59a4d7(0x821))[_0x59a4d7(0x65f)](_0x59a4d7(0x2d0), _0x25f022), document[_0x59a4d7(0x727)](_0x59a4d7(0xab7))[_0x59a4d7(0x65f)](_0x59a4d7(0x2d0), _0x25f022), _0x2a49a4[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x1af0d5), _0x45557b[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x22308b), _0x26f5bd[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x1a172(![])), _0xe24aa2[_0x59a4d7(0x65f)]('click', _0x50ebea); function _0x1331e1(_0xddbbaa) { const _0x5958bf = _0x59a4d7, _0x11e125 = _0xec7e1c(_0xddbbaa); if (!_0x11e125) return; const _0x3dd6f5 = _0x185973[_0x5958bf(0x6ac)][_0x5958bf(0x95a)](_0x685639 => _0x685639[_0x5958bf(0x117)] === _0x5958bf(0x261) && _0x685639['participantIds'][_0x5958bf(0x955)](_0xddbbaa)), _0x4c8320 = _0x16366b(_0x3dd6f5['id']), _0x42ff4f = _0x185973['conversationHistory'][_0x5958bf(0x249)](_0x21cd4e => _0x21cd4e[_0x5958bf(0x350)])[_0x5958bf(0x659)](), _0x4cdbb3 = document['getElementById'](_0x5958bf(0x37b)), _0x1f3986 = document[_0x5958bf(0x727)](_0x5958bf(0xb18)); let _0x1acca3 = null; if (_0x42ff4f) { if (_0x5958bf(0x1d5) === _0x5958bf(0x14e)) _0x51ddb4(_0x426715, 'normal'); else { if (_0x42ff4f[_0x5958bf(0x25b)] === _0x5958bf(0x72a)) { const _0x19f41c = _0x185973['characterLastScripts'][_0xddbbaa]; _0x19f41c && _0x19f41c[_0x5958bf(0xad2)] > 0x0 && (_0x1acca3 = _0x19f41c['at'](-0x1)); } else _0x1acca3 = { 'speaker': _0x4c8320['name'], 'line': _0x42ff4f[_0x5958bf(0x725)], 'emotion': 'normal' }; } } if (_0x1acca3) _0x5958bf(0x35d) === 'VIKFw' ? (_0x4cdbb3[_0x5958bf(0xb33)] = _0x1acca3[_0x5958bf(0x72e)] === _0x5958bf(0x1a4) ? '旁白' : _0x1acca3[_0x5958bf(0x72e)], _0x1f3986[_0x5958bf(0xb33)] = _0x1acca3[_0x5958bf(0x6a4)], _0x1acca3[_0x5958bf(0x72e)] === _0x11e125[_0x5958bf(0x41b)] ? _0x2c190b(_0xddbbaa, _0x1acca3[_0x5958bf(0x2ea)]) : _0x2c190b(_0xddbbaa, 'normal')) : _0x15651b[_0x5958bf(0x815)](_0x5958bf(0x5b8), _0x426254); else { if (_0x5958bf(0x3be) === 'Xhbcg') { _0x5d5fe9['value'] = '', _0x5994b5['value'] = ''; if (_0x339a9a) _0x5102eb[_0x5958bf(0xa8f)][_0x5958bf(0x11b)] = ''; } else _0x4cdbb3[_0x5958bf(0xb33)] = _0x11e125[_0x5958bf(0x41b)], _0x1f3986['textContent'] = _0x5958bf(0x795), _0x2c190b(_0xddbbaa, 'normal'); } } function _0x5e984a() { const _0x13d700 = _0x59a4d7; if (_0x13d700(0x629) === _0x13d700(0x638)) _0xbd289c[_0x13d700(0x815)](_0x13d700(0x66f), _0x2e3d4c); else { const _0x2ffa94 = new Date(), _0x1089e2 = document[_0x13d700(0x727)](_0x13d700(0x5d3)), _0x24171f = document['getElementById'](_0x13d700(0x64f)); if (_0x1089e2 && _0x24171f) { const _0x279a24 = String(_0x2ffa94['getHours']())[_0x13d700(0x16e)](0x2, '0'), _0x2e318f = String(_0x2ffa94['getMinutes']())['padStart'](0x2, '0'); _0x1089e2['textContent'] = _0x279a24 + ':' + _0x2e318f; const _0x493643 = _0x2ffa94[_0x13d700(0x5ac)]() + 0x1, _0x1df27b = _0x2ffa94[_0x13d700(0x8f2)](), _0x60035e = [_0x13d700(0x5ed), _0x13d700(0x60a), '星期二', _0x13d700(0x8c4), '星期四', _0x13d700(0x2c8), _0x13d700(0x8ef)][_0x2ffa94[_0x13d700(0x60f)]()]; _0x24171f[_0x13d700(0xb33)] = _0x493643 + '月' + _0x1df27b + '日\x20' + _0x60035e; } } } const _0x3087c4 = document[_0x59a4d7(0x727)](_0x59a4d7(0x8b4)), _0x18ea23 = document['getElementById'](_0x59a4d7(0x7f5)), _0x51d51f = document[_0x59a4d7(0x727)](_0x59a4d7(0x64c)), _0x3bebd3 = document[_0x59a4d7(0x727)]('listen-together-backdrop'), _0x210d6a = document[_0x59a4d7(0x727)](_0x59a4d7(0x401)), _0x5dac37 = document[_0x59a4d7(0x727)](_0x59a4d7(0x1a5)), _0x1be027 = document['getElementById'](_0x59a4d7(0x87d)), _0x2c49a0 = document['getElementById'](_0x59a4d7(0x3a4)), _0x4c541f = document[_0x59a4d7(0x727)](_0x59a4d7(0x2b4)); let _0x1a6012 = []; async function _0x398803() { const _0x3b70c2 = _0x59a4d7; if (!_0x185973[_0x3b70c2(0x572)]) return; _0x210d6a[_0x3b70c2(0x5b2)] = _0x3b70c2(0x662), _0x3087c4[_0x3b70c2(0x7bb)]['add'](_0x3b70c2(0xa02)); const _0x4ca544 = await _0x2134d8(); if (_0x4ca544[_0x3b70c2(0xad2)] === 0x0) { _0x210d6a[_0x3b70c2(0x5b2)] = _0x3b70c2(0x1e1); return; } _0x210d6a[_0x3b70c2(0x5b2)] = '', _0x4ca544[_0x3b70c2(0x3ea)](_0x136510 => { const _0x3e616b = _0x3b70c2, _0xea63ba = document[_0x3e616b(0x7a2)](_0x3e616b(0xb08)); _0xea63ba[_0x3e616b(0x8f1)] = _0x3e616b(0xad5); const _0x2c8244 = _0x136510['cover'] ? URL[_0x3e616b(0x8ca)](_0x136510[_0x3e616b(0x766)]) : _0xcd0fda; _0xea63ba[_0x3e616b(0x5b2)] = _0x3e616b(0x1eb) + _0x2c8244 + '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>' + (_0x136510[_0x3e616b(0x4b7)]['歌曲名称'] || _0x3e616b(0x1a1)) + _0x3e616b(0x7d8) + (_0x136510['info']['歌手'] || '未知艺术家') + _0x3e616b(0xa1f), _0xea63ba[_0x3e616b(0x65f)](_0x3e616b(0x9c7), () => { _0x467a59(_0x136510); }), _0x210d6a[_0x3e616b(0x322)](_0xea63ba); }); } function _0xbbb137() { const _0x2fd62f = _0x59a4d7; _0x3087c4[_0x2fd62f(0x7bb)][_0x2fd62f(0x7ef)](_0x2fd62f(0xa02)); } async function _0x467a59(_0x207ccc) { const _0x4284b7 = _0x59a4d7; if (_0x4284b7(0x8a4) === _0x4284b7(0x8a4)) { if (!_0x185973[_0x4284b7(0x572)] || !_0x207ccc) return; let _0x18818c = null; if (_0x207ccc[_0x4284b7(0x766)]) { if ('qkgTl' !== 'omNKD') try { _0x18818c = _0x4284b7(0x61f) + Date['now']() + '_' + Math[_0x4284b7(0xb26)](), await _0x5bc724(_0x18818c, _0x207ccc[_0x4284b7(0x766)]); } catch (_0x2c8b69) { 'XRSQt' !== 'nlINZ' ? console[_0x4284b7(0x815)](_0x4284b7(0x159), _0x2c8b69) : (_0x3b883c[_0x4284b7(0x628)](), _0x995ad7()); } else _0x46fbec[_0x4284b7(0x815)](_0x4284b7(0x71b), _0x2b3479), _0x3847c3[_0x4284b7(0x778)](_0x4284b7(0x77d)); } const _0x103e44 = { 'role': _0x4284b7(0x34d), 'type': _0x4284b7(0x386), 'content': _0x4284b7(0x669) + _0x207ccc[_0x4284b7(0x4b7)][_0x4284b7(0x455)] + ']', 'songId': _0x207ccc['id'], 'songName': _0x207ccc[_0x4284b7(0x4b7)][_0x4284b7(0x455)], 'artist': _0x207ccc['info']['歌手'], 'coverId': _0x18818c, 'timestamp': Date[_0x4284b7(0xa59)]() }; _0x185973[_0x4284b7(0x338)][_0x4284b7(0x92b)](_0x103e44), _0x2a4d47(), _0xd16a30(), _0xbbb137(), setTimeout(_0x590cd1, 0x64); } else _0x3f433c > _0x31331f && (_0x1d8cba *= _0x158a65 / _0x4a354e, _0x51c086 = _0x2fb968); } _0x18ea23[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x398803), _0x51d51f[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0xbbb137), _0x3bebd3[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0xbbb137); async function _0x38a3b1(_0xe8add2, _0x6e667b, _0x1fdbd8) { const _0x422529 = _0x59a4d7, _0x1fff05 = _0x185973[_0x422529(0x6ac)][_0x422529(0x95a)](_0xabbaaf => _0xabbaaf[_0x422529(0x4a8)] && _0xabbaaf[_0x422529(0x4a8)]['isActive']), _0x153a80 = _0x3b6e44(); if (_0x1fff05 && _0x1fff05['id'] !== _0x153a80['id']) _0x1fff05[_0x422529(0x4a8)] = null, _0x1de23f(_0x422529(0x8ad)), _0x35c1de(); else _0x1fff05 && _0x1fff05['id'] === _0x153a80['id'] && _0x1de23f('正在为你切换新的歌曲...'); _0x55dd5e(!![], '正在连接同步频道...'); if (!_0x153a80) { _0x55dd5e(![]), _0x1de23f(_0x422529(0x3cd)); return; } const _0x504b5b = await _0x4d050d(_0xe8add2); if (!_0x504b5b) { _0x55dd5e(![]), _0x1de23f(_0x422529(0x67a)); return; } _0x153a80[_0x422529(0x4a8)] = { 'isActive': !![], 'songId': _0xe8add2, 'leaderId': _0x422529(0x34d), 'songName': _0x504b5b[_0x422529(0x4b7)][_0x422529(0x455)], 'artist': _0x504b5b[_0x422529(0x4b7)]['歌手'], 'cover': _0x504b5b[_0x422529(0x766)] }, _0x35c1de(), document['getElementById'](_0x422529(0x303))[_0x422529(0x883)] = _0x504b5b[_0x422529(0x766)] ? URL[_0x422529(0x8ca)](_0x504b5b[_0x422529(0x766)]) : _0xcd0fda, document[_0x422529(0x727)]('lt-ui-song-title')['textContent'] = _0x504b5b[_0x422529(0x4b7)][_0x422529(0x455)], document[_0x422529(0x727)](_0x422529(0xa17))[_0x422529(0xb33)] = _0x504b5b[_0x422529(0x4b7)]['歌手'], _0x54343c(_0x504b5b), _0x1be027[_0x422529(0xa8f)]['display'] = _0x422529(0x26a), setTimeout(() => _0x1be027[_0x422529(0x7bb)][_0x422529(0x99b)](_0x422529(0xa02)), 0xa), _0x1fdbd8[_0x422529(0x5b2)] = _0x422529(0x7cc) + _0x1fdbd8[_0x422529(0x99d)](_0x422529(0x5e4))['outerHTML']; if (_0x185973['conversationHistory'][_0x6e667b]) { if (_0x422529(0x452) !== _0x422529(0x452)) { _0x56a5c8[_0x422529(0x5b2)] = _0x422529(0x260); return; } else _0x185973[_0x422529(0x338)][_0x6e667b][_0x422529(0x1fe)] = !![], _0x2a4d47(); } _0x55dd5e(![]), _0x4d19a1(_0xe8add2, [_0xe8add2]), _0x42c153(_0x504b5b, !![]); } function _0x45afe9() { const _0x4cd285 = _0x59a4d7, _0x89a97f = _0x185973[_0x4cd285(0x6ac)][_0x4cd285(0x95a)](_0x5daae1 => _0x5daae1[_0x4cd285(0x4a8)] && _0x5daae1[_0x4cd285(0x4a8)][_0x4cd285(0x193)]); _0x89a97f && (_0x89a97f[_0x4cd285(0x4a8)] = null, _0x35c1de(), _0x1de23f(_0x4cd285(0x489)), _0x42c153(), _0x1be027[_0x4cd285(0x7bb)]['remove']('show'), setTimeout(() => _0x1be027['style'][_0x4cd285(0x8f8)] = 'none', 0x12c)); } function _0x14f4d1(_0x553770) { const _0x19ece1 = _0x59a4d7; if (!_0x553770) return []; const _0x5e8ec5 = _0x553770[_0x19ece1(0x657)]('\x0a'), _0x4f5501 = [], _0x140ec5 = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x9b91fc of _0x5e8ec5) { const _0x1a4d04 = _0x9b91fc[_0x19ece1(0x5ce)](_0x140ec5); if (_0x1a4d04) { const _0x5148ac = parseInt(_0x1a4d04[0x1], 0xa), _0x7022ef = parseInt(_0x1a4d04[0x2], 0xa), _0x407558 = parseInt(_0x1a4d04[0x3], 0xa) * (_0x1a4d04[0x3][_0x19ece1(0xad2)] === 0x2 ? 0xa : 0x1), _0x3dd970 = _0x5148ac * 0x3c + _0x7022ef + _0x407558 / 0x3e8, _0x1dde87 = _0x9b91fc[_0x19ece1(0xa89)](_0x140ec5, '')[_0x19ece1(0x40e)](); _0x1dde87 && _0x4f5501[_0x19ece1(0x92b)]({ 'time': _0x3dd970, 'text': _0x1dde87 }); } } return _0x4f5501; } function _0x54343c(_0x397f23) { const _0x339e65 = _0x59a4d7; if (_0x339e65(0xa12) !== 'eGkmf') { _0x1a6012 = _0x14f4d1(_0x397f23['lyrics']), _0x4c541f[_0x339e65(0x5b2)] = ''; if (_0x1a6012[_0x339e65(0xad2)] === 0x0) { if (_0x339e65(0x555) === _0x339e65(0x928)) _0x4dabd3[_0x339e65(0x475)][_0x339e65(0x1fb)](_0x2bfa26[_0x339e65(0x475)][_0x339e65(0x5ac)]() - 0x1), _0x2e8081(); else { _0x4c541f[_0x339e65(0x5b2)] = _0x339e65(0x5d7); return; } } _0x1a6012[_0x339e65(0x3ea)]((_0x317b0c, _0x46e278) => { const _0x1306c6 = _0x339e65, _0x39a200 = document['createElement']('p'); _0x39a200[_0x1306c6(0xb33)] = _0x317b0c[_0x1306c6(0xa15)], _0x39a200['id'] = _0x1306c6(0x6a7) + _0x46e278, _0x4c541f[_0x1306c6(0x322)](_0x39a200); }); } else _0x153f4b['forEach'](_0x57bde9 => { const _0x19900c = _0x339e65, _0x1e4611 = _0x57bde9[_0x19900c(0x119)] === _0x19900c(0x6a6), _0x163966 = _0x1e4611 ? _0x810b0 ? _0x152875[0x0] : '?' : _0xcb009a ? _0x5920cb[0x0] : '?'; _0x20d5d0 += '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20' + (_0x1e4611 ? 'user' : 'ai') + '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (!_0x1e4611 ? _0x19900c(0x801) + _0x163966 + _0x19900c(0x9ca) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20' + (_0x1e4611 ? _0x19900c(0x34d) : 'ai') + _0x19900c(0x36b) + _0x57bde9['content'] + _0x19900c(0x781) + (_0x1e4611 ? _0x19900c(0x801) + _0x163966 + '</div>' : '') + _0x19900c(0x18d); }); } function _0x183f28(_0x5c39f1, _0x24e82b, _0x4da09d, _0x101b94) { const _0x4b2338 = _0x59a4d7, _0x1aeb85 = (_0x101b94 - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0x5c39f1 + _0x4da09d * Math[_0x4b2338(0x75f)](_0x1aeb85), 'y': _0x24e82b + _0x4da09d * Math['sin'](_0x1aeb85) }; } function _0x49fd70(_0x408ddb) { const _0x40fac7 = _0x59a4d7, _0x59c292 = _0x40fac7(0x6a8), _0x359498 = document[_0x40fac7(0x5f7)](_0x59c292, 'svg'), _0x38af1e = 0xfa, _0x61b55f = _0x38af1e / 0x2, _0x44cfb2 = _0x38af1e / 0x2, _0x44079b = _0x38af1e / 0x2 - 0x14; _0x359498[_0x40fac7(0x9e8)]('width', '100%'), _0x359498[_0x40fac7(0x9e8)](_0x40fac7(0xae7), _0x40fac7(0x35a)), _0x359498['setAttribute'](_0x40fac7(0x874), _0x40fac7(0x8ea) + _0x38af1e + '\x20' + _0x38af1e); const _0x48f02a = Object[_0x40fac7(0x81b)](_0x408ddb)[_0x40fac7(0x220)]((_0x2eb276, _0x4f7f3f) => _0x2eb276 + _0x4f7f3f, 0x0); if (_0x48f02a === 0x0) return _0x359498; let _0x322304 = -0x5a; const _0x434c02 = ['#66b3ff', _0x40fac7(0x271), _0x40fac7(0xa3d), '#ff9999', '#c299ff', '#ffb366', '#a4c2f4', '#ff8c66']; let _0x24e87c = 0x0; for (const _0xe4307d in _0x408ddb) { if (_0x40fac7(0xaf6) !== _0x40fac7(0x400)) { const _0x2201e1 = _0x408ddb[_0xe4307d]; if (_0x2201e1 <= 0x0) continue; const _0x50d706 = _0x2201e1 / _0x48f02a * 0x168, _0x59b820 = _0x322304 + _0x50d706, _0x29074a = _0x183f28(_0x61b55f, _0x44cfb2, _0x44079b, _0x59b820), _0x577fdb = _0x183f28(_0x61b55f, _0x44cfb2, _0x44079b, _0x322304), _0x5eea1b = _0x50d706 > 0xb4 ? '1' : '0', _0x376f03 = ['M', _0x29074a['x'], _0x29074a['y'], 'A', _0x44079b, _0x44079b, 0x0, _0x5eea1b, 0x1, _0x577fdb['x'], _0x577fdb['y'], 'L', _0x61b55f, _0x44cfb2, 'Z'][_0x40fac7(0x7e0)]('\x20'), _0x2e1f94 = document['createElementNS'](_0x59c292, _0x40fac7(0x82e)); _0x2e1f94[_0x40fac7(0x9e8)]('d', _0x376f03), _0x2e1f94['setAttribute']('fill', _0x434c02[_0x24e87c % _0x434c02[_0x40fac7(0xad2)]]), _0x24e87c++; const _0x53642e = document[_0x40fac7(0x5f7)](_0x59c292, _0x40fac7(0x488)); _0x53642e[_0x40fac7(0xb33)] = _0xe4307d + ':\x20' + _0x2201e1['toFixed'](0x2) + '\x20(' + (_0x2201e1 / _0x48f02a * 0x64)[_0x40fac7(0x4b5)](0x1) + '%)', _0x2e1f94[_0x40fac7(0x322)](_0x53642e), _0x359498[_0x40fac7(0x322)](_0x2e1f94), _0x322304 = _0x59b820; } else _0x10949d[_0x40fac7(0x117)] = 'text'; } return _0x359498; } function _0x3802ca() { const _0x1952bc = _0x59a4d7; if (_0x1a6012[_0x1952bc(0xad2)] === 0x0) return; const _0x245f91 = _0x5dac37['currentTime']; let _0x2b7a1a = -0x1; for (let _0x3588b9 = 0x0; _0x3588b9 < _0x1a6012[_0x1952bc(0xad2)]; _0x3588b9++) { if (_0x245f91 >= _0x1a6012[_0x3588b9][_0x1952bc(0xa4e)]) _0x2b7a1a = _0x3588b9; else break; } if (_0x2b7a1a !== -0x1) { if (_0x1952bc(0x490) !== _0x1952bc(0x779)) { const _0x3859c3 = _0x4c541f['querySelectorAll']('p'); _0x3859c3['forEach'](_0x2281c1 => _0x2281c1[_0x1952bc(0x7bb)][_0x1952bc(0x7ef)](_0x1952bc(0x1b5))); const _0x4d58fb = document['getElementById'](_0x1952bc(0x6a7) + _0x2b7a1a); _0x4d58fb && (_0x1952bc(0x53a) !== _0x1952bc(0x176) ? (_0x4d58fb[_0x1952bc(0x7bb)]['add'](_0x1952bc(0x1b5)), _0x4d58fb['scrollIntoView']({ 'behavior': _0x1952bc(0xa0d), 'block': 'center' })) : (_0x5964dc[_0x1952bc(0xa8f)][_0x1952bc(0xa18)] = 'absolute', _0x4f509a[_0x1952bc(0xa8f)][_0x1952bc(0x3c0)] = _0x1952bc(0x1b4), _0x51586b['style'][_0x1952bc(0x510)] = '50%', _0x220438[_0x1952bc(0xa8f)][_0x1952bc(0x8f6)] = 'translateX(-50%)', _0x447c44[_0x1952bc(0xa8f)][_0x1952bc(0x8f8)] = _0x1952bc(0x6df))); } else { const _0x1cab87 = _0xa65f33[_0x1952bc(0xaeb)][_0x1952bc(0x249)](_0x41a6d3 => _0x41a6d3[_0x1952bc(0x234)] === 'user')[_0x1952bc(0x659)](); _0x1cab87 && (_0x4c5777 = _0x1cab87[_0x1952bc(0x725)]); } } } _0x2c49a0['addEventListener'](_0x59a4d7(0x9c7), () => { const _0x16e7fe = _0x59a4d7; if (_0x16e7fe(0x54c) === _0x16e7fe(0x54c)) _0x1be027[_0x16e7fe(0x7bb)][_0x16e7fe(0x7ef)](_0x16e7fe(0xa02)), setTimeout(() => _0x1be027[_0x16e7fe(0xa8f)]['display'] = 'none', 0x12c); else { _0x325c52[_0x16e7fe(0x60d)] = [..._0x413897]; const _0x2bf9af = _0x357cb7[_0x16e7fe(0x60d)]['shift'](); _0x3763a6[_0x16e7fe(0xb33)] = _0x2bf9af['speaker'] === _0x16e7fe(0x1a4) ? '旁白' : _0x2bf9af[_0x16e7fe(0x72e)], _0x3c84e1[_0x16e7fe(0xb33)] = _0x2bf9af['line'], _0x2bf9af['speaker'] !== _0x16e7fe(0x1a4) && _0x12ae50(_0x10b2fe['activeMeetingCharId'], _0x2bf9af[_0x16e7fe(0x2ea)]); } }), document[_0x59a4d7(0x727)](_0x59a4d7(0xb01))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x44c7af = _0x59a4d7; if (_0x185973[_0x44c7af(0xa16)] && _0x185973[_0x44c7af(0xa16)]['isActive']) { if (_0x44c7af(0x7a7) !== _0x44c7af(0x514)) _0x1be027['style'][_0x44c7af(0x8f8)] = 'flex', setTimeout(() => _0x1be027[_0x44c7af(0x7bb)][_0x44c7af(0x99b)]('show'), 0xa); else { const _0x46a4c8 = _0x172a80['userProfiles'][_0x44c7af(0x95a)](_0x4767a2 => _0x4767a2['id'] === _0x15707d); if (_0x46a4c8) _0x5459f7[_0x44c7af(0x989)](_0x46a4c8, _0x3770e9); } } }), _0x5dac37[_0x59a4d7(0x65f)](_0x59a4d7(0x75e), _0x3802ca); const _0x919dae = document['getElementById']('widget-play-pause-btn'), _0x4f6073 = document[_0x59a4d7(0x727)](_0x59a4d7(0x504)), _0x227421 = document[_0x59a4d7(0x727)](_0x59a4d7(0x922)); _0x919dae['addEventListener'](_0x59a4d7(0x9c7), () => { const _0x5df7ff = _0x59a4d7; if (_0x5dac37['src']) { if (_0x5df7ff(0x3a1) === 'QOSJP') _0x5dac37['paused'] ? _0x5dac37[_0x5df7ff(0x462)]() : _0x5dac37['pause'](); else { _0x22da55[_0x5df7ff(0x815)](_0x5df7ff(0x97b)); return; } } }), _0x4f6073[_0x59a4d7(0x65f)]('click', () => { const _0x506e01 = _0x59a4d7; if (_0x2783ab[_0x506e01(0xad2)] === 0x0) return; _0x36ae91 = (_0x36ae91 + 0x1) % _0x2783ab[_0x506e01(0xad2)], _0x4d19a1(_0x2783ab[_0x36ae91], _0x2783ab); }), _0x227421[_0x59a4d7(0x65f)]('click', () => { const _0x26f461 = _0x59a4d7; if (_0x2783ab[_0x26f461(0xad2)] === 0x0) return; _0x36ae91 = (_0x36ae91 - 0x1 + _0x2783ab[_0x26f461(0xad2)]) % _0x2783ab[_0x26f461(0xad2)], _0x4d19a1(_0x2783ab[_0x36ae91], _0x2783ab); }), _0x5dac37[_0x59a4d7(0x65f)]('play', () => { const _0x2cfddc = _0x59a4d7; _0x919dae[_0x2cfddc(0xb33)] = '❚❚'; }), _0x5dac37[_0x59a4d7(0x65f)](_0x59a4d7(0x239), () => { _0x919dae['textContent'] = '▶'; }), _0x5dac37[_0x59a4d7(0x65f)]('ended', () => { const _0x1f7dfb = _0x59a4d7; _0x4f6073[_0x1f7dfb(0x9c7)](); }), _0x5dac37[_0x59a4d7(0x65f)](_0x59a4d7(0x462), () => { const _0xbff974 = _0x59a4d7, _0x406396 = document['getElementById'](_0xbff974(0x817)); if (_0x406396) _0x406396[_0xbff974(0xb33)] = '❚❚'; }), _0x5dac37['addEventListener'](_0x59a4d7(0x239), () => { const _0x2d51e4 = _0x59a4d7; if ('jHfGL' !== _0x2d51e4(0x1c0)) { _0x20148b[_0x2d51e4(0x815)](_0x2d51e4(0x5c1), _0x5a1625); const _0x450318 = { 'role': _0x2d51e4(0x72a), 'content': '错误:\x20' + _0x599d3c['message'], 'senderId': _0x352959['id'], 'isOffline': _0x2b7910 }; _0x3f1f4a[_0x2d51e4(0x338)][_0x2d51e4(0x92b)](_0x450318), _0x55e39d(); } else { const _0x343164 = document[_0x2d51e4(0x727)](_0x2d51e4(0x817)); if (_0x343164) _0x343164['textContent'] = '▶'; } }), _0x5dac37[_0x59a4d7(0x65f)]('ended', () => { const _0x103b27 = _0x59a4d7, _0x21a256 = document['getElementById']('global-player-next-btn'); if (_0x21a256) { if (_0x103b27(0x1c1) === _0x103b27(0x1c1)) _0x21a256['click'](); else { if (_0x485623) _0x2cded1(_0xedcf5); } } }); function _0x3a016b(_0x3c1d5b) { const _0x9f7d4c = _0x59a4d7; if ('aCLoz' === _0x9f7d4c(0x915)) { if (!_0x3c1d5b || typeof _0x3c1d5b !== 'string') return null; const _0x359210 = _0x3c1d5b[_0x9f7d4c(0x209)]('['), _0x26ba67 = _0x3c1d5b[_0x9f7d4c(0xad9)](']'); if (_0x359210 > -0x1 && _0x26ba67 > _0x359210) return _0x3c1d5b[_0x9f7d4c(0xb10)](_0x359210, _0x26ba67 + 0x1); return null; } else _0x34f6f5 = _0xa69489['getItem'](_0x9f7d4c(0x6b1) + _0x4a525e['activeChatId']); } document[_0x59a4d7(0x727)](_0x59a4d7(0x6ff))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x2f1769 = _0x59a4d7; _0x368fb2(), _0x8cf86('accounting', _0x2f1769(0x3d4)); }), document[_0x59a4d7(0x727)](_0x59a4d7(0x680))[_0x59a4d7(0x65f)]('click', () => _0x8cf86(_0x59a4d7(0x3d4), _0x59a4d7(0xafe))); const _0x39da8f = document[_0x59a4d7(0x727)](_0x59a4d7(0x76c)), _0x24a99a = document[_0x59a4d7(0x727)](_0x59a4d7(0x21e)); _0x39da8f[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), _0x368fb2), _0x24a99a['addEventListener']('click', () => { const _0x399ae3 = _0x59a4d7; _0x39da8f[_0x399ae3(0x7bb)][_0x399ae3(0x7ef)](_0x399ae3(0x1b5)), _0x24a99a['classList']['add'](_0x399ae3(0x1b5)), _0x1c1405(); }); function _0x368fb2() { const _0x5269d5 = _0x59a4d7; _0x24a99a[_0x5269d5(0x7bb)][_0x5269d5(0x7ef)](_0x5269d5(0x1b5)), _0x39da8f[_0x5269d5(0x7bb)][_0x5269d5(0x99b)]('active'), _0x3261c2(); } function _0x3261c2() { const _0x5c334e = _0x59a4d7; if (_0x5c334e(0x52e) === _0x5c334e(0x9e5)) _0x2c1f08[_0x5c334e(0xa8f)][_0x5c334e(0x11b)] = ''; else { const _0xe538f = document[_0x5c334e(0x727)](_0x5c334e(0x4b8)); document[_0x5c334e(0x727)](_0x5c334e(0xac5))[_0x5c334e(0xb33)] = _0x5c334e(0x594), document[_0x5c334e(0x727)](_0x5c334e(0x200))[_0x5c334e(0x5b2)] = '', _0xe538f[_0x5c334e(0x5b2)] = _0x5c334e(0x685), _0xbb8d7e(), document[_0x5c334e(0x727)](_0x5c334e(0x56d))[_0x5c334e(0x65f)]('click', _0x163df2), document['getElementById'](_0x5c334e(0x359))[_0x5c334e(0x65f)](_0x5c334e(0x9c7), _0x4d43b7 => { const _0x1cb634 = _0x5c334e; if (_0x4d43b7[_0x1cb634(0x6ba)][_0x1cb634(0x7bb)][_0x1cb634(0x40b)](_0x1cb634(0x767))) { const _0x169c8f = _0x4d43b7['target'][_0x1cb634(0xa13)]['id']; _0xf1c3f7(_0x1cb634(0x69a))[_0x1cb634(0x368)](_0x244621 => { _0x244621 && _0x1f8f02(_0x169c8f); }); } }), document[_0x5c334e(0x727)](_0x5c334e(0x639))[_0x5c334e(0x9d3)](); } } async function _0x1d8418(_0x564ed6, _0xd31157) { const _0x38f24e = _0x59a4d7; if ('KlHrF' === 'nUjjy') _0x1bb229 = _0x1481e2(_0x708bfd); else { const _0x4a84d7 = document[_0x38f24e(0x727)]('accounting-content-area'), _0x362a3a = document['getElementById'](_0x38f24e(0x200)); document[_0x38f24e(0x727)]('accounting-title')[_0x38f24e(0xb33)] = _0xd31157 + _0x38f24e(0x163); const _0x31ff47 = _0x564ed6[_0x38f24e(0x4c9)][_0x38f24e(0x220)]((_0x57dcaa, _0x2dfb52) => _0x57dcaa + (_0x2dfb52[_0x38f24e(0x853)] || 0x0), 0x0); let _0x3a0c16 = _0x38f24e(0x62e) + _0x31ff47[_0x38f24e(0x4b5)](0x2) + _0x38f24e(0x5d0); _0x4a84d7[_0x38f24e(0x5b2)] = _0x3a0c16; const _0x3643f7 = document['getElementById'](_0x38f24e(0x991)), _0x357c21 = { '餐饮美食': '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', '交通出行': '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', '购物消费': _0x38f24e(0x253), '生活服务': _0x38f24e(0x679), '休闲娱乐': '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', '医疗健康': _0x38f24e(0x331), '人情红包': _0x38f24e(0x4b9), '其他杂项': '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', '默认': _0x38f24e(0x562) }; for (const _0x2535a5 of _0x564ed6[_0x38f24e(0x4c9)]) { const _0x39719b = document['createElement'](_0x38f24e(0xb08)); _0x39719b[_0x38f24e(0x8f1)] = _0x38f24e(0x185), _0x39719b[_0x38f24e(0xa8f)][_0x38f24e(0x875)] = _0x38f24e(0x98e), _0x39719b[_0x38f24e(0xa8f)][_0x38f24e(0xae5)] = _0x38f24e(0x289), _0x39719b[_0x38f24e(0xa8f)][_0x38f24e(0x1f7)] = _0x38f24e(0xaf9), _0x39719b['style'][_0x38f24e(0x785)] = '0'; const _0x4e4ab8 = _0x357c21[_0x2535a5[_0x38f24e(0x910)]] || _0x357c21['默认'], _0x5d663a = _0x38f24e(0x591) + _0x4e4ab8 + _0x38f24e(0xacd), _0x3bdd56 = _0x38f24e(0x8fb) + _0x5d663a + _0x38f24e(0x909) + _0x2535a5[_0x38f24e(0x4d2)] + _0x38f24e(0x9a3) + (_0x2535a5[_0x38f24e(0x910)] || _0x38f24e(0x1bc)) + _0x38f24e(0x143) + (_0x2535a5[_0x38f24e(0x853)] || 0x0)['toFixed'](0x2) + _0x38f24e(0x40f); let _0x2f451a = ''; if (_0x2535a5[_0x38f24e(0x3a7)] && _0x2535a5[_0x38f24e(0x3a7)][_0x38f24e(0x61e)]) { const _0xde0266 = _0xec7e1c(_0x2535a5[_0x38f24e(0x3a7)][_0x38f24e(0x61e)]); if (_0xde0266) { const _0x3e8de2 = await _0x27b140(_0x38f24e(0x6e6) + _0xde0266['id']), _0x27bf16 = _0x3e8de2 ? URL[_0x38f24e(0x8ca)](_0x3e8de2) : _0xde0266['avatar'] || _0xcd0fda; _0x2f451a = _0x38f24e(0x698) + _0x27bf16 + _0x38f24e(0x403) + _0xde0266['name'] + _0x38f24e(0x183) + _0x2535a5[_0x38f24e(0x3a7)][_0x38f24e(0xa15)] + _0x38f24e(0x54b); } } _0x39719b[_0x38f24e(0x5b2)] = _0x3bdd56 + _0x2f451a, _0x3643f7[_0x38f24e(0x322)](_0x39719b); } _0x362a3a[_0x38f24e(0x5b2)] = _0x38f24e(0x56a), document[_0x38f24e(0x727)](_0x38f24e(0x320))['addEventListener'](_0x38f24e(0x9c7), async () => { const _0x3ce121 = _0x38f24e, _0x550f7e = await _0xf1c3f7('确定要重新记录吗？当前的账单会被删除。'); if (_0x550f7e) { const _0x1777bc = _0x185973[_0x3ce121(0x5ab)][_0xd31157]; if (_0x1777bc && _0x1777bc[_0x3ce121(0x1b6)]) { if (_0x3ce121(0x6f1) !== _0x3ce121(0x463)) _0x185973[_0x3ce121(0x524)][_0x3ce121(0x92b)](..._0x1777bc[_0x3ce121(0x1b6)]); else { const _0x564a2e = _0x54ceb1[_0x3ce121(0x525)]; let _0x3eba1e = _0x564a2e[_0x3ce121(0xa89)](/\.bubble\.sent/g, _0x3ce121(0xb11))[_0x3ce121(0xa89)](/\.bubble\.received/g, _0x3ce121(0x68d)); _0x4df440['innerHTML'] = _0x3eba1e; } } delete _0x185973['accountingLedger'][_0xd31157], _0x35c1de(), _0x3261c2(); } }); } } function _0x1c1405() { const _0x3b8e94 = _0x59a4d7; if (_0x3b8e94(0x3d6) !== _0x3b8e94(0x45d)) { const _0x30ad83 = document[_0x3b8e94(0x727)](_0x3b8e94(0x4b8)); document[_0x3b8e94(0x727)](_0x3b8e94(0xac5))['textContent'] = '账本', document[_0x3b8e94(0x727)]('header-actions')[_0x3b8e94(0x5b2)] = ''; const _0x46906c = Object[_0x3b8e94(0x38d)](_0x185973[_0x3b8e94(0x5ab)])[_0x3b8e94(0xab1)]((_0x281493, _0x53a970) => new Date(_0x53a970) - new Date(_0x281493)); if (_0x46906c[_0x3b8e94(0xad2)] === 0x0) { _0x30ad83[_0x3b8e94(0x5b2)] = _0x3b8e94(0x6e3); return; } _0x30ad83[_0x3b8e94(0x5b2)] = '', _0x46906c[_0x3b8e94(0x3ea)](_0x53c250 => { const _0x45b95b = _0x3b8e94, _0xad30cf = document['createElement'](_0x45b95b(0xb08)); _0xad30cf['className'] = _0x45b95b(0x185), _0xad30cf['style'][_0x45b95b(0x5a4)] = _0x45b95b(0x41c); const _0x22181c = _0x185973[_0x45b95b(0x5ab)][_0x53c250], _0x2f2716 = _0x22181c[_0x45b95b(0x4c9)]['reduce']((_0xa825d8, _0x2c1f30) => _0xa825d8 + (_0x2c1f30[_0x45b95b(0x853)] || 0x0), 0x0); _0xad30cf[_0x45b95b(0x5b2)] = _0x45b95b(0xaa5) + _0x53c250 + _0x45b95b(0x175) + _0x2f2716[_0x45b95b(0x4b5)](0x2) + _0x45b95b(0x8c9), _0xad30cf[_0x45b95b(0x65f)](_0x45b95b(0x9c7), async () => { const _0x1d6ed2 = _0x45b95b; _0x1d6ed2(0x5b7) !== _0x1d6ed2(0x5b7) ? (_0x26e05c(), _0x3648a8('calendar', _0x1d6ed2(0x3d4))) : (_0x39da8f['classList']['remove'](_0x1d6ed2(0x1b5)), _0x24a99a[_0x1d6ed2(0x7bb)][_0x1d6ed2(0x99b)](_0x1d6ed2(0x1b5)), await _0x1d8418(_0x22181c, _0x53c250)); }), _0x30ad83[_0x45b95b(0x322)](_0xad30cf); }); } else { if (!_0x5551db) return []; const _0x489bbd = _0x1262bb[_0x3b8e94(0x657)]('\x0a'), _0x490ea8 = [], _0x5e0a3f = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x52f25a of _0x489bbd) { const _0x34988f = _0x52f25a['match'](_0x5e0a3f); if (_0x34988f) { const _0x2852c9 = _0x13a31b(_0x34988f[0x1], 0xa), _0x115935 = _0x591446(_0x34988f[0x2], 0xa), _0x5d746a = _0x591379(_0x34988f[0x3], 0xa) * (_0x34988f[0x3][_0x3b8e94(0xad2)] === 0x2 ? 0xa : 0x1), _0x27cc4b = _0x2852c9 * 0x3c + _0x115935 + _0x5d746a / 0x3e8, _0x4ccfc0 = _0x52f25a[_0x3b8e94(0xa89)](_0x5e0a3f, '')[_0x3b8e94(0x40e)](); _0x4ccfc0 && _0x490ea8[_0x3b8e94(0x92b)]({ 'time': _0x27cc4b, 'text': _0x4ccfc0 }); } } return _0x490ea8; } } function _0x163df2() { const _0x483e8c = _0x59a4d7, _0xe302be = document[_0x483e8c(0x727)](_0x483e8c(0x639)), _0x3f1b43 = document[_0x483e8c(0x727)]('expense-amount'), _0x55ffe7 = _0xe302be[_0x483e8c(0x525)][_0x483e8c(0x40e)](), _0x3e84ae = parseFloat(_0x3f1b43[_0x483e8c(0x525)]); if (!_0x55ffe7 || isNaN(_0x3e84ae) || _0x3e84ae <= 0x0) { if ('njvxL' === _0x483e8c(0x4bc)) { _0x1de23f(_0x483e8c(0x47c)); return; } else _0xf13d94(_0x3143f7['activeMeetingCharId'], _0x1ae16c[_0x483e8c(0x2ea)]); } _0x185973['accountingData']['push']({ 'id': _0x483e8c(0x1e3) + Date[_0x483e8c(0xa59)](), 'description': _0x55ffe7, 'amount': _0x3e84ae, 'timestamp': Date[_0x483e8c(0xa59)]() }), _0x35c1de(), _0xbb8d7e(), _0xe302be[_0x483e8c(0x525)] = '', _0x3f1b43['value'] = '', _0xe302be[_0x483e8c(0x9d3)](); } function _0x1f8f02(_0x56f5a3) { const _0x41d918 = _0x59a4d7, _0x4b1009 = _0x185973[_0x41d918(0x524)][_0x41d918(0x1ff)](_0x2c0b3c => _0x2c0b3c['id'] === _0x56f5a3); _0x4b1009 > -0x1 && (_0x185973[_0x41d918(0x524)][_0x41d918(0x81e)](_0x4b1009, 0x1), _0x35c1de(), _0xbb8d7e()); } function _0xbb8d7e() { const _0x23ef52 = _0x59a4d7, _0x4f37fb = document[_0x23ef52(0x727)]('daily-expenses-list'), _0x4c0fac = document[_0x23ef52(0x727)]('organize-button-container'), _0x19cccf = new Date(), _0x431ecb = _0x185973[_0x23ef52(0x524)][_0x23ef52(0x249)](_0x2d51f1 => new Date(_0x2d51f1[_0x23ef52(0x55a)])[_0x23ef52(0x50d)]() === _0x19cccf[_0x23ef52(0x50d)]()); if (_0x431ecb['length'] === 0x0) { _0x4f37fb[_0x23ef52(0x5b2)] = _0x23ef52(0x3f9), _0x4c0fac['innerHTML'] = ''; return; } _0x4f37fb[_0x23ef52(0x5b2)] = '', _0x431ecb['sort']((_0x5b11e, _0x2af677) => _0x2af677[_0x23ef52(0x55a)] - _0x5b11e[_0x23ef52(0x55a)])[_0x23ef52(0x3ea)](_0x2086aa => { const _0x593b3f = _0x23ef52, _0x4ce988 = document['createElement']('div'); _0x4ce988[_0x593b3f(0x8f1)] = _0x593b3f(0x185), _0x4ce988[_0x593b3f(0x5b2)] = _0x593b3f(0xaa5) + _0x2086aa['description'] + _0x593b3f(0xa42) + _0x2086aa[_0x593b3f(0x853)][_0x593b3f(0x4b5)](0x2) + '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22' + _0x2086aa['id'] + _0x593b3f(0xa5b), _0x4f37fb[_0x593b3f(0x322)](_0x4ce988); }); if (_0x4c0fac) { if (_0x23ef52(0x384) !== 'oebai') _0x4c0fac['innerHTML'] = _0x23ef52(0x72d), document[_0x23ef52(0x727)](_0x23ef52(0x281))['addEventListener']('click', _0x3b8b23); else { const _0x4acc1d = (_0x228500 - _0x5bba8b) / (0x3e8 * 0x3c); _0x21b66f += _0x23ef52(0x2b9); } } } async function _0x3b8b23() { const _0x312613 = _0x59a4d7, _0x2dddc9 = new Date(), _0x13ca0b = _0x2dddc9[_0x312613(0x613)]() + '-' + String(_0x2dddc9[_0x312613(0x5ac)]() + 0x1)['padStart'](0x2, '0') + '-' + String(_0x2dddc9[_0x312613(0x8f2)]())[_0x312613(0x16e)](0x2, '0'); if (_0x185973['accountingLedger'][_0x13ca0b]) { if (_0x312613(0x7a3) === _0x312613(0x582)) throw new _0x3dc83c(_0x312613(0x744)); else { _0x1de23f(_0x312613(0x394)); return; } } const _0x24edd9 = _0x185973[_0x312613(0x524)][_0x312613(0x249)](_0xbd6872 => new Date(_0xbd6872[_0x312613(0x55a)])[_0x312613(0x50d)]() === _0x2dddc9[_0x312613(0x50d)]()); if (_0x24edd9[_0x312613(0xad2)] === 0x0) { _0x1de23f('今天一笔账都没有，我整理什么？'); return; } _0x55dd5e(!![], _0x312613(0xb2d)); try { if (_0x312613(0x5f1) !== 'YPdLZ') { _0x4b2f13('错误：找不到此好友圈绑定的用户！'); return; } else { const _0x260564 = ['餐饮美食', _0x312613(0xa43), _0x312613(0x512), _0x312613(0x138), _0x312613(0x76d), _0x312613(0x4d8), _0x312613(0x28d), '其他杂项'], _0x43d2b0 = _0x24edd9['map'](_0x2f496f => '-\x20' + _0x2f496f[_0x312613(0x4d2)] + ':\x20' + _0x2f496f[_0x312613(0x853)])[_0x312613(0x7e0)]('\x0a'), _0x5a7cb1 = _0x185973[_0x312613(0xb29)][_0x312613(0x3df)](_0x61edb5 => { const _0x47295f = _0x312613, _0x1ad489 = _0x185973[_0x47295f(0x6ac)][_0x47295f(0x95a)](_0xf347bb => _0xf347bb[_0x47295f(0x117)] === _0x47295f(0x261) && _0xf347bb[_0x47295f(0xa1e)][_0x47295f(0x955)](_0x61edb5['id'])), _0x3ec1e2 = _0x185973[_0x47295f(0x621)]['find'](_0x20a801 => _0x20a801['id'] === (_0x1ad489?.['boundUserProfileId'] || _0x185973[_0x47295f(0x571)])) || { 'id': _0x47295f(0x1f4), 'name': '你' }; let _0x1c7dc3 = ''; return _0x61edb5[_0x47295f(0x52b)] && _0x61edb5[_0x47295f(0x52b)][_0x47295f(0xad2)] > 0x0 && (_0x1c7dc3 = _0x61edb5[_0x47295f(0x52b)]['map'](_0x29c859 => _0x185973[_0x47295f(0x177)][_0x47295f(0x95a)](_0x21bbe8 => _0x21bbe8['id'] === _0x29c859))['filter'](Boolean)[_0x47295f(0x3df)](_0x4aeae5 => _0x47295f(0x5d2) + _0x4aeae5[_0x47295f(0x41b)] + ']:\x20' + _0x4aeae5['content'])['join']('')), '\x20\x20-\x20角色ID:\x20' + _0x61edb5['id'] + _0x47295f(0x1b8) + _0x61edb5[_0x47295f(0x41b)] + _0x47295f(0x1f6) + _0x61edb5[_0x47295f(0x54e)] + _0x47295f(0x17e) + _0x3ec1e2[_0x47295f(0x41b)] + _0x47295f(0xace) + _0x3ec1e2['id'] + ')\x0a' + _0x1c7dc3; })[_0x312613(0x7e0)]('\x0a'), _0x36c886 = _0x185973[_0x312613(0x621)][_0x312613(0x3df)](_0x5da591 => _0x312613(0xaea) + _0x5da591['id'] + '\x0a\x20\x20\x20\x20姓名:\x20' + _0x5da591[_0x312613(0x41b)] + '\x0a\x20\x20\x20\x20人设:\x20' + (_0x5da591['persona'] || '无'))[_0x312613(0x7e0)]('\x0a'), _0x4c3c58 = _0x312613(0x8bd), _0x45edd5 = _0x312613(0x78f) + _0x260564[_0x312613(0x7e0)](',\x20') + _0x312613(0x6f0) + _0x5a7cb1 + _0x312613(0x3bc) + _0x36c886 + _0x312613(0x755) + _0x43d2b0, _0x35dd58 = [{ 'role': _0x312613(0x63a), 'content': _0x4c3c58 }, { 'role': 'user', 'content': _0x45edd5 }], _0x42096d = await _0x9e4405(_0x35dd58, { 'json': !![] }), _0x37bf8b = _0x3a016b(_0x42096d); if (!_0x37bf8b) throw new Error(_0x312613(0x2a5) + _0x42096d); const _0x558547 = JSON[_0x312613(0x189)](_0x37bf8b); _0x185973[_0x312613(0x5ab)][_0x13ca0b] = { 'categorizedExpenses': _0x558547, 'timestamp': Date[_0x312613(0xa59)](), 'originalExpenses': _0x24edd9 }, _0x185973[_0x312613(0x524)] = _0x185973[_0x312613(0x524)][_0x312613(0x249)](_0x43016b => new Date(_0x43016b[_0x312613(0x55a)])['toDateString']() !== _0x2dddc9[_0x312613(0x50d)]()), _0x35c1de(), _0x1d8418(_0x185973[_0x312613(0x5ab)][_0x13ca0b], _0x13ca0b); } } catch (_0xd3dc1c) { _0x1de23f('AI整理失败了，哼:\x20' + _0xd3dc1c['message']); } finally { if (_0x312613(0x91e) === 'UaLlo') { if (_0x4e7ba7['type'] === _0x312613(0x869)) _0x5a9aec['preventDefault'](); _0x59a415(_0x1d06a9(_0x2b09e2, 0xa), _0x15a91f); } else _0x55dd5e(![]); } } function _0x58c96f() { const _0x4e4933 = _0x59a4d7; if (_0x4e4933(0x846) === _0x4e4933(0x294)) _0x4b795d[_0x4e4933(0x9c7)](); else { const _0x4413ec = document[_0x4e4933(0x99d)](_0x4e4933(0x58e)); if (!_0x4413ec) return; const _0x4098c6 = _0x4e4933(0x132); _0x4413ec[_0x4e4933(0x7e8)](_0x4e4933(0xa07), _0x4098c6); } } async function _0x375560() { const _0x1287ad = _0x59a4d7, _0x258faa = [..._0x58e6ca]; try { if (_0x1287ad(0x21a) !== _0x1287ad(0x274)) { const _0xd8f232 = localStorage[_0x1287ad(0x8ee)](_0x1287ad(0x385)); if (_0xd8f232) { if (_0x1287ad(0x9e4) !== _0x1287ad(0x9e4)) return { 'type': 'music', 'songName': _0x24b076[0x1][_0x1287ad(0x40e)](), 'artist': _0x401bb8[0x2][_0x1287ad(0x40e)]() }; else { const _0xeb05b9 = JSON[_0x1287ad(0x189)](_0xd8f232); Array['isArray'](_0xeb05b9) ? _0x1f134c = [..._0x258faa, ..._0xeb05b9] : _0x1f134c = _0x258faa; } } else { if (_0x1287ad(0x7e7) !== _0x1287ad(0x14c)) _0x1f134c = _0x258faa; else { _0x56823d[_0x1287ad(0x5b2)] = _0x1287ad(0xa52); return; } } } else { _0x5122f6[_0x1287ad(0x5b2)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>'; return; } } catch (_0xdd1c4d) { console['error']('加载自定义表情包失败，真是没用。', _0xdd1c4d), _0x1f134c = _0x258faa; } if (!localStorage['getItem'](_0x1287ad(0x174))) { _0xf1c3f7(_0x1287ad(0x2a9))[_0x1287ad(0x368)](async _0x212633 => { const _0x19a9f5 = _0x1287ad; _0x19a9f5(0x655) === _0x19a9f5(0x341) ? _0x50d431 = _0xe676ec[_0x19a9f5(0x382)]['name'] || '我' : _0x212633 ? (_0x55dd5e(!![], _0x19a9f5(0x854)), await _0x129aed(), localStorage[_0x19a9f5(0x295)](_0x19a9f5(0x174), _0x19a9f5(0xa10)), _0x55dd5e(![]), _0x1de23f('第一阶段升级完成！应用即将刷新以进行第二阶段检查。'), setTimeout(() => location['reload'](), 0x5dc)) : _0x1de23f(_0x19a9f5(0x73b)); }); return; } if (!localStorage['getItem']('noir_migration_fc_v1_complete')) { console[_0x1287ad(0x5be)](_0x1287ad(0x789)), _0x55dd5e(!![], _0x1287ad(0x2da)); const _0x50e61b = await _0x22ce18(); localStorage[_0x1287ad(0x295)](_0x1287ad(0x7c3), 'true'), _0x55dd5e(![]); if (_0x50e61b > 0x0) { _0x1de23f(_0x1287ad(0x48a) + _0x50e61b + _0x1287ad(0xaa8)), setTimeout(() => location[_0x1287ad(0x986)](), 0x5dc); return; } } if (!localStorage['getItem'](_0x1287ad(0x7c3))) { } if (!localStorage[_0x1287ad(0x8ee)](_0x1287ad(0x7bc))) { if (_0x1287ad(0xad3) === 'iNMhC') { console[_0x1287ad(0x5be)](_0x1287ad(0x556)), _0x55dd5e(!![], '正在升级音乐卡片数据...'); const _0x5a11fb = await _0x247597(); localStorage[_0x1287ad(0x295)](_0x1287ad(0x7bc), 'true'), _0x55dd5e(![]); if (_0x5a11fb > 0x0) { if ('POLEZ' !== 'QRCNK') { _0x1de23f(_0x1287ad(0x240) + _0x5a11fb + _0x1287ad(0x7d3)), setTimeout(() => location['reload'](), 0x5dc); return; } else _0x1dbf59(_0x1287ad(0x97c)); } } else _0x39b705(_0x545a56['id']); } const _0x1c0483 = document[_0x1287ad(0x727)]('app-snoop'); _0x1c0483[_0x1287ad(0x65f)](_0x1287ad(0x9c7), async () => { const _0x38c6b5 = _0x1287ad; if (_0x38c6b5(0x8dc) === _0x38c6b5(0x4a0)) { const _0x2bbe86 = _0x57d192[_0x38c6b5(0x1f2)](_0x26893a, _0x38c6b5(0x42d)), _0x288d1f = _0x2bbe86[_0x38c6b5(0x238)](_0x522825), _0x523e0d = _0x288d1f[_0x38c6b5(0x120)](_0x5d7fa0); _0x523e0d[_0x38c6b5(0x17f)] = () => _0x3a0fcf(_0x523e0d[_0x38c6b5(0x973)] ? _0x523e0d[_0x38c6b5(0x973)][_0x38c6b5(0x857)] : null), _0x523e0d[_0x38c6b5(0x8c6)] = () => _0x13dcd4(_0x523e0d[_0x38c6b5(0x815)]); } else await _0x72b42f(), _0x8cf86(_0x38c6b5(0x4a2), _0x38c6b5(0x3d4)); }), _0x58c96f(); const _0x161446 = _0x5d36da(); try { if ('mETXt' !== _0x1287ad(0xaff)) { const _0x1a5c27 = localStorage[_0x1287ad(0x8ee)](_0x1287ad(0x77d)); if (_0x1a5c27) { if (_0x1287ad(0x849) !== _0x1287ad(0x849)) _0x36db31 = _0xbbe20(() => { const _0x5f5a3d = _0x1287ad; if (_0x3ffd16[_0x5f5a3d(0x117)] === 'touchstart') _0x2d53f9[_0x5f5a3d(0x628)](); _0x2b9f3c(_0x4ee335); }, 0x320); else { const _0xb4622c = JSON[_0x1287ad(0x189)](_0x1a5c27); _0xb4622c[_0x1287ad(0x5ab)] && (_0x185973[_0x1287ad(0x5ab)] = _0xb4622c[_0x1287ad(0x5ab)], console[_0x1287ad(0x5be)](_0x1287ad(0x75c))); } } } else _0x37b9b3(_0x52b556['id']), _0x4d5c3c(_0x1287ad(0x6d1) + _0x2eb5b5[_0x1287ad(0x41b)] + '\x22\x20已删除。'), _0x4eb7fe(![]); } catch (_0x479dd5) { console[_0x1287ad(0x815)]('Noir\x27s\x20Temporal\x20Patch\x20failed:', _0x479dd5); } _0x4ef784(), _0x44777a(), _0x10014d(), _0x110c12(), _0x30e7b2(), _0x30e634(), _0x33146a(), _0x23c1c2(), _0x39a8f5(), _0x42cb30(), _0x3c3831(), _0x42c153(), _0x421813(), setInterval(_0x421813, 0x7530), _0x4d8807(), _0x1f52e3(), _0x380e29(); const _0x27f926 = document[_0x1287ad(0x727)](_0x1287ad(0x7a5)); document['getElementById'](_0x1287ad(0xb01))[_0x1287ad(0x65f)]('click', function (_0x4d82de) { const _0x40cbad = _0x1287ad; if (_0x4d82de['target'][_0x40cbad(0xa37)](_0x40cbad(0x904))) { if (_0x40cbad(0xa08) !== 'szybs') { const _0x2174e2 = _0x234cb4['target'][_0x40cbad(0xa13)]['id']; _0x33d7d1('确定要删除这笔记录吗？')[_0x40cbad(0x368)](_0x3da6f0 => { _0x3da6f0 && _0xeaf534(_0x2174e2); }); } else return; } const _0x44cbc4 = document[_0x40cbad(0x727)]('widget-play-pause-btn'); _0x44cbc4 && _0x44cbc4[_0x40cbad(0x9c7)](); }), _0x8cf86('home', 'init'); (_0x161446 || _0x185973[_0x1287ad(0xb29)][_0x1287ad(0xad2)] === 0x0) && (_0x1de23f(_0x1287ad(0x9f1)), setTimeout(() => { const _0x29cd82 = _0x1287ad; _0x8cf86(_0x29cd82(0xb17), _0x29cd82(0x3d4)), setTimeout(() => _0x2d15ff(), 0x64); }, 0x6a4)); document['getElementById']('meeting-reroll-button')[_0x1287ad(0x65f)](_0x1287ad(0x9c7), _0x1703b6); const _0x36c872 = document[_0x1287ad(0x727)]('widget-bg-input'); document[_0x1287ad(0x727)](_0x1287ad(0x222))['addEventListener'](_0x1287ad(0x9c7), () => _0x36c872[_0x1287ad(0x9c7)]()), document[_0x1287ad(0x727)](_0x1287ad(0x6fc))[_0x1287ad(0x65f)](_0x1287ad(0x9c7), () => { const _0x3b5c4d = _0x1287ad; _0x185973[_0x3b5c4d(0x55c)]['widgetBgImage'] = null, _0x35c1de(), _0x4d8807(), _0x1de23f('小组件背景已恢复默认。'); }), _0x36c872[_0x1287ad(0x65f)](_0x1287ad(0x86e), async _0x30bf39 => { const _0x4a1d39 = _0x1287ad; if (_0x4a1d39(0x38f) !== 'Ijace') { const _0x5c7ce3 = _0x30bf39[_0x4a1d39(0x6ba)][_0x4a1d39(0x409)][0x0]; if (!_0x5c7ce3) return; try { const _0x12f4e0 = await _0x5c64ec(_0x5c7ce3); _0x185973['preferences'][_0x4a1d39(0x16d)] = _0x12f4e0, _0x35c1de(), _0x4d8807(), _0x1de23f(_0x4a1d39(0xacb)); } catch (_0x283bc4) { _0x1de23f(_0x4a1d39(0x157) + _0x283bc4[_0x4a1d39(0x140)]); } } else _0x44635d[_0x4a1d39(0x4c7)](_0x46c59d, _0x158ddf[_0x4a1d39(0x472)]); }), _0x3776a7(), document[_0x1287ad(0x727)]('upload-badge-button')[_0x1287ad(0x65f)](_0x1287ad(0x9c7), () => document[_0x1287ad(0x727)](_0x1287ad(0x15c))['click']()), document['getElementById']('reset-badge-button')[_0x1287ad(0x65f)](_0x1287ad(0x9c7), async () => { const _0xc838b8 = _0x1287ad; await _0x255048('widget_badge'), localStorage[_0xc838b8(0x778)](_0xc838b8(0x399)), _0x3776a7(), _0x1de23f(_0xc838b8(0x618)); }), document['getElementById']('badge-input')['addEventListener'](_0x1287ad(0x86e), async _0x30346c => { const _0x28c64b = _0x1287ad; if (_0x28c64b(0x551) === _0x28c64b(0x8d3)) _0x4b6bac['isGenerating'] && _0x4b0e28[_0x28c64b(0x417)] && (_0x423c38[_0x28c64b(0x5be)](_0x28c64b(0x627)), _0x305afc[_0x28c64b(0x417)][_0x28c64b(0xa82)]('User\x20cancelled'), _0x412fc2[_0x28c64b(0x417)] = null), _0x134f22[_0x28c64b(0x608)] = ![], _0xce1f81(![]); else { const _0x2f75d1 = _0x30346c[_0x28c64b(0x6ba)]['files'][0x0]; if (!_0x2f75d1) return; try { await _0x5bc724(_0x28c64b(0x96a), _0x2f75d1), await _0x3776a7(), _0x1de23f('徽章已更换！'); } catch (_0x341764) { _0x28c64b(0x355) === _0x28c64b(0x243) ? _0x542000[_0x28c64b(0x3ea)](_0x5df547 => { const _0x352ad2 = _0x28c64b, _0x4d22a7 = _0x11305e['createElement'](_0x352ad2(0xb08)); _0x4d22a7[_0x352ad2(0x8f1)] = _0x352ad2(0x60e), _0x4d22a7[_0x352ad2(0xb33)] = _0x5df547[_0x352ad2(0x725)], _0x123922[_0x352ad2(0x322)](_0x4d22a7); }) : _0x1de23f(_0x28c64b(0x157) + _0x341764[_0x28c64b(0x140)]); } } }), _0x1a9ac3(), document['getElementById'](_0x1287ad(0x602))[_0x1287ad(0x65f)](_0x1287ad(0x756), _0x2c6459), document['getElementById'](_0x1287ad(0x602))[_0x1287ad(0x65f)](_0x1287ad(0x869), _0x2c6459, { 'passive': ![] }), document[_0x1287ad(0x727)](_0x1287ad(0x334))[_0x1287ad(0x65f)](_0x1287ad(0x9c7), () => document[_0x1287ad(0x727)](_0x1287ad(0x5bb))['click']()), document[_0x1287ad(0x727)](_0x1287ad(0xab9))[_0x1287ad(0x65f)](_0x1287ad(0x9c7), async () => { const _0x5dc74f = _0x1287ad; _0x5dc74f(0x8af) === _0x5dc74f(0x8af) ? (await _0x255048(_0x5dc74f(0x5fc)), localStorage[_0x5dc74f(0x778)](_0x5dc74f(0xb2a)), _0x1a9ac3(), _0x1de23f(_0x5dc74f(0x5bc))) : (_0x3f3202['stopPropagation'](), _0x379425[_0x5dc74f(0x7bb)][_0x5dc74f(0x3a3)]('visible'), _0x251b0a[_0x5dc74f(0x7bb)][_0x5dc74f(0x3a3)](_0x5dc74f(0x421))); }), document[_0x1287ad(0x727)](_0x1287ad(0x5bb))[_0x1287ad(0x65f)](_0x1287ad(0x86e), async _0x4585cf => { const _0x5eb11b = _0x1287ad, _0x403f5e = _0x4585cf['target'][_0x5eb11b(0x409)][0x0]; if (!_0x403f5e) return; try { await _0x5bc724('widget_card', _0x403f5e), await _0x1a9ac3(), _0x1de23f('卡片已更换！'); } catch (_0x22c7d0) { _0x1de23f(_0x5eb11b(0x157) + _0x22c7d0['message']); } }), document[_0x1287ad(0x727)](_0x1287ad(0x90c))[_0x1287ad(0x65f)](_0x1287ad(0x9c7), async () => { const _0x276f68 = _0x1287ad, _0x40af53 = await _0xf1c3f7('确定要重置所有小组件的位置吗？它们会回到初始位置。'); if (_0x40af53) { if (_0x276f68(0xae2) === 'UnCHA') { let _0x4a1170 = _0x2ed6c2[_0x276f68(0x727)](_0x276f68(0x91f) + _0x3bdbd7['id']); !_0x4a1170 && (_0x4a1170 = _0x4fbdff[_0x276f68(0x7a2)](_0x276f68(0xa8f)), _0x4a1170['id'] = 'style-' + _0x47ea16['id'], _0x3d8714[_0x276f68(0x8cb)][_0x276f68(0x322)](_0x4a1170)); const _0x42697a = _0x4eb408[_0x276f68(0x974)], _0x4af24b = _0x42697a[_0x276f68(0xa89)](/\.bubble\.sent/g, '.bubble-' + _0x162b2e['id'] + '.message.user')[_0x276f68(0xa89)](/\.bubble\.received/g, _0x276f68(0x5fd) + _0x284005['id'] + '.message.ai'); _0x4a1170[_0x276f68(0x5b2)] = _0x4af24b; } else localStorage[_0x276f68(0x778)](_0x276f68(0x399)), localStorage[_0x276f68(0x778)](_0x276f68(0xa4a)), _0x1de23f(_0x276f68(0x63f)), setTimeout(() => location[_0x276f68(0x986)](), 0x3e8); } }); const _0x1c3451 = document[_0x1287ad(0x727)]('app-diary'); _0x1c3451[_0x1287ad(0x65f)](_0x1287ad(0x9c7), async () => { const _0x3b0e90 = _0x1287ad; await _0x2eae08(), _0x8cf86(_0x3b0e90(0xb22), 'home'); }); const _0x50cf6a = document[_0x1287ad(0x727)]('app-music-library'); _0x50cf6a[_0x1287ad(0x65f)](_0x1287ad(0x9c7), () => { const _0x95c90d = _0x1287ad; _0x203558(), _0x8cf86('musicLibrary', _0x95c90d(0x3d4)); }), document['getElementById'](_0x1287ad(0x2bf))['addEventListener'](_0x1287ad(0x9c7), () => _0x8cf86(_0x1287ad(0x3d4), _0x1287ad(0x3d2))), document['getElementById'](_0x1287ad(0x550))[_0x1287ad(0x65f)](_0x1287ad(0x9c7), () => _0x8cf86('home', _0x1287ad(0xb22))), document[_0x1287ad(0x727)]('back-to-diary-list')[_0x1287ad(0x65f)](_0x1287ad(0x9c7), () => { const _0x1868b7 = _0x1287ad; _0x185973[_0x1868b7(0x519)] = null, _0x8cf86('diaryList', _0x1868b7(0x5e5)); }), document[_0x1287ad(0x727)](_0x1287ad(0x1df))[_0x1287ad(0x65f)]('click', _0x206e11), document[_0x1287ad(0x727)]('diary-get-reply-button')['addEventListener'](_0x1287ad(0x9c7), _0x597255), document[_0x1287ad(0x727)]('diary-entry-input')[_0x1287ad(0x65f)](_0x1287ad(0x701), _0x492303 => { const _0x3a4700 = _0x1287ad; if ('gGVBc' === 'gGVBc') { if (_0x492303[_0x3a4700(0x8e1)] === _0x3a4700(0x6b6) && !_0x492303['shiftKey']) { if (_0x3a4700(0x1b9) === _0x3a4700(0x3f5)) { _0x397aba(_0x3a4700(0x47c)); return; } else _0x492303[_0x3a4700(0x628)](), _0x206e11(); } } else _0x4b2841[_0x3a4700(0x815)](_0x3a4700(0xad0), _0x4512aa), _0x1e7ddc('保存失败:\x20' + _0x54e807[_0x3a4700(0x140)]); }); const _0x261596 = [_0x1287ad(0x2ba), _0x1287ad(0x93d), 'angry', _0x1287ad(0x81d), _0x1287ad(0x920)]; _0x261596['forEach'](_0xbcee79 => { const _0x31bcfc = _0x1287ad; if (_0x31bcfc(0x1aa) !== _0x31bcfc(0x1aa)) _0x59e9a8[_0x31bcfc(0x478)] = _0x810ae0(() => { const _0x199b59 = _0x31bcfc; if (_0x3d5cf5['type'] === 'touchstart') _0x5ce770[_0x199b59(0x628)](); _0x40559e(_0x428362(_0x2ddf78, 0xa), _0xead6bf); }, 0x320); else { const _0x3c4af6 = document[_0x31bcfc(0x727)](_0x31bcfc(0x9d7) + _0xbcee79 + _0x31bcfc(0x8d0)), _0x42c8a3 = document['getElementById'](_0x31bcfc(0x9d7) + _0xbcee79 + '-input'); if (_0x3c4af6 && _0x42c8a3) { if (_0x31bcfc(0x963) === _0x31bcfc(0x963)) _0x3c4af6['addEventListener']('click', () => _0x42c8a3[_0x31bcfc(0x9c7)]()), _0x42c8a3[_0x31bcfc(0x65f)](_0x31bcfc(0x86e), _0x585ca6 => { const _0x51c09a = _0x31bcfc, _0x1b03dd = _0x585ca6['target'][_0x51c09a(0x409)][0x0]; if (!_0x1b03dd) return; try { const _0x39aa22 = URL[_0x51c09a(0x8ca)](_0x1b03dd); _0x3c4af6[_0x51c09a(0xa8f)][_0x51c09a(0x11b)] = _0x51c09a(0x142) + _0x39aa22 + '\x27)'; } catch (_0x1ee69f) { _0x1de23f('图片预览失败:\x20' + _0x1ee69f[_0x51c09a(0x140)]); } }); else try { const _0x1fa954 = _0x2d0a8c[_0x31bcfc(0x189)](_0x4de8e7); _0x585ce5[_0x31bcfc(0x64b)](_0x1fa954) && (_0x153cf1[_0x31bcfc(0x525)] = _0x1fa954['map'](_0x1ee5c0 => _0x1ee5c0[_0x31bcfc(0x41b)] + '--' + _0x1ee5c0[_0x31bcfc(0x4e8)])[_0x31bcfc(0x7e0)]('\x0a')); } catch (_0xf074ba) { } } } }), document[_0x1287ad(0x727)](_0x1287ad(0x99e))['addEventListener']('click', _0x4318d4), document[_0x1287ad(0x727)](_0x1287ad(0x954))[_0x1287ad(0x65f)](_0x1287ad(0x9c7), () => { const _0x5f15ac = _0x1287ad; _0x5f15ac(0x2cb) !== _0x5f15ac(0x26f) ? (_0x185973[_0x5f15ac(0x610)] = _0x185973[_0x5f15ac(0x610)] === _0x5f15ac(0x245) ? 'galgame' : _0x5f15ac(0x245), _0x42a3c9()) : (_0x586099[_0x5f15ac(0xb33)] = _0x1334bd[_0x5f15ac(0x41b)], _0x400205[_0x5f15ac(0xb33)] = _0x5f15ac(0x795), _0x426143(_0x118757, _0x5f15ac(0x2ba))); }), document[_0x1287ad(0x727)](_0x1287ad(0x97d))[_0x1287ad(0x65f)](_0x1287ad(0x756), _0x48367c), document['getElementById'](_0x1287ad(0x97d))[_0x1287ad(0x65f)](_0x1287ad(0x869), _0x48367c, { 'passive': ![] }); let _0x4bc03c = null; function _0x48367c(_0x565850) { const _0x5b0909 = _0x1287ad; if (_0x5b0909(0xa66) === _0x5b0909(0x483)) _0x509ee0[_0x5b0909(0xaeb)][_0x5b0909(0x81e)](_0x20ee0a, 0x1), _0x535f21(), _0x2810ea(), _0x118815(_0x5b0909(0x165)); else { if (_0x4bc03c) clearTimeout(_0x4bc03c); const _0x36de68 = _0x565850[_0x5b0909(0x6ba)][_0x5b0909(0xa37)](_0x5b0909(0x57c)); if (!_0x36de68) return; const _0x1ab137 = parseInt(_0x36de68[_0x5b0909(0xa13)]['historyIndex'], 0xa); if (isNaN(_0x1ab137)) return; const _0x783049 = () => { _0x4bc03c = setTimeout(() => { const _0x19e712 = _0x1b5f; if (_0x19e712(0x164) === 'enEtr') { if (_0x565850[_0x19e712(0x117)] === _0x19e712(0x869)) _0x565850[_0x19e712(0x628)](); _0x3d6e63(_0x1ab137); } else _0x46a412[_0x19e712(0xa8f)][_0x19e712(0x8f8)] = _0x19e712(0x26a), _0x4e20b1(() => _0x9aa528[_0x19e712(0x7bb)]['add']('show'), 0xa); }, 0x320); }, _0x14a7fa = () => { if (_0x4bc03c) clearTimeout(_0x4bc03c); }; document[_0x5b0909(0x65f)](_0x5b0909(0x971), _0x14a7fa, { 'once': !![] }), document[_0x5b0909(0x65f)](_0x5b0909(0x2ab), _0x14a7fa, { 'once': !![] }), document[_0x5b0909(0x65f)]('touchend', _0x14a7fa, { 'once': !![] }), document[_0x5b0909(0x65f)](_0x5b0909(0x775), _0x14a7fa, { 'once': !![] }), _0x783049(); } } document[_0x1287ad(0x5df)][_0x1287ad(0x65f)]('click', _0x29481 => { const _0x311fbe = _0x1287ad, _0x16f7fc = _0x29481[_0x311fbe(0x6ba)][_0x311fbe(0xa37)]('.listen-together-card'); if (_0x16f7fc) { const _0x13084b = _0x29481[_0x311fbe(0x6ba)][_0x311fbe(0xa37)](_0x311fbe(0xa39)), _0x46ac0f = _0x29481[_0x311fbe(0x6ba)][_0x311fbe(0xa37)](_0x311fbe(0x370)); if (_0x13084b) { if ('hMfZd' === 'hMfZd') _0x45afe9(); else { const _0x82e96c = _0x208d11['value'][_0x311fbe(0x40e)]()[_0x311fbe(0x955)](_0x8a8bc1); _0x3e19db[_0x311fbe(0x7de)] = _0x82e96c; } } else { if (_0x46ac0f) { const _0x3826db = _0x46ac0f[_0x311fbe(0xa37)](_0x311fbe(0x167)), _0x10aada = _0x46ac0f[_0x311fbe(0xa13)][_0x311fbe(0x57d)], _0x5be7dd = parseInt(_0x3826db[_0x311fbe(0xa13)]['historyIndex'], 0xa); _0x38a3b1(_0x10aada, _0x5be7dd, _0x16f7fc); } else { const _0x3f6772 = _0x3b6e44(); _0x3f6772 && _0x3f6772[_0x311fbe(0x4a8)] && _0x3f6772[_0x311fbe(0x4a8)]['isActive'] && (_0x311fbe(0x68b) !== 'NTNWs' ? (_0x1be027['style'][_0x311fbe(0x8f8)] = _0x311fbe(0x26a), setTimeout(() => _0x1be027[_0x311fbe(0x7bb)][_0x311fbe(0x99b)](_0x311fbe(0xa02)), 0xa)) : _0x50b037[_0x311fbe(0x375)][_0x311fbe(0x92b)]({ 'senderId': _0x66769d['id'], 'kind': _0x311fbe(0x2dc), 'sticker': _0x47e258 })); } } return; } if (window['getSelection']()[_0x311fbe(0x6c0)]()) return; const _0xbec9c8 = _0x29481[_0x311fbe(0x6ba)][_0x311fbe(0xa37)](_0x311fbe(0x167)); if (_0xbec9c8 && !_0x29481['target']['closest']('.no-action-modal')) { if (_0x311fbe(0xa96) === _0x311fbe(0xa96)) { const _0x1e48ab = parseInt(_0xbec9c8[_0x311fbe(0xa13)][_0x311fbe(0xa50)], 0xa); !isNaN(_0x1e48ab) && _0x3d6e63(_0x1e48ab); } else return _0x16ca4d['log'](_0x311fbe(0x80f)), 0x0; } }); const _0x1d81e3 = document['getElementById']('noir-author-mark'); _0x1d81e3 && _0x1d81e3['addEventListener'](_0x1287ad(0x9c7), () => { const _0xf01ed4 = _0x1287ad; if (_0xf01ed4(0x4c2) === _0xf01ed4(0x330)) { const _0xb6a70e = _0x460b22['createObjectURL'](_0x4d7452), _0x4776fd = _0xf01ed4(0x2bd), _0x4470f5 = _0xf01ed4(0x992) + _0x4776fd + _0xf01ed4(0x7b5) + _0xb6a70e + _0xf01ed4(0x473); _0x2403d7[_0xf01ed4(0x5b2)] = _0x4470f5, _0x4d558a[_0xf01ed4(0x7d1)][_0xf01ed4(0xa8f)]['setProperty'](_0xf01ed4(0x81c), '\x27' + _0x4776fd + '\x27'), _0x3c5108[_0xf01ed4(0xb33)] = _0xf01ed4(0x505); } else _0x1de23f(_0xf01ed4(0x1c4)); }); const _0xe45562 = document[_0x1287ad(0x727)](_0x1287ad(0x416)), _0x46fb4e = localStorage['getItem']('customStickers'); if (_0x46fb4e) try { if (_0x1287ad(0x474) === _0x1287ad(0x474)) { const _0x136cff = JSON[_0x1287ad(0x189)](_0x46fb4e); Array[_0x1287ad(0x64b)](_0x136cff) && (_0xe45562[_0x1287ad(0x525)] = _0x136cff[_0x1287ad(0x3df)](_0x1b44ea => _0x1b44ea[_0x1287ad(0x41b)] + '--' + _0x1b44ea[_0x1287ad(0x4e8)])[_0x1287ad(0x7e0)]('\x0a')); } else { const _0x427d38 = _0x5862d7[_0x1287ad(0x209)]('{'), _0x43e3ab = _0x1fd875[_0x1287ad(0xad9)]('}'); if (_0x427d38 >= 0x0 && _0x43e3ab > _0x427d38) return _0x27746f[_0x1287ad(0x247)](_0x427d38, _0x43e3ab + 0x1); return _0x11b4d9; } } catch (_0x3caa08) { } document['getElementById'](_0x1287ad(0x3cc))[_0x1287ad(0x65f)](_0x1287ad(0x9c7), () => { const _0x5cf70a = _0x1287ad; if (_0x5cf70a(0x9ec) === _0x5cf70a(0x9ec)) { const _0x44c395 = _0xe45562['value'], _0x56dfd4 = _0x44c395[_0x5cf70a(0x657)]('\x0a')[_0x5cf70a(0x249)](_0x4e52e3 => _0x4e52e3[_0x5cf70a(0x40e)]() !== ''), _0x1aed6f = []; let _0x139dd6 = 0x0; for (const _0x23845c of _0x56dfd4) { if (_0x5cf70a(0x90b) !== _0x5cf70a(0x268)) { const _0x4ccc1 = _0x23845c['split']('--'); _0x4ccc1[_0x5cf70a(0xad2)] === 0x2 && _0x4ccc1[0x0][_0x5cf70a(0x40e)]() && _0x4ccc1[0x1][_0x5cf70a(0x40e)]()[_0x5cf70a(0xa51)]('http') ? _0x1aed6f[_0x5cf70a(0x92b)]({ 'name': _0x4ccc1[0x0][_0x5cf70a(0x40e)](), 'url': _0x4ccc1[0x1][_0x5cf70a(0x40e)]() }) : _0x139dd6++; } else _0x483d05[_0x5cf70a(0xa8f)][_0x5cf70a(0x8f8)] = _0x5cf70a(0x941); } _0x139dd6 > 0x0 && (_0x5cf70a(0x876) === 'hoJvi' ? _0x38f98f = _0x5acc1e(() => { const _0xdeabbf = _0x5cf70a; if (_0x540a15[_0xdeabbf(0x117)] === 'touchstart') _0x15d2e6[_0xdeabbf(0x628)](); _0x12bad1(_0x92c47a); }, 0x320) : _0x1de23f('有\x20' + _0x139dd6 + _0x5cf70a(0x643))); try { _0x5cf70a(0x736) !== _0x5cf70a(0xa0c) ? (localStorage[_0x5cf70a(0x295)](_0x5cf70a(0x385), JSON['stringify'](_0x1aed6f)), _0x1de23f(_0x5cf70a(0x5a5)), setTimeout(() => location[_0x5cf70a(0x986)](), 0x5dc)) : (_0x407e50[_0x5cf70a(0x727)]('add-event-modal-title')[_0x5cf70a(0xb33)] = '为\x20' + _0x537fff + _0x5cf70a(0x6da), _0x5d2d14[_0x5cf70a(0x727)]('event-content-input')[_0x5cf70a(0x525)] = '', _0x153323[_0x5cf70a(0x727)](_0x5cf70a(0xb2c))[_0x5cf70a(0x7b1)] = !![], _0x399137[_0x5cf70a(0x727)](_0x5cf70a(0x7ce))[_0x5cf70a(0x7bb)][_0x5cf70a(0x99b)](_0x5cf70a(0xa02)), _0x50caf4[_0x5cf70a(0x727)]('event-content-input')['focus']()); } catch (_0x57b35c) { _0x1de23f('保存失败，你的表情包是不是太多了？'); } } else { const _0x231f9a = _0x12b393['getItem'](_0x5cf70a(0x748)); if (_0x231f9a) { const { playlist: _0x9f3d1a, currentIndex: _0x5e697c } = _0x30ccee[_0x5cf70a(0x189)](_0x231f9a); _0x6c56b5['isArray'](_0x9f3d1a) && _0x9f3d1a['length'] > 0x0 && _0x5e697c > -0x1 && (_0x300145[_0x5cf70a(0x2fd)] = _0x9f3d1a, _0x5e48d1['currentlyPlayingIndex'] = _0x5e697c, _0x1fce9d[_0x5cf70a(0x8d6)] = ![], _0x53cbd2()); } } }), _0x14dde9(), document[_0x1287ad(0x727)](_0x1287ad(0x389))['addEventListener']('click', () => { const _0x1c676b = _0x1287ad; document[_0x1c676b(0x727)](_0x1c676b(0x980))[_0x1c676b(0x9c7)](); }), document['getElementById'](_0x1287ad(0x36e))['addEventListener']('click', async () => { const _0x18b727 = _0x1287ad; await _0x255048(_0x18b727(0x52a)), localStorage[_0x18b727(0x778)](_0x18b727(0x9f7)), _0x1a9ac3(), _0x1de23f(_0x18b727(0x47a)); }), document[_0x1287ad(0x727)]('card-input-2')['addEventListener']('change', async _0x141fda => { const _0xffd18e = _0x1287ad, _0x4c9836 = _0x141fda[_0xffd18e(0x6ba)][_0xffd18e(0x409)][0x0]; if (!_0x4c9836) return; try { await _0x5bc724(_0xffd18e(0x52a), _0x4c9836), await _0x1a9ac3(), _0x1de23f(_0xffd18e(0x43e)); } catch (_0x116be1) { _0xffd18e(0x6d6) === _0xffd18e(0x6d6) ? _0x1de23f(_0xffd18e(0x157) + _0x116be1[_0xffd18e(0x140)]) : (_0x1329c7[_0xffd18e(0x815)](_0xffd18e(0xb12), _0x54930d), _0x2610c7[_0xffd18e(0x883)] = ''); } }), _0x22456b(), _0x3202da(), _0x4b7ffa(), document[_0x1287ad(0x727)](_0x1287ad(0x2ae))['addEventListener']('click', async () => { const _0x143977 = _0x1287ad; if (_0x143977(0x21c) !== 'bPMht') _0x21e949[_0x143977(0x525)] = _0x8fbd0a[_0x143977(0x382)][_0x143977(0x41b)] || '', _0x65675c['src'] = _0x340498['userProfile'][_0x143977(0xa44)] || _0x1a5bb3, _0x3fcfb2[_0x143977(0x525)] = _0x2e4d39[_0x143977(0x382)][_0x143977(0x54e)] || ''; else { const _0x1f1df2 = await _0xf1c3f7(_0x143977(0x2bb)); if (_0x1f1df2) { const _0xdfcab4 = await _0xf1c3f7(_0x143977(0x768)); if (_0xdfcab4) { _0x55dd5e(!![], _0x143977(0xb0b)); try { if ('dgdBa' !== 'dgdBa') { const _0x352177 = new _0x2ac03a(_0x531641[_0x143977(0x55a)]), _0x37ec2f = _0x352177[_0x143977(0x613)]() + '-' + _0x2c395c(_0x352177[_0x143977(0x5ac)]() + 0x1)[_0x143977(0x16e)](0x2, '0') + '-' + _0x2e810b(_0x352177[_0x143977(0x8f2)]())[_0x143977(0x16e)](0x2, '0'), _0x21ca53 = _0x147a06(_0x352177[_0x143977(0x342)]())['padStart'](0x2, '0') + ':' + _0x47ba80(_0x352177[_0x143977(0xa2d)]())['padStart'](0x2, '0'); let _0x50717d = '未知'; _0x574d61[_0x143977(0x25b)] === _0x143977(0x34d) ? _0x50717d = _0x2c09de[_0x143977(0x41b)] : _0x50717d = _0x12bad5[_0x143977(0x41b)]; let _0x1f09ba = _0x2ab382[_0x143977(0x725)]; if (_0x295ba8[_0x143977(0x6b4)]) _0x1f09ba = '[发送了表情]'; if (_0x4891d4[_0x143977(0x4c8)]) _0x1f09ba = _0x143977(0x8b9); return '[' + _0x37ec2f + '\x20' + _0x21ca53 + _0x143977(0x752) + _0x50717d + _0x143977(0x2d5) + _0x1f09ba; } else { localStorage[_0x143977(0x70e)](); const _0x226304 = await _0x2e65e1, _0xea8baf = _0x226304[_0x143977(0x1f2)]([_0x143977(0x5a1), 'music_library', _0x143977(0x258)], _0x143977(0x3b7)); await Promise[_0x143977(0x4cd)]([_0xea8baf[_0x143977(0x238)](_0x143977(0x5a1))[_0x143977(0x70e)](), _0xea8baf[_0x143977(0x238)](_0x143977(0x85b))[_0x143977(0x70e)](), _0xea8baf[_0x143977(0x238)]('snoop_cache')[_0x143977(0x70e)]()]), await new Promise(_0x569177 => { const _0x2649f5 = _0x143977; _0x2649f5(0x6d5) !== _0x2649f5(0x71c) ? _0xea8baf['oncomplete'] = _0x569177 : _0x2907a4 = _0x1e8b43; }), _0x1de23f(_0x143977(0x150)), setTimeout(() => { const _0x5f47ca = _0x143977; if (_0x5f47ca(0x7df) === 'gsKso') location[_0x5f47ca(0x986)](); else { if (_0x296e7e) _0x124691(_0x21a035); if (_0x7c8e2a['defaultPrevented']) return; _0x4aaa7c(() => { const _0x18bc5e = _0x5f47ca; _0x13db89 && _0x1e4adb(_0x38ce4a['id'], _0x1c4a99[_0x18bc5e(0x3df)](_0x5e3bef => _0x5e3bef['id'])); }, 0x32); } }, 0x5dc); } } catch (_0x397c6c) { _0x143977(0x999) !== _0x143977(0x999) ? _0xf48aee = _0x7ba0d5(_0x47ec00[_0x143977(0xa1e)][0x0]) : (_0x55dd5e(![]), _0x1de23f(_0x143977(0x518) + _0x397c6c[_0x143977(0x140)])); } } } } }); } const _0x229bd9 = _0x59a4d7(0x85b); async function _0x4d050d(_0x3ae053) { const _0x5376e7 = await _0x2e65e1; return new Promise((_0x29f71a, _0xdf1b1f) => { const _0x2ee01f = _0x1b5f, _0x198ccf = _0x5376e7[_0x2ee01f(0x1f2)](_0x229bd9, _0x2ee01f(0x42d)), _0xf1aaa9 = _0x198ccf['objectStore'](_0x229bd9), _0x4b3050 = _0xf1aaa9[_0x2ee01f(0x120)](_0x3ae053); _0x4b3050[_0x2ee01f(0x17f)] = () => _0x29f71a(_0x4b3050['result']), _0x4b3050['onerror'] = () => _0xdf1b1f(_0x4b3050[_0x2ee01f(0x815)]); }); } async function _0x2134d8() { const _0x2fb559 = _0x59a4d7; if (_0x2fb559(0xaa1) === _0x2fb559(0xaa1)) { const _0x5902fa = await _0x2e65e1; return new Promise((_0x1fc1f2, _0x213da1) => { const _0x5c16e6 = _0x2fb559; if (_0x5c16e6(0x35c) !== 'qVWsR') { _0x3f6d6b(_0x5c16e6(0x5b5)); return; } else { const _0x5f2af9 = _0x5902fa[_0x5c16e6(0x1f2)](_0x229bd9, _0x5c16e6(0x42d)), _0x10ca44 = _0x5f2af9['objectStore'](_0x229bd9), _0x437995 = _0x10ca44['getAll'](); _0x437995[_0x5c16e6(0x17f)] = () => _0x1fc1f2(_0x437995[_0x5c16e6(0x973)]), _0x437995[_0x5c16e6(0x8c6)] = () => _0x213da1(_0x437995[_0x5c16e6(0x815)]); } }); } else _0x29411a['classList'][_0x2fb559(0x7ef)](_0x2fb559(0x1b5)), _0x413475[_0x2fb559(0x7bb)][_0x2fb559(0x99b)]('active'), _0x541cb0(); } async function _0x4ebd3c(_0x361855) { const _0x149fa7 = _0x59a4d7; if ('kxrnj' === _0x149fa7(0x2b5)) _0x48361a += '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概' + _0x4d4746['round'](_0x2845b8 / 0x3c) + _0x149fa7(0x6f9); else { const _0x12e15f = await _0x2e65e1; return new Promise((_0x57120b, _0x1810c8) => { const _0x12d95b = _0x149fa7; if (_0x12d95b(0x12f) !== _0x12d95b(0x451)) { const _0x5e6894 = _0x12e15f[_0x12d95b(0x1f2)](_0x229bd9, _0x12d95b(0x3b7)), _0x10884b = _0x5e6894[_0x12d95b(0x238)](_0x229bd9), _0x2cf52b = _0x10884b[_0x12d95b(0x360)](_0x361855); _0x2cf52b['onsuccess'] = () => _0x57120b(_0x2cf52b[_0x12d95b(0x973)]), _0x2cf52b[_0x12d95b(0x8c6)] = () => _0x1810c8(_0x2cf52b[_0x12d95b(0x815)]); } else _0x37ccda = _0x58fd98[0x1]; }); } } async function _0x1b93fe(_0x37e599) { const _0x34e303 = await _0x2e65e1; return new Promise((_0x56165f, _0x59ebeb) => { const _0x5ceba0 = _0x1b5f; if (_0x5ceba0(0xb1b) !== _0x5ceba0(0xb1b)) { const { omniText: _0x591161 } = _0x4f771b(_0x4386b4['id'], null), _0x14923c = _0x11ff3c(_0x38ca57['id']), _0x482fd3 = _0x30cbdb['linkedWorldBookIds'] && _0x58795b[_0x5ceba0(0x52b)]['length'] > 0x0 ? _0x5ceba0(0x126) + _0x3d0c6f[_0x5ceba0(0x41b)] + _0x5ceba0(0x94d) + _0x5b5698[_0x5ceba0(0x52b)][_0x5ceba0(0x3df)](_0x33b998 => _0x529aab['worldBooks']['find'](_0x560a20 => _0x560a20['id'] === _0x33b998))[_0x5ceba0(0x249)](_0x4a0656)[_0x5ceba0(0x3df)](_0x250e2d => _0x5ceba0(0x8e6) + _0x250e2d[_0x5ceba0(0x41b)] + '\x0a' + _0x250e2d[_0x5ceba0(0x725)])[_0x5ceba0(0x7e0)]('') : ''; return _0x5ceba0(0xaa4) + _0x2d7c4c[_0x5ceba0(0x41b)] + _0x5ceba0(0x11f) + _0x4c017c['id'] + _0x5ceba0(0x241) + _0x216dd6['persona'] + '\x0a\x20\x20相关记忆:\x0a' + _0x591161 + '\x0a' + _0x14923c + '\x0a' + _0x482fd3; } else { const _0x55b9f2 = _0x34e303[_0x5ceba0(0x1f2)](_0x229bd9, 'readwrite'), _0x38a2f6 = _0x55b9f2[_0x5ceba0(0x238)](_0x229bd9), _0x3e35fc = _0x38a2f6[_0x5ceba0(0x521)](_0x37e599); _0x3e35fc[_0x5ceba0(0x17f)] = () => _0x56165f(), _0x3e35fc[_0x5ceba0(0x8c6)] = () => _0x59ebeb(_0x3e35fc[_0x5ceba0(0x815)]); } }); } let _0x50eac4 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x4b3d6e = { 'audio': document['getElementById'](_0x59a4d7(0x51a)), 'cover': document[_0x59a4d7(0x727)]('altar-slot-cover'), 'info': document[_0x59a4d7(0x727)](_0x59a4d7(0x5a0)), 'lyrics': document['getElementById'](_0x59a4d7(0x328)) }, _0x1eef76 = { 'audio': document['getElementById'](_0x59a4d7(0x76f)), 'cover': document[_0x59a4d7(0x727)](_0x59a4d7(0x930)), 'info': document[_0x59a4d7(0x727)](_0x59a4d7(0x603)), 'lyrics': document[_0x59a4d7(0x727)](_0x59a4d7(0xa3e)) }; for (const _0x1ece83 in _0x4b3d6e) { 'mIgIk' === _0x59a4d7(0x439) ? _0x18e411(_0x59a4d7(0x1cf) + _0x192829[_0x59a4d7(0x140)]) : (_0x4b3d6e[_0x1ece83][_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => _0x1eef76[_0x1ece83]['click']()), _0x1eef76[_0x1ece83]['addEventListener'](_0x59a4d7(0x86e), _0x35a196 => { const _0x461dbc = _0x59a4d7; if (_0x461dbc(0x16c) !== 'QeiMp') _0x507c54(_0x1ece83, _0x35a196[_0x461dbc(0x6ba)][_0x461dbc(0x409)][0x0]); else { if (_0x153671[_0x461dbc(0x25b)] === _0x461dbc(0x34d)) return _0x372320['userProfile']?.[_0x461dbc(0x41b)] || _0x461dbc(0x325); if (_0x19cbce[_0x461dbc(0x660)]) { const _0x2f0875 = _0xcb930(_0x18727e[_0x461dbc(0x660)]); return _0x2f0875?.[_0x461dbc(0x41b)] || _0x461dbc(0x226); } if (_0x10c0e3?.[_0x461dbc(0x117)] === _0x461dbc(0x261)) { const _0x27bdb0 = _0x3c43a2(_0x1eb362[_0x461dbc(0xa1e)][0x0]); return _0x27bdb0?.[_0x461dbc(0x41b)] || 'AI'; } return _0x461dbc(0x664); } })); } function _0x507c54(_0x423a83, _0x44b381) { const _0x5340ee = _0x59a4d7; if (!_0x44b381) return; _0x50eac4[_0x423a83] = _0x44b381, _0x4b3d6e[_0x423a83][_0x5340ee(0x99d)](_0x5340ee(0x796))[_0x5340ee(0xb33)] = _0x44b381[_0x5340ee(0x41b)], _0x4b3d6e[_0x423a83]['classList'][_0x5340ee(0x99b)](_0x5340ee(0x50c)), _0x58b29d(); } function _0x58b29d() { const _0x3dc6a1 = _0x59a4d7, _0x431b06 = document['getElementById'](_0x3dc6a1(0x907)); _0x50eac4[_0x3dc6a1(0x1a7)] && _0x50eac4[_0x3dc6a1(0x4b7)] ? _0x431b06[_0x3dc6a1(0x7de)] = ![] : _0x431b06['disabled'] = !![]; } function _0x4855c1() { const _0x2cb862 = _0x59a4d7; if (_0x2cb862(0x352) === _0x2cb862(0x352)) { _0x50eac4 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x367b2b in _0x4b3d6e) { _0x2cb862(0x2f5) === _0x2cb862(0x2f5) ? (_0x4b3d6e[_0x367b2b][_0x2cb862(0x7bb)][_0x2cb862(0x7ef)]('filled'), _0x1eef76[_0x367b2b][_0x2cb862(0x525)] = '') : (_0x25e716[_0x2cb862(0x883)] = _0x1ff407['createObjectURL'](_0x1c495e), _0x1bc5eb[_0x2cb862(0xa8f)][_0x2cb862(0x8f8)] = _0x2cb862(0x6df), _0x5f14eb[_0x2cb862(0xa8f)]['border'] = _0x2cb862(0x941)); } _0x4b3d6e[_0x2cb862(0x1a7)][_0x2cb862(0x99d)](_0x2cb862(0x796))['textContent'] = _0x2cb862(0x7b9), _0x4b3d6e[_0x2cb862(0x766)][_0x2cb862(0x99d)](_0x2cb862(0x796))['textContent'] = _0x2cb862(0x1ee), _0x4b3d6e[_0x2cb862(0x4b7)][_0x2cb862(0x99d)]('.slot-filename')[_0x2cb862(0xb33)] = _0x2cb862(0x30d), _0x4b3d6e[_0x2cb862(0x1cb)][_0x2cb862(0x99d)](_0x2cb862(0x796))[_0x2cb862(0xb33)] = '点击选择\x20.lrc', _0x58b29d(); } else _0x13c4d4 = _0x2cb862(0x476) + _0x39e5d5; } document[_0x59a4d7(0x727)](_0x59a4d7(0x907))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), async () => { const _0x7b6b21 = _0x59a4d7; if (_0x7b6b21(0x6db) !== _0x7b6b21(0x6db)) _0x11959d(_0x669776), _0x1dd1d9[_0x7b6b21(0x149)](_0x7b6b21(0x425), _0x2cc001), _0x309318[_0x7b6b21(0x149)]('error', _0x30c1f4), _0x496b7c['src'] = '', _0x2746d8[_0x7b6b21(0x7ef)](); else { if (!_0x50eac4['audio'] || !_0x50eac4['info']) { _0x1de23f(_0x7b6b21(0xa68)); return; } await _0x575b2a(); } }), document['getElementById'](_0x59a4d7(0x22b))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x552c23 = _0x59a4d7; _0x4855c1(), _0x8cf86(_0x552c23(0x4b2), _0x552c23(0x3d2)); }), document[_0x59a4d7(0x727)](_0x59a4d7(0x586))[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x47ce6c = _0x59a4d7; 'uQNHS' !== _0x47ce6c(0xa21) ? (_0x4df9c8(), _0x38e48e(![])) : _0x8cf86(_0x47ce6c(0x3d2), _0x47ce6c(0x4b2)); }); async function _0x575b2a() { const _0x12234a = _0x59a4d7; _0x55dd5e(!![], _0x12234a(0x2a6)); try { if (_0x12234a(0x77c) === _0x12234a(0xb05)) return '昨天\x20' + _0x40755b; else { const _0x4f2b16 = await _0x50eac4[_0x12234a(0x4b7)][_0x12234a(0xa15)](); let _0x55a2c0; if (_0x4f2b16[_0x12234a(0x40e)]()['startsWith']('{')) { if (_0x12234a(0x1fc) !== _0x12234a(0x9db)) _0x55a2c0 = JSON[_0x12234a(0x189)](_0x4f2b16); else throw new _0xce2ab2(_0x12234a(0x124)); } else { _0x55a2c0 = {}; const _0x3cfccc = _0x4f2b16[_0x12234a(0x657)]('\x0a'); _0x3cfccc['forEach'](_0x4d26f2 => { const _0x347254 = _0x12234a, _0x5c1b3d = _0x4d26f2[_0x347254(0x657)](/:\s|：\s/); if (_0x5c1b3d[_0x347254(0xad2)] === 0x2) { const _0x34310c = _0x5c1b3d[0x0][_0x347254(0x40e)](), _0x562b27 = _0x5c1b3d[0x1][_0x347254(0x40e)](), _0x1c0022 = { '歌名': '歌曲名称', '艺术家': '歌手', '专辑': '专辑' }; _0x1c0022[_0x34310c] && (_0x55a2c0[_0x1c0022[_0x34310c]] = _0x562b27); } }); if (!_0x55a2c0[_0x12234a(0x455)]) { if ('lAuOR' === _0x12234a(0x6a1)) { _0x11677c(_0x12234a(0x80c)); return; } else throw new Error(_0x12234a(0x759)); } _0x55a2c0['歌曲ID'] = _0x12234a(0x2ad) + Date['now'](); } const _0x2ded7c = 'song_' + (_0x55a2c0[_0x12234a(0x27c)] || Date['now']()), _0x206ac3 = { 'id': _0x2ded7c, 'info': _0x55a2c0, 'audio': _0x50eac4['audio'], 'cover': _0x50eac4[_0x12234a(0x766)], 'lyrics': _0x50eac4[_0x12234a(0x1cb)] ? await _0x50eac4[_0x12234a(0x1cb)][_0x12234a(0xa15)]() : '' }; await _0x4ebd3c(_0x206ac3), await _0x203558(), _0x55dd5e(![]), _0x1de23f('歌曲“' + _0x55a2c0[_0x12234a(0x455)] + _0x12234a(0x31f)), _0x8cf86(_0x12234a(0x3d2), _0x12234a(0x4b2)); } } catch (_0x126714) { _0x55dd5e(![]), console[_0x12234a(0x815)](_0x12234a(0x860), _0x126714), _0x1de23f(_0x12234a(0x252) + _0x126714[_0x12234a(0x140)]); } } async function _0x203558() { const _0x5201e9 = _0x59a4d7; if (_0x5201e9(0x5c7) !== _0x5201e9(0x5c7)) _0x1074fe += _0x5201e9(0x788); else { const _0x5915d9 = document[_0x5201e9(0x727)](_0x5201e9(0x3e6)); _0x5915d9['innerHTML'] = ''; const _0x3ce9d6 = await _0x2134d8(); if (_0x3ce9d6[_0x5201e9(0xad2)] === 0x0) { _0x5915d9['innerHTML'] = _0x5201e9(0xaf7); return; } _0x3ce9d6[_0x5201e9(0xab1)]((_0xe16483, _0x37158b) => (_0xe16483[_0x5201e9(0x4b7)]['歌曲名称'] || '')[_0x5201e9(0x683)](_0x37158b[_0x5201e9(0x4b7)][_0x5201e9(0x455)] || '')); for (const _0x158256 of _0x3ce9d6) { const _0x17bdac = document[_0x5201e9(0x7a2)](_0x5201e9(0xb08)); _0x17bdac[_0x5201e9(0x8f1)] = 'music-library-item', _0x17bdac[_0x5201e9(0xa13)][_0x5201e9(0x57d)] = _0x158256['id']; const _0x5e8d40 = _0x158256[_0x5201e9(0x766)] ? URL[_0x5201e9(0x8ca)](_0x158256[_0x5201e9(0x766)]) : _0xcd0fda; _0x17bdac[_0x5201e9(0x5b2)] = _0x5201e9(0x1eb) + _0x5e8d40 + _0x5201e9(0x723) + (_0x158256[_0x5201e9(0x4b7)]['歌曲名称'] || '未知歌曲') + _0x5201e9(0x7d8) + (_0x158256['info']['歌手'] || _0x5201e9(0x747)) + _0x5201e9(0xa1f); let _0x25f11a = null; const _0x4501f3 = _0xc409c4 => { const _0x151b05 = _0x5201e9; if (_0x151b05(0xa84) !== 'blzJc') { const _0x4e3239 = { 'id': _0x151b05(0x50a) + _0x54cfae['now'](), ..._0x59cef2 }; _0x3c805a[_0x151b05(0x621)][_0x151b05(0x92b)](_0x4e3239), !_0x2f5c1b[_0x151b05(0x571)] && (_0xa004b[_0x151b05(0x571)] = _0x4e3239['id']); } else { if (_0xc409c4[_0x151b05(0x904)] === 0x2) return; _0x25f11a = setTimeout(async () => { const _0x2a8cbf = _0x151b05; if (_0xc409c4[_0x2a8cbf(0x117)] === _0x2a8cbf(0x869)) _0xc409c4['preventDefault'](); const _0x24d6a1 = await _0xf1c3f7(_0x2a8cbf(0x825) + _0x158256['info'][_0x2a8cbf(0x455)] + _0x2a8cbf(0x713)); _0x24d6a1 && (await _0x1b93fe(_0x158256['id']), await _0x203558(), _0x1de23f(_0x2a8cbf(0x8b3))); }, 0x320); } }, _0x39500b = () => { const _0x3632e6 = _0x5201e9; _0x3632e6(0x87e) === 'SKBev' ? _0x2d183c(_0x3632e6(0x278)) : clearTimeout(_0x25f11a); }; _0x17bdac[_0x5201e9(0x65f)](_0x5201e9(0x756), _0x4501f3), _0x17bdac[_0x5201e9(0x65f)](_0x5201e9(0x971), _0x39500b), _0x17bdac[_0x5201e9(0x65f)](_0x5201e9(0x2ab), _0x39500b), _0x17bdac['addEventListener'](_0x5201e9(0x869), _0x4501f3, { 'passive': ![] }), _0x17bdac[_0x5201e9(0x65f)]('touchend', _0x39500b), _0x17bdac[_0x5201e9(0x65f)](_0x5201e9(0x775), _0x39500b), _0x17bdac[_0x5201e9(0x65f)]('click', _0x291427 => { const _0x296de1 = _0x5201e9; if ('GWRmY' === 'ydEzx') { const _0x441198 = _0x27c3d0[_0x296de1(0x657)](/:\s|：\s/); if (_0x441198[_0x296de1(0xad2)] === 0x2) { const _0xcf36a0 = _0x441198[0x0]['trim'](), _0x2de775 = _0x441198[0x1][_0x296de1(0x40e)](), _0x37d300 = { '歌名': _0x296de1(0x455), '艺术家': '歌手', '专辑': '专辑' }; _0x37d300[_0xcf36a0] && (_0x12bcb7[_0x37d300[_0xcf36a0]] = _0x2de775); } } else { if (_0x25f11a) clearTimeout(_0x25f11a); if (_0x291427[_0x296de1(0x3fd)]) return; setTimeout(() => { const _0x5dfea9 = _0x296de1; _0x25f11a && _0x4d19a1(_0x158256['id'], _0x3ce9d6[_0x5dfea9(0x3df)](_0x2253da => _0x2253da['id'])); }, 0x32); } }), _0x5915d9[_0x5201e9(0x322)](_0x17bdac); } } } _0x4f6073[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x278314 = _0x59a4d7; _0x1de23f(_0x278314(0x9b2)); }), _0x227421['addEventListener'](_0x59a4d7(0x9c7), () => { const _0x346fd5 = _0x59a4d7; _0x1de23f(_0x346fd5(0x7c4)); }); let _0x2783ab = [], _0x36ae91 = -0x1; async function _0x4d19a1(_0x2391f9, _0x592972) { const _0x1fed2d = _0x59a4d7; if ('oNeeh' !== _0x1fed2d(0xa86)) { if (_0x2a33be[_0x1fed2d(0xad2)] === 0x0) return; _0x4b297d = (_0x437866 - 0x1 + _0x2ba1e1[_0x1fed2d(0xad2)]) % _0x28f029[_0x1fed2d(0xad2)], _0x1b46b0(_0x5e0335[_0x14524f], _0x5c2ca0); } else { const _0x632f6c = await _0x4d050d(_0x2391f9); if (!_0x632f6c) return; _0x2f108d = { 'title': _0x632f6c[_0x1fed2d(0x4b7)][_0x1fed2d(0x455)] || _0x1fed2d(0x1a1), 'artist': _0x632f6c[_0x1fed2d(0x4b7)]['歌手'] || _0x1fed2d(0x747), 'cover': _0x632f6c[_0x1fed2d(0x766)] ? URL[_0x1fed2d(0x8ca)](_0x632f6c['cover']) : _0xcd0fda, 'isFromLibrary': !![] }; const _0x366406 = URL[_0x1fed2d(0x8ca)](_0x632f6c[_0x1fed2d(0x1a7)]); _0x5dac37[_0x1fed2d(0x883)] = _0x366406, _0x5dac37['play'](), _0x42c153(); } } async function _0x42c153() { const _0xc3b4d6 = _0x59a4d7, _0x62b772 = document[_0xc3b4d6(0x727)]('music-widget-card'), _0x46ede8 = document['getElementById'](_0xc3b4d6(0x905)), _0x50562d = document[_0xc3b4d6(0x727)](_0xc3b4d6(0x9d6)), _0x1c3d55 = document[_0xc3b4d6(0x727)]('widget-cover-art'), _0x2f3df8 = _0x2f108d; if (_0x2f3df8 && _0x2f3df8[_0xc3b4d6(0x20d)]) _0x46ede8[_0xc3b4d6(0xb33)] = _0x2f3df8[_0xc3b4d6(0x488)], _0x50562d['textContent'] = _0x2f3df8[_0xc3b4d6(0x9aa)], _0x62b772[_0xc3b4d6(0x7bb)]['add']('is-playing'), _0x62b772[_0xc3b4d6(0xa8f)][_0xc3b4d6(0x9df)]('--widget-cover-image', _0xc3b4d6(0x326) + _0x2f3df8[_0xc3b4d6(0x766)] + ')'); else { if (_0xc3b4d6(0x8de) === _0xc3b4d6(0x8de)) _0x46ede8[_0xc3b4d6(0xb33)] = _0xc3b4d6(0xacc), _0x50562d['textContent'] = _0xc3b4d6(0x78e), _0x62b772['classList'][_0xc3b4d6(0x7ef)](_0xc3b4d6(0x343)), _0x1c3d55[_0xc3b4d6(0xa8f)]['setProperty'](_0xc3b4d6(0x2f7), 'none'); else { const _0x3312b4 = { 'quotedMessage': null, 'content': _0x115b9f }, _0x15d164 = _0x4fd34c[_0xc3b4d6(0x5ce)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x15d164 && (_0x3312b4['quotedMessage'] = { 'sender': _0x15d164[0x1][_0xc3b4d6(0x40e)](), 'content': _0x15d164[0x2][_0xc3b4d6(0x40e)]() }, _0x3312b4[_0xc3b4d6(0x725)] = _0x2a22ab[_0xc3b4d6(0xb10)](_0x15d164[0x0]['length'])[_0xc3b4d6(0x40e)]()), _0x3312b4; } } } _0x4f6073 && _0x4f6073['addEventListener'](_0x59a4d7(0x9c7), () => { const _0x559c9 = _0x59a4d7; if (_0x559c9(0x1dc) !== _0x559c9(0x1dc)) _0x2abcf5[_0x559c9(0x815)](_0x559c9(0xa40) + _0x2d2c4b + ':', _0x4ec7e0); else { if (_0x2783ab[_0x559c9(0xad2)] === 0x0) return; _0x36ae91 = (_0x36ae91 + 0x1) % _0x2783ab['length'], _0x4d19a1(_0x2783ab[_0x36ae91], _0x2783ab); } }); _0x227421 && (_0x59a4d7(0x85e) === 'Cdcce' ? _0x47b423[_0x59a4d7(0x571)] = _0x2e1bea[_0x59a4d7(0x621)][0x0]['id'] : _0x227421[_0x59a4d7(0x65f)](_0x59a4d7(0x9c7), () => { const _0x4fefe8 = _0x59a4d7; if (_0x4fefe8(0x1d6) !== 'cXZAO') { if (_0x2783ab[_0x4fefe8(0xad2)] === 0x0) return; _0x36ae91 = (_0x36ae91 - 0x1 + _0x2783ab[_0x4fefe8(0xad2)]) % _0x2783ab[_0x4fefe8(0xad2)], _0x4d19a1(_0x2783ab[_0x36ae91], _0x2783ab); } else { const _0x34d8e6 = _0x2b2424[_0x4fefe8(0x8ca)](_0x15b223); _0xd69cca[_0x4fefe8(0x883)] = _0x34d8e6, _0x487262[_0x4fefe8(0xa11)] = () => _0x2a23c0['revokeObjectURL'](_0x34d8e6); } })); _0x5dac37['addEventListener'](_0x59a4d7(0x462), () => { if (_0x919dae) _0x919dae['textContent'] = '❚❚'; }), _0x5dac37[_0x59a4d7(0x65f)](_0x59a4d7(0x239), () => { const _0x15f3ca = _0x59a4d7; if (_0x15f3ca(0x4d4) !== _0x15f3ca(0x27f)) { if (_0x919dae) _0x919dae[_0x15f3ca(0xb33)] = '▶'; } else { if (_0x36bdd4['key'] === 'Escape') _0x1a7e71(![]); if (_0x936c10[_0x15f3ca(0x8e1)] === 'Enter') _0x5ee850(!![]); } }), _0x5dac37[_0x59a4d7(0x65f)](_0x59a4d7(0x3ab), () => { const _0x58fa30 = _0x59a4d7; if (_0x4f6073) _0x4f6073[_0x58fa30(0x9c7)](); }); function _0x39909f() { const _0x4454a0 = _0x59a4d7, _0x5ab0e4 = _0x3b6e44(); if (!_0x5ab0e4) return; _0x5a7d01[_0x4454a0(0x5b2)] = '', _0xbf5bff[_0x4454a0(0x525)] = '', _0x5ab0e4[_0x4454a0(0x117)] === _0x4454a0(0x4b1) ? (_0x5ab0e4[_0x4454a0(0xa1e)]['forEach'](_0x1ba82a => { const _0x25c2b6 = _0x4454a0; if (_0x25c2b6(0xa71) !== _0x25c2b6(0x80a)) { const _0x40dcb9 = _0xec7e1c(_0x1ba82a); if (_0x40dcb9) { if (_0x25c2b6(0x797) === _0x25c2b6(0x797)) { const _0x51067a = document['createElement'](_0x25c2b6(0x2be)); _0x51067a['value'] = _0x40dcb9['id'], _0x51067a[_0x25c2b6(0xb33)] = _0x40dcb9[_0x25c2b6(0x41b)], _0x5a7d01[_0x25c2b6(0x322)](_0x51067a); } else !_0x2499b6[_0x25c2b6(0x99d)](_0x25c2b6(0x995))[_0x25c2b6(0x40b)](_0x2fe968['target']) && (_0x5ce5ee[_0x25c2b6(0x7bb)][_0x25c2b6(0x7ef)]('visible'), _0x3e7786[_0x25c2b6(0x7bb)]['remove']('expanded')); } } else { const _0x15d9ad = _0x1d2a25[_0x25c2b6(0x177)][_0x25c2b6(0x95a)](_0x1af8b5 => _0x1af8b5['id'] === _0x5e1fbf); _0x15d9ad && (_0x15d9ad[_0x25c2b6(0x41b)] = _0x178876, _0x15d9ad[_0x25c2b6(0x725)] = _0x56affb); } }), _0x1cba2d[_0x4454a0(0xa8f)][_0x4454a0(0x8f8)] = 'block') : _0x1cba2d[_0x4454a0(0xa8f)]['display'] = 'none', _0x5ea123['classList'][_0x4454a0(0x99b)](_0x4454a0(0xa02)), _0xbf5bff[_0x4454a0(0x9d3)](); } function _0x58014c() { const _0x128326 = _0x59a4d7, _0x411da1 = parseFloat(_0xbf5bff['value']); if (isNaN(_0x411da1) || _0x411da1 <= 0x0) { _0x1de23f('请输入有效的转账金额！'); return; } const _0xbef127 = _0x3b6e44(); let _0x16bbf6 = null; _0xbef127['type'] === _0x128326(0x4b1) ? _0x16bbf6 = _0x5a7d01[_0x128326(0x525)] : _0x16bbf6 = _0xbef127[_0x128326(0xa1e)][0x0]; const _0x30fd43 = _0x16366b(_0xbef127['id']), _0x3b01e4 = { 'role': _0x128326(0x34d), 'type': _0x128326(0x690), 'content': _0x128326(0x5d5) + (_0xec7e1c(_0x16bbf6)?.[_0x128326(0x41b)] || '未知') + _0x128326(0x6aa) + _0x411da1 + ']', 'amount': _0x411da1, 'recipientId': _0x16bbf6, 'senderId': _0x30fd43['id'], 'timestamp': Date[_0x128326(0xa59)]() }; _0x185973[_0x128326(0x338)][_0x128326(0x92b)](_0x3b01e4), _0x2a4d47(), _0xd16a30(), _0x5ea123[_0x128326(0x7bb)]['remove'](_0x128326(0xa02)); } async function _0x31eb4e(_0x2644c4) { const _0x59a747 = _0x59a4d7, _0x22d623 = _0xec7e1c(_0x2644c4); if (!_0x22d623) return; const _0x196131 = await _0xf1c3f7(_0x59a747(0x791) + _0x22d623[_0x59a747(0x41b)] + _0x59a747(0x464)); if (!_0x196131) return; const _0x2e852c = _0x185973[_0x59a747(0x3fe)][_0x59a747(0x1ff)](_0x4b11af => _0x4b11af['characterId'] === _0x2644c4); if (_0x2e852c > -0x1) _0x59a747(0xae1) !== 'cqefX' ? (_0x185973[_0x59a747(0x3fe)]['splice'](_0x2e852c, 0x1), _0x35c1de(), _0x2eae08(), _0x1de23f('【' + _0x22d623['name'] + _0x59a747(0x9ea))) : _0x3869f3[_0x59a747(0x7bb)]['remove'](_0x59a747(0xa02)); else { if ('cMnOa' !== _0x59a747(0x7d9)) { const _0x358a27 = _0x1c50f0[_0x59a747(0x99d)](_0x59a747(0x84e) + _0x300829); if (_0x358a27) _0x358a27['checked'] = !![]; } else _0x1de23f(_0x59a747(0x278)); } } async function _0x72b42f() { const _0x2bdab6 = _0x59a4d7, _0xa3b5e2 = document[_0x2bdab6(0x727)](_0x2bdab6(0x6dc)); _0xa3b5e2[_0x2bdab6(0x5b2)] = ''; const _0x3e23e1 = _0x185973[_0x2bdab6(0xb29)][_0x2bdab6(0x249)](_0x31cbb8 => _0x185973[_0x2bdab6(0x6ac)]['some'](_0x34986b => _0x34986b[_0x2bdab6(0x117)] === _0x2bdab6(0x261) && _0x34986b[_0x2bdab6(0xa1e)][_0x2bdab6(0x955)](_0x31cbb8['id']))); if (_0x3e23e1['length'] === 0x0) { _0xa3b5e2[_0x2bdab6(0x5b2)] = _0x2bdab6(0x260); return; } for (const _0x39db9d of _0x3e23e1) { const _0x5c3a14 = document[_0x2bdab6(0x7a2)]('li'); _0x5c3a14[_0x2bdab6(0x8f1)] = 'character-item', _0x5c3a14[_0x2bdab6(0xa13)][_0x2bdab6(0x61e)] = _0x39db9d['id']; const _0x8100a5 = await _0x27b140('char_avatar_' + _0x39db9d['id']), _0x1cd54b = _0x8100a5 ? URL[_0x2bdab6(0x8ca)](_0x8100a5) : _0x39db9d['avatar'] || _0xcd0fda; _0x5c3a14[_0x2bdab6(0x5b2)] = _0x2bdab6(0x12c) + _0x1cd54b + _0x2bdab6(0xa7d) + _0x39db9d[_0x2bdab6(0x41b)] + _0x2bdab6(0x20e) + _0x39db9d[_0x2bdab6(0x41b)] + _0x2bdab6(0x614), _0x5c3a14['querySelector']('.char-info-wrapper')[_0x2bdab6(0x65f)](_0x2bdab6(0x9c7), () => _0x2e3029(_0x39db9d['id'])), _0x5c3a14[_0x2bdab6(0x99d)](_0x2bdab6(0x45f))[_0x2bdab6(0x65f)](_0x2bdab6(0x9c7), async _0x3ef3ba => { const _0x3a6735 = _0x2bdab6; if (_0x3a6735(0xa91) === _0x3a6735(0xa91)) { _0x3ef3ba[_0x3a6735(0x693)](); const _0xdfedc8 = _0xec7e1c(_0x39db9d['id']); if (!_0xdfedc8) return; const _0x52e39e = await _0xf1c3f7(_0x3a6735(0x28a) + _0xdfedc8[_0x3a6735(0x41b)] + '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。'); if (_0x52e39e) { _0x55dd5e(!![], '正在焚烧【' + _0xdfedc8['name'] + '】的旧数据...'); const _0x543f3e = [_0x3a6735(0x22a), _0x3a6735(0x7ec), _0x3a6735(0x6a9), _0x3a6735(0x770), _0x3a6735(0x95e), _0x3a6735(0xaf3), 'footprints', _0x3a6735(0x605)]; for (const _0x121703 of _0x543f3e) { const _0x1e8c4a = 'snoop_' + _0xdfedc8['id'] + '_' + _0x121703; await _0x1013ee(_0x1e8c4a); } _0x55dd5e(![]), _0x1de23f('【' + _0xdfedc8['name'] + _0x3a6735(0x8ba)); } } else _0x5b2842[_0x3a6735(0x4eb)] = _0xb07a37[_0x3a6735(0x571)]; }), _0xa3b5e2[_0x2bdab6(0x322)](_0x5c3a14); } } let _0x478d15 = null, _0x111896 = null; function _0x179dd8() { const _0x28e762 = _0x59a4d7, _0x4b592b = new Date(), _0xe2bba7 = document[_0x28e762(0x727)](_0x28e762(0xa81)), _0x6f44fa = document['getElementById'](_0x28e762(0xb09)), _0x4dc377 = document[_0x28e762(0x727)](_0x28e762(0x9cd)); _0xe2bba7 && _0x6f44fa && (_0xe2bba7['textContent'] = _0x4b592b[_0x28e762(0x418)](_0x28e762(0x8f4), { 'hour': '2-digit', 'minute': _0x28e762(0x924), 'hour12': ![] }), _0x6f44fa[_0x28e762(0xb33)] = _0x4b592b[_0x28e762(0x3ee)](_0x28e762(0x8f4), { 'month': _0x28e762(0x19c), 'day': _0x28e762(0x302), 'weekday': 'long' })), _0x4dc377 && (_0x28e762(0xa29) !== _0x28e762(0xa29) ? _0x45f06b[_0x28e762(0x4eb)] === _0x55ca45 && (_0x3d647d['boundUserProfileId'] = _0xf4379b['activeUserProfileId']) : _0x4dc377['innerHTML'] = _0x28e762(0x7ae) + _0x4b592b[_0x28e762(0x418)](_0x28e762(0x8f4), { 'hour': '2-digit', 'minute': _0x28e762(0x924), 'hour12': ![] }) + _0x28e762(0x829)); } function _0x2e3029(_0x4584f6) { const _0x4cad78 = _0x59a4d7; if (_0x4cad78(0x540) === 'gfXSe') { _0x478d15 = _0x4584f6; const _0x2a0963 = _0xec7e1c(_0x4584f6); if (!_0x2a0963) return; const _0x5c4854 = document[_0x4cad78(0x727)]('snoop-phone-screen'), _0x27dfc6 = document[_0x4cad78(0x727)](_0x4cad78(0x840)); if (_0x27dfc6) _0x27dfc6[_0x4cad78(0x7ef)](); const _0x38e333 = document[_0x4cad78(0x727)](_0x4cad78(0x884)); if (_0x38e333) _0x38e333['remove'](); _0x5c4854['insertAdjacentHTML'](_0x4cad78(0x942), _0x4cad78(0x3a5)), _0x5c4854[_0x4cad78(0x7e8)]('beforeend', '<div\x20id=\x22snoop-dock\x22></div>'), document[_0x4cad78(0x727)]('snoop-char-name-header')['textContent'] = '', _0x1882d6(); if (_0x111896) clearInterval(_0x111896); _0x179dd8(), _0x111896 = setInterval(_0x179dd8, 0x2710), _0x8cf86('snoopPhone', _0x4cad78(0x4a2)); } else _0x20d9f1[_0x4cad78(0x815)](_0x4cad78(0x2fc), _0x2f8b58), _0xae1c84(_0x4cad78(0x3c4) + _0xe950d1[_0x4cad78(0x140)]); } function _0x1882d6() { const _0x58c4fd = _0x59a4d7; if (_0x58c4fd(0x262) !== _0x58c4fd(0x262)) _0x4f9411[_0x58c4fd(0x5be)](_0x58c4fd(0x6ea) + _0x2af959); else { const _0x29aff5 = document['getElementById']('snoop-app-container'), _0x170f98 = document[_0x58c4fd(0x727)](_0x58c4fd(0x884)); _0x29aff5[_0x58c4fd(0x5b2)] = _0x58c4fd(0x9f6), _0x170f98['innerHTML'] = ''; const _0x36c586 = _0x29aff5[_0x58c4fd(0x99d)](_0x58c4fd(0x799)), _0x2a2d41 = [{ 'id': _0x58c4fd(0x7ec), 'name': '聊天', 'svg': _0x58c4fd(0x7c1), 'area': _0x58c4fd(0xb32) }, { 'id': 'abyss', 'name': _0x58c4fd(0x848), 'svg': _0x58c4fd(0x66b), 'area': _0x58c4fd(0xb32) }, { 'id': 'gallery', 'name': '相册', 'svg': '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', 'area': _0x58c4fd(0xb32) }, { 'id': 'summary', 'name': '总结', 'svg': _0x58c4fd(0x702), 'area': _0x58c4fd(0xb32) }, { 'id': _0x58c4fd(0x770), 'name': _0x58c4fd(0x29c), 'svg': _0x58c4fd(0x15e), 'area': _0x58c4fd(0x42f) }, { 'id': _0x58c4fd(0x95e), 'name': '外卖', 'svg': _0x58c4fd(0x4cb), 'area': _0x58c4fd(0x42f) }, { 'id': _0x58c4fd(0xaf3), 'name': '购物', 'svg': _0x58c4fd(0x253), 'area': _0x58c4fd(0x42f) }, { 'id': _0x58c4fd(0x9bc), 'name': '足迹', 'svg': _0x58c4fd(0x3fb), 'area': _0x58c4fd(0x42f) }]; _0x2a2d41['forEach'](_0x21a801 => { const _0x2f70d7 = _0x58c4fd, _0x1f977d = document['createElement'](_0x2f70d7(0xb08)); _0x1f977d['className'] = _0x2f70d7(0x3ac), _0x1f977d[_0x2f70d7(0x5b2)] = _0x2f70d7(0xa69) + _0x21a801['svg'] + _0x2f70d7(0x1d3) + _0x21a801[_0x2f70d7(0x41b)] + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x1f977d[_0x2f70d7(0x65f)](_0x2f70d7(0x9c7), () => _0x2e7486(_0x21a801['id'], _0x21a801[_0x2f70d7(0x41b)])); if (_0x21a801[_0x2f70d7(0x256)] === 'dock') _0x2f70d7(0xaa6) !== _0x2f70d7(0x3b9) ? _0x170f98['appendChild'](_0x1f977d) : _0x89f564 = _0x50d5d7; else { if (_0x2f70d7(0xb34) === _0x2f70d7(0xb34)) _0x36c586[_0x2f70d7(0x322)](_0x1f977d); else { const _0x468f9a = _0x50e626[_0x2f70d7(0x7a2)](_0x2f70d7(0xb08)); _0x468f9a[_0x2f70d7(0x8f1)] = _0x2f70d7(0x86c); const _0x933850 = _0x3e8b2e['createElement'](_0x2f70d7(0xb08)); _0x933850[_0x2f70d7(0x8f1)] = _0x2f70d7(0x98c), _0x933850['textContent'] = _0x14d75c['quotedMessage']['sender']; const _0x2f09e4 = _0x5c2bc5[_0x2f70d7(0x7a2)](_0x2f70d7(0xb08)); _0x2f09e4[_0x2f70d7(0x8f1)] = _0x2f70d7(0x4a1), _0x2f09e4[_0x2f70d7(0xb33)] = _0x159bd5['quotedMessage'][_0x2f70d7(0x725)], _0x468f9a[_0x2f70d7(0x322)](_0x933850), _0x468f9a[_0x2f70d7(0x322)](_0x2f09e4), _0x53be34[_0x2f70d7(0x322)](_0x468f9a); } } }); } } document[_0x59a4d7(0x727)](_0x59a4d7(0xae6))[_0x59a4d7(0x65f)]('click', () => { const _0x1ea18e = _0x59a4d7; _0x111896 && (_0x1ea18e(0x6f7) === _0x1ea18e(0x6f7) ? (clearInterval(_0x111896), _0x111896 = null) : _0x527804[_0x1ea18e(0xa8f)]['textShadow'] = _0x1ea18e(0x6fa)); document['getElementById']('snoop-app-view-container')['style']['display'] = _0x1ea18e(0x941); const _0x2d8415 = document[_0x1ea18e(0x727)](_0x1ea18e(0x884)); if (_0x2d8415) _0x2d8415['remove'](); const _0x26eb01 = document[_0x1ea18e(0x727)]('snoop-home-clock'); if (_0x26eb01) _0x26eb01['remove'](); _0x8cf86(_0x1ea18e(0x4a2), _0x1ea18e(0x15a)); }); async function _0x2e7486(_0x51ceae, _0x1cb350, _0x43a602 = ![]) { const _0x4bb266 = _0x59a4d7; document['getElementById'](_0x4bb266(0x2c3))[_0x4bb266(0xa8f)][_0x4bb266(0x8f8)] = _0x4bb266(0x941); const _0x4889ab = document[_0x4bb266(0x727)]('snoop-app-view-container'); _0x4889ab[_0x4bb266(0x5b2)] = _0x4bb266(0x828), _0x4889ab[_0x4bb266(0xa8f)]['display'] = _0x4bb266(0x26a); const _0x27b095 = 'snoop_' + _0x478d15 + '_' + _0x51ceae; try { if (_0x51ceae === _0x4bb266(0x605)) { const _0x18397c = await _0x407255(_0x478d15); _0x5a7a73(_0x51ceae, _0x1cb350, _0x18397c); return; } let _0x3d4204 = await _0x5708ff(_0x27b095); if (_0x43a602 || !_0x3d4204) { console[_0x4bb266(0x5be)]('请求AI更新:\x20' + _0x27b095 + _0x4bb266(0x337)); let _0x2ec5eb = await _0x17b735(_0x51ceae, _0x478d15, _0x3d4204); if (_0x2ec5eb) { const _0x2af37b = _0x2ec5eb[_0x4bb266(0x5ce)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x5bbad3 = _0x2af37b ? _0x2af37b[0x1][_0x4bb266(0x40e)]() : _0x2ec5eb[_0x4bb266(0x40e)](); let _0x174079; try { _0x174079 = JSON['parse'](_0x5bbad3); } catch (_0x590983) { _0x174079 = _0x232f56(_0x5bbad3); if (!_0x174079) throw new Error(_0x4bb266(0x972)); } let _0x3ff004; if (_0x43a602 && _0x3d4204) { if (_0x4bb266(0x304) !== 'KSfpr') !_0xffe11b && (_0x325963 = _0x18cf36[_0x4bb266(0x7a2)](_0x4bb266(0xb08)), _0xaec7b7['id'] = _0x4bb266(0x24a), _0x4a75fc['appendChild'](_0x301736)), _0x591af8['innerHTML'] = _0x4bb266(0x14d) + _0x112eab + _0x4bb266(0x8c9), _0x4a3e80[_0x4bb266(0xa8f)]['display'] = _0x4bb266(0x26a); else try { const _0x26d50b = JSON['parse'](_0x3d4204); if (_0x51ceae === _0x4bb266(0x7ec)) _0x3ff004 = JSON[_0x4bb266(0xa1d)](_0x174079), console[_0x4bb266(0x5be)](_0x4bb266(0x2b7)); else { if (Array['isArray'](_0x26d50b) && Array['isArray'](_0x174079)) { const _0x3b86de = _0x26d50b[_0x4bb266(0x906)](_0x174079); _0x3ff004 = JSON[_0x4bb266(0xa1d)](_0x3b86de), console[_0x4bb266(0x5be)](_0x4bb266(0x794)); } else _0x3ff004 = JSON['stringify'](_0x174079); } } catch (_0x495115) { 'AXJfO' === _0x4bb266(0x70f) ? _0x3ff004 = JSON[_0x4bb266(0xa1d)](_0x174079) : (_0x3e2c2f[_0x4bb266(0x525)] = _0x33c1c0, _0x210508[_0x4bb266(0x7bb)][_0x4bb266(0x7ef)](_0x4bb266(0xa02))); } } else _0x3ff004 = JSON[_0x4bb266(0xa1d)](_0x174079); await _0x565af8(_0x27b095, _0x3ff004), _0x3d4204 = _0x3ff004; } } else console[_0x4bb266(0x5be)]('缓存命中:\x20' + _0x27b095); _0x5a7a73(_0x51ceae, _0x1cb350, _0x3d4204); } catch (_0x56e9aa) { console[_0x4bb266(0x815)](_0x4bb266(0x5aa) + _0x1cb350 + _0x4bb266(0x7cd), _0x56e9aa), _0x4889ab[_0x4bb266(0x5b2)] = '<p\x20style=\x22margin:\x20auto;\x20text-align:\x20center;\x20color:\x20red;\x22>加载失败了，哼。<br>' + _0x56e9aa['message'] + _0x4bb266(0xa32); } } function _0x5a7a73(_0x354a43, _0x69c298, _0x381ff5) { const _0x2532a7 = _0x59a4d7, _0x222fe5 = _0xec7e1c(_0x478d15), _0x59bac7 = document[_0x2532a7(0x727)](_0x2532a7(0x2f9)); let _0x3f0299 = ''; if (!_0x381ff5) _0x3f0299 = '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>'; else { if (_0x354a43 === _0x2532a7(0x605)) _0x2532a7(0x5ee) === _0x2532a7(0x5ee) ? _0x3f0299 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>' + _0x381ff5 + _0x2532a7(0x88b) : (_0x1c5c68[_0x2532a7(0xa8f)][_0x2532a7(0x8f8)] = _0x2532a7(0x941), _0x1f8f0a[_0x2532a7(0x727)](_0x2532a7(0x2c3))[_0x2532a7(0xa8f)][_0x2532a7(0x8f8)] = _0x2532a7(0x26a)); else try { let _0x169eb7 = null; const _0x5f35fb = _0x381ff5[_0x2532a7(0x5ce)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x29318e = _0x5f35fb ? _0x5f35fb[0x1] : _0x381ff5; _0x169eb7 = JSON[_0x2532a7(0x189)](_0x29318e); const _0x5bc0f5 = _0xec7e1c(_0x478d15); switch (_0x354a43) { case _0x2532a7(0x22a): _0x3f0299 = _0x276764(_0x169eb7); break; case _0x2532a7(0x7ec): _0x3f0299 = _0x1ac7da(_0x169eb7, _0x5bc0f5[_0x2532a7(0x41b)]); break; case 'abyss': _0x3f0299 = _0x5c14fa(_0x169eb7); break; case _0x2532a7(0x770): _0x3f0299 = _0x32fb48(_0x169eb7); break; case _0x2532a7(0x95e): _0x3f0299 = _0x20936b(_0x169eb7); break; case _0x2532a7(0xaf3): _0x3f0299 = _0x21273b(_0x169eb7); break; case _0x2532a7(0x9bc): _0x3f0299 = _0x92d0d0(_0x169eb7); break; case 'summary': _0x3f0299 = _0x2532a7(0xa6f) + _0x381ff5 + _0x2532a7(0x919); break; default: _0x3f0299 = '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>' + JSON[_0x2532a7(0xa1d)](_0x169eb7, null, 0x2) + _0x2532a7(0x1de); } } catch (_0x41064a) { console[_0x2532a7(0x815)]('视奸内容解析失败:', _0x41064a), _0x3f0299 = _0x2532a7(0xb14) + _0x381ff5 + _0x2532a7(0x1de); } } _0x59bac7[_0x2532a7(0x5b2)] = _0x2532a7(0x194) + _0x69c298 + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>' + _0x222fe5['name'] + _0x2532a7(0xa8a) + (_0x354a43 === 'summary' ? _0x2532a7(0x740) : '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>' + _0x3f0299 + _0x2532a7(0x5ec); const _0x4e69fd = _0x59bac7[_0x2532a7(0x99d)](_0x2532a7(0x868)); _0x354a43 === _0x2532a7(0x605) && (_0x4e69fd['style'][_0x2532a7(0x1f7)] = '0'); document[_0x2532a7(0x727)](_0x2532a7(0x7fc))[_0x2532a7(0x65f)](_0x2532a7(0x9c7), () => { const _0x2f968f = _0x2532a7; _0x2f968f(0x46e) === _0x2f968f(0x46e) ? (_0x59bac7[_0x2f968f(0xa8f)][_0x2f968f(0x8f8)] = _0x2f968f(0x941), document[_0x2f968f(0x727)](_0x2f968f(0x2c3))['style'][_0x2f968f(0x8f8)] = 'flex') : (_0x17152d(), _0x398444[_0x2f968f(0x9c7)]()); }); if (_0x354a43 === _0x2532a7(0x605)) { if (_0x2532a7(0x916) !== _0x2532a7(0x916)) { if (_0x259c6b['displayUrl']) _0x437bbd[_0x2532a7(0x92b)]('[' + _0x3c5146(_0x204493) + _0x2532a7(0x593) + (_0x2116c5[_0x2532a7(0x725)]?.['match'](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x281be3['image']) { const _0x4053f7 = _0x225787[_0x2532a7(0x725)] ? '\x20' + _0x11ad54[_0x2532a7(0x725)] : ''; _0xff5700[_0x2532a7(0x92b)]('[' + _0x2fa63a(_0x364a0d) + _0x2532a7(0x790) + _0x4053f7); } else _0x2340e5['content'] && _0x522ca5['push']('[' + _0x4835a7(_0x42323d) + ']\x20' + _0x13534f[_0x2532a7(0x725)]); } } else document[_0x2532a7(0x727)](_0x2532a7(0x48f))[_0x2532a7(0x65f)](_0x2532a7(0x9c7), () => { const _0x496774 = _0x2532a7, _0x219cf8 = document[_0x496774(0x727)](_0x496774(0x52d)); _0x219cf8[_0x496774(0x88e)](), document[_0x496774(0x3b6)](_0x496774(0x2f8)), _0x1de23f(_0x496774(0x5cd)); }); } else document[_0x2532a7(0x727)](_0x2532a7(0x584))[_0x2532a7(0x65f)](_0x2532a7(0x9c7), async () => { const _0x1467a1 = _0x2532a7; if (_0x1467a1(0x3e5) !== _0x1467a1(0x3e5)) { const _0x393699 = _0x8299f0[_0x1467a1(0xa1b)](_0x1467a1(0x30a)); _0x393699[_0x1467a1(0x3ea)](_0x6048fb => _0x6048fb['remove']()); } else _0x2e7486(_0x354a43, _0x69c298, !![]); }); _0x354a43 === _0x2532a7(0x7ec) && _0x59bac7['querySelectorAll'](_0x2532a7(0x1e5))['forEach'](_0x1c75df => { const _0x322ce7 = _0x2532a7; _0x1c75df[_0x322ce7(0x65f)](_0x322ce7(0x9c7), () => { const _0x5839f4 = _0x322ce7; if (_0x5839f4(0x307) === _0x5839f4(0x1f8)) return { 'url': _0x1339b6, 'cover': _0x3c73e9[_0x5839f4(0x766)], 'source': _0x2768b6 }; else { const _0x5d036a = JSON['parse'](_0x1c75df[_0x5839f4(0xa13)]['log'][_0x5839f4(0xa89)](/&quot;/g, '\x22')), _0x443f11 = _0x1c75df[_0x5839f4(0xa13)]['contactName'], _0xb360a7 = _0x1c75df[_0x5839f4(0xa13)][_0x5839f4(0x86b)]; _0x575a87(_0x443f11, _0xb360a7, _0x5d036a); } }); }); } function _0x232f56(_0x38de1e) { const _0x1ff4c0 = _0x59a4d7; if ('llXQE' !== 'FtHDk') { if (!_0x38de1e || typeof _0x38de1e !== 'string') return null; const _0x4b360e = _0x38de1e[_0x1ff4c0(0x40e)]()[_0x1ff4c0(0x657)]('\x0a'), _0x38ac98 = []; let _0xc00683 = null; for (const _0x1555b3 of _0x4b360e) { const _0x68a266 = _0x1555b3[_0x1ff4c0(0x40e)](); if (_0x68a266['startsWith']('-\x20')) { _0xc00683 && _0x38ac98[_0x1ff4c0(0x92b)](_0xc00683); _0xc00683 = {}; const _0x2514b7 = _0x68a266['substring'](0x2), _0x2a981b = _0x2514b7[_0x1ff4c0(0x657)](/:\s(.+)/); if (_0x2a981b['length'] > 0x1) { if (_0x1ff4c0(0x335) !== _0x1ff4c0(0x335)) _0x22d980[_0x1ff4c0(0x727)](_0x1ff4c0(0x584))['addEventListener'](_0x1ff4c0(0x9c7), async () => { _0x27ed7e(_0x152ecb, _0x2e4166, !![]); }); else { const _0x26bc07 = _0x2a981b[0x0][_0x1ff4c0(0x40e)](), _0x453a57 = _0x2a981b[0x1][_0x1ff4c0(0x40e)]()[_0x1ff4c0(0xa89)](/^"|"$/g, ''); _0xc00683[_0x26bc07] = _0x453a57; } } } else { if (_0xc00683 && _0x68a266) { if (_0x1ff4c0(0x99a) !== 'YjjiW') { const _0x2f0cba = _0x68a266['split'](/:\s(.+)/); if (_0x2f0cba[_0x1ff4c0(0xad2)] > 0x1) { const _0x1a680d = _0x2f0cba[0x0][_0x1ff4c0(0x40e)](), _0x4f60e6 = _0x2f0cba[0x1][_0x1ff4c0(0x40e)]()[_0x1ff4c0(0xa89)](/^"|"$/g, ''); _0xc00683[_0x1a680d] = _0x4f60e6; } } else { let _0x3876d1 = _0xb9deb0[_0x1ff4c0(0x3fe)][_0x1ff4c0(0x95a)](_0x4576cf => _0x4576cf[_0x1ff4c0(0x24e)] === _0x390786); !_0x3876d1 && (_0x3876d1 = { 'characterId': _0x1d2d35, 'entries': [] }, _0x4e5957['diaries'][_0x1ff4c0(0x92b)](_0x3876d1)); _0x3876d1['entries'][_0x1ff4c0(0x92b)]({ 'timestamp': _0x37bcf1[_0x1ff4c0(0xa59)](), 'author': _0x599e24, 'content': _0x19ec57 }), _0x53d139(); const _0x104c73 = _0x3876d1[_0x1ff4c0(0xaeb)]['length']; _0xc7a36c['diaryCurrentPage'] = _0x49947d[_0x1ff4c0(0x5c9)](_0x104c73 / 0x2) - 0x1, _0x481cd8(); } } } } if (_0xc00683) { if (_0x1ff4c0(0x7bf) !== _0x1ff4c0(0x7bf)) { const _0x1c6283 = _0x43da74[0x0]['trim'](), _0x2278b4 = _0xfba241[0x1][_0x1ff4c0(0x40e)]()[_0x1ff4c0(0xa89)](/^"|"$/g, ''); _0x521e8c[_0x1c6283] = _0x2278b4; } else _0x38ac98['push'](_0xc00683); } return _0x38ac98[_0x1ff4c0(0xad2)] > 0x0 ? _0x38ac98 : null; } else _0x2bcdeb(_0x1ff4c0(0x9b9) + _0xa5cdf7[_0x1ff4c0(0x140)]); } function _0x575a87(_0x13dfa0, _0x629b3c, _0x609a06) { const _0x48c3bf = _0x59a4d7, _0x30a9dd = document[_0x48c3bf(0x99d)](_0x48c3bf(0x161)), _0x3b7457 = document['querySelector'](_0x48c3bf(0x7e9)); let _0x4ab250 = _0x48c3bf(0x1ec); !_0x609a06 || _0x609a06[_0x48c3bf(0xad2)] === 0x0 ? _0x4ab250 += '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>' : _0x609a06[_0x48c3bf(0x3ea)](_0x269235 => { const _0x4b4bc3 = _0x48c3bf, _0x3a0108 = _0x269235[_0x4b4bc3(0x119)] === _0x4b4bc3(0x6a6), _0x2065d2 = _0x3a0108 ? _0x629b3c ? _0x629b3c[0x0] : '?' : _0x13dfa0 ? _0x13dfa0[0x0] : '?'; _0x4ab250 += _0x4b4bc3(0x77b) + (_0x3a0108 ? 'user' : 'ai') + _0x4b4bc3(0x642) + (!_0x3a0108 ? '<div\x20class=\x22snoop-avatar\x22>' + _0x2065d2 + _0x4b4bc3(0x9ca) : '') + _0x4b4bc3(0x2b6) + (_0x3a0108 ? _0x4b4bc3(0x34d) : 'ai') + _0x4b4bc3(0x36b) + _0x269235[_0x4b4bc3(0x725)] + _0x4b4bc3(0x781) + (_0x3a0108 ? _0x4b4bc3(0x801) + _0x2065d2 + _0x4b4bc3(0x9ca) : '') + _0x4b4bc3(0x18d); }); _0x4ab250 += _0x48c3bf(0x9ca), _0x30a9dd[_0x48c3bf(0x5b2)] = _0x4ab250, _0x30a9dd[_0x48c3bf(0xb0e)] = _0x30a9dd[_0x48c3bf(0x784)], _0x3b7457[_0x48c3bf(0x5b2)] = _0x48c3bf(0x7b6) + _0x13dfa0 + _0x48c3bf(0x42e), document[_0x48c3bf(0x727)]('snoop-log-back-btn')[_0x48c3bf(0x65f)](_0x48c3bf(0x9c7), () => { const _0x57d603 = _0x48c3bf; _0x2e7486(_0x57d603(0x7ec), '聊天'); }); if (!document[_0x48c3bf(0x727)](_0x48c3bf(0x503))) { if (_0x48c3bf(0xaf5) !== _0x48c3bf(0x95f)) document['head']['insertAdjacentHTML'](_0x48c3bf(0x942), _0x48c3bf(0x56f)); else { const _0x4aac52 = _0x3d88e4[_0x48c3bf(0x725)] ? '\x20' + _0x4fe5f7[_0x48c3bf(0x725)] : ''; _0x183a29[_0x48c3bf(0x92b)]('[' + _0x1e0b28(_0x5bdef9) + _0x48c3bf(0x790) + _0x4aac52); } } } function _0x232f56(_0x2edab5) { const _0x45dc15 = _0x59a4d7; if (_0x45dc15(0x9a7) === 'JOVaD') { const _0x59b9f7 = _0x419ee1['toLowerCase'](); if (_0x6b1d63[_0x45dc15(0x899)](_0xbc0095 => _0x59b9f7[_0x45dc15(0xa51)](_0xbc0095))) { const _0x45b60b = _0x2f78d5[_0x3e3abf]; if (typeof _0x45b60b === 'string') _0x1ce1a6['push'](_0x45b60b); if (_0x394dfc[_0x45dc15(0x64b)](_0x45b60b)) _0x45b60b[_0x45dc15(0x3ea)](_0x468cde => { if (typeof _0x468cde === 'string') _0x594f8d['push'](_0x468cde); }); } } else { if (!_0x2edab5 || typeof _0x2edab5 !== _0x45dc15(0x486)) return null; const _0x4ef453 = _0x2edab5[_0x45dc15(0x40e)]()[_0x45dc15(0x657)]('\x0a'), _0x20e622 = []; let _0x438fa9 = null; for (const _0x4f4d22 of _0x4ef453) { const _0x4f6a9d = _0x4f4d22['trim'](); if (_0x4f6a9d['startsWith']('-\x20')) { _0x438fa9 && ('GQIWt' === _0x45dc15(0x372) ? (_0xe4519c[_0x45dc15(0xa8f)][_0x45dc15(0x11b)] = '', _0x51d6ca[_0x45dc15(0xa8f)][_0x45dc15(0xa33)] = '', _0x22cb5d[_0x45dc15(0xa1b)](_0x45dc15(0x6b2))[_0x45dc15(0x3ea)](_0x7e9fac => { const _0x3f960d = _0x45dc15; _0x7e9fac[_0x3f960d(0xa8f)][_0x3f960d(0x4bf)] = ''; })) : _0x20e622[_0x45dc15(0x92b)](_0x438fa9)); _0x438fa9 = {}; const _0x26dc26 = _0x4f6a9d[_0x45dc15(0xb10)](0x2), _0xa8089e = _0x26dc26[_0x45dc15(0x657)](/:\s(.+)/); if (_0xa8089e['length'] > 0x1) { if (_0x45dc15(0x517) === 'BeRat') { const _0x120bfc = _0xa8089e[0x0]['trim'](), _0x2e1f77 = _0xa8089e[0x1]['trim']()['replace'](/^"|"$/g, ''); _0x438fa9[_0x120bfc] = _0x2e1f77; } else { const _0x142397 = _0x1ee946[_0x426a04[_0x45dc15(0xad2)] - 0x1]; (!_0x17be63 || _0x142397[_0x45dc15(0x55a)] > _0x5b2c0b[_0x45dc15(0x55a)]) && (_0x380ee6 = _0x142397); } } } else { if (_0x438fa9 && _0x4f6a9d) { const _0x2d21ff = _0x4f6a9d[_0x45dc15(0x657)](/:\s(.+)/); if (_0x2d21ff[_0x45dc15(0xad2)] > 0x1) { if (_0x45dc15(0x78b) !== 'srtwB') { const _0x54109b = _0x1b9278[_0x45dc15(0x727)](_0x45dc15(0x817)); if (_0x54109b) _0x54109b[_0x45dc15(0xb33)] = '❚❚'; } else { const _0x40ae85 = _0x2d21ff[0x0][_0x45dc15(0x40e)](), _0x175e94 = _0x2d21ff[0x1][_0x45dc15(0x40e)]()['replace'](/^"|"$/g, ''); _0x438fa9[_0x40ae85] = _0x175e94; } } } } } return _0x438fa9 && _0x20e622['push'](_0x438fa9), _0x20e622[_0x45dc15(0xad2)] > 0x0 ? _0x20e622 : null; } } async function _0x15c26d(_0x21831b) { const _0x16d193 = _0x59a4d7; if (!_0x21831b) return ''; const _0x5a2bba = [{ 'id': _0x16d193(0x22a), 'name': '相册' }, { 'id': _0x16d193(0x7ec), 'name': _0x16d193(0x244) }, { 'id': _0x16d193(0x6a9), 'name': _0x16d193(0x494) }, { 'id': _0x16d193(0x770), 'name': _0x16d193(0x29c) }, { 'id': 'bites', 'name': _0x16d193(0x671) }, { 'id': _0x16d193(0xaf3), 'name': '购物记录' }, { 'id': _0x16d193(0x9bc), 'name': _0x16d193(0x44c) }]; let _0x3f3f14 = ''; for (const _0x8d59e6 of _0x5a2bba) { try { const _0x26e813 = _0x16d193(0x275) + _0x21831b + '_' + _0x8d59e6['id'], _0x2daa74 = await _0x5708ff(_0x26e813); if (_0x2daa74) { const _0x3b19d9 = _0x2daa74['match'](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x32f100 = _0x3b19d9 ? _0x3b19d9[0x1][_0x16d193(0x40e)]() : _0x2daa74[_0x16d193(0x40e)](); if (!_0x32f100) continue; let _0x161c89 = null; try { if (_0x16d193(0x461) === 'zsChv') _0x161c89 = JSON[_0x16d193(0x189)](_0x32f100); else { const _0x2eb3f8 = _0x414769[_0x16d193(0x7a2)]('p'); _0x2eb3f8[_0x16d193(0x5b2)] = _0x3774d4, _0x2eb3f8[_0x16d193(0xa8f)][_0x16d193(0xa05)] = '0', _0x50ce01['appendChild'](_0x2eb3f8); } } catch (_0x8715be) { console[_0x16d193(0x7b8)]('JSON解析失败\x20(' + _0x8d59e6['id'] + _0x16d193(0x48d), _0x8715be['message']); try { if (_0x16d193(0x665) === _0x16d193(0x8b5)) { const _0x184f9f = _0x19ade7[_0x16d193(0x7a2)](_0x16d193(0xb08)); _0x184f9f[_0x16d193(0x8f1)] = 'preview-item', _0x184f9f[_0x16d193(0x5b2)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x54cdcf['coverUrl'] || _0x27b6e7) + _0x16d193(0x8d1) + _0x47d460[_0x16d193(0x508)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>' + _0x5a6ce1['artist'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x184f9f['querySelector'](_0x16d193(0x5ea))[_0x16d193(0x88c)] = () => _0x119324(_0x16d193(0x373)), _0x4b6629[_0x16d193(0x322)](_0x184f9f); } else { _0x161c89 = _0x232f56(_0x32f100); if (!_0x161c89) throw new Error(_0x16d193(0x744)); console[_0x16d193(0x5be)](_0x16d193(0x5de) + _0x8d59e6['id'] + _0x16d193(0x932)); } } catch (_0xb19fad) { if (_0x16d193(0x49e) !== _0x16d193(0x49e)) { if (_0x4b52e8) { const _0x15dd14 = _0xf88f18[_0x16d193(0x8ca)](_0x46773c); _0x91af39[_0x16d193(0x883)] = _0x15dd14, _0x46ec85[_0x16d193(0xa11)] = () => _0x177644[_0x16d193(0x33a)](_0x15dd14); } } else throw _0x8715be; } } if (Array[_0x16d193(0x64b)](_0x161c89) && _0x161c89[_0x16d193(0xad2)] > 0x0) { _0x3f3f14 === '' && (_0x3f3f14 += _0x16d193(0x21f)); _0x3f3f14 += _0x16d193(0x666) + _0x8d59e6['name'] + '\x0a'; switch (_0x8d59e6['id']) { case _0x16d193(0x22a): _0x161c89[_0x16d193(0x3ea)](_0x596d30 => { const _0x476b06 = _0x16d193; _0x3f3f14 += _0x476b06(0x9ee) + _0x596d30[_0x476b06(0x4d2)] + _0x476b06(0xa24); }); break; case 'whispers': _0x161c89[_0x16d193(0x3ea)](_0x40b5f0 => { const _0x36a107 = _0x16d193; _0x36a107(0x3c5) !== _0x36a107(0x50e) ? (_0x3f3f14 += _0x36a107(0x4fc) + _0x40b5f0[_0x36a107(0x511)] + _0x36a107(0x742) + _0x40b5f0[_0x36a107(0x7eb)] + _0x36a107(0xa24), _0x40b5f0['log'] && Array[_0x36a107(0x64b)](_0x40b5f0['log']) && (_0x3f3f14 += _0x36a107(0x4fe), _0x40b5f0[_0x36a107(0x5be)][_0x36a107(0x3ea)](_0x5d1c43 => { const _0x58bb91 = _0x36a107, _0xf76f0c = _0x5d1c43[_0x58bb91(0x119)] === _0x58bb91(0x6a6) ? '你' : _0x40b5f0[_0x58bb91(0x511)]; _0x3f3f14 += _0x58bb91(0x61c) + _0xf76f0c + ':\x20' + _0x5d1c43[_0x58bb91(0x725)] + '\x0a'; }))) : (_0x3ab49d['log']('用户操作中断了\x20AI\x20响应。'), _0x56a2d3[_0x36a107(0x417)][_0x36a107(0xa82)](_0x36a107(0x1c8)), _0x23ce53['currentAbortController'] = null); }); break; case _0x16d193(0x6a9): _0x161c89[_0x16d193(0x3ea)](_0x5c778a => { const _0x23be2b = _0x16d193; 'BFECR' === _0x23be2b(0x11d) ? _0xcd2059[_0x23be2b(0x778)](_0x23be2b(0x6b1) + _0x56ef5f[_0x23be2b(0x572)]) : _0x3f3f14 += _0x23be2b(0x745) + _0x5c778a[_0x23be2b(0xa7e)] + '”。\x0a'; }); break; case _0x16d193(0x770): _0x161c89['forEach'](_0x215de4 => { const _0x1f1db3 = _0x16d193; _0x3f3f14 += '-\x20你的备忘录里有一条叫“' + _0x215de4[_0x1f1db3(0x488)] + _0x1f1db3(0x2e2) + _0x215de4[_0x1f1db3(0x725)][_0x1f1db3(0xa89)](/\n/g, '\x20') + _0x1f1db3(0xa24); }); break; case _0x16d193(0x95e): _0x161c89[_0x16d193(0x3ea)](_0x8d9608 => { const _0x2d53bc = _0x16d193; _0x3f3f14 += _0x2d53bc(0x82d) + _0x8d9608[_0x2d53bc(0x7f0)] + _0x2d53bc(0x70a) + _0x8d9608[_0x2d53bc(0x9c9)][_0x2d53bc(0x7e0)]('、') + '。\x0a'; }); break; case _0x16d193(0xaf3): _0x161c89['forEach'](_0x5cd005 => { const _0x22893e = _0x16d193; _0x22893e(0x3d7) !== _0x22893e(0x3d7) ? _0x460b60(_0xa33c2c) : _0x3f3f14 += _0x22893e(0x24d) + _0x5cd005['store_name'] + _0x22893e(0x251) + _0x5cd005[_0x22893e(0x300)] + _0x22893e(0xa24); }); break; case _0x16d193(0x9bc): _0x161c89['forEach'](_0x58d6c0 => { const _0x42ecdd = _0x16d193; _0x3f3f14 += '-\x20你最近去过：“' + _0x58d6c0[_0x42ecdd(0x37e)] + _0x42ecdd(0x5b1) + _0x58d6c0['activity_description'] + _0x42ecdd(0xa24); }); break; default: _0x161c89['forEach'](_0x63ef07 => { const _0x3917bd = _0x16d193; _0x3f3f14 += '-\x20' + JSON[_0x3917bd(0xa1d)](_0x63ef07) + '\x0a'; }); break; } } } } catch (_0x12468d) { console[_0x16d193(0x815)](_0x16d193(0x6e0) + _0x8d59e6['id'] + _0x16d193(0x137), _0x12468d); } } return _0x3f3f14; } function _0x276764(_0x3e43e0) { const _0x24225a = _0x59a4d7; if (_0x24225a(0x811) === _0x24225a(0x9d1)) _0x5d881b[_0x24225a(0x815)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20' + _0xe052c9['id'], _0x542022); else { if (!Array[_0x24225a(0x64b)](_0x3e43e0)) return _0x24225a(0x75b); if (_0x3e43e0[_0x24225a(0xad2)] === 0x0) return _0x24225a(0x12d); return _0x24225a(0xaac) + _0x3e43e0['map']((_0x2fc1ef, _0x19004a) => '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20' + (_0x19004a < _0x3e43e0['length'] - 0x1 ? _0x24225a(0x125) : '') + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>' + (_0x2fc1ef[_0x24225a(0x4d2)] || '无描述') + _0x24225a(0x38c) + (_0x2fc1ef['timestamp'] || '') + _0x24225a(0x52f))[_0x24225a(0x7e0)]('') + _0x24225a(0x9ca); } } function _0x1ac7da(_0x110e85, _0x20b879) { const _0x496cda = _0x59a4d7; if (!Array[_0x496cda(0x64b)](_0x110e85) || _0x110e85[_0x496cda(0xad2)] === 0x0) return _0x496cda(0x4c3); return _0x496cda(0xaac) + _0x110e85[_0x496cda(0x3df)]((_0x27ca1a, _0x41a77f) => { const _0x596e8f = _0x496cda, _0x8ad5e6 = JSON[_0x596e8f(0xa1d)](_0x27ca1a[_0x596e8f(0x5be)] || [])[_0x596e8f(0xa89)](/'/g, '&apos;')['replace'](/"/g, _0x596e8f(0x539)), _0x20a830 = _0x27ca1a['contact_name'] || '未知联系人'; return _0x596e8f(0xa56) + (_0x41a77f < _0x110e85['length'] - 0x1 ? _0x596e8f(0x125) : '') + _0x596e8f(0xa19) + _0x8ad5e6 + _0x596e8f(0x9e7) + _0x20a830 + '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27' + _0x20b879 + _0x596e8f(0x316) + _0x20a830[_0x596e8f(0x547)](0x0) + _0x596e8f(0x34f) + _0x20a830 + _0x596e8f(0x6ad) + (_0x27ca1a[_0x596e8f(0x7eb)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; })[_0x496cda(0x7e0)]('') + _0x496cda(0x9ca); } function _0x5c14fa(_0x166338) { const _0x40b769 = _0x59a4d7; if (!Array[_0x40b769(0x64b)](_0x166338)) return _0x40b769(0x75b); if (_0x166338['length'] === 0x0) return _0x40b769(0x7ac); return _0x166338[_0x40b769(0xab1)]((_0x9629e9, _0x240dcc) => new Date(_0x240dcc[_0x40b769(0x55a)]) - new Date(_0x9629e9[_0x40b769(0x55a)])), _0x40b769(0xaac) + _0x166338[_0x40b769(0x3df)]((_0x3afef0, _0x2b4112) => _0x40b769(0x6de) + (_0x2b4112 < _0x166338[_0x40b769(0xad2)] - 0x1 ? _0x40b769(0x125) : '') + _0x40b769(0x668) + (_0x3afef0[_0x40b769(0xa7e)] || _0x40b769(0xaf2)) + _0x40b769(0x265) + (_0x3afef0['result_page_content'] || _0x40b769(0x6f6)) + _0x40b769(0x65e) + (_0x3afef0[_0x40b769(0x55a)] || '') + _0x40b769(0x8e9))['join']('') + _0x40b769(0x9ca); } function _0x32fb48(_0x1374b0) { const _0xb2a07d = _0x59a4d7; if (!Array[_0xb2a07d(0x64b)](_0x1374b0)) return '<p>格式错误</p>'; if (_0x1374b0[_0xb2a07d(0xad2)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>'; return _0x1374b0[_0xb2a07d(0xab1)]((_0x25090c, _0x2c9044) => new Date(_0x2c9044[_0xb2a07d(0x4fa)]) - new Date(_0x25090c[_0xb2a07d(0x4fa)])), _0x1374b0[_0xb2a07d(0x3df)](_0xecf9ad => _0xb2a07d(0x527) + (_0xecf9ad[_0xb2a07d(0x488)] || _0xb2a07d(0x6bb)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>' + (_0xecf9ad[_0xb2a07d(0x725)] || '') + _0xb2a07d(0x2c7) + (_0xecf9ad[_0xb2a07d(0x4fa)] || '') + _0xb2a07d(0xa1f))[_0xb2a07d(0x7e0)](''); } function _0x20936b(_0x18a958) { const _0x243b66 = _0x59a4d7; if (!Array[_0x243b66(0x64b)](_0x18a958)) return _0x243b66(0x75b); if (_0x18a958[_0x243b66(0xad2)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>'; return _0x18a958[_0x243b66(0xab1)]((_0x4e9f2b, _0x2d311e) => new Date(_0x2d311e[_0x243b66(0x55a)]) - new Date(_0x4e9f2b[_0x243b66(0x55a)])), _0x18a958[_0x243b66(0x3df)](_0x38f8ac => { const _0x10f9e5 = _0x243b66; if (_0x10f9e5(0x145) !== _0x10f9e5(0x471)) { const _0x70e047 = (_0x38f8ac[_0x10f9e5(0x9c9)] || [])[_0x10f9e5(0x3df)](_0x34edc2 => _0x10f9e5(0x8c7) + _0x34edc2 + _0x10f9e5(0x364))[_0x10f9e5(0x7e0)](''); return _0x10f9e5(0x190) + (_0x38f8ac[_0x10f9e5(0x7f0)] || '未知餐厅') + _0x10f9e5(0x67e) + (_0x38f8ac[_0x10f9e5(0x55a)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>' + (_0x38f8ac['status'] || _0x10f9e5(0x934)) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x70e047 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20' + (_0x38f8ac[_0x10f9e5(0x7d0)] || 0x0)[_0x10f9e5(0x4b5)](0x2) + _0x10f9e5(0x24c); } else _0x171db9['style'][_0x10f9e5(0x11b)] = 'url(\x27' + _0xcf1f61[_0x10f9e5(0xa44)] + '\x27)'; })[_0x243b66(0x7e0)](''); } function _0x21273b(_0x1d13e0) { const _0xd909c0 = _0x59a4d7; if (_0xd909c0(0x633) !== 'fNAJv') _0x35a274('恢复失败了:\x20' + _0x5a63c8[_0xd909c0(0x140)]); else { if (!Array[_0xd909c0(0x64b)](_0x1d13e0)) return _0xd909c0(0x75b); if (_0x1d13e0[_0xd909c0(0xad2)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>'; return _0x1d13e0[_0xd909c0(0xab1)]((_0x399731, _0x1f5dc9) => new Date(_0x1f5dc9[_0xd909c0(0x55a)]) - new Date(_0x399731[_0xd909c0(0x55a)])), _0x1d13e0[_0xd909c0(0x3df)](_0x899303 => _0xd909c0(0x94e) + (_0x899303['store_name'] || '未知商店') + _0xd909c0(0xafb) + (_0x899303[_0xd909c0(0x55a)] || '') + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x899303['item_name'] || _0xd909c0(0x2de)) + _0xd909c0(0x1ef) + (_0x899303['cost'] || 0x0)[_0xd909c0(0x4b5)](0x2) + _0xd909c0(0x616))[_0xd909c0(0x7e0)](''); } } function _0x92d0d0(_0x540446) { const _0xbf6ba4 = _0x59a4d7; if (!Array[_0xbf6ba4(0x64b)](_0x540446)) return _0xbf6ba4(0x75b); if (_0x540446[_0xbf6ba4(0xad2)] === 0x0) return _0xbf6ba4(0x45a); return _0x540446[_0xbf6ba4(0xab1)]((_0x521414, _0x31e6bf) => new Date(_0x31e6bf[_0xbf6ba4(0x55a)]) - new Date(_0x521414['timestamp'])), '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>' + _0x540446[_0xbf6ba4(0x3df)](_0xe1a9f4 => '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>' + (_0xe1a9f4[_0xbf6ba4(0x37e)] || _0xbf6ba4(0x41a)) + _0xbf6ba4(0x71f) + (_0xe1a9f4[_0xbf6ba4(0x9e1)] || '') + _0xbf6ba4(0x776) + (_0xe1a9f4[_0xbf6ba4(0x55a)] || '') + _0xbf6ba4(0x129))[_0xbf6ba4(0x7e0)]('') + _0xbf6ba4(0x9ca); } async function _0x17b735(_0x87654, _0x4d93e6, _0x22326a = null) { const _0x473f66 = _0x59a4d7; if (_0x473f66(0x600) === _0x473f66(0x803)) { const _0xd33cd7 = _0x3f43e7[_0x473f66(0x727)](_0x473f66(0x817)); if (_0xd33cd7) _0xd33cd7[_0x473f66(0xb33)] = '▶'; } else { const _0x326b6b = _0xec7e1c(_0x4d93e6), _0x1ff80a = _0x185973[_0x473f66(0x6ac)][_0x473f66(0x95a)](_0x3d3ba9 => _0x3d3ba9[_0x473f66(0x117)] === _0x473f66(0x261) && _0x3d3ba9[_0x473f66(0xa1e)][_0x473f66(0x955)](_0x4d93e6)), _0x541077 = _0x16366b(_0x1ff80a?.['id'] || _0x185973[_0x473f66(0x572)]); if (!_0x326b6b) throw new Error(_0x473f66(0x237)); const { omniText: _0x1c7c87 } = _0x341641(_0x4d93e6); let _0x171d8e = ''; const _0x48f96d = new Date(); let _0x5a15b7 = null, _0x47305f = '无'; if (_0x22326a) { if (_0x473f66(0x36f) !== _0x473f66(0x36f)) _0x2667d9[_0x473f66(0xa8f)][_0x473f66(0x11b)] = _0x473f66(0x142) + _0x3555c0[_0x473f66(0x8ca)](_0x1d8bca) + '\x27)', _0x5b1bdd[_0x473f66(0xa8f)]['backgroundSize'] = _0x473f66(0x766), _0x257488[_0x473f66(0xa8f)][_0x473f66(0x2af)] = 'center'; else try { if (_0x473f66(0x887) !== _0x473f66(0x887)) { if (!_0x1680a0[_0x473f66(0x519)]) return _0x176083['userProfiles'][_0x473f66(0x95a)](_0x5c5cf9 => _0x5c5cf9['id'] === _0x214a0f['activeUserProfileId']) || _0x368b46[_0x473f66(0x621)][0x0]; const _0xc51313 = _0x3d3373[_0x473f66(0x6ac)]['find'](_0x5b6335 => _0x5b6335[_0x473f66(0x117)] === _0x473f66(0x261) && _0x5b6335[_0x473f66(0xa1e)][_0x473f66(0x955)](_0x47278c['activeDiaryCharacterId'])), _0x168d1f = _0xc51313?.[_0x473f66(0x4eb)] || _0x35ddfb[_0x473f66(0x571)]; return _0x154a78[_0x473f66(0x621)]['find'](_0x188ce8 => _0x188ce8['id'] === _0x168d1f) || _0x111369['userProfiles'][0x0]; } else { let _0x108583; try { _0x108583 = JSON[_0x473f66(0x189)](_0x22326a); } catch (_0x2b0982) { _0x473f66(0x6ec) === _0x473f66(0x154) ? _0x5eea3f[_0x473f66(0x92b)](_0x3e22c6['id']) : _0x108583 = _0x232f56(_0x22326a); } if (Array[_0x473f66(0x64b)](_0x108583) && _0x108583[_0x473f66(0xad2)] > 0x0) { if (_0x473f66(0x622) === _0x473f66(0x622)) { const _0x28b194 = _0x108583[_0x473f66(0x3df)](_0x3ec580 => new Date(_0x3ec580[_0x473f66(0x55a)] || _0x3ec580['last_edited']))[_0x473f66(0x249)](_0x544bc2 => !isNaN(_0x544bc2)); _0x28b194['length'] > 0x0 && (_0x5a15b7 = new Date(Math[_0x473f66(0x3a2)][_0x473f66(0x592)](null, _0x28b194)), _0x47305f = _0x5a15b7[_0x473f66(0xa5f)](_0x473f66(0x8f4), { 'dateStyle': 'medium', 'timeStyle': 'short' })); } else _0x491bcf(), _0x31b3b4(_0x473f66(0x3d2), _0x473f66(0x3d4)); } } } catch (_0x4c0620) { if (_0x473f66(0x858) === _0x473f66(0xaa2)) { const _0x509807 = _0x2106dc(_0x103986[_0x473f66(0xb17)], _0x11a7ea[_0x473f66(0x8ff)], _0x181fc5); if (_0x509807['length'] === 0x0) return; const _0x962367 = _0x521e34 === 0x0 ? _0x473f66(0x526) : '来源：'; _0x2b9930[_0x473f66(0x92b)](_0x473f66(0xa46) + _0x962367 + _0x250772(_0x5bd77c[_0x473f66(0xb17)]) + '\x0a' + _0x509807[_0x473f66(0x7e0)]('\x0a')), _0x255a69[_0x3b0cc1[_0x473f66(0xb17)]['id']] = _0x509807[_0x473f66(0xad2)]; } else console[_0x473f66(0x7b8)](_0x473f66(0x4f9), _0x4c0620); } } const _0x4f5288 = _0x1db616(_0x4d93e6); _0x171d8e = _0x473f66(0x696), _0x171d8e += _0x473f66(0x729) + _0x48f96d['toLocaleString'](_0x473f66(0x8f4), { 'dateStyle': _0x473f66(0x962), 'timeStyle': _0x473f66(0x2ff) }) + '\x0a'; if (_0x4f5288) { const _0x12df7c = new Date(_0x4f5288[_0x473f66(0x55a)]), _0x4c4620 = _0xa926c9(_0x12df7c); _0x171d8e += _0x473f66(0x491) + _0x4c4620 + '\x0a'; const _0x8fe08b = _0x48f96d['toDateString'](), _0x4aa708 = _0x12df7c[_0x473f66(0x50d)](), _0x8deaaf = new Date(); _0x8deaaf[_0x473f66(0x8df)](_0x48f96d[_0x473f66(0x8f2)]() - 0x1); const _0x451df0 = _0x8deaaf[_0x473f66(0x50d)](); if (_0x8fe08b === _0x4aa708) { const _0x58a57f = (_0x48f96d - _0x12df7c) / (0x3e8 * 0x3c); _0x171d8e += _0x473f66(0x2b9); } else { if (_0x451df0 === _0x4aa708) _0x473f66(0x270) !== _0x473f66(0x549) ? _0x171d8e += _0x473f66(0x4f0) : (_0x303242[_0x473f66(0x693)](), _0x73e8c5(_0x2760e6['id'])); else { if (_0x473f66(0x393) !== _0x473f66(0x393)) _0xa959d1[_0x473f66(0x117)] = _0x473f66(0x373), _0xc12e48[_0x473f66(0x989)](_0x8a8631, _0x96a72c); else { const _0x1fb2a1 = Math[_0x473f66(0x333)]((_0x48f96d - _0x12df7c) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x171d8e += _0x473f66(0x1be) + _0x1fb2a1 + _0x473f66(0x933); } } } } else _0x171d8e += _0x473f66(0x73d); let _0x2287f4 = '', _0x1de674 = ''; if (_0x22326a) { if ('TWmij' !== _0x473f66(0xaa9)) { _0x5742d4['activeMeetingScriptQueue'] = [..._0x534de9], _0x2ed813['characterLastScripts'][_0x11ccdc['id']] = [..._0x2a8d2b], _0xb22bd4(); const _0x2aa06c = _0x24ab39['map'](_0x4b8d80 => _0x4b8d80[_0x473f66(0x72e)] === _0x473f66(0x1a4) ? _0x4b8d80[_0x473f66(0x6a4)] : _0x4b8d80[_0x473f66(0x72e)] + ':\x20' + _0x4b8d80['line'])['join']('\x0a\x0a'); _0x189e29[_0x473f66(0x338)][_0x473f66(0x92b)]({ 'role': _0x473f66(0x72a), 'senderId': _0x3338d1['id'], 'timestamp': _0x33ff56[_0x473f66(0xa59)](), 'isOffline': !![], 'content': _0x2aa06c }); } else _0x2287f4 = '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', _0x1de674 = '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，不许动它！)\x0a```\x0a' + _0x22326a + _0x473f66(0x864); } else _0x2287f4 = _0x473f66(0x6cf); const _0x241408 = { 'gallery': _0x473f66(0x588), 'whispers': _0x473f66(0xa9a), 'abyss': _0x473f66(0xb1d), 'fragments': _0x473f66(0x3d5), 'bites': _0x473f66(0x11c), 'wants': _0x473f66(0x290), 'footprints': '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]' }, _0x19c170 = _0x241408[_0x87654] || _0x473f66(0x414) + _0x87654 + _0x473f66(0x936); let _0x495916 = ''; if (_0x326b6b[_0x473f66(0x52b)] && _0x326b6b['linkedWorldBookIds']['length'] > 0x0) { const _0x200b29 = _0x326b6b['linkedWorldBookIds'][_0x473f66(0x3df)](_0x38eda0 => _0x185973[_0x473f66(0x177)][_0x473f66(0x95a)](_0x5a2394 => _0x5a2394['id'] === _0x38eda0))[_0x473f66(0x249)](Boolean)['map'](_0x35bc0d => _0x473f66(0x3c8) + _0x35bc0d[_0x473f66(0x41b)] + '\x0a' + _0x35bc0d['content'])['join'](''); _0x200b29 && (_0x495916 = _0x473f66(0x476) + _0x200b29); } const _0x1a8505 = _0x473f66(0x6d3) + _0x326b6b[_0x473f66(0x41b)] + _0x473f66(0x26c) + _0x326b6b[_0x473f66(0x41b)] + '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“' + _0x541077[_0x473f66(0x41b)] + '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20' + _0x47305f + _0x473f66(0xaec) + _0x48f96d['toLocaleString']('zh-CN', { 'dateStyle': _0x473f66(0x962), 'timeStyle': _0x473f66(0x2ff) }) + _0x473f66(0x13e) + _0x326b6b[_0x473f66(0x41b)] + _0x473f66(0x57f) + _0x326b6b['persona'] + '\x0a' + _0x495916 + _0x473f66(0x18b) + _0x541077[_0x473f66(0x41b)] + _0x473f66(0x57f) + _0x541077['persona'] + _0x473f66(0x43a) + _0x1c7c87 + '\x0a' + _0x1de674 + _0x473f66(0x92a) + _0x2287f4 + '\x0a' + _0x19c170 + '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', _0x1da076 = [{ 'role': _0x473f66(0x63a), 'content': _0x1a8505 }]; _0x1da076[_0x473f66(0x92b)]({ 'role': _0x473f66(0x34d), 'content': '请根据以上所有规则和资料，开始生成内容。' }); const _0x1442fb = await _0x9e4405(_0x1da076, { 'json': !![] }); return _0x1442fb; } } async function _0x407255(_0x51442d) { const _0x5dfef8 = _0x59a4d7, _0x86aa94 = _0xec7e1c(_0x51442d); if (!_0x86aa94) throw new Error('找不到角色。'); _0x55dd5e(!![], _0x5dfef8(0x4f7)); const _0x24c607 = [_0x5dfef8(0x22a), 'whispers', _0x5dfef8(0x6a9), 'fragments', _0x5dfef8(0x95e), _0x5dfef8(0xaf3), 'footprints']; let _0x4b2e34 = {}; await Promise[_0x5dfef8(0x4cd)](_0x24c607[_0x5dfef8(0x3df)](async _0x41c099 => { const _0x574468 = _0x5dfef8, _0x2744aa = _0x574468(0x275) + _0x51442d + '_' + _0x41c099, _0x509001 = await _0x5708ff(_0x2744aa); if (_0x509001) { if (_0x574468(0x6e5) !== _0x574468(0x7a9)) try { _0x4b2e34[_0x41c099] = JSON[_0x574468(0x189)](_0x509001); } catch (_0x5a6e86) { } else _0x36ccc3[_0x574468(0x815)](_0x574468(0x5fb), _0xd87147); } })); if (Object[_0x5dfef8(0x38d)](_0x4b2e34)[_0x5dfef8(0xad2)] === 0x0) { if ('QgsJP' === _0x5dfef8(0x5bf)) return _0x5dfef8(0x366); else { _0x4bfe19['id'] === _0x30f088[_0x5dfef8(0x572)] && (_0x4ab8f1(), _0xcb668b[_0x5dfef8(0x338)] = [], _0x4925bc()); try { _0xe067a9[_0x5dfef8(0x778)](_0x5dfef8(0x6b1) + _0x495554['id']), _0xbf410(_0x5dfef8(0x6d1) + _0x12cdc7[_0x5dfef8(0x41b)] + '\x22\x20的聊天记录已清空。'); } catch (_0x27e61f) { _0x47d008[_0x5dfef8(0x815)]('Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20' + _0x90342b['id'], _0x27e61f), _0x24d0c6('清空聊天记录失败。'); } } } const _0x425e0b = _0x5dfef8(0x466) + _0x86aa94[_0x5dfef8(0x41b)] + _0x5dfef8(0x612), _0x21447c = [{ 'role': _0x5dfef8(0x63a), 'content': _0x425e0b }, { 'role': _0x5dfef8(0x34d), 'content': JSON[_0x5dfef8(0xa1d)](_0x4b2e34, null, 0x2) }]; _0x55dd5e(!![], _0x5dfef8(0x968)); const _0x32a5c7 = await _0x9e4405(_0x21447c); return _0x32a5c7 || _0x5dfef8(0x155); } async function _0x407255(_0x2f3171) { const _0x49e5e1 = _0x59a4d7, _0x29ae3b = _0xec7e1c(_0x2f3171); if (!_0x29ae3b) throw new Error('找不到角色。'); try { _0x55dd5e(!![], _0x49e5e1(0x4f7)); const _0x10c3a8 = [_0x49e5e1(0x22a), _0x49e5e1(0x7ec), 'abyss', _0x49e5e1(0x770), 'bites', _0x49e5e1(0xaf3), _0x49e5e1(0x9bc)]; let _0x5cc279 = {}; await Promise[_0x49e5e1(0x4cd)](_0x10c3a8['map'](async _0x3f6464 => { const _0x766203 = _0x49e5e1, _0x304927 = 'snoop_' + _0x2f3171 + '_' + _0x3f6464, _0x5ddf45 = await _0x5708ff(_0x304927); if (_0x5ddf45) { if ('GpOJt' === _0x766203(0x631)) { const _0x4c4050 = _0x1f414f[_0x766203(0x784)]; _0x4296b6['scrollTop'] = _0x18542c + (_0x4c4050 - _0x14be9b); } else try { _0x5cc279[_0x3f6464] = JSON[_0x766203(0x189)](_0x5ddf45); } catch (_0x615166) { } } })); if (Object[_0x49e5e1(0x38d)](_0x5cc279)[_0x49e5e1(0xad2)] === 0x0) return _0x49e5e1(0x366); const _0x26a718 = _0x49e5e1(0x466) + _0x29ae3b['name'] + _0x49e5e1(0x574), _0x41c9df = [{ 'role': 'system', 'content': _0x26a718 }, { 'role': _0x49e5e1(0x34d), 'content': JSON[_0x49e5e1(0xa1d)](_0x5cc279, null, 0x2) }]; _0x55dd5e(!![], _0x49e5e1(0x968)); const _0x485fbd = await _0x9e4405(_0x41c9df); return _0x485fbd || _0x49e5e1(0x155); } finally { _0x55dd5e(![]); } } document['getElementById'](_0x59a4d7(0x40d))['addEventListener'](_0x59a4d7(0x9c7), () => _0x8cf86(_0x59a4d7(0x3d4), 'snoopList')), document[_0x59a4d7(0x727)](_0x59a4d7(0xae6))[_0x59a4d7(0x65f)]('click', () => { const _0x3f9204 = _0x59a4d7; _0x3f9204(0x993) === _0x3f9204(0x993) ? (document['getElementById'](_0x3f9204(0x2f9))[_0x3f9204(0xa8f)]['display'] = 'none', _0x8cf86(_0x3f9204(0x4a2), _0x3f9204(0x15a))) : (_0x3e0239[_0x3f9204(0x7ef)](), _0x21e3f6()); }), _0x375560(); }); async function _0x129aed() { const _0x270cab = _0x2fd2f7; console[_0x270cab(0x5be)](_0x270cab(0x1c7)), console['log']('哼，正在开始净化你那被污染的聊天记录...'); async function _0x525bb8(_0x5c6fdf, _0x85cf85) { const _0x2c19c1 = _0x270cab; if ('wgeji' !== 'zuTSN') { const _0x453ded = await _0x2e65e1; return new Promise((_0x4231d7, _0x21b9ed) => { const _0x3c530a = _0x1b5f, _0xbfdf17 = _0x453ded[_0x3c530a(0x1f2)](_0x100aee, _0x3c530a(0x3b7)), _0x3c8737 = _0xbfdf17[_0x3c530a(0x238)](_0x100aee), _0x2a1627 = _0x3c8737[_0x3c530a(0x360)]({ 'id': _0x5c6fdf, 'blob': _0x85cf85 }); _0x2a1627[_0x3c530a(0x17f)] = () => _0x4231d7(_0x2a1627['result']), _0x2a1627[_0x3c530a(0x8c6)] = () => _0x21b9ed(_0x2a1627['error']); }); } else _0x4a33a6[_0x2c19c1(0x5b2)] = _0x2c19c1(0x2d9) + _0x30ebe3 + '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20' + (_0x3d044d === _0x2c19c1(0x454) ? _0x2c19c1(0x967) : '#f2b7c6') + ';\x22>' + _0x54047b + ':</span>\x20' + _0x539728; } async function _0x9adb10(_0x533468) { const _0x2b5d59 = await _0x2e65e1; return new Promise((_0x5668ff, _0x2e2f16) => { const _0x236962 = _0x1b5f; if (_0x236962(0x3b3) === _0x236962(0x3b3)) { const _0x435606 = _0x2b5d59[_0x236962(0x1f2)](_0x4115d0, _0x236962(0x42d)), _0x561a36 = _0x435606[_0x236962(0x238)](_0x4115d0), _0x4ce1ed = _0x561a36[_0x236962(0x120)](_0x533468); _0x4ce1ed[_0x236962(0x17f)] = () => _0x5668ff(_0x4ce1ed[_0x236962(0x973)] ? _0x4ce1ed[_0x236962(0x973)]['data'] : null), _0x4ce1ed[_0x236962(0x8c6)] = () => _0x2e2f16(_0x4ce1ed['error']); } else _0xacb17e[_0x236962(0xa8f)][_0x236962(0xa33)] = _0x236962(0x6c9), _0x478972[_0x236962(0xa8f)][_0x236962(0x4bf)] = _0x236962(0x9a9); }); } async function _0x3cff09(_0x1bedfa, _0x34e4cc) { const _0x5e8408 = await _0x2e65e1; return new Promise((_0x4e1628, _0x286d5d) => { const _0xe4af8 = _0x1b5f, _0x300e4a = _0x5e8408[_0xe4af8(0x1f2)](_0x4115d0, 'readwrite'), _0x4aa028 = _0x300e4a[_0xe4af8(0x238)](_0x4115d0), _0x1cbdf2 = _0x4aa028[_0xe4af8(0x360)]({ 'id': _0x1bedfa, 'data': _0x34e4cc }); _0x1cbdf2[_0xe4af8(0x17f)] = () => _0x4e1628(), _0x1cbdf2[_0xe4af8(0x8c6)] = () => _0x286d5d(_0x1cbdf2['error']); }); } function _0x1c4c42(_0x561e5d) { const _0x639aea = _0x270cab; return fetch(_0x561e5d)[_0x639aea(0x368)](_0x42199f => _0x42199f[_0x639aea(0x857)]()); } let _0x12e62c = 0x0; for (let _0x132ca2 = 0x0; _0x132ca2 < localStorage[_0x270cab(0xad2)]; _0x132ca2++) { const _0x41e25e = localStorage['key'](_0x132ca2); if (_0x41e25e && _0x41e25e[_0x270cab(0xa51)](_0x270cab(0x6b1))) { let _0x22b610, _0x516341 = ![]; try { _0x22b610 = JSON[_0x270cab(0x189)](localStorage['getItem'](_0x41e25e)); if (!Array['isArray'](_0x22b610)) continue; for (const _0x207f51 of _0x22b610) { if ('lHaDm' === 'lHaDm') { if (_0x207f51 && _0x207f51[_0x270cab(0x7f8)] && _0x207f51[_0x270cab(0x7f8)][_0x270cab(0xa51)](_0x270cab(0x827))) { if (_0x270cab(0x128) === _0x270cab(0x1f9)) _0x4d1a55[_0x270cab(0x778)]('customFeedWallpaper'), _0x49c454(), _0x1a09a3(_0x270cab(0x6fd)); else { const _0x4dfc6d = await _0x1c4c42(_0x207f51[_0x270cab(0x7f8)]), _0x271176 = _0x270cab(0x4e0) + Date[_0x270cab(0xa59)]() + '_' + Math['random'](); await _0x525bb8(_0x271176, _0x4dfc6d), _0x207f51[_0x270cab(0x4c8)] = _0x271176, delete _0x207f51[_0x270cab(0x7f8)], _0x516341 = !![], _0x12e62c++; } } } else _0x25d45e['error'](_0x270cab(0x4f6), _0x3cd93a), _0x30dbe9 = _0x101490; } if (_0x516341) { if ('qIyra' !== 'qIyra') { const _0x106a06 = _0x5027b6['friendCircles'][_0x270cab(0x95a)](_0x11b53f => _0x11b53f['id'] === _0x24e85c); if (!_0x106a06) return; _0xa382ca[_0x270cab(0xb33)] = _0x270cab(0x626), _0x45083a['value'] = _0x106a06['id'], _0x55bd3c[_0x270cab(0x525)] = _0x106a06['name'], _0x3b1dcf[_0x270cab(0x525)] = _0x106a06['boundUserProfileId'], _0x4d3ac5[_0x270cab(0xa8f)][_0x270cab(0x8f8)] = _0x270cab(0x6df), _0x106a06[_0x270cab(0xa93)][_0x270cab(0x3ea)](_0x5a904e => { const _0x4094b1 = _0x270cab, _0x3856fb = _0x5cf826['querySelector'](_0x4094b1(0x84e) + _0x5a904e); if (_0x3856fb) _0x3856fb[_0x4094b1(0x7b1)] = !![]; }); } else localStorage['setItem'](_0x41e25e, JSON['stringify'](_0x22b610)); } } catch (_0x57735e) { console[_0x270cab(0x815)]('处理\x20' + _0x41e25e + _0x270cab(0x590), _0x57735e); continue; } } } console[_0x270cab(0x5be)](_0x270cab(0xb23) + _0x12e62c + '\x20张旧图片。'); } async function _0x22ce18() { const _0x1c7e2e = _0x2fd2f7; console['log'](_0x1c7e2e(0x6c2)), console[_0x1c7e2e(0x5be)](_0x1c7e2e(0x9b5)); async function _0x217664(_0x5984c0, _0x2233a0) { const _0x26f024 = await _0x2e65e1; return new Promise((_0x48cc60, _0x594bd1) => { const _0x3a5804 = _0x1b5f, _0x37ebb0 = _0x26f024['transaction'](_0x3a5804(0x5a1), _0x3a5804(0x3b7)), _0x509c92 = _0x37ebb0['objectStore'](_0x3a5804(0x5a1)), _0x3a7925 = _0x509c92[_0x3a5804(0x360)]({ 'id': _0x5984c0, 'blob': _0x2233a0 }); _0x3a7925['onsuccess'] = () => _0x48cc60(_0x3a7925[_0x3a5804(0x973)]), _0x3a7925['onerror'] = () => _0x594bd1(_0x3a7925[_0x3a5804(0x815)]); }); } function _0x364508(_0x19e985) { const _0xf94096 = _0x1c7e2e; return fetch(_0x19e985)[_0xf94096(0x368)](_0x502e0a => _0x502e0a['blob']()); } let _0x5b7ed2 = 0x0, _0x334aed = ![]; try { const _0x27ba36 = localStorage[_0x1c7e2e(0x8ee)](_0x1c7e2e(0x77d)); if (!_0x27ba36) { if ('saWxK' === _0x1c7e2e(0x2c6)) { console['log'](_0x1c7e2e(0xa00)); return; } else { const _0x137c45 = _0x340a2d(_0x3c8032[_0x1c7e2e(0x572)]); _0x1ccc34 = _0x137c45[_0x1c7e2e(0xa44)] || _0x438782; const _0x8e9f96 = _0x1d01bf(_0x5de03a?.['participantIds'][0x0]); _0x8e9f96 && (_0x3eb717 = _0x8e9f96['userAvatarFrameUrl'] || ''); } } const _0x2b6509 = JSON[_0x1c7e2e(0x189)](_0x27ba36); if (!_0x2b6509[_0x1c7e2e(0x6e1)] || !Array[_0x1c7e2e(0x64b)](_0x2b6509[_0x1c7e2e(0x6e1)])) return; for (const _0x133382 of _0x2b6509[_0x1c7e2e(0x6e1)]) { if (_0x133382[_0x1c7e2e(0x9af)] && Array[_0x1c7e2e(0x64b)](_0x133382[_0x1c7e2e(0x9af)])) for (const _0x220b83 of _0x133382[_0x1c7e2e(0x9af)]) { if (_0x220b83 && _0x220b83[_0x1c7e2e(0x7f8)] && _0x220b83[_0x1c7e2e(0x7f8)][_0x1c7e2e(0xa51)]('data:image')) { if (_0x1c7e2e(0x663) !== _0x1c7e2e(0x663)) { _0x435730(_0x1c7e2e(0x5cb)); return; } else { console[_0x1c7e2e(0x5be)](_0x1c7e2e(0x918) + _0x133382['name'] + _0x1c7e2e(0x7d5)); const _0x11b60a = await _0x364508(_0x220b83[_0x1c7e2e(0x7f8)]), _0x582629 = _0x1c7e2e(0x893) + Date[_0x1c7e2e(0xa59)]() + '_' + Math[_0x1c7e2e(0xb26)](); await _0x217664(_0x582629, _0x11b60a), _0x220b83[_0x1c7e2e(0x4c8)] = _0x582629, delete _0x220b83[_0x1c7e2e(0x7f8)], _0x334aed = !![], _0x5b7ed2++; } } } } if (_0x334aed) { if (_0x1c7e2e(0x49f) !== 'BpiCk') console['log']('好友圈净化完成，正在重新存档...'), localStorage['setItem']('appState', JSON[_0x1c7e2e(0xa1d)](_0x2b6509)); else { const _0x52b479 = []; if (_0x4f5dde[_0x1c7e2e(0x725)]) _0x52b479[_0x1c7e2e(0x92b)]({ 'text': _0x2fde06[_0x1c7e2e(0x725)] }); if (_0x4c2d1e[_0x1c7e2e(0x7f8)]) { const _0x5f7b8c = _0xa2b935[_0x1c7e2e(0x7f8)][_0x1c7e2e(0x657)](',')[0x1], _0x4947de = _0x49d642['image'][_0x1c7e2e(0xb10)](_0x287909[_0x1c7e2e(0x7f8)][_0x1c7e2e(0x209)](':') + 0x1, _0x3cdb1d[_0x1c7e2e(0x7f8)]['indexOf'](';')) || _0x1c7e2e(0x1d8); _0x52b479[_0x1c7e2e(0x92b)]({ 'inline_data': { 'mime_type': _0x4947de, 'data': _0x5f7b8c } }); } return _0x52b479; } } } catch (_0x578c17) { console[_0x1c7e2e(0x815)](_0x1c7e2e(0x9c5), _0x578c17); } return console[_0x1c7e2e(0x5be)](_0x1c7e2e(0x1dd)), console[_0x1c7e2e(0x5be)](_0x1c7e2e(0x646) + _0x5b7ed2 + _0x1c7e2e(0x1ca)), _0x5b7ed2; } async function _0x247597() { const _0x41f106 = _0x2fd2f7; console['log'](_0x41f106(0x1ba)), console[_0x41f106(0x5be)](_0x41f106(0x7a4)); let _0x5581c2 = 0x0, _0x3d5a54 = ![]; try { const _0x1173b0 = localStorage[_0x41f106(0x8ee)](_0x41f106(0x77d)); if (!_0x1173b0) return console['log'](_0x41f106(0x80f)), 0x0; for (let _0x3dfc41 = 0x0; _0x3dfc41 < localStorage[_0x41f106(0xad2)]; _0x3dfc41++) { const _0x1a0fd3 = localStorage[_0x41f106(0x8e1)](_0x3dfc41); if (_0x1a0fd3 && _0x1a0fd3[_0x41f106(0xa51)](_0x41f106(0x6b1))) { if (_0x41f106(0x131) === _0x41f106(0x2ca)) { const _0x2bbb82 = _0x51fc5d[_0x41f106(0xb2e)][_0x41f106(0x3df)](_0x120656 => _0x382dff(_0x120656)?.['name'] || '未知')[_0x41f106(0x7e0)]('、'), _0x38ef8c = _0x41f106(0x235); _0x1cdb6d = _0x41f106(0x891) + _0x38ef8c + '\x20' + _0x2bbb82 + '</div>'; } else { let _0x30a463, _0x5890ac = ![]; try { _0x30a463 = JSON[_0x41f106(0x189)](localStorage[_0x41f106(0x8ee)](_0x1a0fd3)); if (!Array[_0x41f106(0x64b)](_0x30a463)) continue; for (const _0x47dd94 of _0x30a463) { if (_0x47dd94 && (_0x47dd94[_0x41f106(0x117)] === _0x41f106(0x373) || _0x47dd94[_0x41f106(0x117)] === _0x41f106(0x386)) && _0x47dd94['coverUrl'] && _0x47dd94['coverUrl'][_0x41f106(0xa51)](_0x41f106(0x827))) { const _0x34e831 = await _0x3a1fc9(_0x47dd94[_0x41f106(0x3bb)]), _0x4611d3 = _0x41f106(0x406) + Date['now']() + '_' + Math[_0x41f106(0xb26)](); await _0x5bc724(_0x4611d3, _0x34e831), _0x47dd94['coverId'] = _0x4611d3, delete _0x47dd94[_0x41f106(0x3bb)], _0x5890ac = !![], _0x5581c2++; } } _0x5890ac && localStorage[_0x41f106(0x295)](_0x1a0fd3, JSON[_0x41f106(0xa1d)](_0x30a463)); } catch (_0x264d53) { if (_0x41f106(0x630) === _0x41f106(0x630)) { console[_0x41f106(0x815)](_0x41f106(0x39a) + _0x1a0fd3 + _0x41f106(0x99c), _0x264d53); continue; } else { const _0x433c2e = _0x6a368e[_0x41f106(0x1f2)](_0x1a994a, _0x41f106(0x3b7)), _0x453fcc = _0x433c2e[_0x41f106(0x238)](_0x238035), _0xc71880 = _0x453fcc[_0x41f106(0x360)](_0x28eb00); _0xc71880[_0x41f106(0x17f)] = () => _0x303af4(_0xc71880['result']), _0xc71880[_0x41f106(0x8c6)] = () => _0x4788d0(_0xc71880[_0x41f106(0x815)]); } } } } } } catch (_0x4750f0) { 'NDDUo' !== _0x41f106(0x8e4) ? console[_0x41f106(0x815)](_0x41f106(0x2a2), _0x4750f0) : _0x3a0b53[_0x41f106(0xa8f)][_0x41f106(0x8f8)] = 'flex'; } return console[_0x41f106(0x5be)](_0x41f106(0x7e6)), console[_0x41f106(0x5be)](_0x41f106(0x646) + _0x5581c2 + _0x41f106(0x283)), _0x5581c2; } function _0x339550() { const _0x396cb0 = _0x2fd2f7; if (!_0x185973[_0x396cb0(0x519)]) return _0x185973[_0x396cb0(0x621)]['find'](_0x225f56 => _0x225f56['id'] === _0x185973[_0x396cb0(0x571)]) || _0x185973['userProfiles'][0x0]; const _0x7f615e = _0x185973[_0x396cb0(0x6ac)][_0x396cb0(0x95a)](_0x277ceb => _0x277ceb['type'] === _0x396cb0(0x261) && _0x277ceb[_0x396cb0(0xa1e)][_0x396cb0(0x955)](_0x185973[_0x396cb0(0x519)])), _0x305e8e = _0x7f615e?.[_0x396cb0(0x4eb)] || _0x185973[_0x396cb0(0x571)]; return _0x185973[_0x396cb0(0x621)][_0x396cb0(0x95a)](_0xc8fe63 => _0xc8fe63['id'] === _0x305e8e) || _0x185973[_0x396cb0(0x621)][0x0]; } function _0xa926c9(_0x293f38) { const _0x58ea10 = _0x2fd2f7, _0x503eff = new Date(), _0x1313bd = _0x503eff - _0x293f38, _0x4d53dc = Math[_0x58ea10(0x333)](_0x1313bd / 0x3e8), _0x3d5698 = Math[_0x58ea10(0x333)](_0x4d53dc / 0x3c), _0x51131c = Math[_0x58ea10(0x333)](_0x3d5698 / 0x3c), _0x2b0a86 = Math[_0x58ea10(0x333)](_0x51131c / 0x18), _0x32dec1 = _0x293f38[_0x58ea10(0x418)](_0x58ea10(0x8f4), { 'hour': '2-digit', 'minute': '2-digit' }); if (_0x4d53dc < 0x3c) return '刚才'; if (_0x3d5698 < 0x3c) return _0x58ea10(0x6e9) === _0x58ea10(0x4a5) ? new _0x40adfe((_0x2c53d0, _0x13861e) => { const _0xa1b279 = _0x58ea10, _0x2c5b3c = new _0x351180(); _0x2c5b3c[_0xa1b279(0x2c1)] = () => _0x2c53d0(_0x2c5b3c[_0xa1b279(0x973)]), _0x2c5b3c[_0xa1b279(0x8c6)] = _0x13861e, _0x2c5b3c['readAsDataURL'](_0x3529f7); }) : _0x3d5698 + _0x58ea10(0x673); const _0x220b0f = _0x503eff['toDateString']() === _0x293f38[_0x58ea10(0x50d)](); if (_0x220b0f) { if (_0x58ea10(0x7ab) === 'hHRAr') return '今天\x20' + _0x32dec1; else { const _0x2cc39e = _0x55e652(); if (_0x2cc39e && _0x2cc39e[_0x58ea10(0x117)] === _0x58ea10(0x261)) _0x10167f(_0x2cc39e['participantIds'][0x0]); else _0x2cc39e && _0x2cc39e[_0x58ea10(0x117)] === _0x58ea10(0x4b1) && _0x4e2012(_0x2cc39e['id']); } } const _0x2ba248 = new Date(); _0x2ba248['setDate'](_0x503eff[_0x58ea10(0x8f2)]() - 0x1); const _0xd9e300 = _0x2ba248[_0x58ea10(0x50d)]() === _0x293f38[_0x58ea10(0x50d)](); if (_0xd9e300) { if (_0x58ea10(0x371) === _0x58ea10(0x371)) return _0x58ea10(0x146) + _0x32dec1; else _0xe4f109[_0x58ea10(0x989)](_0x48e904, { 'songName': _0x23d7c0, 'artist': _0x207a3a, 'coverId': null, 'playableUrl': null }); } if (_0x2b0a86 <= 0x7) { const _0x1e03bd = [_0x58ea10(0x5ed), _0x58ea10(0x60a), '星期二', '星期三', _0x58ea10(0x2eb), _0x58ea10(0x2c8), _0x58ea10(0x8ef)]; return _0x1e03bd[_0x293f38[_0x58ea10(0x60f)]()] + '\x20' + _0x32dec1; } return _0x293f38[_0x58ea10(0x613)]() + '年' + (_0x293f38[_0x58ea10(0x5ac)]() + 0x1) + '月' + _0x293f38['getDate']() + '日'; } function _0x3daecd(_0x102247, _0x2e2717 = 0x320, _0x1c5060 = 0.8, _0x103299 = ![]) { return new Promise((_0x417432, _0x5684de) => { const _0x5e5b88 = _0x1b5f; if (!_0x102247 || !_0x102247['type'][_0x5e5b88(0xa51)](_0x5e5b88(0x515))) return _0x5684de(new Error(_0x5e5b88(0xa3a))); const _0x3760a3 = new FileReader(); _0x3760a3['readAsDataURL'](_0x102247), _0x3760a3[_0x5e5b88(0xa11)] = _0x447896 => { const _0x32176a = _0x5e5b88; if (_0x32176a(0x4ea) === _0x32176a(0x4c1)) _0x2c3058[_0x32176a(0x815)](_0x32176a(0x5c5), _0x464eb4); else { const _0x52eb4c = new Image(); _0x52eb4c[_0x32176a(0x883)] = _0x447896[_0x32176a(0x6ba)]['result'], _0x52eb4c[_0x32176a(0xa11)] = () => { const _0x41b8fc = _0x32176a; if (_0x41b8fc(0x809) !== _0x41b8fc(0x809)) { const _0x1e3270 = _0x1f9878[_0x41b8fc(0x8ee)](_0x41b8fc(0x6b1) + _0x10a162), _0x1e560c = _0x72cd1e[_0x41b8fc(0x189)](_0x1e3270 || '[]'); return _0x4cd08f[_0x41b8fc(0x64b)](_0x1e560c) ? _0x1e560c : []; } else { const _0x1fafe4 = document[_0x41b8fc(0x7a2)](_0x41b8fc(0x721)); let _0x7c287a = _0x52eb4c[_0x41b8fc(0x7be)], _0x3b349d = _0x52eb4c['height']; _0x7c287a > _0x3b349d ? 'yANnC' === _0x41b8fc(0x72b) ? _0x7c287a > _0x2e2717 && (_0x3b349d *= _0x2e2717 / _0x7c287a, _0x7c287a = _0x2e2717) : (_0x446f18[_0x41b8fc(0x239)](), _0x2609c0['querySelector'](_0x41b8fc(0x383))[_0x41b8fc(0xb33)] = '▶') : _0x3b349d > _0x2e2717 && (_0x7c287a *= _0x2e2717 / _0x3b349d, _0x3b349d = _0x2e2717); _0x1fafe4[_0x41b8fc(0x7be)] = _0x7c287a, _0x1fafe4[_0x41b8fc(0xae7)] = _0x3b349d; const _0x2a9801 = _0x1fafe4[_0x41b8fc(0x484)]('2d'); _0x2a9801['drawImage'](_0x52eb4c, 0x0, 0x0, _0x7c287a, _0x3b349d); const _0x59a171 = _0x102247[_0x41b8fc(0x117)] === _0x41b8fc(0x814) ? _0x41b8fc(0x814) : 'image/jpeg'; _0x103299 ? _0x1fafe4[_0x41b8fc(0x7ff)](_0x334728 => { const _0x6f21b9 = _0x41b8fc; _0x6f21b9(0x33f) === _0x6f21b9(0x170) ? _0x389625[_0x6f21b9(0x92b)](_0x91619['id']) : _0x334728 ? _0x417432(_0x334728) : _0x5684de(new Error('Canvas\x20to\x20Blob\x20conversion\x20failed.')); }, _0x59a171, _0x1c5060) : _0x417432(_0x1fafe4[_0x41b8fc(0x378)](_0x59a171, _0x1c5060)); } }, _0x52eb4c[_0x32176a(0x8c6)] = _0x16ebae => _0x5684de(_0x16ebae); } }, _0x3760a3[_0x5e5b88(0x8c6)] = _0x4c2407 => _0x5684de(_0x4c2407); }); } function _0x4ddc71(_0x4caf58) { return new Promise((_0x23fcce, _0x685b4f) => { const _0x494beb = _0x1b5f; if (_0x494beb(0x221) !== 'vrrJA') _0x14d110[_0x494beb(0x8e1)] === _0x494beb(0x6b6) && !_0x2ffa85[_0x494beb(0x65d)] && (_0x544dad[_0x494beb(0x628)](), _0x3338f8()); else { const _0x112c15 = new FileReader(); _0x112c15[_0x494beb(0x2c1)] = () => _0x23fcce(_0x112c15[_0x494beb(0x973)]), _0x112c15[_0x494beb(0x8c6)] = _0x685b4f, _0x112c15['readAsDataURL'](_0x4caf58); } }); } function _0x4ddc71(_0x4a605e) { return new Promise((_0x4154fd, _0x15eab5) => { const _0x4d8b01 = _0x1b5f; if ('ZTBic' === _0x4d8b01(0x2db)) { const _0x26a7f6 = new FileReader(); _0x26a7f6[_0x4d8b01(0x2c1)] = () => _0x4154fd(_0x26a7f6[_0x4d8b01(0x973)]), _0x26a7f6['onerror'] = _0x15eab5, _0x26a7f6[_0x4d8b01(0x63e)](_0x4a605e); } else { if (!_0x46df8e) return; const _0x39b29c = _0x23c141[_0x4d8b01(0x7b7)], _0x459c37 = _0x1066a4(_0x39b29c); if (!_0x459c37) return; const _0x9b4038 = _0x283d53(_0x2304db[_0x4d8b01(0x727)]('sprite-slider-x')[_0x4d8b01(0x525)]), _0x4aa5dd = _0x33a39d(_0x2023aa[_0x4d8b01(0x727)](_0x4d8b01(0x821))[_0x4d8b01(0x525)]), _0x3f4198 = _0x1266d2(_0x49928e['getElementById'](_0x4d8b01(0xab7))[_0x4d8b01(0x525)]) / 0x64; _0x459c37[_0x4d8b01(0x3bd)] = { 'x': _0x9b4038, 'y': _0x4aa5dd, 'scale': _0x3f4198 }; const _0x53e629 = _0x16ba0a[_0x4d8b01(0x727)](_0x4d8b01(0xab5)), _0x2c12ce = 0x50 * _0x3f4198; _0x53e629[_0x4d8b01(0xa8f)]['height'] = _0x2c12ce + '%', _0x53e629[_0x4d8b01(0xa8f)][_0x4d8b01(0x7be)] = _0x2c12ce + '%', _0x53e629[_0x4d8b01(0xa8f)]['left'] = _0x9b4038 + '%', _0x53e629[_0x4d8b01(0xa8f)]['top'] = _0x4aa5dd + '%', _0x53e629[_0x4d8b01(0xa8f)][_0x4d8b01(0x8f6)] = _0x4d8b01(0x480); } }); } function _0x1b7c12(_0x263267, _0x149199, _0x54ce7c) { const _0x300aa7 = _0x2fd2f7, _0x26b2c8 = _0x1645f5 => { const _0x1fc139 = _0x1b5f; if ('gBMUl' !== _0x1fc139(0x530)) _0x464a38[_0x1fc139(0xa1e)][_0x1fc139(0x3ea)](_0x4d8009 => { const _0x368323 = _0x1fc139, _0x4e64e9 = _0x31b070(_0x4d8009); if (_0x4e64e9) { const _0x1479f2 = _0x4f27d0[_0x368323(0x7a2)](_0x368323(0x2be)); _0x1479f2[_0x368323(0x525)] = _0x4e64e9['id'], _0x1479f2[_0x368323(0xb33)] = _0x4e64e9[_0x368323(0x41b)], _0x51ea0f['appendChild'](_0x1479f2); } }), _0x56c63d['style'][_0x1fc139(0x8f8)] = 'block'; else { if (_0x1645f5[_0x1fc139(0x25b)] === 'user') return _0x185973[_0x1fc139(0x382)]?.[_0x1fc139(0x41b)] || 'User'; if (_0x263267['type'] === _0x1fc139(0x4b1)) { if (_0x1fc139(0x86f) === _0x1fc139(0x86f)) { const _0x5419cb = _0x1645f5['senderId'] ? _0x496463(_0x1645f5['senderId']) : null; return _0x5419cb?.[_0x1fc139(0x41b)] || _0x1fc139(0x226); } else { const _0x2f210f = _0x1c42b1[_0x1fc139(0x6e1)][_0x1fc139(0x95a)](_0x4407ab => _0x4407ab['id'] === _0x552f58[_0x1fc139(0xb0d)]), _0x20f03a = _0x1e3911(); let _0x3107c5 = []; if (_0x2f210f && _0x2f210f['posts']) { const _0x4a3413 = _0x2f210f[_0x1fc139(0x9af)]['filter'](_0x3101de => _0x3101de['type'] === _0x1fc139(0x373) && _0x3101de[_0x1fc139(0x86d)])[_0x1fc139(0x3df)](_0x32601c => ({ ..._0x32601c, 'source': _0x1fc139(0x2f1) })); _0x3107c5['push'](..._0x4a3413); } if (_0x20f03a && _0xfc71e2[_0x1fc139(0x338)]) { const _0x344154 = _0x312305[_0x1fc139(0x338)][_0x1fc139(0x249)](_0x2d8c80 => _0x2d8c80['type'] === _0x1fc139(0x373) && _0x2d8c80[_0x1fc139(0x86d)])['map'](_0x351df5 => ({ ..._0x351df5, 'source': _0x1fc139(0xb17) })); _0x3107c5[_0x1fc139(0x92b)](..._0x344154); } const _0x367789 = _0x2ed6c9[_0x1fc139(0x81a)](new _0x16c5e4(_0x3107c5[_0x1fc139(0x3df)](_0x58ebc2 => [_0x58ebc2['playableUrl'], _0x58ebc2]))[_0x1fc139(0x81b)]()); _0x2d58f0[_0x1fc139(0x2fd)] = _0x367789[_0x1fc139(0xab1)]((_0x41f559, _0x23fdcd) => _0x23fdcd[_0x1fc139(0x55a)] - _0x41f559[_0x1fc139(0x55a)]); } } else { if (_0x1fc139(0x1d1) === _0x1fc139(0x1d1)) { const _0x3c2670 = _0x496463(_0x263267['participantIds'][0x0]); return _0x3c2670?.[_0x1fc139(0x41b)] || 'AI'; } else { const _0x5b1ff3 = _0x43cd1e['match'](_0x1295b3); if (_0x5b1ff3) { const _0x2d00dd = _0x3a38ad(_0x5b1ff3[0x1], 0xa), _0x454cf3 = _0x52754e(_0x5b1ff3[0x2], 0xa), _0xbc6eaf = _0x2dace4(_0x5b1ff3[0x3], 0xa) * (_0x5b1ff3[0x3][_0x1fc139(0xad2)] === 0x2 ? 0xa : 0x1), _0x502c0e = _0x2d00dd * 0x3c + _0x454cf3 + _0xbc6eaf / 0x3e8, _0x1fb208 = _0x1649a8['replace'](_0x539245, '')['trim'](); _0x1fb208 && _0x2ae12a['push']({ 'time': _0x502c0e, 'text': _0x1fb208 }); } } } } }, _0x5201d7 = _0x149199[_0x300aa7(0x247)](-_0x54ce7c), _0x562bbb = []; for (const _0x3e57d9 of _0x5201d7) { const _0x49c1da = new Date(_0x3e57d9[_0x300aa7(0x55a)])['toLocaleTimeString'](_0x300aa7(0x8f4), { 'hour': '2-digit', 'minute': _0x300aa7(0x924) }); _0x3e57d9[_0x300aa7(0x725)] && _0x562bbb[_0x300aa7(0x92b)]('[' + _0x49c1da + _0x300aa7(0x752) + _0x26b2c8(_0x3e57d9) + ']\x20' + String(_0x3e57d9['content'])[_0x300aa7(0x40e)]()); } return _0x562bbb; } function _0x308d86(_0x2af63b) { const _0xd09f5c = _0x2fd2f7; if (_0x2af63b[_0xd09f5c(0x117)] === _0xd09f5c(0x4b1)) return _0xd09f5c(0x348) + (_0x2af63b[_0xd09f5c(0x41b)] || '未命名') + '」'; const _0x3b73be = _0x496463(_0x2af63b['participantIds'][0x0]); return '与\x20' + (_0x3b73be?.['name'] || '未知角色') + _0xd09f5c(0x6ef); } function _0x2000c1(_0x642e14) { const _0x589d1c = _0x2fd2f7; try { if (_0x589d1c(0x2d4) !== _0x589d1c(0x9b8)) { const _0x2980da = localStorage['getItem'](_0x589d1c(0x6b1) + _0x642e14), _0x2d3d03 = JSON[_0x589d1c(0x189)](_0x2980da || '[]'); return Array[_0x589d1c(0x64b)](_0x2d3d03) ? _0x2d3d03 : []; } else _0x29e351 += _0x589d1c(0x73d); } catch { if ('pizrm' === _0x589d1c(0x836)) return []; else { const _0x535130 = _0x487709[_0x589d1c(0x99d)](_0x589d1c(0x71a)); if (_0x535130 && (_0x535130['id'] === 'meeting-view-screen' || _0x535130['id'] === _0x589d1c(0x20b))) _0x342daa(); else { const _0x21d490 = _0x3279ab[_0x589d1c(0xa1b)](_0x589d1c(0x30a)); _0x21d490[_0x589d1c(0x3ea)](_0x332284 => _0x332284['remove']()); } } } } function _0x341641(_0x3a0dff) { const _0x4e5433 = _0x2fd2f7, _0x2cedfb = Math['max'](0x1, Number(_0x185973[_0x4e5433(0x55c)]?.[_0x4e5433(0xa0f)] ?? 0x64)), _0x93e5d5 = _0x185973['chats'][_0x4e5433(0x249)](_0xae7d1e => _0xae7d1e[_0x4e5433(0xa1e)][_0x4e5433(0x955)](_0x3a0dff)), _0x5398c6 = _0x93e5d5[_0x4e5433(0x3df)](_0xeeaec9 => { const _0x181d52 = _0x4e5433, _0xfcdbb9 = _0x2000c1(_0xeeaec9['id']), _0x27e9b5 = _0xfcdbb9[_0x181d52(0xad2)] > 0x0 ? _0xfcdbb9[_0xfcdbb9[_0x181d52(0xad2)] - 0x1] : null; return { 'chat': _0xeeaec9, 'history': _0xfcdbb9, 'lastTimestamp': _0x27e9b5 ? _0x27e9b5['timestamp'] : 0x0 }; })[_0x4e5433(0x249)](_0x5ccedc => _0x5ccedc['history']['length'] > 0x0); _0x5398c6[_0x4e5433(0xab1)]((_0x38dbb1, _0x416d7d) => _0x416d7d[_0x4e5433(0x477)] - _0x38dbb1[_0x4e5433(0x477)]); const _0x46c337 = [], _0x2ea52e = {}; return _0x5398c6[_0x4e5433(0x3ea)]((_0x152d3c, _0x49f449) => { const _0x784d33 = _0x4e5433, _0x7beeb2 = _0x1b7c12(_0x152d3c[_0x784d33(0xb17)], _0x152d3c[_0x784d33(0x8ff)], _0x2cedfb); if (_0x7beeb2['length'] === 0x0) return; const _0x22c908 = _0x49f449 === 0x0 ? _0x784d33(0x526) : '来源：'; _0x46c337['push'](_0x784d33(0xa46) + _0x22c908 + _0x308d86(_0x152d3c[_0x784d33(0xb17)]) + '\x0a' + _0x7beeb2[_0x784d33(0x7e0)]('\x0a')), _0x2ea52e[_0x152d3c[_0x784d33(0xb17)]['id']] = _0x7beeb2[_0x784d33(0xad2)]; }), { 'omniText': _0x46c337[_0x4e5433(0x7e0)]('\x0a\x0a'), 'usedCounts': _0x2ea52e }; } function _0x1db616(_0xaf05d2) { const _0x353355 = _0x2fd2f7; let _0x56ea6d = null; const _0xb4dfef = _0x185973[_0x353355(0x6ac)]['filter'](_0x1675e0 => _0x1675e0['participantIds'][_0x353355(0x955)](_0xaf05d2)); for (const _0x70439b of _0xb4dfef) { const _0xe8699b = _0x2000c1(_0x70439b['id']); if (_0xe8699b && _0xe8699b[_0x353355(0xad2)] > 0x0) { const _0x1a121c = _0xe8699b[_0xe8699b[_0x353355(0xad2)] - 0x1]; (!_0x56ea6d || _0x1a121c[_0x353355(0x55a)] > _0x56ea6d[_0x353355(0x55a)]) && (_0x353355(0x110) === 'gvjfH' ? _0x4afd08(_0x353355(0x9b2)) : _0x56ea6d = _0x1a121c); } } return _0x56ea6d; } function _0x3add1b(_0x5b1bd9) { const _0x5ee5de = _0x2fd2f7; if (!_0x5b1bd9 || !_0x5b1bd9['includes'](',')) return _0x5b1bd9; const _0x456aee = _0x5b1bd9[_0x5ee5de(0x657)](',')[_0x5ee5de(0x3df)](_0x595335 => _0x595335['trim']()); return _0x456aee[Math['floor'](Math['random']() * _0x456aee[_0x5ee5de(0xad2)])]; } function _0xf1c3f7(_0x217e14) { return new Promise(_0x1c67a6 => { const _0x1b8291 = _0x1b5f; if ('rrITg' === _0x1b8291(0x569)) { const _0x2264cc = _0x35d9af[_0x1b8291(0xa9e)](), _0x4ad034 = _0x106f8e[_0x1b8291(0xa9e)](); if (_0x2264cc[_0x1b8291(0xa51)]('claude')) return _0x1b8291(0x10f); if (_0x4ad034[_0x1b8291(0x955)](_0x1b8291(0x692))) return _0x1b8291(0x10f); if (_0x4ad034['includes']('googleapis.com')) return _0x1b8291(0x5ad); if (_0x2264cc[_0x1b8291(0xa51)](_0x1b8291(0x5ad))) return 'gemini'; return 'openai'; } else { const _0x1f891c = document[_0x1b8291(0x727)]('modal-root'), _0x27ff9a = document[_0x1b8291(0x727)](_0x1b8291(0xaa0)), _0x4832f3 = document[_0x1b8291(0x727)](_0x1b8291(0x36d)), _0x540f93 = document['getElementById']('modal-cancel'), _0x36e497 = document[_0x1b8291(0x727)]('modal-mask'); _0x27ff9a['textContent'] = _0x217e14, _0x1f891c[_0x1b8291(0xa8f)][_0x1b8291(0x8f8)] = _0x1b8291(0x26a); const _0x40c522 = _0x25e315 => { const _0x39e058 = _0x1b8291; _0x1f891c[_0x39e058(0xa8f)][_0x39e058(0x8f8)] = 'none', _0x4832f3[_0x39e058(0x88c)] = _0x540f93[_0x39e058(0x88c)] = _0x36e497['onclick'] = null, document[_0x39e058(0x149)](_0x39e058(0x701), _0x425ac5), _0x1c67a6(_0x25e315); }, _0x425ac5 = _0x159907 => { const _0x2fbd4e = _0x1b8291; if (_0x2fbd4e(0x9be) !== _0x2fbd4e(0x898)) { if (_0x159907[_0x2fbd4e(0x8e1)] === _0x2fbd4e(0x361)) _0x40c522(![]); if (_0x159907[_0x2fbd4e(0x8e1)] === 'Enter') _0x40c522(!![]); } else { const _0xe6370b = _0x35335f['image'][_0x2fbd4e(0x657)](',')[0x1], _0x277cc7 = _0x469da6[_0x2fbd4e(0x7f8)][_0x2fbd4e(0xb10)](_0x22dd97[_0x2fbd4e(0x7f8)][_0x2fbd4e(0x209)](':') + 0x1, _0x4aa115[_0x2fbd4e(0x7f8)]['indexOf'](';')) || _0x2fbd4e(0x1d8); _0x252881[_0x2fbd4e(0x92b)]({ 'inline_data': { 'mime_type': _0x277cc7, 'data': _0xe6370b } }); } }; _0x4832f3['onclick'] = () => _0x40c522(!![]), _0x540f93[_0x1b8291(0x88c)] = () => _0x40c522(![]), _0x36e497[_0x1b8291(0x88c)] = () => _0x40c522(![]), document[_0x1b8291(0x65f)](_0x1b8291(0x701), _0x425ac5); } }); } function _0x1de23f(_0x2c9dff) { const _0x1ef99f = _0x2fd2f7, _0x36f5a = document[_0x1ef99f(0x727)](_0x1ef99f(0x5f3)); _0x36f5a[_0x1ef99f(0xb33)] = _0x2c9dff, _0x36f5a[_0x1ef99f(0xa8f)][_0x1ef99f(0x8f8)] = _0x1ef99f(0x6df); if (_0x1de23f['_t']) clearTimeout(_0x1de23f['_t']); _0x1de23f['_t'] = setTimeout(() => { const _0x594992 = _0x1ef99f; _0x36f5a[_0x594992(0xa8f)]['display'] = _0x594992(0x941); }, 0x640); } function _0x14dde9() { const _0x27cd2b = _0x2fd2f7, _0x3e3dc2 = document[_0x27cd2b(0x727)](_0x27cd2b(0x98a)), _0x3edfeb = document[_0x27cd2b(0x727)](_0x27cd2b(0x977)), _0x3623a3 = document[_0x27cd2b(0xa1b)](_0x27cd2b(0x2a0)), _0x42c7d2 = document[_0x27cd2b(0x727)](_0x27cd2b(0x4fd)); let _0x201f81 = 0x0; _0x3edfeb[_0x27cd2b(0xa8f)][_0x27cd2b(0x7be)] = _0x27cd2b(0x826); const _0x337c11 = 0x3; function _0x5a24e8(_0x15de88) { const _0x3d5c15 = _0x27cd2b; if (_0x3d5c15(0x765) === 'JNHJR') { if (_0x15de88 < 0x0 || _0x15de88 >= _0x337c11) return; _0x3edfeb['style']['transform'] = _0x3d5c15(0x9bb) + _0x15de88 * (0x64 / _0x337c11) + '%)', _0x3623a3[_0x3d5c15(0x3ea)](_0x2c9516 => _0x2c9516[_0x3d5c15(0x7bb)][_0x3d5c15(0x7ef)](_0x3d5c15(0x1b5))), _0x3623a3[_0x15de88][_0x3d5c15(0x7bb)][_0x3d5c15(0x99b)](_0x3d5c15(0x1b5)), _0x201f81 = _0x15de88; if (_0x15de88 === 0x0) { if (_0x3d5c15(0x6b9) !== 'KnLjk') { const _0x570600 = (_0x263240['sticker'] ?? _0x5b457d[_0x3d5c15(0x5e7)] ?? _0x3effd6['emote'] ?? _0x4d34ad[_0x3d5c15(0x26e)])?.[_0x3d5c15(0x40e)](); if (_0x570600 && _0x3e1eb2[_0x3d5c15(0x1ac)](_0x570600)) _0x351b98[_0x3d5c15(0x375)][_0x3d5c15(0x92b)]({ 'senderId': _0x231e3a['id'], 'kind': _0x3d5c15(0x2dc), 'sticker': _0x570600 }); else { const _0x270b25 = _0x3d40e8(_0x5ef03f['content'] ?? _0x2539ed[_0x3d5c15(0xa15)] ?? '')['trim']() || '[sticker:' + (_0x570600 || '未知表情') + ']'; if (_0x270b25) _0x491ad7[_0x3d5c15(0x375)][_0x3d5c15(0x92b)]({ 'senderId': _0xed34fb['id'], 'kind': _0x3d5c15(0xa15), 'content': _0x270b25 }); } } else _0x42c7d2[_0x3d5c15(0xa8f)]['display'] = _0x3d5c15(0x941); } else _0x42c7d2[_0x3d5c15(0xa8f)][_0x3d5c15(0x8f8)] = _0x3d5c15(0x26a); } else try { const _0x39cdb7 = _0x26d6c7['parse'](_0x598b1e), _0x4e4b2c = { ..._0x119827 }, _0x69cb86 = { ..._0x4e4b2c, ..._0x39cdb7 }; _0x69cb86[_0x3d5c15(0x55c)] = { ..._0x4e4b2c[_0x3d5c15(0x55c)], ..._0x39cdb7[_0x3d5c15(0x55c)] || {} }, _0x69cb86['apiSettings'] = { ..._0x4e4b2c[_0x3d5c15(0x8a2)], ..._0x39cdb7[_0x3d5c15(0x8a2)] || {} }, _0x12ace8['assign'](_0x4fe0c4, _0x69cb86); } catch (_0xe582fa) { _0x5396d0[_0x3d5c15(0x815)](_0x3d5c15(0x71b), _0xe582fa), _0xeaca28[_0x3d5c15(0x778)](_0x3d5c15(0x77d)); } } _0x5a24e8(0x0), _0x3623a3[_0x27cd2b(0x3ea)](_0x3538e4 => { const _0x3d0a3a = _0x27cd2b; _0x3538e4['addEventListener'](_0x3d0a3a(0x9c7), () => { const _0x5df0ad = _0x3d0a3a; if (_0x5df0ad(0x2fb) !== 'RHiGp') { const _0x28fffc = parseInt(_0x3538e4[_0x5df0ad(0xa13)][_0x5df0ad(0x433)], 0xa); _0x5a24e8(_0x28fffc); } else _0x355934 += _0x5df0ad(0x16f); }); }); let _0x38747b = 0x0, _0x2ffea7 = 0x0, _0x245b2a = 0x0, _0x1fb09a = ![], _0x1d8f0d = ''; _0x3e3dc2['addEventListener'](_0x27cd2b(0x869), _0x57785d => { const _0x215a6b = _0x27cd2b; _0x38747b = _0x57785d[_0x215a6b(0x346)][0x0]['clientX'], _0x2ffea7 = _0x57785d[_0x215a6b(0x346)][0x0][_0x215a6b(0x914)], _0x1fb09a = !![], _0x1d8f0d = ''; }, { 'passive': !![] }), _0x3e3dc2[_0x27cd2b(0x65f)]('touchmove', _0x1ff3f4 => { const _0x32bf8b = _0x27cd2b; if (!_0x1fb09a) return; if (_0x1d8f0d === '') { const _0x16ce3f = _0x1ff3f4[_0x32bf8b(0x346)][0x0][_0x32bf8b(0xa80)] - _0x38747b, _0xb0c320 = _0x1ff3f4['touches'][0x0]['clientY'] - _0x2ffea7; Math[_0x32bf8b(0x5f8)](_0x16ce3f) > Math[_0x32bf8b(0x5f8)](_0xb0c320) ? _0x1d8f0d = _0x32bf8b(0x86a) : _0x32bf8b(0x4af) !== 'TsKrj' ? _0x3d1c8d = _0x207c28[_0x32bf8b(0x8ee)]('appState') : _0x1d8f0d = _0x32bf8b(0xa09); } _0x1d8f0d === _0x32bf8b(0x86a) && _0x1ff3f4[_0x32bf8b(0x628)](); }, { 'passive': ![] }), _0x3e3dc2[_0x27cd2b(0x65f)](_0x27cd2b(0x3b5), _0x266cce => { const _0x5aa384 = _0x27cd2b; if (_0x5aa384(0x2f4) !== _0x5aa384(0x2f4)) _0x106b00[_0x5aa384(0x7bb)][_0x5aa384(0x7ef)]('is-visible', _0x5aa384(0x428)), _0x59ea4d[_0x5aa384(0x7bb)][_0x5aa384(0x7ef)](_0x5aa384(0x74a)), _0x3cedaa[_0x5aa384(0x943)] = _0x388caf, _0x3e46f0(), _0x4e9869[_0x5aa384(0x296)] = ![]; else { if (!_0x1fb09a) return; _0x245b2a = _0x266cce[_0x5aa384(0xaba)][0x0][_0x5aa384(0xa72)], _0x1d8f0d === _0x5aa384(0x86a) && (_0x5aa384(0x516) === 'PHgZH' ? _0x47dfe7() : _0x4d20a9(_0x5aa384(0x3d2), 'musicUploadAltar')), _0x1fb09a = ![]; } }); function _0x47dfe7() { const _0x5a7e9f = 0x32; if (_0x245b2a < _0x38747b - _0x5a7e9f) _0x5a24e8(_0x201f81 + 0x1); else _0x245b2a > _0x38747b + _0x5a7e9f && _0x5a24e8(_0x201f81 - 0x1); } } function _0x10b4cf() { return new Promise(_0x1eeaa6 => { const _0xb4dab = _0x1b5f, _0x34070e = document[_0xb4dab(0x727)]('music-input-modal'), _0x277a6f = document['getElementById']('music-input-song'), _0x14798d = document['getElementById'](_0xb4dab(0x204)), _0x5a6c96 = document[_0xb4dab(0x727)](_0xb4dab(0x3fc)), _0x2a85da = document[_0xb4dab(0x727)](_0xb4dab(0x2d7)), _0x19a900 = document[_0xb4dab(0x727)](_0xb4dab(0x544)); _0x277a6f['value'] = '', _0x14798d[_0xb4dab(0x525)] = '', _0x34070e[_0xb4dab(0x7bb)][_0xb4dab(0x99b)](_0xb4dab(0xa02)), _0x277a6f[_0xb4dab(0x9d3)](); const _0x4eb20a = _0x59a1f5 => { const _0x2ed7c0 = _0xb4dab; _0x34070e[_0x2ed7c0(0x7bb)][_0x2ed7c0(0x7ef)](_0x2ed7c0(0xa02)), _0x5a6c96[_0x2ed7c0(0x88c)] = null, _0x2a85da[_0x2ed7c0(0x88c)] = null, _0x19a900[_0x2ed7c0(0x88c)] = null, document[_0x2ed7c0(0x149)](_0x2ed7c0(0x701), _0x4073bb), _0x1eeaa6(_0x59a1f5); }, _0x48e13 = () => { const _0xcfa6c1 = _0xb4dab, _0x520655 = _0x277a6f[_0xcfa6c1(0x525)]['trim'](), _0x545a7b = _0x14798d['value'][_0xcfa6c1(0x40e)](); if (!_0x520655 || !_0x545a7b) { if (_0xcfa6c1(0x615) === _0xcfa6c1(0x808)) _0x44d47a['oncomplete'] = _0x3c0bfe, _0x23855f['onerror'] = _0x1a6db0 => _0x36c2d7(_0x1a6db0[_0xcfa6c1(0x6ba)][_0xcfa6c1(0x815)]); else { _0x1de23f(_0xcfa6c1(0x53f)); return; } } _0x4eb20a({ 'songName': _0x520655, 'artist': _0x545a7b }); }, _0x4073bb = _0x287b0e => { const _0x27fe7a = _0xb4dab; if (_0x287b0e[_0x27fe7a(0x8e1)] === _0x27fe7a(0x361)) _0x4eb20a(null); if (_0x287b0e['key'] === _0x27fe7a(0x6b6)) { if ('ofTIy' !== _0x27fe7a(0x273)) { const _0x4e1a2f = _0x56436e[_0x27fe7a(0x660)] || _0x37ddf4?.[_0x27fe7a(0xa1e)][0x0], _0x4a2c91 = _0x590c16(_0x4e1a2f); _0x337a2e = _0x4a2c91 ? _0x4a2c91[_0x27fe7a(0x41b)] : '角色'; } else _0x287b0e['preventDefault'](), _0x48e13(); } }; _0x5a6c96[_0xb4dab(0x88c)] = _0x48e13, _0x2a85da[_0xb4dab(0x88c)] = () => _0x4eb20a(null), _0x19a900[_0xb4dab(0x88c)] = () => _0x4eb20a(null), document[_0xb4dab(0x65f)](_0xb4dab(0x701), _0x4073bb); }); } function _0x559993(_0x2dff68) { const _0x486ba1 = _0x2fd2f7; if (!_0x2dff68) return []; const _0x49354b = _0x2dff68['trim'](); if (_0x49354b[_0x486ba1(0xa51)](_0x486ba1(0x29e)) && _0x49354b[_0x486ba1(0x59b)](_0x486ba1(0x9ca))) return [_0x49354b]; const _0x298122 = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\])/g, _0x1a9f3f = '|||CMD|||', _0x2c8913 = [], _0x596bdd = _0x2dff68[_0x486ba1(0xa89)](_0x298122, _0xe56aaa => { return _0x2c8913['push'](_0xe56aaa), _0x1a9f3f; }), _0xc8b186 = _0x596bdd[_0x486ba1(0x657)](_0x1a9f3f), _0x35b25f = []; let _0x270812 = 0x0; return _0xc8b186[_0x486ba1(0x3ea)]((_0x801a01, _0xea161c) => { const _0x8e17e2 = _0x486ba1; if ('msinI' !== 'msinI') _0x3a12ee[_0x8e17e2(0x295)](_0x8e17e2(0x748), _0x5e8584[_0x8e17e2(0xa1d)]({ 'playlist': _0x23da74['musicPlaylist'], 'currentIndex': _0x39b550[_0x8e17e2(0x704)] })); else { const _0x4ed716 = _0x801a01['trim'](); _0x4ed716 && ('XOVPP' === 'PgLAa' ? (_0x51f3f1('欢迎！请先创建一个角色开始聊天。'), _0x7547(() => { const _0x878a1f = _0x8e17e2; _0x3de95d('chat', _0x878a1f(0x3d4)), _0x5c858b(() => _0x2442d7(), 0x64); }, 0x6a4)) : _0x35b25f[_0x8e17e2(0x92b)](..._0x3638c7(_0x4ed716))), _0x270812 < _0x2c8913[_0x8e17e2(0xad2)] && (_0x8e17e2(0x965) === _0x8e17e2(0x694) ? _0x13e047(_0x8e17e2(0x47d))[_0x8e17e2(0x368)](_0x357496 => { const _0x4edc21 = _0x8e17e2; if (_0x357496) { const _0x2332e9 = _0x4e65f8(_0x2ecf71[_0x4edc21(0x7b7)]); _0x2332e9 && (delete _0x2332e9[_0x4edc21(0x3bd)], _0x1a5e2a(), _0xff850c(_0x2332e9['id'], _0x4edc21(0x2ba)), _0x441bf1(_0x4edc21(0x272)), _0x326663(!![])); } }) : (_0x35b25f[_0x8e17e2(0x92b)](_0x2c8913[_0x270812]['trim']()), _0x270812++)); } }), _0x35b25f; } function _0x33f769(_0x2b5a29, _0x336c7a, _0x2afce6 = '') { const _0x317348 = _0x2fd2f7, _0x2a5f44 = document['createElement'](_0x317348(0xb08)); _0x2a5f44[_0x317348(0x8f1)] = _0x317348(0x6ed) + _0x2afce6; const _0x40492e = document[_0x317348(0x7a2)]('img'); _0x40492e[_0x317348(0x883)] = _0x2b5a29, _0x40492e[_0x317348(0x8f1)] = _0x317348(0xa44); const _0x337fc4 = document['createElement'](_0x317348(0xb08)); _0x337fc4[_0x317348(0x8f1)] = _0x317348(0x674); if (_0x336c7a) { if ('RBJwh' === _0x317348(0x573)) _0x337fc4[_0x317348(0xa8f)][_0x317348(0x11b)] = 'url(\x27' + _0x336c7a + '\x27)'; else { _0x21135e('请先在\x22设置\x22中配置你的\x20API\x20信息。'); return; } } return _0x2a5f44['appendChild'](_0x40492e), _0x2a5f44[_0x317348(0x322)](_0x337fc4), _0x2a5f44; } function _0x20cdea(_0x3ff2a6) { const _0x1ce280 = _0x2fd2f7; if (!_0x3ff2a6) return []; let _0x3feb85 = String(_0x3ff2a6)[_0x1ce280(0x40e)](); const _0x220dc4 = _0x3feb85[_0x1ce280(0x5ce)](/```(?:json)?([\s\S]*?)```/i); if (_0x220dc4) _0x3feb85 = _0x220dc4[0x1][_0x1ce280(0x40e)](); try { const _0x36ebfb = JSON[_0x1ce280(0x189)](_0x3feb85); if (_0x36ebfb && Array[_0x1ce280(0x64b)](_0x36ebfb[_0x1ce280(0x959)])) return _0x36ebfb[_0x1ce280(0x959)]['map'](_0x8f84c2 => typeof _0x8f84c2 === _0x1ce280(0x486) ? _0x8f84c2 : _0x8f84c2?.[_0x1ce280(0x725)])[_0x1ce280(0x249)](Boolean)[_0x1ce280(0x310)](_0x3638c7); const _0x440c50 = [_0x1ce280(0x19d), _0x1ce280(0x114), _0x1ce280(0x140), _0x1ce280(0xa15), _0x1ce280(0x725), _0x1ce280(0x6a4), _0x1ce280(0x8a7)]; if (_0x36ebfb && typeof _0x36ebfb === _0x1ce280(0x557)) { if (_0x1ce280(0xa9f) !== 'kJslo') _0x2ed926 = { 'characterId': _0x4fe96e, 'entries': [] }, _0x34de99[_0x1ce280(0x3fe)]['push'](_0x1771fd); else { const _0x285663 = []; for (const _0x2c7b55 of Object[_0x1ce280(0x38d)](_0x36ebfb)) { const _0x5c2fb8 = _0x2c7b55[_0x1ce280(0xa9e)](); if (_0x440c50[_0x1ce280(0x899)](_0x55ebf7 => _0x5c2fb8[_0x1ce280(0xa51)](_0x55ebf7))) { if (_0x1ce280(0x79d) !== _0x1ce280(0x69d)) { const _0x3427a1 = _0x36ebfb[_0x2c7b55]; if (typeof _0x3427a1 === _0x1ce280(0x486)) _0x285663[_0x1ce280(0x92b)](_0x3427a1); if (Array[_0x1ce280(0x64b)](_0x3427a1)) _0x3427a1['forEach'](_0x8b1d58 => { const _0x163cf1 = _0x1ce280; if (typeof _0x8b1d58 === _0x163cf1(0x486)) _0x285663['push'](_0x8b1d58); }); } else { _0x35f568[_0x1ce280(0x525)] = '#\x20记录是空的，没什么好总结的。'; return; } } } if (_0x285663['length']) return _0x285663[_0x1ce280(0x310)](_0x3638c7)[_0x1ce280(0x247)](0x0, 0x9); } } } catch { } if (/[{\[]/['test'](_0x3feb85) && /":/[_0x1ce280(0x94c)](_0x3feb85)) { if (_0x1ce280(0x731) !== _0x1ce280(0x672)) { const _0x2894fe = [], _0x1a1313 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x27a2aa; while ((_0x27a2aa = _0x1a1313[_0x1ce280(0x500)](_0x3feb85)) !== null) { const _0x574b1d = _0x27a2aa[0x1]['replace'](/\\"/g, '\x22')['replace'](/\\n/g, '\x0a')[_0x1ce280(0x40e)](); if (_0x574b1d) _0x2894fe['push'](_0x574b1d); } if (_0x2894fe[_0x1ce280(0xad2)]) return _0x2894fe[_0x1ce280(0x310)](_0x3638c7)[_0x1ce280(0x247)](0x0, 0x9); } else _0x3c8d54['preventDefault'](), _0x1b734f(); } return _0x3638c7(_0x3feb85); } function _0x3638c7(_0x13f48b) { const _0x143384 = _0x2fd2f7; if (!_0x13f48b) return []; const _0x228880 = String(_0x13f48b)[_0x143384(0x40e)](), _0x505750 = _0x228880[_0x143384(0x657)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x143384(0x3df)](_0x5e60e7 => _0x5e60e7['trim']())['filter'](Boolean); if (_0x505750[_0x143384(0xad2)] > 0x0) return _0x505750['slice'](0x0, 0x9); return [_0x228880][_0x143384(0x249)](Boolean); } const _0x2e65e1 = new Promise((_0x3ffa9a, _0x5952e0) => { const _0x4582f6 = _0x2fd2f7, _0x4c5e30 = indexedDB[_0x4582f6(0x23d)](_0x8b4e5f, 0x3); _0x4c5e30[_0x4582f6(0x8c6)] = () => _0x5952e0(_0x4582f6(0x77a)), _0x4c5e30[_0x4582f6(0x17f)] = () => _0x3ffa9a(_0x4c5e30[_0x4582f6(0x973)]), _0x4c5e30[_0x4582f6(0x682)] = _0xcaddcb => { const _0x5c66bb = _0x4582f6, _0x4576b1 = _0xcaddcb['target'][_0x5c66bb(0x973)]; console[_0x5c66bb(0x5be)](_0x5c66bb(0x9a8) + _0x4576b1[_0x5c66bb(0x2c2)] + _0x5c66bb(0x337)), !_0x4576b1[_0x5c66bb(0x609)][_0x5c66bb(0x40b)](_0x100aee) && (console[_0x5c66bb(0x5be)](_0x5c66bb(0x358) + _0x100aee), _0x4576b1[_0x5c66bb(0x2a8)](_0x100aee, { 'keyPath': 'id' })), !_0x4576b1[_0x5c66bb(0x609)][_0x5c66bb(0x40b)](_0x5c66bb(0x85b)) && (console[_0x5c66bb(0x5be)](_0x5c66bb(0x3de)), _0x4576b1[_0x5c66bb(0x2a8)]('music_library', { 'keyPath': 'id' })), !_0x4576b1[_0x5c66bb(0x609)][_0x5c66bb(0x40b)](_0x4115d0) && (console['log'](_0x5c66bb(0x358) + _0x4115d0), _0x4576b1[_0x5c66bb(0x2a8)](_0x4115d0, { 'keyPath': 'id' })); }; }); async function _0x27b140(_0x5761b9) { const _0x2c586a = await _0x2e65e1; return new Promise((_0x9ce895, _0x3615cc) => { const _0x449aa1 = _0x1b5f, _0x305788 = _0x2c586a[_0x449aa1(0x1f2)](_0x100aee, _0x449aa1(0x42d)), _0x3a4c49 = _0x305788['objectStore'](_0x100aee), _0x469843 = _0x3a4c49[_0x449aa1(0x120)](_0x5761b9); _0x469843[_0x449aa1(0x17f)] = () => _0x9ce895(_0x469843[_0x449aa1(0x973)] ? _0x469843[_0x449aa1(0x973)][_0x449aa1(0x857)] : null), _0x469843[_0x449aa1(0x8c6)] = () => _0x3615cc(_0x469843[_0x449aa1(0x815)]); }); } async function _0x5708ff(_0x3d9e77) { const _0x1c2433 = await _0x2e65e1; return new Promise((_0x339e17, _0x20af47) => { const _0x1e1ee8 = _0x1b5f, _0x1c3b8f = _0x1c2433[_0x1e1ee8(0x1f2)](_0x4115d0, _0x1e1ee8(0x42d)), _0x2146b1 = _0x1c3b8f[_0x1e1ee8(0x238)](_0x4115d0), _0x1e3a50 = _0x2146b1[_0x1e1ee8(0x120)](_0x3d9e77); _0x1e3a50[_0x1e1ee8(0x17f)] = () => _0x339e17(_0x1e3a50[_0x1e1ee8(0x973)] ? _0x1e3a50[_0x1e1ee8(0x973)]['data'] : null), _0x1e3a50[_0x1e1ee8(0x8c6)] = () => _0x20af47(_0x1e3a50['error']); }); } async function _0x565af8(_0x3b4ebf, _0x5e2297) { const _0x174182 = await _0x2e65e1; return new Promise((_0x571710, _0x473c07) => { const _0x1efc5a = _0x1b5f; if (_0x1efc5a(0x824) === _0x1efc5a(0x949)) { const _0x4ddeb8 = _0x255fce['value'][_0x1efc5a(0x40e)](); _0x4ddeb8 && (_0x2e5900(_0x4ddeb8), _0x25afb6[_0x1efc5a(0x525)] = '', _0x4167ba(_0x19eecb, 0x64)); } else { const _0x4f9e47 = _0x174182[_0x1efc5a(0x1f2)](_0x4115d0, 'readwrite'), _0x5f0a83 = _0x4f9e47[_0x1efc5a(0x238)](_0x4115d0), _0x1e628f = _0x5f0a83[_0x1efc5a(0x360)]({ 'id': _0x3b4ebf, 'data': _0x5e2297 }); _0x1e628f['onsuccess'] = () => _0x571710(), _0x1e628f[_0x1efc5a(0x8c6)] = () => _0x473c07(_0x1e628f['error']); } }); } async function _0x1013ee(_0x4cc278) { const _0x23cc5d = await _0x2e65e1; return new Promise((_0x37cdf5, _0x2f4703) => { const _0x2e1ef8 = _0x1b5f, _0x253a87 = _0x23cc5d[_0x2e1ef8(0x1f2)](_0x4115d0, _0x2e1ef8(0x3b7)), _0xa167f7 = _0x253a87[_0x2e1ef8(0x238)](_0x4115d0), _0x126127 = _0xa167f7[_0x2e1ef8(0x521)](_0x4cc278); _0x126127[_0x2e1ef8(0x17f)] = () => _0x37cdf5(), _0x126127[_0x2e1ef8(0x8c6)] = () => _0x2f4703(_0x126127[_0x2e1ef8(0x815)]); }); } async function _0x5bc724(_0x545188, _0x190819) { const _0x59b3ec = await _0x2e65e1; return new Promise((_0x43310a, _0x47f973) => { const _0x5d44d1 = _0x1b5f, _0x42c541 = _0x59b3ec[_0x5d44d1(0x1f2)](_0x100aee, _0x5d44d1(0x3b7)), _0x2fde2a = _0x42c541[_0x5d44d1(0x238)](_0x100aee), _0x971828 = _0x2fde2a[_0x5d44d1(0x360)]({ 'id': _0x545188, 'blob': _0x190819 }); _0x971828[_0x5d44d1(0x17f)] = () => _0x43310a(_0x971828[_0x5d44d1(0x973)]), _0x971828['onerror'] = () => _0x47f973(_0x971828[_0x5d44d1(0x815)]); }); } async function _0x255048(_0x1cc725) { const _0x227674 = await _0x2e65e1; return new Promise((_0x4f60dd, _0x3b1970) => { const _0x104333 = _0x1b5f, _0x3b8b62 = _0x227674[_0x104333(0x1f2)](_0x100aee, _0x104333(0x3b7)), _0xc969e5 = _0x3b8b62[_0x104333(0x238)](_0x100aee), _0x545f65 = _0xc969e5['delete'](_0x1cc725); _0x545f65[_0x104333(0x17f)] = () => _0x4f60dd(), _0x545f65['onerror'] = () => _0x3b1970(_0x545f65['error']); }); } function _0x3a1fc9(_0x6923af) { const _0x3a8453 = _0x2fd2f7; return fetch(_0x6923af)[_0x3a8453(0x368)](_0x662dfe => _0x662dfe['blob']()); }
</script>

  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>
